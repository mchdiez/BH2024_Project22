(()=>{function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e,n,r,i,o=globalThis,s={},a={},l=o.parcelRequire9ccd;null==l&&((l=function(t){if(t in s)return s[t].exports;if(t in a){var e=a[t];delete a[t];var n={id:t,exports:{}};return s[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){a[t]=e},o.parcelRequire9ccd=l);var u=l.register;u("cm1RJ",function(e,n){t(e.exports,"ArcLayer",()=>l("iXObt").default),t(e.exports,"BitmapLayer",()=>l("3kbul").default),t(e.exports,"IconLayer",()=>l("5yBro").default),t(e.exports,"LineLayer",()=>l("bx4mA").default),t(e.exports,"PointCloudLayer",()=>l("8nEh8").default),t(e.exports,"ScatterplotLayer",()=>l("jxCpk").default),t(e.exports,"ColumnLayer",()=>l("id5nG").default),t(e.exports,"GridCellLayer",()=>l("lrudf").default),t(e.exports,"PathLayer",()=>l("1qtHd").default),t(e.exports,"PolygonLayer",()=>l("ccAbQ").default),t(e.exports,"GeoJsonLayer",()=>l("iX3Ia").default),t(e.exports,"TextLayer",()=>l("jtM2J").default),t(e.exports,"SolidPolygonLayer",()=>l("55Fuy").default),t(e.exports,"_MultiIconLayer",()=>l("791Ug").default),t(e.exports,"_TextBackgroundLayer",()=>l("eYmBf").default),l("iXObt"),l("3kbul"),l("5yBro"),l("bx4mA"),l("8nEh8"),l("jxCpk"),l("id5nG"),l("lrudf"),l("1qtHd"),l("ccAbQ"),l("iX3Ia"),l("jtM2J"),l("55Fuy"),l("791Ug"),l("eYmBf")}),u("iXObt",function(e,n){t(e.exports,"default",()=>g);var r=l("2qeFG"),i=l("8JeSb"),o=l("lUg0r"),s=l("2WjM0"),a=l("heh00"),u=l("aFzkX"),c=l("i9o5q"),d=l("cnCaG"),h=l("4hnqt");let f=[0,0,0,255],p={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:f},getTargetColor:{type:"accessor",value:f},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class g extends i.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0)}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:d.default,fs:h.default,modules:[s.default,o.default]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:f},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:f},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(t){super.updateState(t);let{props:e,oldProps:n,changeFlags:r}=t;if(r.extensionsChanged||r.propsChanged&&e.numSegments!==n.numSegments){var i;let{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){let{widthUnits:e,widthScale:n,widthMinPixels:r,widthMaxPixels:i,greatCircle:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(t).setUniforms({greatCircle:o,widthUnits:a.UNIT[e],widthScale:n,widthMinPixels:r,widthMaxPixels:i,useShortestPath:s}).draw()}_getModel(t){let{id:e,numSegments:n}=this.props,r=[];for(let t=0;t<n;t++)r=r.concat([t,1,0,t,-1,0]);let i=new c.default(t,{...this.getShaders(),id:e,geometry:new u.default({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0});return i.setUniforms({numSegments:n}),i}}(0,r.default)(g,"layerName","ArcLayer"),(0,r.default)(g,"defaultProps",p)}),u("2qeFG",function(e,n){t(e.exports,"default",()=>i);var r=l("k2Kke");function i(t,e,n){return(e=(0,r.default)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}}),u("k2Kke",function(e,n){t(e.exports,"default",()=>o);var r=l("jOMXy"),i=l("fEskS");function o(t){var e=(0,i.default)(t,"string");return"symbol"==(0,r.default)(e)?e:e+""}}),u("jOMXy",function(e,n){t(e.exports,"default",()=>r);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}}),u("fEskS",function(e,n){t(e.exports,"default",()=>i);var r=l("jOMXy");function i(t,e){if("object"!=(0,r.default)(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=(0,r.default)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}}),u("8JeSb",function(e,n){t(e.exports,"default",()=>C);var r=l("2qeFG"),i=l("heh00"),o=l("qyCgO"),s=l("aB8Oa"),a=l("jWEec"),u=l("56tgz"),c=l("aacbl"),d=l("i5wGC"),h=l("dSHHv");l("eFBWR");var f=l("2Eryf"),p=l("321bC"),g=l("cB0Rj"),m=l("1B3Sr"),v=l("bWXWI"),_=l("kSmYn"),y=l("hRLk6"),b=l("5UbfZ");l("auS2n");var x=l("gZN7e"),E=l("bIcUs");let T=Object.freeze([]),S=(0,g.default)(({oldViewport:t,viewport:e})=>t.equals(e)),A=new Uint8ClampedArray(0),P={data:{type:"data",value:T,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:o})=>{let{resourceManager:s}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,o){var a;i={...i,fetch:{...null===(a=i)||void 0===a?void 0:a.fetch,signal:o}}}let l=s.contains(t);return(l||i||(s.add({resourceId:t,data:(0,E.load)(t,r),persistent:!1}),l=!0),l)?s.subscribe({resourceId:t,onChange:t=>{var r;return null===(r=n.internalState)||void 0===r?void 0:r.reloadAsyncProp(e,t)},consumerId:n.id,requestId:e}):(0,E.load)(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:i.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-(100*t)]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class C extends y.default{constructor(...t){super(...t),(0,r.default)(this,"internalState",null),(0,r.default)(this,"lifecycle",u.LIFECYCLE.NO_STATE),(0,r.default)(this,"context",void 0),(0,r.default)(this,"state",void 0),(0,r.default)(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){let t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){(0,p.default)(this.internalState);let e=this.internalState.viewport||this.context.viewport,n=(0,v.getWorldPosition)(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=(0,x.worldToPixels)(n,e.pixelProjectionMatrix);return 2===t.length?[r,i]:[r,i,o]}unproject(t){return(0,p.default)(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){(0,p.default)(this.internalState);let n=this.internalState.viewport||this.context.viewport;return(0,v.projectPosition)(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(let e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){let{coordinateSystem:t}=this.props;return t===i.COORDINATE_SYSTEM.DEFAULT||t===i.COORDINATE_SYSTEM.LNGLAT||t===i.COORDINATE_SYSTEM.CARTESIAN}onHover(t,e){return!!this.props.onHover&&(this.props.onHover(t,e)||!1)}onClick(t,e){return!!this.props.onClick&&(this.props.onClick(t,e)||!1)}nullPickingColor(){return[0,0,0]}encodePickingColor(t,e=[]){return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){(0,p.default)(t instanceof Uint8Array);let[e,n,r]=t;return e+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:(0,c.count)(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){for(let e of this.props.extensions)t=(0,m.mergeShaders)(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){let e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e){if(Array.isArray(n))for(let t of n)e.invalidateAll(t);else e.invalidateAll()}if(e){let{props:n}=t,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some(t=>t.getNeedsPickingBuffer.call(this,t));if(r!==i){this.internalState.hasPickingBuffer=i;let{pickingColors:t,instancePickingColors:n}=e.attributes,r=t||n;!r||(i&&r.constant&&(r.constant=!1,e.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(t){for(let t of this.getModels())t.delete();let e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(let e of this.getModels())e.draw(t)}getPickingInfo({info:t,mode:e,sourceLayer:n}){let{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}raiseError(t,e){var n,r,i,o;e&&(t=Error("".concat(e,": ").concat(t.message),{cause:t})),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t)||null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this)}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;let e=this.internalState.viewport;this.internalState.viewport=t,e&&S({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){let e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(let e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){let t=this.getAttributeManager();if(!t)return;let e=this.props,n=this.getNumInstances(),r=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});let i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){let t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){let{uniformTransitions:t}=this.internalState;if(t.active){let e=t.update(),n=Object.create(this.props);for(let t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:e}){if(t.constant)return;let n=Math.floor(A.length/3);if(this.internalState.usesPickingColorCache=!0,n<e){e>0xffffff&&(0,d.default).warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")();let t=Math.floor((A=(0,_.default).allocate(A,e,{size:3,copy:!0,maxCount:Math.max(e,0xffffff)})).length/3),r=[];for(let e=n;e<t;e++)this.encodePickingColor(e,r),A[3*e+0]=r[0],A[3*e+1]=r[1],A[3*e+2]=r[2]}t.value=A.subarray(0,3*e)}_setModelAttributes(t,e){let n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}disablePickingIndex(t){let e=this.props.data;if(!("attributes"in e)){this._disablePickingIndex(t);return}let{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,o=i&&e.attributes&&e.attributes[i.id];if(o&&o.value){let n=o.value,r=this.encodePickingColor(t);for(let t=0;t<e.length;t++){let e=i.getVertexOffset(t);n[e]===r[0]&&n[e+1]===r[1]&&n[e+2]===r[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){let{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;if(!r)return;let i=r.getVertexOffset(t),o=r.getVertexOffset(t+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){let{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==A.buffer&&(n.value=A.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){(0,p.default)(!this.internalState),(0,p.default)(Number.isFinite(this.props.coordinateSystem)),(0,h.default)("layer.initialize",this);let t=this._getAttributeManager();for(let e of(t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new b.default({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>((0,d.default).deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new s.default(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context),this.props.extensions))e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){(0,h.default)("layer.matched",this,this===t);let{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){let t=this.needsUpdate();if((0,h.default)("layer.update",this,t),!t)return;let e=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{let t=this._getUpdateParams(),e=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(t){}for(let e of this.props.extensions)e.updateState.call(this,t,e);let r=this.getModels()[0]!==e[0];this._postUpdate(t,r)}finally{n.viewport=i,this.props=e,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){for(let t of((0,h.default)("layer.finalize",this),this.finalizeState(this.context),this.props.extensions))t.finalizeState.call(this,this.context,t)}_drawLayer({moduleParameters:t=null,uniforms:e={},parameters:n={}}){this._updateAttributeTransition();let r=this.props,i=this.context;this.props=this.internalState.propsInTransition||r;let o=this.props.opacity;e.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);let{getPolygonOffset:r}=this.props,o=r&&r(e)||[0,0];(0,f.setParameters)(i.gl,{polygonOffset:o}),(0,f.withParameters)(i.gl,n,()=>{let r={moduleParameters:t,uniforms:e,parameters:n,context:i};for(let t of this.props.extensions)t.draw.call(this,r,t);this.draw(r)})}finally{this.props=r}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;let{changeFlags:e}=this.internalState;for(let n in t)if(t[n]){let r=!1;if("dataChanged"===n){let i=t[n],o=e[n];i&&Array.isArray(o)&&(e.dataChanged=Array.isArray(i)?o.concat(i):i,r=!0)}e[n]||(e[n]=t[n],r=!0),r&&(0,h.default)("layer.changeFlag",this,n,t)}let n=!!(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){let n=(0,a.diffProps)(t,e);if(n.updateTriggersChanged)for(let t in n.updateTriggersChanged)n.updateTriggersChanged[t]&&this.invalidateAttribute(t);if(n.transitionsChanged)for(let i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,e[i],t[i],null===(r=t.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){(0,a.validateProps)(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){let e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"==typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){let t=this.context;return new o.default(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){let{props:n,oldProps:r}=t;this.setNeedsRedraw(),this._updateAttributes();let{model:i}=this.state;null==i||i.setInstanceCount(this.getNumInstances());let{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(e||r.autoHighlight!==o||r.highlightedObjectIndex!==s||r.highlightColor!==a){let t={};o||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),(e||s!==r.highlightedObjectIndex)&&(t.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=this.internalState.needsRedraw&&this.id;let n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(t);if(e=e||r)for(let t of this.props.extensions)t.onNeedsRedraw.call(this,t);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}(0,r.default)(C,"defaultProps",P),(0,r.default)(C,"layerName","Layer")}),u("heh00",function(e,n){t(e.exports,"COORDINATE_SYSTEM",()=>i),t(e.exports,"PROJECTION_MODE",()=>o),t(e.exports,"UNIT",()=>s),t(e.exports,"EVENTS",()=>a),t(e.exports,"OPERATION",()=>u);var r=l("i5wGC");let i={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(i,"IDENTITY",{get:()=>((0,r.default).deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});let o={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},s={common:0,meters:1,pixels:2},a={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},u={DRAW:"draw",MASK:"mask",TERRAIN:"terrain"}}),u("i5wGC",function(e,n){t(e.exports,"default",()=>r),l("gNj4N");var r=new(l("irQqN")).Log({id:"deck"})}),u("gNj4N",function(e,n){t(e.exports,"Log",()=>l("irQqN").Log),new(l("irQqN")).Log({id:"@probe.gl/log"})}),u("irQqN",function(e,n){t(e.exports,"Log",()=>_);var r=l("2qeFG"),i=l("c9Jp0"),o=l("2c3Mn"),s=l("72Jq6"),a=l("cQ4GV"),u=l("I2gej"),c=l("342o3"),d=l("591Bn"),h=l("g07S0");let f={debug:i.default&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},p={enabled:!0,level:0};function g(){}let m={},v={once:!0};class _{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};(0,r.default)(this,"id",void 0),(0,r.default)(this,"VERSION",o.VERSION),(0,r.default)(this,"_startTs",(0,h.getHiResTimestamp)()),(0,r.default)(this,"_deltaTs",(0,h.getHiResTimestamp)()),(0,r.default)(this,"_storage",void 0),(0,r.default)(this,"userData",{}),(0,r.default)(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new s.LocalStorage("__probe-".concat(this.id,"__"),p),this.timeStamp("".concat(this.id," started")),(0,c.autobind)(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number(((0,h.getHiResTimestamp)()-this._startTs).toPrecision(10))}getDelta(){return Number(((0,h.getHiResTimestamp)()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){(0,d.default)(t,e)}warn(t){return this._getLogFunction(0,t,f.warn,arguments,v)}error(t){return this._getLogFunction(0,t,f.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,f.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,f.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,f.debug||f.info,arguments,v)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||g,n&&[n],{tag:function(t){for(let e in t)for(let n in t[e])return n||"untitled";return"empty"}(e)}):g}image(t){let{logLevel:e,priority:n,image:r,message:o="",scale:s=1}=t;return this._shouldLog(e||n)?i.default?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"==typeof e){let t=new Image;return t.onload=()=>{console.log(...(0,a.formatImage)(t,n,r))},t.src=e,g}let i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...(0,a.formatImage)(e,n,r)),g;if("canvas"===i.toLowerCase()){let t=new Image;t.onload=()=>console.log(...(0,a.formatImage)(t,n,r)),t.src=e.toDataURL()}return g}({image:r,message:o,scale:s}):function(t){let{image:e,message:n="",scale:r=1}=t;return console.warn("removed"),g}({image:r,message:o,scale:s}):g}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||g)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=b({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||g)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=y(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=b({logLevel:t,message:e,args:r,opts:i}),n=n||i.method,(0,d.default)(n),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=(0,h.getHiResTimestamp)();let o=i.tag||i.message;if(i.once){if(m[o])return g;m[o]=(0,h.getHiResTimestamp)()}return e=function(t,e,n){if("string"==typeof e){let r=n.time?(0,a.leftPad)((0,a.formatTime)(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=(0,u.addColor)(e,n.color,n.background)}return e}(this.id,i.message,i),n.bind(console,e,...i.args)}return g}}function y(t){let e;if(!t)return 0;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return(0,d.default)(Number.isFinite(e)&&e>=0),e}function b(t){let{logLevel:e,message:n}=t;t.logLevel=y(e);let r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());let i=typeof t.message;return(0,d.default)("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}(0,r.default)(_,"VERSION",o.VERSION)}),u("c9Jp0",function(e,n){t(e.exports,"default",()=>i),l("45gxc");var r=l("ibaza");function i(){return"object"==typeof r&&String(r),!0}}),u("45gxc",function(e,n){t(e.exports,"default",()=>i);var r=l("ibaza");function i(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||void 0!==r&&"object"==typeof r.versions&&r.versions.electron)return!0;let e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}}),u("ibaza",function(t,e){var n,r,i,o=t.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u=[],c=!1,d=-1;function h(){c&&i&&(c=!1,i.length?u=i.concat(u):d=-1,u.length&&f())}function f(){if(!c){var t=l(h);c=!0;for(var e=u.length;e;){for(i=u,u=[];++d<e;)i&&i[d].run();d=-1,e=u.length}i=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||l(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}),u("2c3Mn",function(e,n){t(e.exports,"VERSION",()=>i);var r=l("c9Jp0");let i="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";(0,r.default)()}),u("72Jq6",function(e,n){t(e.exports,"LocalStorage",()=>i);var r=l("2qeFG");class i{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,r.default)(this,"storage",void 0),(0,r.default)(this,"id",void 0),(0,r.default)(this,"config",void 0),this.storage=function(t){try{let e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){let t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){let e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}}),u("cQ4GV",function(e,n){function r(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function o(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));let o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}t(e.exports,"formatTime",()=>r),t(e.exports,"leftPad",()=>i),t(e.exports,"formatImage",()=>o)}),u("I2gej",function(e,n){let r;t(e.exports,"addColor",()=>a);var i,o=l("c9Jp0");function s(t){return"string"==typeof t?r[t.toUpperCase()]||r.WHITE:t}function a(t,e,n){return!o.default&&"string"==typeof t&&(e&&(e=s(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=s(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(i=r||(r={}))[i.BLACK=30]="BLACK",i[i.RED=31]="RED",i[i.GREEN=32]="GREEN",i[i.YELLOW=33]="YELLOW",i[i.BLUE=34]="BLUE",i[i.MAGENTA=35]="MAGENTA",i[i.CYAN=36]="CYAN",i[i.WHITE=37]="WHITE",i[i.BRIGHT_BLACK=90]="BRIGHT_BLACK",i[i.BRIGHT_RED=91]="BRIGHT_RED",i[i.BRIGHT_GREEN=92]="BRIGHT_GREEN",i[i.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",i[i.BRIGHT_BLUE=94]="BRIGHT_BLUE",i[i.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",i[i.BRIGHT_CYAN=96]="BRIGHT_CYAN",i[i.BRIGHT_WHITE=97]="BRIGHT_WHITE"}),u("342o3",function(e,n){t(e.exports,"autobind",()=>r);function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];for(let n of Object.getOwnPropertyNames(Object.getPrototypeOf(t)))"function"!=typeof t[n]||e.find(t=>n===t)||(t[n]=t[n].bind(t))}}),u("591Bn",function(e,n){t(e.exports,"default",()=>r);function r(t,e){if(!t)throw Error(e||"Assertion failed")}}),u("g07S0",function(e,n){t(e.exports,"getHiResTimestamp",()=>o);var r=l("c9Jp0"),i=l("fwwVb");function o(){var t,e,n;let o;if(r.default&&"performance"in i.window)o=null===i.window||void 0===i.window?void 0:null===(t=i.window.performance)||void 0===t?void 0:null===(e=t.now)||void 0===e?void 0:e.call(t);else if("hrtime"in i.process){let t=null===i.process||void 0===i.process?void 0:null===(n=i.process.hrtime)||void 0===n?void 0:n.call(i.process);o=1e3*t[0]+t[1]/1e6}else o=Date.now();return o}}),u("fwwVb",function(e,n){t(e.exports,"window",()=>s),t(e.exports,"process",()=>a);var r=l("ibaza");let i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document,process:"object"==typeof r&&r};i.self||i.window||i.global;let s=i.window||i.self||i.global;i.document;let a=i.process||{}}),u("qyCgO",function(e,n){t(e.exports,"default",()=>h);var r=l("2qeFG"),i=l("67cdk"),o=l("i5wGC"),s=l("cB0Rj"),a=l("jmseR"),u=l("dSHHv"),c=l("9Ui0t");let d="attributeManager.invalidate";class h{constructor(t,{id:e="attribute-manager",stats:n,timeline:i}={}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"gl",void 0),(0,r.default)(this,"attributes",void 0),(0,r.default)(this,"updateTriggers",void 0),(0,r.default)(this,"needsRedraw",void 0),(0,r.default)(this,"userData",void 0),(0,r.default)(this,"stats",void 0),(0,r.default)(this,"attributeTransitionManager",void 0),(0,r.default)(this,"mergeBoundsMemoized",(0,s.default)(a.mergeBounds)),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new c.default(t,{id:"".concat(e,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(let t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){let e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(let e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){let n=this._invalidateTrigger(t,e);(0,u.default)(d,this,t,n)}invalidateAll(t){for(let e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);(0,u.default)(d,this,"all")}update({data:t,numInstances:e,startIndices:n=null,transitions:r,props:i={},buffers:s={},context:a={}}){let l=!1;for(let r in(0,u.default)("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){let u=this.attributes[r],c=u.settings.accessor;u.startIndices=n,u.numInstances=e,i[r]&&(0,o.default).removed("props.".concat(r),"data.attributes.".concat(r))(),u.setExternalBuffer(s[r])||u.setBinaryValue("string"==typeof c?s[c]:void 0,t.startIndices)||"string"==typeof c&&!s[c]&&u.setConstantValue(i[c])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:e,data:t,props:i,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&(0,u.default)("attributeManager.updateEnd",this,e),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:e,transitions:r})}updateTransition(){let{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getBounds(t){let e=t.map(t=>{var e;return null===(e=this.attributes[t])||void 0===e?void 0:e.getBounds()});return this.mergeBoundsMemoized(e)}getChangedAttributes(t={clearChangedFlags:!1}){let{attributes:e,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(let i in e){let o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(t,e={}){t||(t=this.getAttributes());let n={};for(let r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}_add(t,e={}){for(let n in t){let r=t[n];this.attributes[n]=this._createAttribute(n,r,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){let r={...e,id:t,size:e.isIndexed&&1||e.size||1,divisor:n.instanced?1:e.divisor||0};return new i.default(this.gl,r)}_mapUpdateTriggersToAttributes(){let t={};for(let e in this.attributes)this.attributes[e].getUpdateTriggers().forEach(n=>{t[n]||(t[n]=[]),t[n].push(e)});this.updateTriggers=t}_invalidateTrigger(t,e){let{attributes:n,updateTriggers:r}=this,i=r[t];return i&&i.forEach(t=>{let r=n[t];r&&r.setNeedsUpdate(r.id,e)}),i}_updateAttribute(t){let{attribute:e,numInstances:n}=t;if((0,u.default)("attribute.updateStart",e),e.constant){e.setConstantValue(e.value);return}e.allocate(n)&&(0,u.default)("attribute.allocate",e,n),e.updateBuffer(t)&&(this.needsRedraw=!0,(0,u.default)("attribute.updateEnd",e,n))}}}),u("67cdk",function(e,n){t(e.exports,"default",()=>d);var r=l("2qeFG"),i=l("kISa6"),o=l("321bC"),s=l("gl1Lh"),a=l("3tWMN"),u=l("jUTxc"),c=l("hWH11");class d extends i.default{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:u.FULL}),(0,r.default)(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){let e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){let{accessor:t}=this.settings;return[this.id].concat("function"!=typeof t&&t||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;let{accessor:e}=this.settings,n=this.settings.transition,r=Array.isArray(e)?t[e.find(e=>t[e])]:t[e];return(0,c.normalizeTransitionSettings)(r,n)}setNeedsUpdate(t=this.id,e){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){let{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=u.add(this.state.updateRanges,[t,n])}else this.state.updateRanges=u.FULL}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=u.EMPTY}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){let{state:e,settings:n}=this;return!n.noAlloc&&!!n.update&&(super.allocate(t,e.updateRanges!==u.FULL),!0)}updateBuffer({numInstances:t,data:e,props:n,context:r}){if(!this.needsUpdate())return!1;let{state:{updateRanges:i},settings:{update:o,noAlloc:s}}=this,a=!0;if(o){for(let[s,a]of i)o.call(r,this,{data:e,startRow:s,endRow:a,props:n,numInstances:t});if(this.value){if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(let[e,n]of i){let r=Number.isFinite(e)?this.getVertexOffset(e):0,i=Number.isFinite(n)?this.getVertexOffset(n):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}}this._checkAttributeArray()}else a=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),a}setConstantValue(t){return void 0!==t&&"function"!=typeof t&&(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){let{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t),!0)):(e.lastExternalBuffer=null,!1)}setBinaryValue(t,e=null){let{state:n,settings:r}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),r.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});let i=t;(0,o.default)(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));let a=!!i.size&&i.size!==this.size;return n.binaryAccessor=(0,s.getAccessorFromBuffer)(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:e,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){let{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){let t=this.settings.shaderAttributes||{[this.id]:null},e={};for(let n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,{data:e,startRow:n,endRow:r,props:i,numInstances:l}){if(t.constant)return;let{settings:u,state:c,value:d,size:h,startIndices:f}=t,{accessor:p,transform:g}=u,m=c.binaryAccessor||("function"==typeof p?p:i[p]);(0,o.default)("function"==typeof m,'accessor "'.concat(p,'" is not a function'));let v=t.getVertexOffset(n),{iterable:_,objectInfo:y}=(0,s.createIterable)(e,n,r);for(let e of _){y.index++;let n=m(e,y);if(g&&(n=g.call(this,n)),f){let e=(y.index<f.length-1?f[y.index+1]:l)-f[y.index];if(n&&Array.isArray(n[0])){let e=v;for(let r of n)t._normalizeValue(r,d,e),e+=h}else n&&n.length>h?d.set(n,v):(t._normalizeValue(n,y.target,0),(0,a.fillArray)({target:d,source:y.target,start:v,count:e}));v+=e*h}else t._normalizeValue(n,d,v),v+=h}}_validateAttributeUpdaters(){let{settings:t}=this;if(!(t.noAlloc||"function"==typeof t.update))throw Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){let{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw Error("Illegal attribute generated for ".concat(this.id))}}}}),u("kISa6",function(e,n){t(e.exports,"default",()=>g);var r=l("2qeFG"),i=l("8FSmA"),o=l("9bhog"),s=l("bF9op"),a=l("5WwHs"),u=l("loKsI"),c=l("kSmYn"),d=l("jmseR"),h=l("i5wGC");function f(t){return t.stride||t.size*t.bytesPerElement}function p(t,e){e.offset&&(0,h.default).removed("shaderAttribute.offset","vertexOffset, elementOffset")();let n=f(t),r=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:r,stride:n}}class g{constructor(t,e,n){let i;(0,r.default)(this,"gl",void 0),(0,r.default)(this,"id",void 0),(0,r.default)(this,"size",void 0),(0,r.default)(this,"settings",void 0),(0,r.default)(this,"value",void 0),(0,r.default)(this,"doublePrecision",void 0),(0,r.default)(this,"_buffer",void 0),(0,r.default)(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;let a=e.logicalType||e.type,l=5130===a,{defaultValue:c}=e;c=Number.isFinite(c)?[c]:c||Array(this.size).fill(0),i=l?5126:!a&&e.isIndexed?t&&(0,s.hasFeature)(t,o.FEATURES.ELEMENT_INDEX_UINT32)?5125:5123:a||5126;let d=(0,u.glArrayFromType)(a||i||5126);this.doublePrecision=l,l&&!1===e.fp64&&(d=Float32Array),this.value=null,this.settings={...e,defaultType:d,defaultValue:c,logicalType:a,type:i,size:this.size,bytesPerElement:d.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){let{isIndexed:t,type:e}=this.settings;this._buffer=new i.default(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){let t=this.getAccessor();return t.vertexOffset?t.vertexOffset*f(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),(0,c.default).release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){let n={},r=this.value instanceof Float64Array,i=function(t,e){let n=p(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new a.default(this,i.high),n["".concat(t,"64Low")]=r?new a.default(this,i.low):new Float32Array(this.size),n}if(e){let n=p(this.getAccessor(),e);return{[t]:new a.default(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){let e=Array.from(this.value);t=[e,e]}else{let{value:e,numInstances:n,size:r}=this,i=n*r;if(e&&i&&e.length>=i){let n=Array(r).fill(1/0),o=Array(r).fill(-1/0);for(let t=0;t<i;)for(let i=0;i<r;i++){let r=e[t++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}t=[n,o]}}return this.state.bounds=t,t}setData(t){let e;let{state:n}=this;e=ArrayBuffer.isView(t)?{value:t}:t instanceof i.default?{buffer:t}:t;let r={...this.settings,...e};if(n.bufferAccessor=r,n.bounds=null,e.constant){let t=e.value;if(t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t)),!(!n.constant||!this._areValuesEqual(t,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=t}else if(e.buffer){let t=e.buffer;n.externalBuffer=t,n.constant=!1,this.value=e.value||null;let i=e.value instanceof Float64Array;r.type=e.type||t.accessor.type,r.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=f(r)}else if(e.value){this._checkExternalBuffer(e);let t=e.value;n.externalBuffer=null,n.constant=!1,this.value=t,r.bytesPerElement=t.BYTES_PER_ELEMENT,r.stride=f(r);let{buffer:i,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=(0,d.toDoublePrecisionArray)(t,r));let s=t.byteLength+o+2*r.stride;i.byteLength<s&&i.reallocate(s),i.setAccessor(null),i.subData({data:t,offset:o}),r.type=e.type||i.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;let e=this.value,{startOffset:n=0,endOffset:r}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?(0,d.toDoublePrecisionArray)(e,{size:this.size,startIndex:n,endIndex:r}):e.subarray(n,r),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,e=!1){let{state:n}=this,r=n.allocatedValue,i=(0,c.default).allocate(r,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=i;let{buffer:o,byteOffset:s}=this;return o.byteLength<i.byteLength+s&&(o.reallocate(i.byteLength+s),e&&r&&o.subData({data:r instanceof Float64Array?(0,d.toDoublePrecisionArray)(r,this):r,offset:s})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){let{value:e}=t;if(!ArrayBuffer.isView(e))throw Error("Attribute ".concat(this.id," value is not TypedArray"));let n=this.settings.defaultType,r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||(0,h.default).warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(t).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(t).map(t=>t/255);case 5123:return new Float32Array(t).map(t=>t/65535);default:return t}}_normalizeValue(t,e,n){let{defaultValue:r,size:i}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t){let t=i;for(;--t>=0;)e[n+t]=r[t];return e}switch(i){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0];break;default:let o=i;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:r[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;let{size:n}=this;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}}),u("8FSmA",function(e,n){t(e.exports,"default",()=>p);var r=l("jXHZc"),i=l("cZsOB"),o=l("1rMeO");l("eFBWR");var s=l("dpEr0"),a=l("3FPsK"),u=l("8DSly"),c=l("49bxY");let d={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},h={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:d},f={removedProps:d};class p extends r.default{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/(0,i.default).getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/(0,i.default).getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=(0,c.checkProps)("Buffer",t,h),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=(0,c.checkProps)("Buffer",t,f))&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new i.default(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});let{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;(0,u.assert)(e);let o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?((0,s.assertWebGL2Context)(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(o,n,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t,{gl:o}=this;return(0,s.assertWebGL2Context)(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,r,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let t,e,{dstData:n=null,srcByteOffset:r=0,dstOffset:i=0,length:a=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.assertWebGL2Context)(this.gl);let l=(0,o.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}),c=this._getAvailableElementCount(r);n?t=(e=n.length)-i:e=i+(t=Math.min(c,a||c));let d=Math.min(c,t);return a=a||d,(0,u.assert)(a<=d),n=n||new l(e),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,n,i,a),this.gl.bindBuffer(36662,null),n}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):((0,u.assert)(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;(0,u.assert)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();let r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);let s=(0,o.getGLTypeFromTypedArray)(t);return(0,u.assert)(s),this.setAccessor(new i.default(this.accessor,{type:s})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,u.assert)(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));let r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){let e=t/(0,o.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new i.default(this.accessor,{type:(0,o.getGLTypeFromTypedArray)(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);let e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return(0,a.log).deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return(0,a.log).deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return(0,a.log).deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return(0,a.log).deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new i.default(this.accessor,t),this}}}),u("jXHZc",function(e,n){t(e.exports,"default",()=>d),l("eFBWR");var r=l("dpEr0"),i=l("88ZWZ"),o=l("b5HGu"),s=l("8DSly"),a=l("6uUH7"),u=l("e0iD7");let c="Resource subclass must define virtual methods";class d{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assertWebGLContext)(t);let{id:n,userData:i={}}=e;this.gl=t,this.gl2=t,this.id=n||(0,a.uid)(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach(t=>t.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=(0,o.getKeyValue)(this.gl,t),(0,s.assert)(t);let n=(this.constructor.PARAMETERS||{})[t];if(n){let t=(0,r.isWebGL2)(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){let e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{parameters:e,keys:n}=t,i=this.constructor.PARAMETERS||{},s=(0,r.isWebGL2)(this.gl),a={};for(let r of e||Object.keys(i)){let e=i[r];if(e&&(!("webgl2"in e)||s)&&(!("extension"in e)||this.gl.getExtension(e.extension))){let i=n?(0,o.getKey)(this.gl,r):r;a[i]=this.getParameter(r,t),n&&"GLenum"===e.type&&(a[i]=(0,o.getKey)(this.gl,a[i]))}}return a}setParameter(t,e){t=(0,o.getKeyValue)(this.gl,t),(0,s.assert)(t);let n=(this.constructor.PARAMETERS||{})[t];if(n){let t=(0,r.isWebGL2)(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw Error("Parameter not available on this platform");"GLenum"===n.type&&(e=(0,o.getKeyValue)(e))}return this._setParameter(t,e),this}setParameters(t){for(let e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return(0,u.stubRemovedMethods)(this,t,e,n)}initialize(t){}_createHandle(){throw Error(c)}_deleteHandle(){throw Error(c)}_bindHandle(t){throw Error(c)}_getOptsFromHandle(){throw Error(c)}_getParameter(t,e){throw Error(c)}_setParameter(t,e){throw Error(c)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){let t=this[Symbol.toStringTag],e=(0,i.lumaStats).get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){let t=this[Symbol.toStringTag];(0,i.lumaStats).get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,i.lumaStats).get("Memory Usage".concat(n));r.get("GPU Memory").addCount(t),r.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,i.lumaStats).get("Memory Usage".concat(e));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(t," Memory")).subtractCount(this.byteLength)}}}),u("eFBWR",function(e,n){t(e.exports,"log",()=>l("3FPsK").log),t(e.exports,"isWebGL",()=>l("dpEr0").isWebGL),t(e.exports,"isWebGL2",()=>l("dpEr0").isWebGL2),t(e.exports,"getWebGL2Context",()=>l("dpEr0").getWebGL2Context),t(e.exports,"assertWebGLContext",()=>l("dpEr0").assertWebGLContext),t(e.exports,"assertWebGL2Context",()=>l("dpEr0").assertWebGL2Context),t(e.exports,"getParameters",()=>l("2Eryf").getParameters),t(e.exports,"setParameters",()=>l("2Eryf").setParameters),t(e.exports,"resetParameters",()=>l("2Eryf").resetParameters),t(e.exports,"withParameters",()=>l("2Eryf").withParameters),t(e.exports,"createGLContext",()=>l("2pf24").createGLContext),t(e.exports,"resizeGLContext",()=>l("2pf24").resizeGLContext),t(e.exports,"instrumentGLContext",()=>l("2pf24").instrumentGLContext),t(e.exports,"cssToDeviceRatio",()=>l("fCLVZ").cssToDeviceRatio),t(e.exports,"cssToDevicePixels",()=>l("fCLVZ").cssToDevicePixels),l("3FPsK"),l("dpEr0"),l("eDj43"),l("2Eryf"),l("fRW6k"),l("2pf24"),l("fCLVZ")}),u("3FPsK",function(e,n){t(e.exports,"log",()=>r),l("gNj4N");let r=new(l("irQqN")).Log({id:"luma.gl"})}),u("dpEr0",function(e,n){t(e.exports,"isWebGL",()=>i),t(e.exports,"isWebGL2",()=>o),t(e.exports,"getWebGL2Context",()=>s),t(e.exports,"assertWebGLContext",()=>a),t(e.exports,"assertWebGL2Context",()=>u);var r=l("7TTdZ");function i(t){return!!("undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)||!!(t&&Number.isFinite(t._version))}function o(t){return!!("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)||!!(t&&2===t._version)}function s(t){return o(t)?t:null}function a(t){return(0,r.assert)(i(t),"Invalid WebGLRenderingContext"),t}function u(t){return(0,r.assert)(o(t),"Requires WebGL2"),t}}),u("7TTdZ",function(e,n){t(e.exports,"assert",()=>r);function r(t,e){if(!t)throw Error(e||"luma.gl: assertion failed.")}}),u("eDj43",function(t,e){var n=l("2ehDh"),r=l("7TTdZ"),i=l("4VNcg");globalThis.polyfillContext=function(t){t.luma=t.luma||{};let{luma:e}=t;return e.polyfilled||((0,n.polyfillVertexArrayObject)(t),function(t){for(let e of(t.luma.extensions={},t.getSupportedExtensions()||[]))t.luma[e]=t.getExtension(e)}(t),function(t,e){for(let n of Object.getOwnPropertyNames(e))"overrides"!==n&&function(t,e){let{extension:n,target:o,target2:s}=e,a=i.WEBGL2_CONTEXT_POLYFILLS[n];(0,r.assert)(a);let{meta:l={}}=a,{suffix:u=""}=l,c=t.getExtension(n);for(let e of Object.keys(a)){let n="".concat(e).concat(u),r=null;"meta"===e||"function"==typeof t[e]||(c&&"function"==typeof c[n]?r=function(){return c[n](...arguments)}:"function"==typeof a[e]&&(r=a[e].bind(o))),r&&(o[e]=r,s[e]=r)}}(t,{extension:n,target:t.luma,target2:t})}(t,i.WEBGL2_CONTEXT_POLYFILLS),function(t,e){let{target:n,target2:r}=e;Object.keys(i.WEBGL2_CONTEXT_OVERRIDES).forEach(e=>{if("function"==typeof i.WEBGL2_CONTEXT_OVERRIDES[e]){let o=t[e]?t[e].bind(t):()=>{},s=(0,i.WEBGL2_CONTEXT_OVERRIDES)[e].bind(null,t,o);n[e]=s,r[e]=s}})}(t,{target:e,target2:t}),e.polyfilled=!0),t}}),u("2ehDh",function(e,n){t(e.exports,"polyfillVertexArrayObject",()=>s);let r={},i=function t(e){let n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=Array(e.maxVertexAttribs);for(let e=0;e<this.attribs.length;e++){let r=new t.VertexAttrib(n);this.attribs[e]=r}this.maxAttrib=0};i.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()},i.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};let o=function(t){let e=this;this.gl=t,function(t){let e=t.getError;t.getError=function(){let n;do 0!==(n=e.apply(t))&&(r[n]=!0);while(0!==n)for(n in r)if(r[n])return delete r[n],parseInt(n,10);return 0}}(t);let n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){let r=e.currentVertexArrayObject;return r.maxAttrib=Math.max(r.maxAttrib,t),r.attribs[t].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){let r=e.currentVertexArrayObject;return r.maxAttrib=Math.max(r.maxAttrib,t),r.attribs[t].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){let i=e.currentVertexArrayObject.attribs[t];switch(r){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,s,a){let l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);let u=l.attribs[t];return u.buffer=e.currentArrayBuffer,u.size=r,u.type=i,u.normalized=o,u.stride=s,u.offset=a,u.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()},!0),this.reset_()};function s(t){if("function"==typeof t.createVertexArray)return;let e=t.getSupportedExtensions;t.getSupportedExtensions=function(){let t=e.call(this)||[];return 0>t.indexOf("OES_vertex_array_object")&&t.push("OES_vertex_array_object"),t};let n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new o(this)),this.__OESVertexArrayObject))}}o.prototype.VERTEX_ARRAY_BINDING_OES=34229,o.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;let t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new i(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},o.prototype.createVertexArrayOES=function(){let t=new i(this);return this.vertexArrayObjects.push(t),t},o.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},o.prototype.isVertexArrayOES=function(t){return!!t&&t instanceof i&&!!t.hasBeenBound&&t.ext===this},o.prototype.bindVertexArrayOES=function(t){let e=this.gl;if(t&&!t.isAlive){var n,i;n=0,i="bindVertexArrayOES: attempt to bind deleted arrayObject",r[1282]=!0,void 0!==i&&globalThis.console&&globalThis.console.error&&globalThis.console.error(i);return}let o=this.original,s=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;let a=this.currentVertexArrayObject;if(s===a)return;s&&a.elementArrayBuffer===s.elementArrayBuffer||o.bindBuffer.call(e,34963,a.elementArrayBuffer);let l=this.currentArrayBuffer,u=Math.max(s?s.maxAttrib:0,a.maxAttrib);for(let t=0;t<=u;t++){let n=a.attribs[t],r=s?s.attribs[t]:null;if(s&&n.enabled===r.enabled||(n.enabled?o.enableVertexAttribArray.call(e,t):o.disableVertexAttribArray.call(e,t)),n.enabled){let i=!1;s&&n.buffer===r.buffer||(l!==n.buffer&&(o.bindBuffer.call(e,34962,n.buffer),l=n.buffer),i=!0),(i||n.cached!==r.cached)&&o.vertexAttribPointer.call(e,t,n.size,n.type,n.normalized,n.stride,n.offset)}}this.currentArrayBuffer!==l&&o.bindBuffer.call(e,34962,this.currentArrayBuffer)}}),u("4VNcg",function(e,n){t(e.exports,"WEBGL2_CONTEXT_POLYFILLS",()=>a),t(e.exports,"WEBGL2_CONTEXT_OVERRIDES",()=>u);var r=l("7TTdZ"),i=l("dpEr0"),o=l("3qHde");let s="ANGLE_instanced_arrays",a={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{(0,r.assert)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[s]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){(0,r.assert)(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{(0,r.assert)(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{(0,r.assert)(!1)},deleteQuery:()=>{(0,r.assert)(!1)},beginQuery:()=>{(0,r.assert)(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},u={readBuffer:(t,e,n)=>{(0,i.isWebGL2)(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{let o;let{webgl2:a,ext:l}={webgl2:(0,i.isWebGL2)(t),ext:t.getExtension(s)};switch(r){case 35069:o=!!a&&void 0;break;case 35070:o=a||l?void 0:0}return void 0!==o?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!(0,i.isWebGL2)(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,o)=>(0,i.isWebGL2)(t)||32937!==o?t.getInternalformatParameter(n,r,o):new Int32Array([0]),getTexParameter(t,e,n,r){if(34046===r){let{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:o.getParameterPolyfill,hint:(t,e,n,r)=>e(n,r)}}),u("3qHde",function(e,n){t(e.exports,"getParameterPolyfill",()=>c);var r=l("dpEr0");let i="OES_element_index",o="WEBGL_draw_buffers",s="WEBGL_debug_renderer_info",a=t=>(0,r.isWebGL2)(t)?void 0:0,u={3074:t=>(0,r.isWebGL2)(t)?void 0:36064,35723:t=>(0,r.isWebGL2)(t)?void 0:4352,35977:a,32937:a,36795:(t,e)=>{let n=(0,r.isWebGL2)(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{let n=t.getExtension(s);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{let n=t.getExtension(s);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{let n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:a,35071:a,37447:a,36063:(t,e)=>{if(!(0,r.isWebGL2)(t)){let n=t.getExtension(o);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:a,35374:a,35377:a,34852:t=>{if(!(0,r.isWebGL2)(t)){let e=t.getExtension(o);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(i)?0x7fffffff:65535,33001:t=>t.getExtension(i)?0x1000000:65535,33e3:t=>0x1000000,37157:a,35373:a,35657:a,36183:a,37137:a,34045:a,35978:a,35979:a,35968:a,35376:a,35375:a,35659:a,37154:a,35371:a,35658:a,35076:a,35077:a,35380:a};function c(t,e,n){let r=u[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)}}),u("2Eryf",function(e,n){t(e.exports,"setParameters",()=>u),t(e.exports,"getParameters",()=>c),t(e.exports,"resetParameters",()=>d),t(e.exports,"withParameters",()=>h);var r=l("47rKW"),i=l("fRW6k"),o=l("7TTdZ"),s=l("dpEr0"),a=l("8kqyw");function u(t,e){if((0,o.assert)((0,s.isWebGL)(t),"setParameters requires a WebGL context"),(0,a.isObjectEmpty)(e))return;let n={};for(let i in e){let o=Number(i),s=r.GL_PARAMETER_SETTERS[i];s&&("string"==typeof s?n[s]=!0:s(t,e[i],o))}let i=t.state&&t.state.cache;if(i)for(let o in n)(0,r.GL_COMPOSITE_PARAMETER_SETTERS[o])(t,e,i)}function c(t,e){if("number"==typeof(e=e||r.GL_PARAMETER_DEFAULTS)){let n=e,i=r.GL_PARAMETER_GETTERS[n];return i?i(t,n):t.getParameter(n)}let n=Array.isArray(e)?e:Object.keys(e),i={};for(let e of n){let n=r.GL_PARAMETER_GETTERS[e];i[e]=n?n(t,Number(e)):t.getParameter(Number(e))}return i}function d(t){u(t,r.GL_PARAMETER_DEFAULTS)}function h(t,e,n){let r;if((0,a.isObjectEmpty)(e))return n(t);let{nocatch:o=!0}=e;if((0,i.pushContextState)(t),u(t,e),o)r=n(t),(0,i.popContextState)(t);else try{r=n(t)}finally{(0,i.popContextState)(t)}return r}}),u("47rKW",function(e,n){t(e.exports,"GL_PARAMETER_DEFAULTS",()=>i),t(e.exports,"GL_PARAMETER_SETTERS",()=>c),t(e.exports,"GL_COMPOSITE_PARAMETER_SETTERS",()=>h),t(e.exports,"GL_HOOKED_SETTERS",()=>f),t(e.exports,"GL_PARAMETER_GETTERS",()=>g);var r=l("dpEr0");let i={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:0xffffffff,36005:0xffffffff,2962:519,2967:0,2963:0xffffffff,34816:519,36003:0,36004:0xffffffff,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},o=(t,e,n)=>e?t.enable(n):t.disable(n),s=(t,e,n)=>t.hint(n,e),a=(t,e,n)=>t.pixelStorei(n,e);function u(t){return Array.isArray(t)||ArrayBuffer.isView(t)}let c={3042:o,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:o,2885:(t,e)=>t.cullFace(e),2929:o,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:o,35723:s,36006:(t,e)=>{let n=(0,r.isWebGL2)(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:s,2849:(t,e)=>t.lineWidth(e),32823:o,32824:"polygonOffset",10752:"polygonOffset",35977:o,32938:"sampleCoverage",32939:"sampleCoverage",3089:o,3088:(t,e)=>t.scissor(...e),2960:o,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:a,3317:a,37440:a,37441:a,37443:a,3330:a,3332:a,3331:a,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:a,32878:a,3316:a,3315:a,32877:a,framebuffer:(t,e)=>{let n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=u(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=u(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{let[n,r]=e=u(e)?e:[e,e];t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{let[n,r,i,o,s,a]=e=u(e)&&3===e.length?[...e,...e]:e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{let[n,r,i,o,s,a]=e=u(e)&&3===e.length?[...e,...e]:e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function d(t,e,n){return void 0!==e[t]?e[t]:n[t]}let h={blendEquation:(t,e,n)=>t.blendEquationSeparate(d(32777,e,n),d(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(d(32969,e,n),d(32968,e,n),d(32971,e,n),d(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(d(32824,e,n),d(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(d(32938,e,n),d(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,d(2962,e,n),d(2967,e,n),d(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,d(34816,e,n),d(36003,e,n),d(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,d(2964,e,n),d(2965,e,n),d(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,d(34817,e,n),d(34818,e,n),d(34819,e,n))},f={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},p=(t,e)=>t.isEnabled(e),g={3042:p,2884:p,2929:p,3024:p,32823:p,32926:p,32928:p,3089:p,2960:p,35977:p}}),u("fRW6k",function(e,n){t(e.exports,"trackContextState",()=>c),t(e.exports,"pushContextState",()=>d),t(e.exports,"popContextState",()=>h);var r=l("47rKW"),i=l("2Eryf"),o=l("7TTdZ"),s=l("8kqyw");function a(t,e){let n=t[e].bind(t);t[e]=function(){let e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}class u{constructor(t){let{copyState:e=!1,log:n=()=>{}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?(0,i.getParameters)(t):Object.assign({},r.GL_PARAMETER_DEFAULTS),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.stateStack.push({})}pop(){(0,o.assert)(this.stateStack.length>0);let t=this.stateStack[this.stateStack.length-1];(0,i.setParameters)(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(let i in t){(0,o.assert)(void 0!==i);let a=t[i],l=this.cache[i];(0,s.deepArrayEqual)(a,l)||(n=!0,e=l,!r||i in r||(r[i]=l),this.cache[i]=a)}return{valueChanged:n,oldValue:e}}}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{enable:n=!0,copyState:i}=e;if((0,o.assert)(void 0!==i),!t.state){let{polyfillContext:e}=globalThis;for(let n in e&&e(t),t.state=new u(t,{copyState:i}),function(t){let e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}(t),r.GL_HOOKED_SETTERS){let e=r.GL_HOOKED_SETTERS[n];!function(t,e,n){let r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];let{valueChanged:s,oldValue:a}=n(t.state._updateCache,...i);return s&&r(...i),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}(t,n,e)}a(t,"getParameter"),a(t,"isEnabled")}return t.state.enable=n,t}function d(t){t.state||c(t,{copyState:!1}),t.state.push()}function h(t){(0,o.assert)(t.state),t.state.pop()}}),u("8kqyw",function(e,n){function r(t){for(let e in t)return!1;return!0}function i(t,e){if(t===e)return!0;let n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}t(e.exports,"isObjectEmpty",()=>r),t(e.exports,"deepArrayEqual",()=>i)}),u("2pf24",function(e,n){t(e.exports,"createGLContext",()=>f),t(e.exports,"instrumentGLContext",()=>p),t(e.exports,"resizeGLContext",()=>g);var r=l("c9Jp0"),i=l("fRW6k"),o=l("3FPsK"),s=l("7TTdZ"),a=l("fCLVZ"),u=l("dpEr0");let c=(0,r.default)(),d=c&&"undefined"!=typeof document,h={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function f(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.assert)(c,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");let{width:n,height:r}=e=Object.assign({},h,e);function i(t){if(e.throwOnError)throw Error(t);return console.error(t),null}e.onError=i;let{canvas:a}=e;return(t=function(t,e){let{onError:n}=e,r=null,i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);let{webgl1:o=!0,webgl2:s=!0}=e,a=null;return(s&&(a=(a=a||t.getContext("webgl2",e))||t.getContext("experimental-webgl2",e)),o&&(a=(a=a||t.getContext("webgl",e))||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a)?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}(function(t){let e,{canvas:n,width:r=800,height:i=600,onError:o}=t;return"string"==typeof n?(d&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):n?e=n:((e=document.createElement("canvas")).id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild)),e}({canvas:a,width:n,height:r,onError:i}),e))?(function(t){let e=(0,u.isWebGL2)(t)?"WebGL2":"WebGL1",n=function(t){let e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";(0,o.log).info(1,"".concat(e).concat(i," context ").concat(r))()}(t=p(t,e)),t):null}function p(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||(e=t,"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};let{manageState:r,debug:s}=n=Object.assign({},h,n);return r&&(0,i.trackContextState)(t,{copyState:!1,log:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,o.log).log(1,...e)()}}),c&&s&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,n),o.log.level=Math.max(o.log.level,1)):(0,o.log).warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){(function(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||((0,o.log).log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};let s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let n=e,s=Math.floor(r*n),a=Math.floor(i*n);t.canvas.width=s,t.canvas.height=a,(t.drawingBufferWidth!==s||t.drawingBufferHeight!==a)&&((0,o.log).warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*n),t.canvas.height=Math.floor(i*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}})(t,(0,a.getDevicePixelRatio)(e.useDevicePixels),e);return}let n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}}),u("fCLVZ",function(e,n){function r(t){let{luma:e}=t;if(t.canvas&&e){let n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function i(t,e){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return function(t,e,n,r,i){let o;let l=s(t[0],e,n),u=a(t[1],e,r,i),c=s(t[0]+1,e,n),d=c===n-1?c:c-1;return c=a(t[1]+1,e,r,i),i?(c=0===c?c:c+1,o=u,u=c):o=c===r-1?c:c-1,{x:l,y:u,width:Math.max(d-l+1,1),height:Math.max(o-u+1,1)}}(e,r(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function o(t){let e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function s(t,e,n){return Math.min(Math.round(t*e),n-1)}function a(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}t(e.exports,"cssToDeviceRatio",()=>r),t(e.exports,"cssToDevicePixels",()=>i),t(e.exports,"getDevicePixelRatio",()=>o)}),u("88ZWZ",function(e,n){t(e.exports,"lumaStats",()=>a),l("eFBWR");var r=l("3FPsK");l("jlzaK");var i=l("iRPdy"),o=l("c9Jp0");let s="8.5.21",a=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new i.default({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==s)throw Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(s));globalThis.luma||((0,o.default)()&&(0,r.log).log(1,"luma.gl ".concat(s," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:s,version:s,log:r.log,stats:a,globals:{modules:{},nodeIO:{}}})}),u("jlzaK",function(e,n){t(e.exports,"Stats",()=>l("iRPdy").default),l("iRPdy"),l("7sonD"),l("4KD17")}),u("iRPdy",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG"),i=l("7sonD");class o{constructor(t){(0,r.default)(this,"id",void 0),(0,r.default)(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(let t in this.stats)this.stats[t].reset();return this}forEach(t){for(let e in this.stats)t(this.stats[e])}getTable(){let t={};return this.forEach(e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}_initializeStats(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach(t=>this._getOrCreate(t))}_getOrCreate(t){if(!t||!t.name)return null;let{name:e,type:n}=t;return this.stats[e]||(t instanceof i.default?this.stats[e]=t:this.stats[e]=new i.default(e,n)),this.stats[e]}}}),u("7sonD",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG"),i=l("4KD17");class o{constructor(t,e){(0,r.default)(this,"name",void 0),(0,r.default)(this,"type",void 0),(0,r.default)(this,"sampleSize",1),(0,r.default)(this,"time",void 0),(0,r.default)(this,"count",void 0),(0,r.default)(this,"samples",void 0),(0,r.default)(this,"lastTiming",void 0),(0,r.default)(this,"lastSampleTime",void 0),(0,r.default)(this,"lastSampleCount",void 0),(0,r.default)(this,"_count",0),(0,r.default)(this,"_time",0),(0,r.default)(this,"_samples",0),(0,r.default)(this,"_startTime",0),(0,r.default)(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=(0,i.default)(),this._timerPending=!0,this}timeEnd(){return this._timerPending&&(this.addTime((0,i.default)()-this._startTime),this._timerPending=!1,this._checkSampling()),this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}}),u("4KD17",function(e,n){t(e.exports,"default",()=>i);var r=l("ibaza");function i(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==r&&r.hrtime){let e=r.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}}),u("b5HGu",function(e,n){t(e.exports,"getKeyValue",()=>i),t(e.exports,"getKey",()=>o);var r=l("8DSly");function i(t,e){if("string"!=typeof e)return e;let n=Number(e);if(!isNaN(n))return n;let i=t[e=e.replace(/^.*\./,"")];return(0,r.assert)(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function o(t,e){for(let n in e=Number(e),t)if(t[n]===e)return"GL.".concat(n);return String(e)}}),u("8DSly",function(e,n){t(e.exports,"assert",()=>r);function r(t,e){if(!t)throw Error(e||"luma.gl: assertion failed.")}}),u("6uUH7",function(e,n){t(e.exports,"uid",()=>o),t(e.exports,"isPowerOfTwo",()=>s),t(e.exports,"isObjectEmpty",()=>a);var r=l("8DSly");let i={};function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";i[t]=i[t]||1;let e=i[t]++;return"".concat(t,"-").concat(e)}function s(t){return(0,r.assert)("number"==typeof t,"Input must be a number"),t&&(t&t-1)==0}function a(t){let e=!0;for(let n in t){e=!1;break}return e}}),u("e0iD7",function(e,n){t(e.exports,"stubRemovedMethods",()=>i),l("eFBWR");var r=l("3FPsK");function i(t,e,n,i){let o="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(t=>{s.methodName||(s[t]=()=>{throw(0,r.log).removed("Calling removed method ".concat(e,".").concat(t,": "),o)(),Error(t)})})}}),u("cZsOB",function(e,n){t(e.exports,"default",()=>u);var r=l("1rMeO"),i=l("8DSly"),o=l("49bxY");let s={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},a={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class u{static getBytesPerElement(t){return(0,r.getTypedArrayFromGLType)(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return(0,i.assert)(t.size),(0,r.getTypedArrayFromGLType)(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new u(...[s,...e])}constructor(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return u.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return u.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(t=(0,o.checkProps)("Accessor",t,a)).type&&(this.type=t.type,(5124===t.type||5125===t.type)&&(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}}),u("1rMeO",function(e,n){function r(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw Error("Failed to deduce GL constant from typed array")}}function i(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw Error("Failed to deduce typed array type from GL constant")}}function o(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t,s=n*i;o=o||new Uint8Array(s);for(let t=0;t<r/2;++t){let n=t*s,i=(r-t-1)*s;o.set(e.subarray(n,n+s)),e.copyWithin(n,i,i+s),e.set(o,i)}}function s(t){let{data:e,width:n,height:r}=t,i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let t=0;t<o;t++)for(let r=0;r<i;r++)for(let o=0;o<4;o++)s[(t*i+r)*4+o]=e[(2*t*n+2*r)*4+o];return{data:s,width:i,height:o}}t(e.exports,"getGLTypeFromTypedArray",()=>r),t(e.exports,"getTypedArrayFromGLType",()=>i),t(e.exports,"flipRows",()=>o),t(e.exports,"scalePixels",()=>s)}),u("49bxY",function(e,n){t(e.exports,"checkProps",()=>i),l("eFBWR");var r=l("3FPsK");function i(t,e,n){let{removedProps:i={},deprecatedProps:o={},replacedProps:s={}}=n;for(let n in i)if(n in e){let e=i[n]?"".concat(t,".").concat(i[n]):"N/A";(0,r.log).removed("".concat(t,".").concat(n),e)()}for(let n in o)if(n in e){let e=o[n];(0,r.log).deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(e))()}let a=null;for(let n in s)if(n in e){let i=s[n];(0,r.log).deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(i))(),(a=a||Object.assign({},e))[i]=e[n],delete a[n]}return a||e}}),u("9bhog",function(e,n){t(e.exports,"FEATURES",()=>o),t(e.exports,"default",()=>s);var r=l("67hSA"),i=l("35qVw");let o={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};var s={[o.WEBGL2]:[!1,!0],[o.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[o.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[o.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[o.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[o.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[o.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[o.FLOAT_BLEND]:["EXT_float_blend"],[o.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[o.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[o.TEXTURE_FLOAT]:["OES_texture_float",!0],[o.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[o.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[o.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[o.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[o.COLOR_ATTACHMENT_RGBA32F]:[function(t){let e=new i.default(t,{format:6408,type:5126,dataFormat:6408}),n=new r.default(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),o=n.getStatus();return e.delete(),n.delete(),36053===o},"EXT_color_buffer_float"],[o.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[o.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[o.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[o.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[o.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[o.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]}}),u("67hSA",function(e,n){t(e.exports,"default",()=>g),l("eFBWR");var r=l("dpEr0"),i=l("3FPsK"),o=l("jXHZc"),s=l("35qVw"),a=l("i8qYD"),u=l("34dnL"),c=l("hzwiv"),d=l("bF9op"),h=l("b5HGu"),f=l("8DSly");let p="Multiple render targets not supported";class g extends o.default{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{colorBufferFloat:n,colorBufferHalfFloat:r}=e,i=!0;return n&&(i=!!(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&!!(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new g(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){let t=(0,r.assertWebGL2Context)(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){let t=(0,r.assertWebGL2Context)(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:l,drawBuffers:u}=t;if((0,f.assert)(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(let t in r){let i=r[t];(Array.isArray(i)?i[0]:i).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,o,s,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&a&&this.checkStatus()}delete(){for(let t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:o});let{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),s.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return(0,f.assert)(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(let t in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&(0,i.log).log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))(),this.attachments)this.attachments[t].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};e&&Object.keys(this.attachments).forEach(t=>{r[t]=null}),Object.assign(r,t);let i=this.gl.bindFramebuffer(36160,this.handle);for(let t in r){(0,f.assert)(void 0!==t,"Misspelled framebuffer binding point?");let e=Number(t),i=r[e],o=i;if(o){if(o instanceof a.default)this._attachRenderbuffer({attachment:e,renderbuffer:o});else if(Array.isArray(i)){let[t,n=0,r=0]=i;o=t,this._attachTexture({attachment:e,texture:t,layer:n,level:r})}else this._attachTexture({attachment:e,texture:o,layer:0,level:0})}else this._unattach(e);n&&o&&o.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(t=>!this.attachments[t]).forEach(t=>{delete this.attachments[t]})}checkStatus(){let{gl:t}=this,e=this.getStatus();if(36053!==e)throw Error((g.STATUS||{})[e]||"Framebuffer error ".concat(e));return this}getStatus(){let{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&(0,u.clear)(this.gl,{color:e,depth:n,stencil:r}),i.forEach((t,e)=>{(0,u.clearBuffer)(this.gl,{drawBuffer:e,value:t})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,i.log).error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,i.log).error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,i.log).error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,i.log).error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,i.log).error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,i.log).error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:i=0,width:o,height:s}=t,a=(0,r.assertWebGL2Context)(this.gl),l=a.bindFramebuffer(36008,this.handle);return 0===n&&0===i&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,e):a.invalidateFramebuffer(36008,e,n,i,o,s),a.bindFramebuffer(36008,l),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=(0,h.getKey)(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={};for(let i of n)r[e?(0,h.getKey)(this.gl,i):i]=this.getAttachmentParameter(t,i,e);return r}getParameters(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=Object.keys(this.attachments),n={};for(let r of e){let e=Number(r);n[t?(0,h.getKey)(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!=typeof window&&window.open((0,c.copyToDataUrl)(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>i.log.level||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);let n=(0,c.copyToDataUrl)(this,{targetMaxHeight:100});return(0,i.log).image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let o=null;return t&&((o=o||{})[36064]=new s.default(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&n?((o=o||{})[33306]=new a.default(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):e?((o=o||{})[36096]=new a.default(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&(0,f.assert)(!1),o}_unattach(t){let e=this.attachments[t];e&&(e instanceof a.default?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t,{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:i,level:o}=t,{gl:s}=this;switch(s.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:(0,r.assertWebGL2Context)(s).framebufferTextureLayer(36160,e,n.target,o,i);break;case 34067:let a=i<34069?i+34069:i;s.framebufferTexture2D(36160,e,a,n.handle,o);break;case 3553:s.framebufferTexture2D(36160,e,3553,n.handle,o);break;default:(0,f.assert)(!1,"Illegal texture type")}s.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){let e=(0,r.getWebGL2Context)(this.gl);e?e.readBuffer(t):(0,f.assert)(36064===t||1029===t,p),this.readBuffer=t}_setDrawBuffers(t){let{gl:e}=this,n=(0,r.assertWebGL2Context)(e);if(n)n.drawBuffers(t);else{let n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):(0,f.assert)(1===t.length&&(36064===t[0]||1029===t[0]),p)}this.drawBuffers=t}_getAttachmentParameterFallback(t){let e=(0,d.getFeatures)(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}g.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]}),u("35qVw",function(e,n){t(e.exports,"default",()=>s),l("eFBWR");var r=l("dpEr0"),i=l("1bl8M"),o=l("7uJLW");class s extends i.default{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return(0,i.default).isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assertWebGLContext)(t),(e instanceof Promise||"string"==typeof e)&&(e={data:e}),"string"==typeof e.data&&(e=Object.assign({},e,{data:(0,o.loadImage)(e.data)})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}}),u("1bl8M",function(e,n){t(e.exports,"default",()=>p),l("eFBWR");var r=l("dpEr0"),i=l("3FPsK"),o=l("2Eryf"),s=l("jXHZc"),a=l("8FSmA"),u=l("7D42f"),c=l("8DSly"),d=l("6uUH7");let h=[9729,9728],f=globalThis.WebGLBuffer||function(){};class p extends s.default{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{format:n,linearFiltering:r}=e,i=!0;return n&&(i=(i=i&&(0,u.isFormatSupported)(t,n))&&(!r||(0,u.isLinearFilteringSupported)(t,n))),i}constructor(t,e){let{id:n=(0,d.uid)("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then(e=>this.initialize(Object.assign({},t,{pixels:e,data:e}))),this;let n="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",()=>this.initialize(t)),this;let{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:l={},pixelStore:u={},textureUnit:c}=t;e||(e=r);let{width:d,height:h,dataFormat:f,type:p,compressed:g=!1,mipmaps:m=!0}=t,{depth:v=0}=t;return{width:d,height:h,compressed:g,dataFormat:f,type:p}=this._deduceParameters({format:o,type:p,dataFormat:f,compressed:g,data:e,width:d,height:h}),this.width=d,this.height=h,this.depth=v,this.format=o,this.type=p,this.dataFormat=f,this.border=s,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&((0,i.log).warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(l)),this.mipmaps=m,this.setImageData({data:e,width:d,height:h,depth:v,format:o,type:p,dataFormat:f,border:s,mipmaps:m,parameters:u,compressed:g}),m&&this.generateMipmap(),this.setParameters(l),a&&(this.data=e),n&&(this._video={video:e,parameters:l,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){let{video:t,parameters:e,lastTime:n}=this._video;n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA||(this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime)}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(0,i.log).warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))():(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),(0,o.withParameters)(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null)),this}setImageData(t){let e;this._trackDeallocatedMemory("Texture");let{target:n=this.target,pixels:i=null,level:s=0,format:a=this.format,border:l=this.border,offset:d=0,parameters:h={}}=t,{data:f=null,type:p=this.type,width:g=this.width,height:m=this.height,dataFormat:v=this.dataFormat,compressed:_=!1}=t;f||(f=i),{type:p,dataFormat:v,compressed:_,width:g,height:m}=this._deduceParameters({format:a,type:p,dataFormat:v,compressed:_,data:f,width:g,height:m});let{gl:y}=this;y.bindTexture(this.target,this.handle);let b=null;({data:f,dataType:b}=this._getDataType({data:f,compressed:_}));let x=0;if((0,o.withParameters)(this.gl,h,()=>{switch(b){case"null":y.texImage2D(n,s,a,g,m,l,v,p,f);break;case"typed-array":y.texImage2D(n,s,a,g,m,l,v,p,f,d);break;case"buffer":(e=(0,r.assertWebGL2Context)(y)).bindBuffer(35052,f.handle||f),e.texImage2D(n,s,a,g,m,l,v,p,d),e.bindBuffer(35052,null);break;case"browser-object":(0,r.isWebGL2)(y)?y.texImage2D(n,s,a,g,m,l,v,p,f):y.texImage2D(n,s,a,v,p,f);break;case"compressed":for(let[t,e]of f.entries())y.compressedTexImage2D(n,t,e.format,e.width,e.height,l,e.data),x+=e.levelSize;break;default:(0,c.assert)(!1,"Unknown image data type")}}),"compressed"===b)this._trackAllocatedMemory(x,"Texture");else if(f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{let t=u.DATA_FORMAT_CHANNELS[this.dataFormat]||4,e=u.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:i=null,x:s=0,y:l=0,width:u=this.width,height:d=this.height,level:h=0,format:p=this.format,type:g=this.type,dataFormat:m=this.dataFormat,compressed:v=!1,offset:_=0,border:y=this.border,parameters:b={}}=t;if({type:g,dataFormat:m,compressed:v,width:u,height:d}=this._deduceParameters({format:p,type:g,dataFormat:m,compressed:v,data:i,width:u,height:d}),(0,c.assert)(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){let t=i;i=t.data,u=t.shape[0],d=t.shape[1]}i instanceof a.default&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),(0,o.withParameters)(this.gl,b,()=>{if(v)this.gl.compressedTexSubImage2D(e,h,s,l,u,d,p,i);else if(null===i)this.gl.texSubImage2D(e,h,s,l,u,d,m,g,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,h,s,l,u,d,m,g,i,_);else if(i instanceof f){let t=(0,r.assertWebGL2Context)(this.gl);t.bindBuffer(35052,i),t.texSubImage2D(e,h,s,l,u,d,m,g,_),t.bindBuffer(35052,null)}else(0,r.isWebGL2)(this.gl)?(0,r.assertWebGL2Context)(this.gl).texSubImage2D(e,h,s,l,u,d,m,g,i):this.gl.texSubImage2D(e,h,s,l,m,g,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,i.log).error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof a.default?{data:e.handle,dataType:"buffer"}:e instanceof f?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){let{format:e,data:n}=t,{width:r,height:i,dataFormat:o,type:s,compressed:a}=t,l=u.TEXTURE_FORMATS[e];return o=o||l&&l.dataFormat,s=s||l&&l.types[0],a=a||l&&l.compressed,{width:r,height:i}=this._deduceImageSize(n,r,i),{dataFormat:o,type:s,compressed:a,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return"undefined"!=typeof ImageData&&t instanceof ImageData?r={width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?r={width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement?r={width:t.width,height:t.height}:"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?r={width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?r={width:t.videoWidth,height:t.videoHeight}:r=t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},(0,c.assert)(r,"Could not deduced texture size"),(0,c.assert)(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),(0,c.assert)(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);let e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:(0,c.assert)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(0,r.isWebGL2)(this.gl)&&!!this.width&&!!this.height&&(!(0,d.isPowerOfTwo)(this.width)||!(0,d.isPowerOfTwo)(this.height))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===h.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}}),u("7D42f",function(e,n){t(e.exports,"TEXTURE_FORMATS",()=>i),t(e.exports,"DATA_FORMAT_CHANNELS",()=>o),t(e.exports,"TYPE_SIZES",()=>s),t(e.exports,"isFormatSupported",()=>a),t(e.exports,"isLinearFilteringSupported",()=>u),l("eFBWR");var r=l("dpEr0");let i={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},o={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},s={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function a(t,e){let n=i[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;let o=(0,r.isWebGL2)(t)&&n.gl2||n.gl1;return"string"==typeof o?t.getExtension(o):o}function u(t,e){let n=i[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}}),u("7uJLW",function(e,n){t(e.exports,"loadImage",()=>i);var r=l("8DSly");function i(t,e){return(0,r.assert)("string"==typeof t),t=""+t,new Promise((n,r)=>{try{let i=new Image;i.onload=()=>n(i),i.onerror=()=>r(Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(t){r(t)}})}}),u("i8qYD",function(e,n){t(e.exports,"default",()=>a);var r=l("jXHZc"),i=l("1KAuP");l("eFBWR");var o=l("dpEr0"),s=l("8DSly");class a extends r.default{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){let r=n[e];if(!r)return!1;let i=(0,o.isWebGL2)(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}(t,e,i.default)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:a=0}=t;return(0,s.assert)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==a&&(0,o.isWebGL2)(this.gl)?this.gl.renderbufferStorageMultisample(36161,a,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=a,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*i.default[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}}),u("1KAuP",function(e,n){t(e.exports,"default",()=>i);let r="EXT_color_buffer_float";var i={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:r,bpp:2},33327:{gl2:r,bpp:4},34842:{gl2:r,bpp:8},33326:{gl2:r,bpp:4},33328:{gl2:r,bpp:8},34836:{gl2:r,bpp:16},35898:{gl2:r,bpp:4}}}),u("34dnL",function(e,n){t(e.exports,"clear",()=>a),t(e.exports,"clearBuffer",()=>u),l("eFBWR");var r=l("dpEr0"),i=l("2Eryf"),o=l("8DSly");let s="clear: bad arguments";function a(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:a=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l={};e&&(l.framebuffer=e);let u=0;n&&(u|=16384,!0!==n&&(l.clearColor=n)),r&&(u|=256,!0!==r&&(l.clearDepth=r)),a&&(u|=1024,!0!==r&&(l.clearStencil=r)),(0,o.assert)(0!==u,s),(0,i.withParameters)(t,l,()=>{t.clear(u)})}function u(t){let{framebuffer:e=null,buffer:n=6144,drawBuffer:a=0,value:l=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assertWebGL2Context)(t),(0,i.withParameters)(t,{framebuffer:e},()=>{switch(n){case 6144:switch(l.constructor){case Int32Array:t.clearBufferiv(n,a,l);break;case Uint32Array:t.clearBufferuiv(n,a,l);break;case Float32Array:default:t.clearBufferfv(n,a,l)}break;case 6145:t.clearBufferfv(6145,0,[l]);break;case 6146:t.clearBufferiv(6146,0,[l]);break;case 34041:let[e,r]=l;t.clearBufferfi(34041,0,e,r);break;default:(0,o.assert)(!1,s)}})}}),u("hzwiv",function(e,n){t(e.exports,"readPixelsToArray",()=>f),t(e.exports,"readPixelsToBuffer",()=>p),t(e.exports,"copyToDataUrl",()=>g),t(e.exports,"copyToTexture",()=>m);var r=l("8FSmA"),i=l("67hSA"),o=l("1bl8M");l("eFBWR");var s=l("dpEr0");l("3FPsK");var a=l("2Eryf"),u=l("1rMeO"),c=l("ldBhZ"),d=l("8zbqc"),h=l("8DSly");function f(t){var e,n,r,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{sourceX:s=0,sourceY:a=0,sourceFormat:l=6408}=o,{sourceAttachment:d=36064,target:f=null,sourceWidth:p,sourceHeight:g,sourceType:m}=o,{framebuffer:_,deleteFramebuffer:y}=v(t);(0,h.assert)(_);let{gl:b,handle:x,attachments:E}=_;p=p||_.width,g=g||_.height,36064===d&&null===x&&(d=1028),(0,h.assert)(E[d]),e=f,n=m=m||E[d].type,r=p,i=g,f=e||(n=n||5121,new((0,u.getTypedArrayFromGLType)(n,{clamped:!1}))(r*i*(0,c.glFormatToComponents)(l))),m=m||(0,u.getGLTypeFromTypedArray)(f);let T=b.bindFramebuffer(36160,x);return b.readPixels(s,a,p,g,l,m,f),b.bindFramebuffer(36160,T||null),y&&_.delete(),f}function p(t,e){let{sourceX:n=0,sourceY:i=0,sourceFormat:o=6408,target:l=null,targetByteOffset:u=0,sourceWidth:d,sourceHeight:f,sourceType:p}=e,{framebuffer:g,deleteFramebuffer:m}=v(t);(0,h.assert)(g),d=d||g.width,f=f||g.height;let _=(0,s.assertWebGL2Context)(g.gl);if(p=p||(l?l.type:5121),!l){let t=(0,c.glFormatToComponents)(o),e=(0,c.glTypeToBytes)(p),n=u+d*f*t*e;l=new r.default(_,{byteLength:n,accessor:{type:p,size:t}})}return l.bind({target:35051}),(0,a.withParameters)(_,{framebuffer:g},()=>{_.readPixels(n,i,d,f,o,p,u)}),l.unbind({target:35051}),m&&g.delete(),l}function g(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=f(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=(0,u.scalePixels)({data:r,width:i,height:o}));(0,u.flipRows)({data:r,width:i,height:o});let s=document.createElement("canvas");s.width=i,s.height=o;let a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(r),a.putImageData(l,0,0),s.toDataURL()}function m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{sourceX:r=0,sourceY:i=0,targetMipmaplevel:a=0,targetInternalFormat:l=6408}=n,{targetX:u,targetY:c,targetZ:d,width:f,height:p}=n,{framebuffer:g,deleteFramebuffer:m}=v(t);(0,h.assert)(g);let{gl:_,handle:y}=g,b=void 0!==u||void 0!==c||void 0!==d;u=u||0,c=c||0,d=d||0;let x=_.bindFramebuffer(36160,y);(0,h.assert)(e);let E=null;if(e instanceof o.default&&(E=e,f=Number.isFinite(f)?f:E.width,p=Number.isFinite(p)?p:E.height,E.bind(0),e=E.target),b)switch(e){case 3553:case 34067:_.copyTexSubImage2D(e,a,u,c,r,i,f,p);break;case 35866:case 32879:(0,s.assertWebGL2Context)(_).copyTexSubImage3D(e,a,u,c,d,r,i,f,p)}else _.copyTexImage2D(e,a,l,r,i,f,p,0);return E&&E.unbind(),_.bindFramebuffer(36160,x||null),m&&g.delete(),E}function v(t){return t instanceof i.default?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:(0,d.toFramebuffer)(t),deleteFramebuffer:!0}}}),u("ldBhZ",function(e,n){t(e.exports,"glFormatToComponents",()=>i),t(e.exports,"glTypeToBytes",()=>o);var r=l("8DSly");function i(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,r.assert)(!1),0}}function o(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,r.assert)(!1),0}}}),u("8zbqc",function(e,n){t(e.exports,"cloneTextureFrom",()=>u),t(e.exports,"toFramebuffer",()=>c);var r=l("35qVw"),i=l("5FCdj"),o=l("01H3k"),s=l("67hSA"),a=l("8DSly");function u(t,e){(0,a.assert)(t instanceof r.default||t instanceof i.default||t instanceof o.default);let n=t.constructor,{gl:s,width:l,height:u,format:c,type:d,dataFormat:h,border:f,mipmaps:p}=t;return new n(s,Object.assign({width:l,height:u,format:c,type:d,dataFormat:h,border:f,mipmaps:p},e))}function c(t,e){let{gl:n,width:r,height:i,id:o}=t;return new s.default(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}}),u("5FCdj",function(e,n){t(e.exports,"default",()=>a),l("eFBWR");var r=l("dpEr0"),i=l("3FPsK"),o=l("1bl8M");let s=[34069,34070,34071,34072,34073,34074];class a extends o.default{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assertWebGLContext)(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:n,pixels:r,data:o,border:a=0,format:l=6408,type:u=5121}=t,{gl:c}=this,d=r||o,h=await Promise.all(s.map(t=>{let e=d[t];return Promise.all(Array.isArray(e)?e:[e])}));this.bind(),s.forEach((t,r)=>{h[r].length>1&&!1!==this.opts.mipmaps&&(0,i.log).warn("".concat(this.id," has mipmap and multiple LODs."))(),h[r].forEach((r,i)=>{e&&n?c.texImage2D(t,i,l,e,n,a,l,u,r):c.texImage2D(t,i,l,l,u,r)})}),this.unbind()}setImageDataForFace(t){let{face:e,width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=t,{gl:u}=this,c=i||o;return this.bind(),c instanceof Promise?c.then(n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n}))):this.width||this.height?u.texImage2D(e,0,a,n,r,s,a,l,c):u.texImage2D(e,0,a,a,l,c),this}}a.FACES=s}),u("01H3k",function(e,n){t(e.exports,"default",()=>u),l("eFBWR");var r=l("dpEr0"),i=l("2Eryf"),o=l("1bl8M"),s=l("7D42f"),a=l("8FSmA");class u extends o.default{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return(0,r.isWebGL2)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assertWebGL2Context)(t),super(t,e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1})),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:r,height:o,depth:l=1,border:u=0,format:c,type:d=5121,offset:h=0,data:f,parameters:p={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,i.withParameters)(this.gl,p,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,e,n,r,o,l,u,c,d,f),f instanceof a.default&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,e,n,r,o,l,u,c,d,h))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{let t=s.DATA_FORMAT_CHANNELS[this.dataFormat]||4,e=s.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}}),u("bF9op",function(e,n){t(e.exports,"hasFeature",()=>a),t(e.exports,"hasFeatures",()=>u),t(e.exports,"getFeatures",()=>c);var r=l("9bhog");l("eFBWR");var i=l("dpEr0"),o=l("3FPsK"),s=l("8DSly");function a(t,e){return u(t,e)}function u(t,e){return(e=Array.isArray(e)?e:[e]).every(e=>d(t,e))}function c(t){for(let e in t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},r.default)void 0===t.luma.caps[e]&&(t.luma.caps[e]=d(t,e));return t.luma.caps}function d(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){let n;let o=r.default[e];(0,s.assert)(o,e);let a=(0,i.isWebGL2)(t)&&o[1]||o[0];if("function"==typeof a)n=a(t);else if(Array.isArray(a))for(let e of(n=!0,a))n=n&&!!t.getExtension(e);else"string"==typeof a?n=!!t.getExtension(a):"boolean"==typeof a?n=a:(0,s.assert)(!1);return n}(t,e)),t.luma.caps[e]||(0,o.log).log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}}),u("5WwHs",function(e,n){t(e.exports,"default",()=>i);var r=l("2qeFG");class i{constructor(t,e){(0,r.default)(this,"opts",void 0),(0,r.default)(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){let t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];let{value:n}=this.source,{size:r}=e,i=n;if(n&&n.length!==r){i=new Float32Array(r);let t=e.elementOffset||0;for(let e=0;e<r;++e)i[e]=n[t+e]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}}),u("loKsI",function(e,n){t(e.exports,"glArrayFromType",()=>r);function r(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw Error("Unknown GL type")}}}),u("kSmYn",function(e,n){t(e.exports,"default",()=>i);var r=l("2qeFG"),i=new class{constructor(t={}){(0,r.default)(this,"_pool",[]),(0,r.default)(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,{size:n=1,type:r,padding:i=0,copy:o=!1,initialize:s=!1,maxCount:a}){let l=r||t&&t.constructor||Float32Array,u=e*n+i;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new l(t.buffer,0,u)}let c=1/0;a&&(c=a*n+i);let d=this._allocate(l,u,s,c);return t&&o?d.set(t):s||d.fill(0,0,4),this._release(t),d}release(t){this._release(t)}_allocate(t,e,n,r){let i=Math.max(Math.ceil(e*this.opts.overAlloc),1);i>r&&(i=r);let o=this._pool,s=t.BYTES_PER_ELEMENT*i,a=o.findIndex(t=>t.byteLength>=s);if(a>=0){let e=new t(o.splice(a,1)[0],0,i);return n&&e.fill(0),e}return new t(i)}_release(t){if(!ArrayBuffer.isView(t))return;let e=this._pool,{buffer:n}=t,{byteLength:r}=n,i=e.findIndex(t=>t.byteLength>=r);i<0?e.push(n):(i>0||e.length<this.opts.poolSize)&&e.splice(i,0,n),e.length>this.opts.poolSize&&e.shift()}}}),u("jmseR",function(e,n){let r;t(e.exports,"createMat4",()=>s),t(e.exports,"mod",()=>a),t(e.exports,"getCameraPosition",()=>u),t(e.exports,"getFrustumPlanes",()=>c),t(e.exports,"fp64LowPart",()=>f),t(e.exports,"toDoublePrecisionArray",()=>p),t(e.exports,"mergeBounds",()=>g);var i=l("kSmYn"),o=l("iNLNk");function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function a(t,e){let n=t%e;return n<0?e+n:n}function u(t){return[t[12],t[13],t[14]]}function c(t){return{left:h(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:h(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:h(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:h(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:h(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:h(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}let d=new o.default;function h(t,e,n,r){d.set(t,e,n);let i=d.len();return{distance:r/i,normal:new o.default(-t/i,-e/i,-n/i)}}function f(t){return t-Math.fround(t)}function p(t,e){let{size:n=1,startIndex:o=0}=e,s=void 0!==e.endIndex?e.endIndex:t.length,a=(s-o)/n;r=(0,i.default).allocate(r,a,{type:Float32Array,size:2*n});let l=o,u=0;for(;l<s;){for(let e=0;e<n;e++){let i=t[l++];r[u+e]=i,r[u+e+n]=f(i)}u+=2*n}return r.subarray(0,a*n*2)}function g(t){let e=null,n=!1;for(let r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}}),u("iNLNk",function(e,n){let r;t(e.exports,"default",()=>d);var i=l("8X6Na"),o=l("a0auE"),s=l("esRzZ"),a=l("4iX2G"),u=l("3F3qn");let c=[0,0,0];class d extends i.default{static get ZERO(){return r||Object.freeze(r=new d(0,0,0)),r}constructor(t=0,e=0,n=0){super(-0,-0,-0),1==arguments.length&&(0,o.isArray)(t)?this.copy(t):(o.config.debug&&((0,s.checkNumber)(t),(0,s.checkNumber)(e),(0,s.checkNumber)(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return o.config.debug&&((0,s.checkNumber)(t.x),(0,s.checkNumber)(t.y),(0,s.checkNumber)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,s.checkNumber)(t)}angle(t){return a.angle(this,t)}cross(t){return a.cross(this,this,t),this.check()}rotateX({radians:t,origin:e=c}){return a.rotateX(this,this,e,t),this.check()}rotateY({radians:t,origin:e=c}){return a.rotateY(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=c}){return a.rotateZ(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return a.transformMat4(this,this,t),this.check()}transformAsVector(t){return(0,u.vec3_transformMat4AsVector)(this,this,t),this.check()}transformByMatrix3(t){return a.transformMat3(this,this,t),this.check()}transformByMatrix2(t){return(0,u.vec3_transformMat2)(this,this,t),this.check()}transformByQuaternion(t){return a.transformQuat(this,this,t),this.check()}}}),u("8X6Na",function(e,n){t(e.exports,"default",()=>s);var r=l("cuOSU"),i=l("esRzZ"),o=l("l7ge7");class s extends r.default{get x(){return this[0]}set x(t){this[0]=(0,i.checkNumber)(t)}get y(){return this[1]}set y(t){this[1]=(0,i.checkNumber)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){let r=this[n]-t[n];e+=r*r}return(0,i.checkNumber)(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return(0,i.checkNumber)(e)}normalize(){let t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(let e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(let e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return(0,o.default)(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,i.checkNumber)(this[t])}setComponent(t,e){return(0,o.default)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}}),u("cuOSU",function(e,n){t(e.exports,"default",()=>o);var r=l("a0auE");function i(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class o extends i(Array){clone(){return new this.constructor().copy(this)}fromArray(t,e=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(t=[],e=0){for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:(0,r.isArray)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(r.config)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+(0,r.formatValue)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,r.equals)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){let i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(...t){for(let e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(let e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(r.config.debug&&!this.validate())throw Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}}),u("a0auE",function(e,n){t(e.exports,"config",()=>o),t(e.exports,"formatValue",()=>s),t(e.exports,"isArray",()=>a),t(e.exports,"radians",()=>u),t(e.exports,"degrees",()=>c),t(e.exports,"clamp",()=>d),t(e.exports,"lerp",()=>function t(e,n,r){return a(e)?e.map((e,i)=>t(e,n[i],r)):r*n+(1-r)*e}),t(e.exports,"equals",()=>function t(e,n,r){let i=o.EPSILON;r&&(o.EPSILON=r);try{if(e===n)return!0;if(a(e)&&a(n)){if(e.length!==n.length)return!1;for(let r=0;r<e.length;++r)if(!t(e[r],n[r]))return!1;return!0}if(e&&e.equals)return e.equals(n);if(n&&n.equals)return n.equals(e);if("number"==typeof e&&"number"==typeof n)return Math.abs(e-n)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(n));return!1}finally{o.EPSILON=i}}),l("l7ge7");let r=1/Math.PI*180,i=1/180*Math.PI,o={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function s(t,{precision:e=o.precision}={}){return t=Math.round(t/o.EPSILON)*o.EPSILON,"".concat(parseFloat(t.toPrecision(e)))}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u(t,e){return h(t,t=>t*i,e)}function c(t,e){return h(t,t=>t*r,e)}function d(t,e,n){return h(t,t=>Math.max(e,Math.min(n,t)))}function h(t,e,n){if(a(t)){n=n||(t.clone?t.clone():Array(t.length));for(let r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}}),u("l7ge7",function(e,n){t(e.exports,"default",()=>r);function r(t,e){if(!t)throw Error("math.gl assertion ".concat(e))}}),u("esRzZ",function(e,n){t(e.exports,"checkNumber",()=>i),t(e.exports,"checkVector",()=>o);var r=l("a0auE");function i(t){if(!Number.isFinite(t))throw Error("Invalid number ".concat(t));return t}function o(t,e,n=""){if(r.config.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}}),u("4iX2G",function(e,n){t(e.exports,"length",()=>o),t(e.exports,"add",()=>s),t(e.exports,"negate",()=>a),t(e.exports,"cross",()=>u),t(e.exports,"lerp",()=>c),t(e.exports,"transformMat4",()=>d),t(e.exports,"transformMat3",()=>h),t(e.exports,"transformQuat",()=>f),t(e.exports,"rotateX",()=>p),t(e.exports,"rotateY",()=>g),t(e.exports,"rotateZ",()=>m),t(e.exports,"angle",()=>v),t(e.exports,"sub",()=>_),t(e.exports,"mul",()=>y),t(e.exports,"len",()=>b),t(e.exports,"sqrLen",()=>x);var r,i=l("7EJz5");function o(t){return Math.hypot(t[0],t[1],t[2])}function s(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function a(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function u(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],l=n[2];return t[0]=i*l-o*a,t[1]=o*s-r*l,t[2]=r*a-i*s,t}function c(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t}function d(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function h(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function f(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],l=e[1],u=e[2],c=i*u-o*l,d=o*a-r*u,h=r*l-i*a,f=i*h-o*d,p=o*c-r*h,g=r*d-i*c,m=2*s;return c*=m,d*=m,h*=m,f*=2,p*=2,g*=2,t[0]=a+c+f,t[1]=l+d+p,t[2]=u+h+g,t}function p(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function g(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function m(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function v(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+s*s+a*a);return Math.acos(Math.min(Math.max(l&&(t[0]*e[0]+t[1]*e[1]+t[2]*e[2])/l,-1),1))}var _=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},y=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},b=o,x=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r};r=new i.ARRAY_TYPE(3),i.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0)}),u("7EJz5",function(e,n){t(e.exports,"EPSILON",()=>r),t(e.exports,"ARRAY_TYPE",()=>i),t(e.exports,"RANDOM",()=>o);var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})}),u("3F3qn",function(e,n){function r(t,e,n){let r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function i(t,e,n){let r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}function o(t,e,n){let r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}t(e.exports,"vec2_transformMat4AsVector",()=>r),t(e.exports,"vec3_transformMat4AsVector",()=>i),t(e.exports,"vec3_transformMat2",()=>o)}),u("321bC",function(e,n){t(e.exports,"default",()=>r);function r(t,e){if(!t)throw Error(e||"deck.gl: assertion failed.")}}),u("gl1Lh",function(e,n){t(e.exports,"createIterable",()=>o),t(e.exports,"isAsyncIterable",()=>s),t(e.exports,"getAccessorFromBuffer",()=>a);let r=[],i=[];function o(t,e=0,n=1/0){let s=r,a={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?s=t:t.length>0&&(i.length=t.length,s=i):s=r,(e>0||Number.isFinite(n))&&(s=(Array.isArray(s)?s:Array.from(s)).slice(e,n),a.index=e-1),{iterable:s,objectInfo:a}}function s(t){return t&&t[Symbol.asyncIterator]}function a(t,e){let{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,u=i?i/a:0,c=Math.floor((t.length-u)/l);return(e,{index:r,target:i})=>{let a;if(!o){let e=r*l+u;for(let r=0;r<n;r++)i[r]=t[e+r];return i}let d=o[r],h=o[r+1]||c;if(s){a=Array(h-d);for(let e=d;e<h;e++){let r=e*l+u;i=Array(n);for(let e=0;e<n;e++)i[e]=t[r+e];a[e-d]=i}}else if(l===n)a=t.subarray(d*n+u,h*n+u);else{a=new t.constructor((h-d)*n);let e=0;for(let r=d;r<h;r++){let i=r*l+u;for(let r=0;r<n;r++)a[e++]=t[i+r]}}return a}}}),u("3tWMN",function(e,n){function r(t,e=()=>!0){return Array.isArray(t)?function t(e,n,r){let i=-1;for(;++i<e.length;){let o=e[i];Array.isArray(o)?t(o,n,r):n(o)&&r.push(o)}return r}(t,e,[]):e(t)?[t]:[]}function i({target:t,source:e,start:n=0,count:r=1}){let i=e.length,o=r*i,s=0;for(let r=n;s<i;s++)t[r++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}t(e.exports,"flatten",()=>r),t(e.exports,"fillArray",()=>i)}),u("jUTxc",function(e,n){t(e.exports,"EMPTY",()=>r),t(e.exports,"FULL",()=>i),t(e.exports,"add",()=>o);let r=[],i=[[0,1/0]];function o(t,e){if(t===i||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;let n=[],r=t.length,o=0;for(let i=0;i<r;i++){let r=t[i];r[1]<e[0]?(n.push(r),o=i+1):r[0]>e[1]?n.push(r):e=[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}return n.splice(o,0,e),n}}),u("hWH11",function(e,n){t(e.exports,"normalizeTransitionSettings",()=>o),t(e.exports,"getSourceBufferAttribute",()=>s),t(e.exports,"getAttributeTypeFromSize",()=>a),t(e.exports,"cycleBuffers",()=>u),t(e.exports,"getAttributeBufferLength",()=>c),t(e.exports,"padBuffer",()=>d);var r=l("oCxmy");let i={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function o(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});let n=t.type||"interpolation";return{...i[n],...e,...t,type:n}}function s(t,e){let n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function a(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw Error('No defined attribute type for size "'.concat(t,'"'))}}function u(t){t.push(t.shift())}function c(t,e){let{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function d({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:o,getData:s=t=>t}){let a=n.doublePrecision&&n.value instanceof Float64Array?2:1,l=n.size*a,u=n.byteOffset,d=n.startIndices,h=o&&d,f=c(n,e),p=n.isConstant;if(!h&&i>=f)return;let g=p?n.value:n.getBuffer().getData({srcByteOffset:u});if(n.settings.normalized&&!p){let t=s;s=(e,r)=>n.normalizeConstant(t(e,r))}let m=p?(t,e)=>s(g,e):(t,e)=>s(g.subarray(t,t+l),e),v=t.getData({length:i}),_=new Float32Array(f);(0,r.padArray)({source:v,target:_,sourceStartIndices:o,targetStartIndices:d,size:l,getData:m}),t.byteLength<_.byteLength+u&&t.reallocate(_.byteLength+u),t.subData({data:_,offset:u})}}),u("oCxmy",function(e,n){function r(t){let{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,l=s-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!o)return;let u=a;for(;u<l;){let t=o(u,e);for(let e=0;e<i;e++)n[r+u]=t[e]||0,u++}}function i({source:t,target:e,size:n,getData:i,sourceStartIndices:o,targetStartIndices:s}){if(!Array.isArray(s))return r({source:t,target:e,size:n,getData:i}),e;let a=0,l=0,u=i&&((t,e)=>i(t+l,e)),c=Math.min(o.length,s.length);for(let i=1;i<c;i++){let c=o[i]*n,d=s[i]*n;r({source:t.subarray(a,c),target:e,start:l,end:d,size:n,getData:u}),a=c,l=d}return l<e.length&&r({source:[],target:e,start:l,size:n,getData:u}),e}t(e.exports,"padArray",()=>i)}),u("cB0Rj",function(e,n){t(e.exports,"default",()=>r);function r(t){let e,n={};return r=>{for(let i in r)if(!function(t,e){if(t===e)return!0;if(Array.isArray(t)){let n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}(r[i],n[i])){e=t(r),n=r;break}return e}}}),u("dSHHv",function(e,n){t(e.exports,"register",()=>o),t(e.exports,"default",()=>s);var r=l("i5wGC");let i={};function o(t){i=t}function s(t,e,n,o){r.default.level>0&&i[t]&&i[t].call(null,e,n,o)}}),u("9Ui0t",function(e,n){t(e.exports,"default",()=>c);var r=l("2qeFG"),i=l("jIwbZ"),o=l("2lw07"),s=l("3WmlI"),a=l("i5wGC");let u={interpolation:o.default,spring:s.default};class c{constructor(t,{id:e,timeline:n}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"isSupported",void 0),(0,r.default)(this,"gl",void 0),(0,r.default)(this,"timeline",void 0),(0,r.default)(this,"transitions",void 0),(0,r.default)(this,"needsRedraw",void 0),(0,r.default)(this,"numInstances",void 0),this.id=e,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=(0,i.default).isSupported(t)}finalize(){for(let t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:e,numInstances:n}){for(let r in this.numInstances=n||1,t){let n=t[r],i=n.getTransitionSetting(e);i&&this._updateAttribute(r,n,i)}for(let n in this.transitions){let r=t[n];r&&r.getTransitionSetting(e)||this._removeTransition(n)}}hasAttribute(t){let e=this.transitions[t];return e&&e.inProgress}getAttributes(){let t={};for(let e in this.transitions){let n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(let t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);let t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){let r=this.transitions[t],i=!r||r.type!==n.type;if(i){if(!this.isSupported){(0,a.default).warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}r&&this._removeTransition(t);let o=u[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):((0,a.default).error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}}),u("jIwbZ",function(e,n){t(e.exports,"default",()=>h);var r=l("daF7X"),i=l("hHPy7"),o=l("c0YiG");l("eFBWR");var s=l("dpEr0"),a=l("8DSly"),u=l("gjB7X"),c=l("6uUH7"),d=l("i9o5q");class h{static isSupported(t){return(0,s.isWebGL2)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){let{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;for(let e of[this.bufferTransform,this.textureTransform].filter(Boolean))t=t||e.swap();(0,a.assert)(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let e of[this.bufferTransform,this.textureTransform].filter(Boolean)){let n=e.getData(t);if(n)return n}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let e of("elementCount"in t&&this.model.setVertexCount(t.elementCount),[this.bufferTransform,this.textureTransform].filter(Boolean)))e.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new d.default(e,Object.assign({},t,{fs:t.fs||(0,r.getPassthroughFS)({version:(0,u.default)(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);for(let t of[this.bufferTransform,this.textureTransform].filter(Boolean))e=t.updateModelProps(e);return e}_buildResourceTransforms(t,e){(0,c.isObjectEmpty)(e.feedbackBuffers)&&(0,c.isObjectEmpty)(e.feedbackMap)&&(!e.varyings||!(e.varyings.length>0))||(this.bufferTransform=new i.default(t,e)),(!(0,c.isObjectEmpty)(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)&&(this.textureTransform=new o.default(t,e)),(0,a.assert)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);for(let t of[this.bufferTransform,this.textureTransform].filter(Boolean))e=Object.assign(e,t.getDrawOptions(e));return e}}}),u("daF7X",function(e,n){t(e.exports,"getQualifierDetails",()=>s),t(e.exports,"getPassthroughFS",()=>a),t(e.exports,"typeToChannelSuffix",()=>u),t(e.exports,"typeToChannelCount",()=>c);var r=l("g13Ak");let i="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",o="#version 300 es\n".concat(i);function s(t,e){e=Array.isArray(e)?e:[e];let[n,r,i]=t.replace(/^\s+/,"").split(/\s+/);return e.includes(n)&&r&&i?{qualifier:n,type:r,name:i.split(";")[0]}:null}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{version:e=100,input:n,inputType:s,output:a}=t;if(!n)return 300===e?o:e>300?"#version ".concat(e,"\n").concat(i):"void main() {gl_FragColor = vec4(0);}";let l=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return(0,r.default)(!1),null}}(n,s);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(s," ").concat(n,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(l,";\n}"):"varying ".concat(s," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(l,";\n}")}function u(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,r.default)(!1),null}}function c(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,r.default)(!1),null}}}),u("g13Ak",function(e,n){t(e.exports,"default",()=>r);function r(t,e){if(!t)throw Error(e||"shadertools: assertion failed.")}}),u("hHPy7",function(e,n){t(e.exports,"default",()=>a),l("eFBWR");var r=l("dpEr0"),i=l("8DSly"),o=l("8FSmA"),s=l("aSEg7");class a{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(let e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sourceBuffers:e,transformFeedback:n}=this.bindings[this.currentIndex];return{attributes:Object.assign({},e,t.attributes),transformFeedback:n}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){let{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof o.default?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(let t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&(0,i.assert)((0,r.isWebGL2)(this.gl))}_getFeedbackBuffers(t){let{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(let t in this.feedbackMap){let r=this.feedbackMap[t];t in e&&(n[r]=t)}for(let r in Object.assign(n,t.feedbackBuffers),n){let t=n[r];if("string"==typeof t){let{byteLength:i,usage:o,accessor:s}=e[t];n[r]=this._createNewBuffer(r,{byteLength:i,usage:o,accessor:s})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);let n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e,{program:r}=n;t.transformFeedback=new s.default(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){let{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;let e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(let r in this.feedbackMap){let s=this.feedbackMap[r];e[r]=t.feedbackBuffers[s],n[s]=t.sourceBuffers[r],(0,i.assert)(n[s]instanceof o.default)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){let n=new o.default(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}}),u("aSEg7",function(e,n){t(e.exports,"default",()=>u),l("eFBWR");var r=l("dpEr0"),i=l("3FPsK"),o=l("jXHZc"),s=l("8FSmA"),a=l("6uUH7");class u extends o.default{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return(0,r.isWebGL2)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assertWebGL2Context)(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,a.isObjectEmpty)(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(let e in t)this.setBuffer(e,t[e])}),this}setBuffer(t,e){let n=this._getVaryingIndex(t),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(e);return n<0?(this.unused[t]=r,(0,i.log).warn("".concat(this.id," unused varying buffer ").concat(t))()):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,r,s,o)),this}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof s.default==!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,(void 0!==e||void 0!==n)&&(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;let e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(let t in this.buffers){let{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(let t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}}),u("c0YiG",function(e,n){t(e.exports,"default",()=>g);var r=l("8FSmA"),i=l("8zbqc"),o=l("67hSA"),s=l("gjB7X"),a=l("hzwiv"),u=l("35qVw"),c=l("4BA8l"),d=l("6D1Bz"),h=l("daF7X"),f=l("lvWM4");let p={10241:9728,10240:9728,10242:33071,10243:33071};class g{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),s=Object.assign({},t.uniforms),a=Object.assign({},t.parameters),l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(let t in o.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){let e=this.samplerTextureMap[t];s[t]=n[e]}this._setSourceTextureParameters(),Object.assign(s,(0,f.getSizeUniforms)({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}))}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:s,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){let{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{framebuffer:e}=this.bindings[this.currentIndex],n=(0,a.readPixelsToArray)(e);if(!t)return n;let r=n.constructor,i=(0,h.typeToChannelCount)(this.targetTextureType),o=new r(n.length*i/4),s=0;for(let t=0;t<n.length;t+=4)for(let e=0;e<i;e++)o[s++]=n[t+e];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){let{sourceTextures:e,textureOrReference:n}=t;if(n instanceof u.default)return n;let r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!=typeof t||this.elementCount>=t)return;let e=new Float32Array(t);e.forEach((t,e,n)=>{n[e]=e}),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new r.default(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){let{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){let{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;let{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new o.default(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){let t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(let t in e)e[t].setParameters(p)}_swapTextures(t){if(!this._swapTexture)return null;let e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){let e=(0,i.cloneTextureFrom)(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:a,samplerTextureMap:l}=(0,f.updateForTextures)({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=(0,d.combineInjects)([t.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;let p=t._fs||(0,h.getPassthroughFS)({version:(0,s.default)(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"});return{vs:r,fs:p,modules:this.hasSourceTextures||this.targetTextureVarying?[(0,c.transform)].concat(t.modules||[]):t.modules,uniforms:i,inject:u}}}}),u("gjB7X",function(e,n){t(e.exports,"default",()=>r);function r(t){let e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){let t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}}),u("4BA8l",function(e,n){t(e.exports,"transform",()=>r);let r={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null}}),u("6D1Bz",function(e,n){t(e.exports,"DECLARATION_INJECT_MARKER",()=>a),t(e.exports,"default",()=>h),t(e.exports,"combineInjects",()=>f);var r=l("dKiSN"),i=l("78Hcm"),o=l("g13Ak");let s={[i.VERTEX_SHADER]:r.MODULE_INJECTORS_VS,[i.FRAGMENT_SHADER]:r.MODULE_INJECTORS_FS},a="__LUMA_INJECT_DECLARATIONS__",u=/void\s+main\s*\([^)]*\)\s*\{\n?/,c=/}\n?[^{}]*$/,d=[];function h(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e===i.VERTEX_SHADER;for(let e in n){let r=n[e];r.sort((t,e)=>t.order-e.order),d.length=r.length;for(let t=0,e=r.length;t<e;++t)d[t]=r[t].injection;let i="".concat(d.join("\n"),"\n");switch(e){case"vs:#decl":o&&(t=t.replace(a,i));break;case"vs:#main-start":o&&(t=t.replace(u,t=>t+i));break;case"vs:#main-end":o&&(t=t.replace(c,t=>i+t));break;case"fs:#decl":o||(t=t.replace(a,i));break;case"fs:#main-start":o||(t=t.replace(u,t=>t+i));break;case"fs:#main-end":o||(t=t.replace(c,t=>i+t));break;default:t=t.replace(e,t=>t+i)}}return t=t.replace(a,""),r&&(t=t.replace(/\}\s*$/,t=>t+s[e])),t}function f(t){let e={};return(0,o.default)(Array.isArray(t)&&t.length>1),t.forEach(t=>{for(let n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]}),e}}),u("dKiSN",function(e,n){t(e.exports,"MODULE_INJECTORS_VS",()=>r),t(e.exports,"MODULE_INJECTORS_FS",()=>i);let r="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",i="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"}),u("78Hcm",function(e,n){t(e.exports,"VERTEX_SHADER",()=>r),t(e.exports,"FRAGMENT_SHADER",()=>i);let r="vs",i="fs"}),u("lvWM4",function(e,n){t(e.exports,"updateForTextures",()=>u),t(e.exports,"getSizeUniforms",()=>c);var r=l("8DSly"),i=l("6D1Bz"),o=l("daF7X");let s="transform_uSize_",a="transform_position";function u(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:l,targetTexture:u}=t,c=Object.keys(n).length,d=null,h={},f=e,p={};if(c>0||l){let t=f.split("\n"),e=t.slice();if(t.forEach((t,r,a)=>{if(c>0){let a=function(t,e){let n={},r=(0,o.getQualifierDetails)(t,["attribute","in"]);if(!r)return null;let{type:i,name:a}=r;if(a&&e[a]){let e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:l,uniformDeclerations:u}=function(t){let e="".concat("transform_uSampler_").concat(t),n="".concat(s).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(a),c=(0,o.typeToChannelSuffix)(i),d="  ".concat(i," ").concat(a," = transform_getInput(").concat(r,", ").concat(l,").").concat(c,";\n");return n[r]=a,{updatedLine:e,inject:{"vs:#decl":u,"vs:#main-start":d},samplerTextureMap:n}}return null}(t,n);if(a){let{updatedLine:t,inject:n}=a;e[r]=t,p=(0,i.combineInjects)([p,n]),Object.assign(h,a.samplerTextureMap),c--}}l&&!d&&(d=function(t,e){let n=(0,o.getQualifierDetails)(t,["varying","out"]);return n&&n.name===e?n.type:null}(t,l))}),l){(0,r.assert)(u);let t="".concat(s).concat(l),e="     vec2 ".concat(a," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(a,", 0, 1.);\n");p=(0,i.combineInjects)([p,{"vs:#decl":"uniform vec2 ".concat(t,";\n"),"vs:#main-start":e}])}f=e.join("\n")}return{vs:f,targetTextureType:d,inject:p,samplerTextureMap:h}}function c(t){let e,n,{sourceTextureMap:r,targetTextureVarying:i,targetTexture:o}=t,a={};for(let t in i&&({width:e,height:n}=o,a["".concat(s).concat(i)]=[e,n]),r)({width:e,height:n}=r[t]),a["".concat(s).concat(t)]=[e,n];return a}}),u("i9o5q",function(e,n){t(e.exports,"default",()=>b),l("eFBWR");var r=l("dpEr0"),i=l("j7nLR"),o=l("8DSly"),s=l("8FSmA"),a=l("34dnL"),u=l("938IP"),c=l("527Jb"),d=l("9FcVX"),h=l("6uUH7");l("eFBWR");var f=l("3FPsK"),p=l("fFgiT"),g=l("aSEg7"),m=l("iqQfp"),v=l("78kBf");let _=()=>{},y={};class b{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{id:n=(0,h.uid)("model")}=e;(0,o.assert)((0,r.isWebGL)(t)),this.id=n,this.gl=t,this.id=e.id||(0,h.uid)("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||(0,i.default).getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;let{program:e=null,vs:n,fs:r,modules:s,defines:a,inject:l,varyings:u,bufferMode:c,transpileToGLSL100:d}=t;this.programProps={program:e,vs:n,fs:r,modules:s,defines:a,inject:l,varyings:u,bufferMode:c,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},(0,o.assert)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(let t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){let{program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:u}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return(0,o.assert)(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return(0,o.assert)(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=(0,v.getBuffersFromGeometry)(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,h.isObjectEmpty)(t))return this;let e={};for(let n in t){let r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();let e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){let e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return(0,a.clear)(this.program.gl,t),this}draw(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();let{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(i),f.log.priority>=2&&(t=this._logDrawCallStart(2));let u=this.vertexArray.getDrawParams(),{isIndexed:c=u.isIndexed,indexType:d=u.indexType,indexOffset:h=u.indexOffset,vertexArrayInstanced:p=u.isInstanced}=this.props;p&&!this.isInstanced&&(0,f.log).warn("Found instanced attributes on non-instanced model",this.id)();let{isInstanced:g,instanceCount:m}=this,{onBeforeRender:v=_,onAfterRender:b=_}=this.props;v(),this.program.setUniforms(this.uniforms);let x=this.program.draw(Object.assign(y,e,{logPriority:t,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:s,isIndexed:c,indexType:d,isInstanced:g,instanceCount:m,offset:c?h:0}));return b(),f.log.priority>=2&&this._logDrawCallEnd(t,l,r),x}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t,{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach(t=>t.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach(t=>t.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.log).warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{let{vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}(0,o.assert)(t instanceof p.default,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new m.default(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(let t in this.geometryBuffers){let e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof s.default&&e.delete()}}_setAnimationProps(t){this.animated&&(0,o.assert)(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,h.isObjectEmpty)(t))return this;let{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new g.default(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){if(!(Date.now()-this.lastLogTime<(t>3?0:1e4)))return this.lastLogTime=Date.now(),(0,f.log).group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:f.log.level<=2})(),t}_logDrawCallEnd(t,e,n,r){if(void 0===t)return;let i=(0,d.getDebugTableForVertexArray)({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=(0,c.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:h}=(0,c.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});h>0&&(0,f.log).log("MISSING UNIFORMS",Object.keys(l))(),a>0&&(0,f.log).log("UNUSED UNIFORMS",Object.keys(s))();let p=(0,u.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);(0,f.log).table(t,i)(),(0,f.log).table(t,o)(),(0,f.log).table(t+1,p)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),(0,f.log).groupEnd(2)()}}}),u("j7nLR",function(e,n){t(e.exports,"default",()=>o);var r=l("dMivk"),i=l("fFgiT");class o{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new o(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(e=>e.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){let e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter(t=>t.name!==e),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{vs:e="",fs:n="",defines:o={},inject:s={},varyings:a=[],bufferMode:l=35981,transpileToGLSL100:u=!1}=t,c=this._getModuleList(t.modules),d=this._getHash(e),h=this._getHash(n),f=c.map(t=>this._getHash(t.name)).sort(),p=a.map(t=>this._getHash(t)),g=Object.keys(o).sort(),m=Object.keys(s).sort(),v=[],_=[];for(let t of g)v.push(this._getHash(t)),v.push(this._getHash(o[t]));for(let t of m)_.push(this._getHash(t)),_.push(this._getHash(s[t]));let y="".concat(d,"/").concat(h,"D").concat(v.join("/"),"M").concat(f.join("/"),"I").concat(_.join("/"),"V").concat(p.join("/"),"H").concat(this.stateHash,"B").concat(l).concat(u?"T":"");if(!this._programCache[y]){let t=(0,r.assembleShaders)(this.gl,{vs:e,fs:n,modules:c,inject:s,defines:o,hookFunctions:this._hookFunctions,transpileToGLSL100:u});this._programCache[y]=new i.default(this.gl,{hash:y,vs:t.vs,fs:t.fs,varyings:a,bufferMode:l}),this._getUniforms[y]=t.getUniforms||(t=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){let e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=Array(this._defaultModules.length+t.length),n={},r=0;for(let t=0,i=this._defaultModules.length;t<i;++t){let i=this._defaultModules[t],o=i.name;e[r++]=i,n[o]=!0}for(let i=0,o=t.length;i<o;++i){let o=t[i],s=o.name;n[s]||(e[r++]=o,n[s]=!0)}return e.length=r,e}}}),u("dMivk",function(e,n){t(e.exports,"assembleShaders",()=>h);var r=l("78Hcm"),i=l("hMfAX"),o=l("1Yj9C"),s=l("6D1Bz"),a=l("eI5f0"),u=l("g13Ak");let c="\n\n".concat(s.DECLARATION_INJECT_MARKER,"\n\n"),d={[r.VERTEX_SHADER]:"vertex",[r.FRAGMENT_SHADER]:"fragment"};function h(t,e){let{vs:n,fs:o}=e,s=(0,i.resolveModules)(e.modules||[]);return{gl:t,vs:f(t,Object.assign({},e,{source:n,type:r.VERTEX_SHADER,modules:s})),fs:f(t,Object.assign({},e,{source:o,type:r.FRAGMENT_SHADER,modules:s})),getUniforms:function(t){let e={};for(let n of s){let r=n.getUniforms(t,e);Object.assign(e,r)}return e}}}function f(t,e){let{id:n,source:i,type:l,modules:h,defines:f={},hookFunctions:p=[],inject:g={},transpileToGLSL100:m=!1,prologue:v=!0,log:_}=e;(0,u.default)("string"==typeof i,"shader source must be a string");let y=l===r.VERTEX_SHADER,b=i.split("\n"),x=100,E="",T=i;0===b[0].indexOf("#version ")?(x=300,E=b[0],T=b.slice(1).join("\n")):E="#version ".concat(x);let S={};h.forEach(t=>{Object.assign(S,t.getDefines())}),Object.assign(S,f);let A=v?"".concat(E,"\n").concat(function(t){let{id:e,source:n,type:r}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(d[r],"\n\n"):""}({id:n,source:i,type:l}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(d[e].toUpperCase(),"\n")}({type:l}),"\n").concat((0,o.getPlatformShaderDefines)(t),"\n").concat((0,o.getVersionDefines)(t,x,!y),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(let r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;let i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}return 0===e&&(n+="\n"),n}(S),"\n").concat(y?"":"precision highp float;\n\n","\n"):"".concat(E,"\n"),P=function(t){let e={vs:{},fs:{}};return t.forEach(t=>{let n;"string"!=typeof t?t=(n=t).hook:n={};let[r,i]=(t=t.trim()).split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(n,{signature:i})}),e}(p),C={},w={},D={};for(let t in g){let e="string"==typeof g[t]?{injection:g[t],order:0}:g[t],n=t.match(/^(v|f)s:(#)?([\w-]+)$/);if(n){let r=n[2],i=n[3];r?"decl"===i?w[t]=[e]:D[t]=[e]:C[t]=[e]}else D[t]=[e]}for(let t of h){_&&t.checkDeprecations(T,_),A+=t.getModuleSource(l,x);let e=t.injections[l];for(let t in e){let n=t.match(/^(v|f)s:#([\w-]+)$/);if(n){let r="decl"===n[2]?w:D;r[t]=r[t]||[],r[t].push(e[t])}else C[t]=C[t]||[],C[t].push(e[t])}}return A+=c,A=(0,s.default)(A,l,w)+function(t,e){let n="";for(let r in t){let i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){let t=e[r];for(let e of(t.sort((t,e)=>t.order-e.order),t))n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(P[l],C)+T,A=(0,s.default)(A,l,D),A=(0,a.default)(A,m?100:x,y)}}),u("hMfAX",function(e,n){t(e.exports,"resolveModules",()=>o);var r=l("4bnKl"),i=l("g13Ak");function o(t){return function(t){let e={},n={};return function t(e){let{modules:n,level:r,moduleMap:i,moduleDepth:o}=e;if(r>=5)throw Error("Possible loop in shader dependency graph");for(let t of n)i[t.name]=t,(void 0===o[t.name]||o[t.name]<r)&&(o[t.name]=r);for(let e of n)e.dependencies&&t({modules:e.dependencies,level:r+1,moduleMap:i,moduleDepth:o})}({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((t,e)=>n[e]-n[t]).map(t=>e[t])}(function t(e,n){return e.map(e=>(e instanceof r.default||((0,i.default)("string"!=typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),(0,i.default)(e.name,"shader module has no name"),(e=new r.default(e)).dependencies=t(e.dependencies)),e))}(t))}}),u("4bnKl",function(e,n){t(e.exports,"default",()=>o),t(e.exports,"normalizeShaderModule",()=>s);var r=l("g13Ak"),i=l("hZI5c");class o{constructor(t){let{name:e,vs:n,fs:o,dependencies:s=[],uniforms:a,getUniforms:l,deprecations:u=[],defines:c={},inject:d={},vertexShader:h,fragmentShader:f}=t;(0,r.default)("string"==typeof e),this.name=e,this.vs=n||h,this.fs=o||f,this.getModuleUniforms=l,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(u),this.defines=c,this.injections=function(t){let e={vs:{},fs:{}};for(let n in t){let r=t[n];"string"==typeof r&&(r={order:0,injection:r}),e[n.slice(0,2)][n]=r}return e}(d),a&&(this.uniforms=(0,i.parsePropTypes)(a))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:(0,r.default)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(t=>{"function"===t.type?t.regex=new RegExp("\\b".concat(t.old,"\\(")):t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=this.uniforms;for(let i in n){let o=n[i];i in t&&!o.private?(o.validate&&(0,r.default)(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),e[i]=t[i]):e[i]=o.value}return e}}function s(t){if(!t.normalized&&(t.normalized=!0,t.uniforms&&!t.getUniforms)){let e=new o(t);t.getUniforms=e.getUniforms.bind(e)}return t}}),u("hZI5c",function(e,n){t(e.exports,"parsePropTypes",()=>i);let r={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function i(t){let e={};for(let n in t){let i=function(t){let e=o(t);return"object"===e?t?"type"in t?Object.assign({},t,r[t.type]):"value"in t?Object.assign({type:e=o(t.value)},t,r[e]):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},r[e])}(t[n]);e[n]=i}return e}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}}),u("1Yj9C",function(e,n){t(e.exports,"getPlatformShaderDefines",()=>i),t(e.exports,"getVersionDefines",()=>o);var r=l("8e0Ji");function i(t){switch((0,r.getContextInfo)(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function o(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return(0,r.hasFeatures)(t,r.FEATURES.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),(0,r.hasFeatures)(t,r.FEATURES.GLSL_DERIVATIVES)&&(0,r.canCompileGLGSExtension)(t,r.FEATURES.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),(0,r.hasFeatures)(t,r.FEATURES.GLSL_FRAG_DATA)&&(0,r.canCompileGLGSExtension)(t,r.FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),(0,r.hasFeatures)(t,r.FEATURES.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}}),u("8e0Ji",function(e,n){t(e.exports,"FEATURES",()=>s),t(e.exports,"getContextInfo",()=>a),t(e.exports,"canCompileGLGSExtension",()=>c),t(e.exports,"hasFeatures",()=>d);var r=l("b4g6z"),i=l("g13Ak");let o={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},s={};function a(t){let e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:n.match(/NVIDIA/i)||r.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||r.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||r.match(/AMD/i)||n.match(/ATI/i)||r.match(/ATI/i)?"AMD":"UNKNOWN GPU",vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}Object.keys(o).forEach(t=>{s[t]=t});let u={};function c(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=o[e];if((0,i.default)(s,e),!(0,r.default)(n))return!0;if(e in u)return u[e];let a=s[0],l=n.behavior||"enable",c="#extension GL_".concat(a," : ").concat(l,"\nvoid main(void) {}"),d=t.createShader(35633);t.shaderSource(d,c),t.compileShader(d);let h=t.getShaderParameter(d,35713);return t.deleteShader(d),u[e]=h,h}function d(t,e){return(e=Array.isArray(e)?e:[e]).every(e=>(function(t,e){let n=o[e];(0,i.default)(n,e);let r=(!!("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)||!!(t&&2===t._version))&&n[1]||n[0],s="string"==typeof r?!!t.getExtension(r):r;return(0,i.default)(!1===s||!0===s),s})(t,e))}}),u("b4g6z",function(e,n){t(e.exports,"default",()=>r);function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}}),u("eI5f0",function(e,n){function r(t){return RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}t(e.exports,"default",()=>f);let i=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],o=[...i,[r("attribute"),"in $1"],[r("varying"),"out $1"]],s=[...i,[r("varying"),"in $1"]],a=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],l=[...a,[r("in"),"attribute $1"],[r("out"),"varying $1"]],u=[...a,[r("in"),"varying $1"]],c="gl_FragColor",d=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,h=/void\s+main\s*\([^)]*\)\s*\{\n?/;function f(t,e,n){switch(e){case 300:return n?p(t,o):function(t){let e=(t=p(t,s)).match(d);if(e){let n=e[1];t=t.replace(RegExp("\\b".concat(c,"\\b"),"g"),n)}else{let e="fragmentColor";t=t.replace(h,t=>"out vec4 ".concat(e,";\n").concat(t)).replace(RegExp("\\b".concat(c,"\\b"),"g"),e)}return t}(t);case 100:return n?p(t,l):function(t){let e=(t=p(t,u)).match(d);if(e){let n=e[1];t=t.replace(d,"").replace(RegExp("\\b".concat(n,"\\b"),"g"),c)}return t}(t);default:throw Error("unknown GLSL version ".concat(e))}}function p(t,e){for(let[n,r]of e)t=t.replace(n,r);return t}}),u("fFgiT",function(e,n){t(e.exports,"default",()=>_);var r=l("jXHZc"),i=l("1bl8M"),o=l("67hSA"),s=l("cN8lf"),a=l("a9mg8"),u=l("7L1b3");l("eFBWR");var c=l("dpEr0"),d=l("3FPsK"),h=l("2Eryf"),f=l("b5HGu"),p=l("58o6X"),g=l("8DSly"),m=l("6uUH7");let v=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class _ extends r.default{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",v),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{hash:e,vs:n,fs:r,varyings:i,bufferMode:o=35981}=t;return this.hash=e||"",this.vs="string"==typeof n?new a.VertexShader(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new a.FragmentShader(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,(0,g.assert)(this.vs instanceof a.VertexShader),(0,g.assert)(this.fs instanceof a.FragmentShader),this.uniforms={},this._textureUniforms={},i&&i.length>0&&((0,c.assertWebGL2Context)(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new u.default(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:o,end:s,isIndexed:a=!1,indexType:l=5123,instanceCount:u=0,isInstanced:m=u>0,vertexArray:v=null,transformFeedback:_,framebuffer:y,parameters:b={},uniforms:x,samplers:E}=t;if((x||E)&&((0,d.log).deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(x||{})),d.log.priority>=e){let t=y?y.id:"default",i="mode=".concat((0,f.getKey)(this.gl,n)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat((0,f.getKey)(this.gl,l)," ")+"isInstanced=".concat(m," isIndexed=").concat(a," ")+"Framebuffer=".concat(t);(0,d.log).log(e,i)()}return(0,g.assert)(v),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&0!==r&&(!m||0!==u)&&(v.bindForDraw(r,u,()=>{if(void 0!==y&&(b=Object.assign({},b,{framebuffer:y})),_){let t=(0,p.getPrimitiveDrawMode)(n);_.begin(t)}this._bindTextures(),(0,h.withParameters)(this.gl,b,()=>{a&&m?this.gl2.drawElementsInstanced(n,r,l,i,u):a&&(0,c.isWebGL2)(this.gl)&&!isNaN(o)&&!isNaN(s)?this.gl2.drawRangeElements(n,o,s,r,l,i):a?this.gl.drawElements(n,r,l,i):m?this.gl2.drawArraysInstanced(n,i,r,u):this.gl.drawArrays(n,i,r)}),_&&_.end()}),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let e in d.log.priority>=2&&(0,s.checkUniformValues)(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle),t){let n=t[e],r=this._uniformSetters[e];if(r){let t=n,a=!1;if(t instanceof o.default&&(t=t.texture),t instanceof i.default){if(a=this.uniforms[e]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);let n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex}else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||a)&&(0,s.copyUniform)(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(let e in this._textureUniforms){let n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(let t in this._textureUniforms){let e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){let e=this.gl.getAttachedShaders(t),n={};for(let t of e)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new a.VertexShader({handle:t});break;case 35632:n.fs=new a.FragmentShader({handle:t})}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){let t=this._getName();this.id=(0,m.uid)(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}_compileAndLink(){let{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),(0,d.log).time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),(0,d.log).timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||d.log.level>0){if(!t.getProgramParameter(this.handle,35714))throw Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){let{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){let n=this.gl.getActiveUniform(this.handle,e),{name:r}=(0,s.parseUniformName)(n.name),i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=(0,s.getUniformSetter)(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=(0,s.getUniformSetter)(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}}),u("cN8lf",function(e,n){t(e.exports,"getUniformSetter",()=>_),t(e.exports,"parseUniformName",()=>y),t(e.exports,"checkUniformValues",()=>b),t(e.exports,"copyUniform",()=>x),l("eFBWR");var r=l("3FPsK"),i=l("67hSA"),o=l("i8qYD"),s=l("1bl8M"),a=l("8DSly");let u={5126:T.bind(null,"uniform1fv",g,1,S),35664:T.bind(null,"uniform2fv",g,2,S),35665:T.bind(null,"uniform3fv",g,3,S),35666:T.bind(null,"uniform4fv",g,4,S),5124:T.bind(null,"uniform1iv",m,1,S),35667:T.bind(null,"uniform2iv",m,2,S),35668:T.bind(null,"uniform3iv",m,3,S),35669:T.bind(null,"uniform4iv",m,4,S),35670:T.bind(null,"uniform1iv",m,1,S),35671:T.bind(null,"uniform2iv",m,2,S),35672:T.bind(null,"uniform3iv",m,3,S),35673:T.bind(null,"uniform4iv",m,4,S),35674:T.bind(null,"uniformMatrix2fv",g,4,A),35675:T.bind(null,"uniformMatrix3fv",g,9,A),35676:T.bind(null,"uniformMatrix4fv",g,16,A),35678:E,35680:E,5125:T.bind(null,"uniform1uiv",v,1,S),36294:T.bind(null,"uniform2uiv",v,2,S),36295:T.bind(null,"uniform3uiv",v,3,S),36296:T.bind(null,"uniform4uiv",v,4,S),35685:T.bind(null,"uniformMatrix2x3fv",g,6,A),35686:T.bind(null,"uniformMatrix2x4fv",g,8,A),35687:T.bind(null,"uniformMatrix3x2fv",g,6,A),35688:T.bind(null,"uniformMatrix3x4fv",g,12,A),35689:T.bind(null,"uniformMatrix4x2fv",g,8,A),35690:T.bind(null,"uniformMatrix4x3fv",g,12,A),35678:E,35680:E,35679:E,35682:E,36289:E,36292:E,36293:E,36298:E,36299:E,36300:E,36303:E,36306:E,36307:E,36308:E,36311:E},c={},d={},h={},f=[0];function p(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(f[0]=t,t=f);let o=t.length;if(o%e&&(0,r.log).warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[o];s||(s=new n(o),i[o]=s);for(let e=0;e<o;e++)s[e]=t[e];return s}function g(t,e){return p(t,e,Float32Array,c)}function m(t,e){return p(t,e,Int32Array,d)}function v(t,e){return p(t,e,Uint32Array,h)}function _(t,e,n){let r=u[n.type];if(!r)throw Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function y(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};let e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:!!e[2]}}function b(t,e,n){for(let a in t){var r;let l=t[a];if((!n||n[a])&&!(Array.isArray(r=l)||ArrayBuffer.isView(r)?function(t){if(0===t.length)return!1;let e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(r):!!isFinite(r)||!0===r||!1===r||r instanceof s.default||r instanceof o.default||r instanceof i.default&&!!r.texture))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(a),l),Error("".concat(e," Bad uniform ").concat(a))}return!0}function x(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n)){if(t[e]){let r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice()}else t[e]=n}function E(){let t=null;return(e,n,r)=>{let i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function T(t,e,n,r){let i=null,o=null;return(s,l,u)=>{let c=e(u,n),d=c.length,h=!1;if(null===i)i=new Float32Array(d),o=d,h=!0;else{(0,a.assert)(o===d,"Uniform length cannot change.");for(let t=0;t<d;++t)if(c[t]!==i[t]){h=!0;break}}return h&&(r(s,t,l,c),i.set(c)),h}}function S(t,e,n,r){t[e](n,r)}function A(t,e,n,r){t[e](n,!1,r)}}),u("a9mg8",function(e,n){t(e.exports,"VertexShader",()=>h),t(e.exports,"FragmentShader",()=>f),l("eFBWR");var r=l("dpEr0"),i=l("3FPsK"),o=l("8vCqL"),s=l("666ZC"),a=l("8DSly"),u=l("6uUH7"),c=l("jXHZc");class d extends c.default{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,a.assert)(!1),"unknown"}}constructor(t,e){(0,r.assertWebGLContext)(t),(0,a.assert)("string"==typeof e.source,"Shader: GLSL source code must be a JavaScript string"),super(t,{id:(0,o.default)(e.source,null)||e.id||(0,u.uid)("unnamed ".concat(d.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t,n=(0,o.default)(e,null);n&&(this.id=(0,u.uid)(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(d.getTypeName(this.shaderType),":").concat(this.id)}getName(){return(0,o.default)(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){let t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){let t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:r}=(0,s.parseGLSLCompilerError)(t,this.source,this.shaderType,this.id);throw(0,i.log).error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),(0,i.log).warn("GLSL compilation warnings in ".concat(e,"\n").concat(r))(),Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class h extends d{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class f extends d{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}}),u("8vCqL",function(e,n){t(e.exports,"default",()=>r);function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}}),u("666ZC",function(e,n){t(e.exports,"parseGLSLCompilerError",()=>o);var r=l("8vCqL"),i=l("4QMBO");function o(t,e,n,o){let l=t.split(/\r?\n/),u={},c={},d=o||(0,r.default)(e)||"(unnamed)",h="".concat((0,i.default)(n)," shader ").concat(d);for(let e=0;e<l.length;e++){let n=l[e];if(n.length<=1)continue;let r=n.split(":"),i=r[0],o=parseInt(r[2],10);if(isNaN(o))throw Error("GLSL compilation error in ".concat(h,": ").concat(t));"WARNING"!==i?u[o]=n:c[o]=n}let f=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((t,r)=>{let o=String(r+e),s=o.length;return a(o,i-s)+n+t})}(e);return{shaderName:h,errors:s(u,f),warnings:s(c,f)}}function s(t,e){let n="";for(let r=0;r<e.length;r++){let i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){let e=t[r+1],i=e.split(":",3),o=i[0],s=parseInt(i[1],10)||0,l=e.substring(i.join(":").length+1).trim();n+=a("^^^ ".concat(o,": ").concat(l,"\n\n"),s)}}return n}function a(t,e){let n="";for(let t=0;t<e;++t)n+=" ";return"".concat(n).concat(t)}}),u("4QMBO",function(e,n){t(e.exports,"default",()=>r);function r(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}}),u("7L1b3",function(e,n){t(e.exports,"default",()=>s);var r=l("cZsOB");l("eFBWR");var i=l("dpEr0"),o=l("58o6X");class s{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){let e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){let e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){let e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){let e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){let e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){let e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){let{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){let{name:n,type:i,size:o}=e.getActiveAttrib(t.handle,r),s=e.getAttribLocation(t.handle,n);s>=0&&this._addAttribute(s,n,i,o)}this.attributeInfos.sort((t,e)=>t.location-e.location)}_readVaryingsFromProgram(t){let{gl:e}=t;if(!(0,i.isWebGL2)(e))return;let n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){let{name:n,type:i,size:o}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort((t,e)=>t.location-e.location)}_addAttribute(t,e,n,i){let{type:s,components:a}=(0,o.decomposeCompositeGLType)(n),l={type:s,size:i*a};this._inferProperties(t,e,l);let u={location:t,name:e,accessor:new r.default(l)};this.attributeInfos.push(u),this.attributeInfosByLocation[t]=u,this.attributeInfosByName[u.name]=u}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,i){let{type:s,components:a}=(0,o.decomposeCompositeGLType)(n),l={location:t,name:e,accessor:new r.default({type:s,size:i*a})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}}),u("58o6X",function(e,n){t(e.exports,"getPrimitiveDrawMode",()=>o),t(e.exports,"decomposeCompositeGLType",()=>s),t(e.exports,"getCompositeGLType",()=>a);var r=l("8DSly");let i={5126:[5126,1,"float"],35664:[5126,2,"vec2"],35665:[5126,3,"vec3"],35666:[5126,4,"vec4"],5124:[5124,1,"int"],35667:[5124,2,"ivec2"],35668:[5124,3,"ivec3"],35669:[5124,4,"ivec4"],5125:[5125,1,"uint"],36294:[5125,2,"uvec2"],36295:[5125,3,"uvec3"],36296:[5125,4,"uvec4"],35670:[5126,1,"bool"],35671:[5126,2,"bvec2"],35672:[5126,3,"bvec3"],35673:[5126,4,"bvec4"],35674:[5126,8,"mat2"],35685:[5126,8,"mat2x3"],35686:[5126,8,"mat2x4"],35675:[5126,12,"mat3"],35687:[5126,12,"mat3x2"],35688:[5126,12,"mat3x4"],35676:[5126,16,"mat4"],35689:[5126,16,"mat4x2"],35690:[5126,16,"mat4x3"]};function o(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return(0,r.assert)(!1),0}}function s(t){let e=i[t];if(!e)return null;let[n,r]=e;return{type:n,components:r}}function a(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=5126}for(let n in i){let[r,o,s]=i[n];if(r===t&&o===e)return{glType:n,name:s}}return null}}),u("938IP",function(e,n){t(e.exports,"getDebugTableForProgramConfiguration",()=>i);var r=l("58o6X");function i(t){let e={},n="Accessors for ".concat(t.id);for(let r of t.attributeInfos)if(r){let t=o(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(let r of t.varyingInfos)if(r){let t=o(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}function o(t){let{type:e,size:n}=t.accessor,i=(0,r.getCompositeGLType)(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}}),u("527Jb",function(e,n){t(e.exports,"getDebugTableForUniforms",()=>o);var r=l("8DSly"),i=l("9FyhI");function o(t){let{header:e="Uniforms",program:n,uniforms:o,undefinedOnly:a=!1}=t;(0,r.assert)(n);let l=".*Matrix",u=n._uniformSetters,c={},d=Object.keys(u).sort(),h=0;for(let t of d)!t.match(".*_.*")&&!t.match(l)&&s({table:c,header:e,uniforms:o,uniformName:t,undefinedOnly:a})&&h++;for(let t of d)t.match(l)&&s({table:c,header:e,uniforms:o,uniformName:t,undefinedOnly:a})&&h++;for(let t of d)!c[t]&&s({table:c,header:e,uniforms:o,uniformName:t,undefinedOnly:a})&&h++;let f=0,p={};if(!a)for(let t in o){let n=o[t];c[t]||(f++,p[t]={Type:"NOT USED: ".concat(n),[e]:(0,i.formatValue)(n)})}return{table:c,count:h,unusedTable:p,unusedCount:f}}function s(t){let{table:e,header:n,uniforms:r,uniformName:o,undefinedOnly:s}=t,a=r[o],l=null!=a;return(!s||!l)&&(e[o]={[n]:l?(0,i.formatValue)(a):"N/A","Uniform Type":l?a:"NOT PROVIDED"},!0)}}),u("9FyhI",function(e,n){t(e.exports,"formatValue",()=>function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isInteger:r=!1}=n;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,n){let{maxElts:r=16,size:i=1}=n,o="[";for(let s=0;s<e.length&&s<r;++s)s>0&&(o+=",".concat(s%i==0?" ":"")),o+=t(e[s],n);let s=e.length>r?"...":"]";return"".concat(o).concat(s)}(e,n);if(!Number.isFinite(e))return String(e);if(1e-16>Math.abs(e))return r?"0":"0.";if(r||Math.abs(e)>100&&1e4>Math.abs(e))return e.toFixed(0);let i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i})}),u("9FcVX",function(e,n){t(e.exports,"getDebugTableForVertexArray",()=>a);var r=l("8FSmA"),i=l("b5HGu"),o=l("58o6X"),s=l("9FyhI");function a(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};let r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=u(e,e.elements,null,n));let i=e.values;for(let t in i){let s=e._getAttributeInfo(t);if(s){let a="".concat(t,": ").concat(s.name),l=e.accessors[s.location];l&&(a="".concat(t,": ").concat(function(t,e){let{type:n,size:r}=e,i=(0,o.getCompositeGLType)(n,r);return i?"".concat(t," (").concat(i.name,")"):t}(s.name,l))),r[a]=u(e,i[t],l,n)}}return r}function u(t,e,n,o){let a,l,u;let{gl:c}=t;if(!e)return{[o]:"null","Format ":"N/A"};let d="NOT PROVIDED",h=1,f=0,p=0;if(n&&(d=n.type,h=n.size,a=-1!==(d=String(d).replace("Array","")).indexOf("nt")),e instanceof r.default){let t;let{data:r,changed:g}=e.getDebugData();if(l=g?"*":"",u=r,f=(p=e.byteLength)/r.BYTES_PER_ELEMENT/h,n){let e=n.divisor>0;t="".concat(e?"I ":"P "," ").concat(f," (x").concat(h,"=").concat(p," bytes ").concat((0,i.getKey)(c,d),")")}else a=!0,t="".concat(p," bytes");return{[o]:"".concat(l).concat((0,s.formatValue)(u,{size:h,isInteger:a})),"Format ":t}}return u=e,h=e.length,a=-1!==(d=String(e.constructor.name).replace("Array","")).indexOf("nt"),{[o]:"".concat((0,s.formatValue)(u,{size:h,isInteger:a})," (constant)"),"Format ":"".concat(h,"x").concat(d," (constant)")}}}),u("iqQfp",function(e,n){t(e.exports,"default",()=>h),l("eFBWR");var r=l("3FPsK"),i=l("cZsOB"),o=l("8FSmA"),s=l("2SeBh"),a=l("8DSly"),u=l("e0iD7");let c=/^(.+)__LOCATION_([0-9]+)$/,d=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class h{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new s.default(t),(0,u.stubRemovedMethods)(this,"VertexArray","v6.0",d),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;let{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=Array(t).fill(null),this.accessors=Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(let e in t){let n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);let{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new o.default(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof o.default&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){let e=this.values[t];e instanceof o.default&&this.setBuffer(t,e)}}),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,e),r=n()}),r}_resolveLocationAndAccessor(t,e,n,o){let s={location:-1,accessor:null},{location:l,name:u}=this._getAttributeIndex(t);if(!Number.isFinite(l)||l<0)return this.unused[t]=e,(0,r.log).once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),s;let c=this._getAttributeInfo(u||l);if(!c)return s;let d=this.accessors[l]||{},h=(0,i.default).resolve(c.accessor,d,n,o),{size:f,type:p}=h;return(0,a.assert)(Number.isFinite(f)&&Number.isFinite(p)),{location:l,accessor:h}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){let e=Number(t);if(Number.isFinite(e))return{location:e};let n=c.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof o.default)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof o.default){let n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e))this.setConstant(t,e);else if(e.buffer instanceof o.default)this.setBuffer(t,e.buffer,e);else throw Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)")}_setConstantAttributes(t,e){let n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let t=1;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)ArrayBuffer.isView(r=this.values[t])&&this._setConstantAttribute(t,r)}_setConstantAttributeZero(t,e){if((0,s.default).isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}let n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){(0,s.default).setConstant(this.gl,t,e)}_updateDrawParams(){let t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){let n=this.values[e],r=this.accessors[e];if(!n)return;let{divisor:i}=r,s=i>0;if(t.isInstanced=t.isInstanced||s,n instanceof o.default){if(s){let e=n.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,e)}else{let e=n.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,e)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.log).deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}}),u("2SeBh",function(e,n){t(e.exports,"default",()=>c);var r=l("jXHZc"),i=l("8FSmA");l("eFBWR");var o=l("dpEr0"),s=l("jHPo2"),a=l("8DSly"),u=l("hYmhc");class c extends r.default{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.constantAttributeZero||(0,o.isWebGL2)(t)||"Chrome"===(0,u.default)()}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new c(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return c.MAX_ATTRIBUTES=c.MAX_ATTRIBUTES||t.getParameter(34921),c.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:c._setConstantFloatArray(t,e,n);break;case Int32Array:c._setConstantIntArray(t,e,n);break;case Uint32Array:c._setConstantUintArray(t,e,n);break;default:(0,a.assert)(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,Object.assign({},e,{id:e.id||e.program&&e.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return c.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return arguments.length>1&&void 0!==arguments[1]&&arguments[1],(0,a.assert)(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);let{size:r,type:i,stride:s,offset:l,normalized:u,integer:c,divisor:d}=n,{gl:h,gl2:f}=this;return t=Number(t),this.bind(()=>{h.bindBuffer(34962,e.handle),c?((0,a.assert)((0,o.isWebGL2)(h)),f.vertexAttribIPointer(t,r,i,s,l)):h.vertexAttribPointer(t,r,i,u,s,l),h.enableVertexAttribArray(t),f.vertexAttribDivisor(t,d||0)}),this}enable(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(e||0!==t||c.isSupported(this.gl,{constantAttributeZero:!0}))&&(t=Number(t),this.bind(()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,e){let n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,o=n.length*t,a=!this.buffer;if(this.buffer=this.buffer||new i.default(this.gl,r),a=(a=a||this.buffer.reallocate(r))||!this._compareConstantArrayValues(n,this.bufferValue)){let t=(0,s.getScratchArray)(e.constructor,o);(0,s.fillArray)({target:t,source:n,start:0,count:o}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:(0,a.assert)(!1)}}static _setConstantIntArray(t,e,n){switch((0,a.assert)((0,o.isWebGL2)(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:(0,a.assert)(!1)}}static _setConstantUintArray(t,e,n){switch((0,a.assert)((0,o.isWebGL2)(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:(0,a.assert)(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return(0,a.assert)(Number.isFinite(n)),this.bind(()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t))}}}),u("jHPo2",function(e,n){t(e.exports,"getScratchArray",()=>i),t(e.exports,"fillArray",()=>o);let r=null;function i(t,e){var n;let i=(n=t.BYTES_PER_ELEMENT*e,(!r||r.byteLength<n)&&(r=new ArrayBuffer(n)),r);return new t(i,0,e)}function o(t){let{target:e,source:n,start:r=0,count:i=1}=t,o=n.length,s=i*o,a=0;for(let t=r;a<o;a++)e[t++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s);return e}}),u("hYmhc",function(e,n){t(e.exports,"default",()=>s);var r=l("c9Jp0"),i=l("45gxc");let o=globalThis;function s(t){if(!t&&!(0,r.default)())return"Node";if((0,i.default)(t))return"Electron";let e="undefined"!=typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";let s=-1!==n.indexOf("MSIE "),a=-1!==n.indexOf("Trident/");return s||a?"IE":o.chrome?"Chrome":o.safari?"Safari":o.mozInnerScreenX?"Firefox":"Unknown"}}),u("78kBf",function(e,n){t(e.exports,"getBuffersFromGeometry",()=>s);var r=l("8DSly"),i=l("8FSmA");let o={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function s(t,e,n){let s={},a=e.indices;for(let l in e.attributes){let u=e.attributes[l],c=function(t,e){let{attributeMap:n=o}=e||{};return n&&n[t]||t}(l,n);if("indices"===l)a=u;else if(u.constant)s[c]=u.value;else{let e=u.value,n={...u};delete n.value,s[c]=[new i.default(t,e),n],function(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}(0,r.assert)(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}(l,n)}}if(a){let e=a.value||a;(0,r.assert)(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');let n={size:1,isIndexed:void 0===a.isIndexed||a.isIndexed};s.indices=[new i.default(t,{data:e,target:34963}),n]}return s}}),u("2lw07",function(e,n){t(e.exports,"default",()=>c);var r=l("2qeFG"),i=l("8FSmA"),o=l("jIwbZ"),s=l("67cdk"),a=l("hWH11"),u=l("65H6S");class c{constructor({gl:t,attribute:e,timeline:n}){(0,r.default)(this,"gl",void 0),(0,r.default)(this,"type","interpolation"),(0,r.default)(this,"attributeInTransition",void 0),(0,r.default)(this,"settings",void 0),(0,r.default)(this,"attribute",void 0),(0,r.default)(this,"transition",void 0),(0,r.default)(this,"currentStartIndices",void 0),(0,r.default)(this,"currentLength",void 0),(0,r.default)(this,"transform",void 0),(0,r.default)(this,"buffers",void 0),this.gl=t,this.transition=new u.default(n),this.attribute=e,this.attributeInTransition=new s.default(t,e.settings),this.currentStartIndices=e.startIndices,this.currentLength=0,this.transform=function(t,e){let n=(0,a.getAttributeTypeFromSize)(e.size);return new o.default(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(t,e);let l={byteLength:0,usage:35050};this.buffers=[new i.default(t,l),new i.default(t,l)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0){this.transition.cancel();return}this.settings=t;let{gl:n,buffers:r,attribute:i}=this;(0,a.cycleBuffers)(r);let o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(let t of r)(0,a.padBuffer)({buffer:t,...o});this.currentStartIndices=i.startIndices,this.currentLength=(0,a.getAttributeBufferLength)(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:(0,a.getSourceBufferAttribute)(n,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){let t=this.transition.update();if(t){let{duration:t,easing:e}=this.settings,{time:n}=this.transition,r=n/t;e&&(r=e(r)),this.transform.run({uniforms:{time:r}})}return t}cancel(){for(let t of(this.transition.cancel(),this.transform.delete(),this.buffers))t.delete();this.buffers.length=0}}}),u("65H6S",function(e,n){t(e.exports,"default",()=>i);var r=l("2qeFG");class i{constructor(t){(0,r.default)(this,"_inProgress",void 0),(0,r.default)(this,"_handle",void 0),(0,r.default)(this,"_timeline",void 0),(0,r.default)(this,"time",void 0),(0,r.default)(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){if(this._inProgress){var t,e;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this)}}cancel(){if(this._inProgress){var t,e;null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){let{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}}),u("3WmlI",function(e,n){t(e.exports,"default",()=>f);var r=l("2qeFG"),i=l("8FSmA"),o=l("67hSA"),s=l("hzwiv"),a=l("35qVw"),u=l("jIwbZ"),c=l("hWH11"),d=l("67cdk"),h=l("65H6S");class f{constructor({gl:t,attribute:e,timeline:n}){var s;(0,r.default)(this,"gl",void 0),(0,r.default)(this,"type","spring"),(0,r.default)(this,"attributeInTransition",void 0),(0,r.default)(this,"settings",void 0),(0,r.default)(this,"attribute",void 0),(0,r.default)(this,"transition",void 0),(0,r.default)(this,"currentStartIndices",void 0),(0,r.default)(this,"currentLength",void 0),(0,r.default)(this,"texture",void 0),(0,r.default)(this,"framebuffer",void 0),(0,r.default)(this,"transform",void 0),(0,r.default)(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new h.default(n),this.attribute=e,this.attributeInTransition=new d.default(t,{...e.settings,normalized:!1}),this.currentStartIndices=e.startIndices,this.currentLength=0,this.texture=new a.default(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1}),this.framebuffer=(s=this.texture,new o.default(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:s}})),this.transform=function(t,e,n){let r=(0,c.getAttributeTypeFromSize)(e.size);return new u.default(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(t,e,this.framebuffer);let l={byteLength:0,usage:35050};this.buffers=[new i.default(t,l),new i.default(t,l),new i.default(t,l)]}get inProgress(){return this.transition.inProgress}start(t,e){let{gl:n,buffers:r,attribute:i}=this,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(let t of r)(0,c.padBuffer)({buffer:t,...o});this.settings=t,this.currentStartIndices=i.startIndices,this.currentLength=(0,c.getAttributeBufferLength)(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:(0,c.getSourceBufferAttribute)(n,i)}})}update(){let{buffers:t,transform:e,framebuffer:n,transition:r}=this;if(!r.update())return!1;let i=this.settings;return e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),(0,c.cycleBuffers)(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),(0,s.readPixelsToArray)(n)[0]>0||r.end(),!0}cancel(){for(let t of(this.transition.cancel(),this.transform.delete(),this.buffers))t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}}),u("aB8Oa",function(e,n){t(e.exports,"default",()=>u);var r=l("hWH11"),i=l("iHkGB"),o=l("2GwXu"),s=l("i5wGC");let a={interpolation:i.default,spring:o.default};class u{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,i){let{transitions:o}=this;if(o.has(t)){let n=o.get(t),{value:r=n.settings.fromValue}=n;e=r,this.remove(t)}if(!(i=(0,r.normalizeTransitionSettings)(i)))return;let l=a[i.type];if(!l){(0,s.default).error("unsupported transition type '".concat(i.type,"'"))();return}let u=new l(this.timeline);u.start({...i,fromValue:e,toValue:n}),o.set(t,u)}remove(t){let{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){let t={};for(let[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(let t of this.transitions.keys())this.remove(t)}}}),u("iHkGB",function(e,n){t(e.exports,"default",()=>o);var r=l("a0auE"),i=l("65H6S");class o extends i.default{get value(){return this._value}_onUpdate(){let{time:t,settings:{fromValue:e,toValue:n,duration:i,easing:o}}=this,s=o(t/i);this._value=(0,r.lerp)(e,n,s)}}}),u("2GwXu",function(e,n){t(e.exports,"default",()=>s);var r=l("65H6S");function i(t,e,n,r,i){let o=e-t;return(n-e)*i+-o*r+o+e}function o(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){let i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class s extends r.default{get value(){return this._currValue}_onUpdate(){let{fromValue:t,toValue:e,damping:n,stiffness:r}=this.settings,{_prevValue:s=t,_currValue:a=t}=this,l=function(t,e,n,r,o){if(Array.isArray(n)){let s=[];for(let a=0;a<n.length;a++)s[a]=i(t[a],e[a],n[a],r,o);return s}return i(t,e,n,r,o)}(s,a,e,n,r),u=o(l,e),c=o(l,a);u<1e-5&&c<1e-5&&(l=e,this.end()),this._prevValue=a,this._currValue=l}}}),u("jWEec",function(e,n){t(e.exports,"validateProps",()=>i),t(e.exports,"diffProps",()=>o),t(e.exports,"compareProps",()=>s);var r=l("56tgz");function i(t){let e=t[r.PROP_TYPES_SYMBOL];for(let n in e){let r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function o(t,e){let n=s({newProps:t,oldProps:e,propTypes:t[r.PROP_TYPES_SYMBOL],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1,{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}(t,e),o=!1;return i||(o=function(t,e){if(null===e||"all"in t.updateTriggers&&u(t,e,"all"))return{all:!0};let n={},r=!1;for(let i in t.updateTriggers)"all"!==i&&u(t,e,i)&&(n[i]=!0,r=!0);return!!r&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:o,extensionsChanged:function(t,e){if(null===e)return!0;let n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let t=0;t<r.length;t++)if(!r[t].equals(n[t]))return!0;return!1}(t,e),transitionsChanged:function(t,e){if(!t.transitions)return!1;let n={},i=t[r.PROP_TYPES_SYMBOL],o=!1;for(let r in t.transitions){let s=i[r],l=s&&s.type;("number"===l||"color"===l||"array"===l)&&a(t[r],e[r],s)&&(n[r]=!0,o=!0)}return!!o&&n}(t,e)}}function s({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(i," changed shallowly");for(let o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(i,".").concat(o," added");let n=a(t[o],e[o],r[o]);if(n)return"".concat(i,".").concat(o," ").concat(n)}for(let o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){let n=a(t[o],e[o],r[o]);if(n)return"".concat(i,".").concat(o," ").concat(n)}}return!1}function a(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals)&&!r.call(t,e)?"changed deeply":r||e===t?null:"changed shallowly"}function u(t,e,n){let r=t.updateTriggers[n];r=null==r?{}:r;let i=e.updateTriggers[n];return s({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}}),u("56tgz",function(e,n){t(e.exports,"LIFECYCLE",()=>r),t(e.exports,"COMPONENT_SYMBOL",()=>i),t(e.exports,"PROP_TYPES_SYMBOL",()=>o),t(e.exports,"DEPRECATED_PROPS_SYMBOL",()=>s),t(e.exports,"ASYNC_DEFAULTS_SYMBOL",()=>a),t(e.exports,"ASYNC_ORIGINAL_SYMBOL",()=>l),t(e.exports,"ASYNC_RESOLVED_SYMBOL",()=>u);let r={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},i=Symbol.for("component"),o=Symbol.for("propTypes"),s=Symbol.for("deprecatedProps"),a=Symbol.for("asyncPropDefaults"),l=Symbol.for("asyncPropOriginal"),u=Symbol.for("asyncPropResolved")}),u("aacbl",function(e,n){t(e.exports,"count",()=>r);function r(t){if(!(null!==t&&"object"==typeof t))throw Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(null!==t&&"object"==typeof t&&t.constructor===Object)return Object.keys(t).length;throw Error("count(): argument not a container")}}),u("1B3Sr",function(e,n){t(e.exports,"mergeShaders",()=>r);function r(t,e){if(!e)return t;let n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(t=>"project64"===t.name))){let t=n.modules.findIndex(t=>"project32"===t.name);t>=0&&n.modules.splice(t,1)}if("inject"in e){if(t.inject){let r={...t.inject};for(let t in e.inject)r[t]=(r[t]||"")+e.inject[t];n.inject=r}else n.inject=e.inject}return n}}),u("bWXWI",function(e,n){t(e.exports,"getWorldPosition",()=>h),t(e.exports,"projectPosition",()=>f);var r=l("heh00"),i=l("jBhUX"),o=l("cu0SC"),s=l("bpIRf"),a=l("4iX2G");l("auS2n");var u=l("gZN7e");let c=[0,0,0];function d(t,e,n=!1){let r=e.projectPosition(t);if(n&&e instanceof o.default){let[n,i,o=0]=t,s=e.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function h(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:o,offsetMode:a}){let[l,c,h=0]=t;switch(n&&([l,c,h]=s.transformMat4([],[l,c,h,1],n)),i){case r.COORDINATE_SYSTEM.LNGLAT:return d([l,c,h],e,a);case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return d([l+o[0],c+o[1],h+(o[2]||0)],e,a);case r.COORDINATE_SYSTEM.METER_OFFSETS:return d((0,u.addMetersToLngLat)(o,[l,c,h]),e,a);case r.COORDINATE_SYSTEM.CARTESIAN:default:return e.isGeospatial?[l+o[0],c+o[1],h+o[2]]:e.projectPosition([l,c,h])}}function f(t,e){let{viewport:n,coordinateSystem:o,coordinateOrigin:s,modelMatrix:l,fromCoordinateSystem:u,fromCoordinateOrigin:d}=function(t){let{viewport:e,modelMatrix:n,coordinateOrigin:i}=t,{coordinateSystem:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return o===r.COORDINATE_SYSTEM.DEFAULT&&(o=e.isGeospatial?r.COORDINATE_SYSTEM.LNGLAT:r.COORDINATE_SYSTEM.CARTESIAN),void 0===s&&(s=o),void 0===a&&(a=i),{viewport:e,coordinateSystem:o,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:a}}(e),{autoOffset:f=!0}=e,{geospatialOrigin:p=c,shaderCoordinateOrigin:g=c,offsetMode:m=!1}=f?(0,i.getOffsetOrigin)(n,o,s):{},v=h(t,{viewport:n,modelMatrix:l,coordinateSystem:u,coordinateOrigin:d,offsetMode:m});if(m){let t=n.projectPosition(p||g);a.sub(v,v,t)}return v}}),u("jBhUX",function(e,n){t(e.exports,"getOffsetOrigin",()=>p),t(e.exports,"getUniformsFromViewport",()=>g);var r=l("hnOie"),i=l("bpIRf"),o=l("heh00"),s=l("cB0Rj");let a=[0,0,0,0],u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=[0,0,0],h=[0,0,0],f=(0,s.default)(function({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:s}){let{projectionCenter:l,viewProjectionMatrix:h,originCommon:f,cameraPosCommon:g,shaderCoordinateOrigin:m,geospatialOrigin:v}=function(t,e,n){let{viewMatrixUncentered:o,projectionMatrix:s}=t,{viewMatrix:l,viewProjectionMatrix:c}=t,d=a,h=a,f=t.cameraPosition,{geospatialOrigin:g,shaderCoordinateOrigin:m,offsetMode:v}=p(t,e,n);return v&&(h=t.projectPosition(g||m),f=[f[0]-h[0],f[1]-h[1],f[2]-h[2]],h[3]=1,d=i.transformMat4([],h,c),l=o||l,c=r.multiply([],s,l),c=r.multiply([],c,u)),{viewMatrix:l,viewProjectionMatrix:c,projectionCenter:d,originCommon:h,cameraPosCommon:f,shaderCoordinateOrigin:m,geospatialOrigin:g}}(t,n,s),_=t.getDistanceScales(),y=[t.width*e,t.height*e],b=i.transformMat4([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,x={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:m,project_uCommonOrigin:f.slice(0,3),project_uCenter:l,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:y,project_uDevicePixelRatio:e,project_uFocalDistance:b,project_uCommonUnitsPerMeter:_.unitsPerMeter,project_uCommonUnitsPerWorldUnit:_.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:d,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:h,project_uModelMatrix:c,project_uCameraPosition:g};if(v){let e=t.getDistanceScales(v);switch(n){case o.COORDINATE_SYSTEM.METER_OFFSETS:x.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,x.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case o.COORDINATE_SYSTEM.LNGLAT:case o.COORDINATE_SYSTEM.LNGLAT_OFFSETS:t._pseudoMeters||(x.project_uCommonUnitsPerMeter=e.unitsPerMeter),x.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,x.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case o.COORDINATE_SYSTEM.CARTESIAN:x.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],x.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return x});function p(t,e,n=h){let r;n.length<3&&(n=[n[0],n[1],0]);let i=n,s=!0;switch(r=e===o.COORDINATE_SYSTEM.LNGLAT_OFFSETS||e===o.COORDINATE_SYSTEM.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case o.PROJECTION_MODE.WEB_MERCATOR:(e===o.COORDINATE_SYSTEM.LNGLAT||e===o.COORDINATE_SYSTEM.CARTESIAN)&&(r=[0,0,0],s=!1);break;case o.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:e===o.COORDINATE_SYSTEM.LNGLAT?i=r:e===o.COORDINATE_SYSTEM.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case o.PROJECTION_MODE.IDENTITY:(i=t.position.map(Math.fround))[2]=i[2]||0;break;case o.PROJECTION_MODE.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}function g({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=o.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:i=h,autoWrapLongitude:s=!1}){r===o.COORDINATE_SYSTEM.DEFAULT&&(r=t.isGeospatial?o.COORDINATE_SYSTEM.LNGLAT:o.COORDINATE_SYSTEM.CARTESIAN);let a=f({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return a.project_uWrapLongitude=s,a.project_uModelMatrix=n||c,a}}),u("hnOie",function(e,n){t(e.exports,"transpose",()=>i),t(e.exports,"invert",()=>o),t(e.exports,"determinant",()=>s),t(e.exports,"multiply",()=>a),t(e.exports,"translate",()=>u),t(e.exports,"scale",()=>c),t(e.exports,"rotate",()=>d),t(e.exports,"rotateX",()=>h),t(e.exports,"rotateY",()=>f),t(e.exports,"rotateZ",()=>p),t(e.exports,"fromQuat",()=>g),t(e.exports,"frustum",()=>m),t(e.exports,"perspective",()=>v),t(e.exports,"ortho",()=>_),t(e.exports,"lookAt",()=>y),t(e.exports,"equals",()=>b);var r=l("7EJz5");function i(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function o(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],_=n*a-r*s,y=n*l-i*s,b=n*u-o*s,x=r*l-i*a,E=r*u-o*a,T=i*u-o*l,S=c*g-d*p,A=c*m-h*p,P=c*v-f*p,C=d*m-h*g,w=d*v-f*g,D=h*v-f*m,L=_*D-y*w+b*C+x*P-E*A+T*S;return L?(L=1/L,t[0]=(a*D-l*w+u*C)*L,t[1]=(i*w-r*D-o*C)*L,t[2]=(g*T-m*E+v*x)*L,t[3]=(h*E-d*T-f*x)*L,t[4]=(l*P-s*D-u*A)*L,t[5]=(n*D-i*P+o*A)*L,t[6]=(m*b-p*T-v*y)*L,t[7]=(c*T-h*b+f*y)*L,t[8]=(s*w-a*P+u*S)*L,t[9]=(r*P-n*w-o*S)*L,t[10]=(p*E-g*b+v*_)*L,t[11]=(d*b-c*E-f*_)*L,t[12]=(a*A-s*C-l*S)*L,t[13]=(n*C-r*A+i*S)*L,t[14]=(g*y-p*x-m*_)*L,t[15]=(c*x-d*y+h*_)*L,t):null}function s(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*s-n*o)*(d*m-h*g)-(e*a-r*o)*(c*m-h*p)+(e*l-i*o)*(c*g-d*p)+(n*a-r*s)*(u*m-h*f)-(n*l-i*s)*(u*g-d*f)+(r*l-i*a)*(u*p-c*f)}function a(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],g=e[12],m=e[13],v=e[14],_=e[15],y=n[0],b=n[1],x=n[2],E=n[3];return t[0]=y*r+b*a+x*d+E*g,t[1]=y*i+b*l+x*h+E*m,t[2]=y*o+b*u+x*f+E*v,t[3]=y*s+b*c+x*p+E*_,y=n[4],b=n[5],x=n[6],E=n[7],t[4]=y*r+b*a+x*d+E*g,t[5]=y*i+b*l+x*h+E*m,t[6]=y*o+b*u+x*f+E*v,t[7]=y*s+b*c+x*p+E*_,y=n[8],b=n[9],x=n[10],E=n[11],t[8]=y*r+b*a+x*d+E*g,t[9]=y*i+b*l+x*h+E*m,t[10]=y*o+b*u+x*f+E*v,t[11]=y*s+b*c+x*p+E*_,y=n[12],b=n[13],x=n[14],E=n[15],t[12]=y*r+b*a+x*d+E*g,t[13]=y*i+b*l+x*h+E*m,t[14]=y*o+b*u+x*f+E*v,t[15]=y*s+b*c+x*p+E*_,t}function u(t,e,n){var r,i,o,s,a,l,u,c,d,h,f,p,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=u,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=r*g+a*m+d*v+e[12],t[13]=i*g+l*m+h*v+e[13],t[14]=o*g+u*m+f*v+e[14],t[15]=s*g+c*m+p*v+e[15]),t}function c(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,i){var o,s,a,l,u,c,d,h,f,p,g,m,v,_,y,b,x,E,T,S,A,P,C,w,D=i[0],L=i[1],R=i[2],O=Math.hypot(D,L,R);return O<r.EPSILON?null:(D*=O=1/O,L*=O,R*=O,o=Math.sin(n),a=1-(s=Math.cos(n)),l=e[0],u=e[1],c=e[2],d=e[3],h=e[4],f=e[5],p=e[6],g=e[7],m=e[8],v=e[9],_=e[10],y=e[11],b=D*D*a+s,x=L*D*a+R*o,E=R*D*a-L*o,T=D*L*a-R*o,S=L*L*a+s,A=R*L*a+D*o,P=D*R*a+L*o,C=L*R*a-D*o,w=R*R*a+s,t[0]=l*b+h*x+m*E,t[1]=u*b+f*x+v*E,t[2]=c*b+p*x+_*E,t[3]=d*b+g*x+y*E,t[4]=l*T+h*S+m*A,t[5]=u*T+f*S+v*A,t[6]=c*T+p*S+_*A,t[7]=d*T+g*S+y*A,t[8]=l*P+h*C+m*w,t[9]=u*P+f*C+v*w,t[10]=c*P+p*C+_*w,t[11]=d*P+g*C+y*w,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function h(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=s*i+c*r,t[6]=a*i+d*r,t[7]=l*i+h*r,t[8]=u*i-o*r,t[9]=c*i-s*r,t[10]=d*i-a*r,t[11]=h*i-l*r,t}function f(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],u=e[8],c=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=s*i-c*r,t[2]=a*i-d*r,t[3]=l*i-h*r,t[8]=o*r+u*i,t[9]=s*r+c*i,t[10]=a*r+d*i,t[11]=l*r+h*i,t}function p(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=s*i+c*r,t[2]=a*i+d*r,t[3]=l*i+h*r,t[4]=u*i-o*r,t[5]=c*i-s*r,t[6]=d*i-a*r,t[7]=h*i-l*r,t}function g(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,l=i+i,u=n*s,c=r*s,d=r*a,h=i*s,f=i*a,p=i*l,g=o*s,m=o*a,v=o*l;return t[0]=1-d-p,t[1]=c+v,t[2]=h-m,t[3]=0,t[4]=c-v,t[5]=1-u-p,t[6]=f+g,t[7]=0,t[8]=h+m,t[9]=f-g,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m(t,e,n,r,i,o,s){var a=1/(n-e),l=1/(i-r),u=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(s+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*u,t[15]=0,t}var v=function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},_=function(t,e,n,r,i,o,s){var a=1/(e-n),l=1/(r-i),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(s+o)*u,t[15]=1,t};function y(t,e,n,i){var o,s,a,l,u,c,d,h,f,p,g=e[0],m=e[1],v=e[2],_=i[0],y=i[1],b=i[2],x=n[0],E=n[1],T=n[2];return Math.abs(g-x)<r.EPSILON&&Math.abs(m-E)<r.EPSILON&&Math.abs(v-T)<r.EPSILON?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0):(p=1/Math.hypot(d=g-x,h=m-E,f=v-T),d*=p,h*=p,f*=p,(p=Math.hypot(o=y*f-b*h,s=b*d-_*f,a=_*h-y*d))?(o*=p=1/p,s*=p,a*=p):(o=0,s=0,a=0),(p=Math.hypot(l=h*a-f*s,u=f*o-d*a,c=d*s-h*o))?(l*=p=1/p,u*=p,c*=p):(l=0,u=0,c=0),t[0]=o,t[1]=l,t[2]=d,t[3]=0,t[4]=s,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(o*g+s*m+a*v),t[13]=-(l*g+u*m+c*v),t[14]=-(d*g+h*m+f*v)),t[15]=1,t}function b(t,e){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],g=t[12],m=t[13],v=t[14],_=t[15],y=e[0],b=e[1],x=e[2],E=e[3],T=e[4],S=e[5],A=e[6],P=e[7],C=e[8],w=e[9],D=e[10],L=e[11],R=e[12],O=e[13],I=e[14],M=e[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-b)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-E)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(a-T)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-A)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-P)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(h-w)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(f-D)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(p-L)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(g-R)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(m-O)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(v-I)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(_-M)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(M))}}),u("bpIRf",function(e,n){t(e.exports,"scale",()=>o),t(e.exports,"transformMat4",()=>s);var r,i=l("7EJz5");function o(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function s(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}r=new i.ARRAY_TYPE(4),i.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}),u("cu0SC",function(e,n){t(e.exports,"default",()=>h);var r=l("2qeFG"),i=l("5Vmrk");l("auS2n");var o=l("gZN7e"),s=l("itRg6"),a=l("3Qy2i"),u=l("88MOt"),c=l("a0auE"),d=l("cn1FU");class h extends i.default{constructor(t={}){let e;let{latitude:n=0,longitude:i=0,zoom:s=0,pitch:a=0,bearing:l=0,nearZMultiplier:u=.1,farZMultiplier:h=1.01,nearZ:f,farZ:p,orthographic:g=!1,projectionMatrix:m,repeat:v=!1,worldOffset:_=0,position:y,padding:b,legacyMeterSizes:x=!1}=t,{width:E,height:T,altitude:S=1.5}=t,A=Math.pow(2,s);E=E||1,T=T||1;let P=null;if(m)S=m[5]/2,e=(0,o.altitudeToFovy)(S);else{let r;if(t.fovy?(e=t.fovy,S=(0,o.fovyToAltitude)(e)):e=(0,o.altitudeToFovy)(S),b){let{top:t=0,bottom:e=0}=b;r=[0,(0,c.clamp)((t+T-e)/2,0,T)-T/2]}P=(0,o.getProjectionParameters)({width:E,height:T,scale:A,center:y&&[0,0,y[2]*(0,o.unitsPerMeter)(n)],offset:r,pitch:a,fovy:e,nearZMultiplier:u,farZMultiplier:h}),Number.isFinite(f)&&(P.near=f),Number.isFinite(p)&&(P.far=p)}let C=(0,o.getViewMatrix)({height:T,pitch:a,bearing:l,scale:A,altitude:S});_&&(C=new(0,d.default)().translate([512*_,0,0]).multiplyLeft(C)),super({...t,width:E,height:T,viewMatrix:C,longitude:i,latitude:n,zoom:s,...P,fovy:e,focalDistance:S}),(0,r.default)(this,"longitude",void 0),(0,r.default)(this,"latitude",void 0),(0,r.default)(this,"pitch",void 0),(0,r.default)(this,"bearing",void 0),(0,r.default)(this,"altitude",void 0),(0,r.default)(this,"fovy",void 0),(0,r.default)(this,"orthographic",void 0),(0,r.default)(this,"_subViewports",void 0),(0,r.default)(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=s,this.pitch=a,this.bearing=l,this.altitude=S,this.fovy=e,this.orthographic=g,this._subViewports=v?[]:null,this._pseudoMeters=x,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){let t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let t=e;t<=n;t++){let e=t?new h({...this,worldOffset:t}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);let[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*(0,o.unitsPerMeter)(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);let[e,n]=this.unprojectFlat(t),r=(t[2]||0)/(0,o.unitsPerMeter)(n);return[e,n,r]}addMetersToLngLat(t,e){return(0,o.addMetersToLngLat)(t,e)}panByPosition(t,e){let n=(0,o.pixelsToWorld)(e,this.pixelUnprojectionMatrix),r=this.projectFlat(t),i=u.add([],r,u.negate([],n)),s=u.add([],this.center,i),[a,l]=this.unprojectFlat(s);return{longitude:a,latitude:l}}getBounds(t={}){let e=(0,a.default)(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(t,e={}){let{width:n,height:r}=this,{longitude:i,latitude:o,zoom:a}=(0,s.default)({width:n,height:r,bounds:t,...e});return new h({width:n,height:r,longitude:i,latitude:o,zoom:a})}}(0,r.default)(h,"displayName","WebMercatorViewport")}),u("5Vmrk",function(e,n){t(e.exports,"default",()=>v);var r=l("2qeFG"),i=l("i5wGC"),o=l("jmseR"),s=l("a0auE"),a=l("cn1FU"),u=l("iNLNk"),c=l("hnOie");l("auS2n");var d=l("gZN7e"),h=l("heh00");let f=Math.PI/180,p=(0,o.createMat4)(),g=[0,0,0],m={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class v{constructor(t={}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"x",void 0),(0,r.default)(this,"y",void 0),(0,r.default)(this,"width",void 0),(0,r.default)(this,"height",void 0),(0,r.default)(this,"padding",void 0),(0,r.default)(this,"isGeospatial",void 0),(0,r.default)(this,"zoom",void 0),(0,r.default)(this,"focalDistance",void 0),(0,r.default)(this,"position",void 0),(0,r.default)(this,"modelMatrix",void 0),(0,r.default)(this,"distanceScales",void 0),(0,r.default)(this,"scale",void 0),(0,r.default)(this,"center",void 0),(0,r.default)(this,"cameraPosition",void 0),(0,r.default)(this,"projectionMatrix",void 0),(0,r.default)(this,"viewMatrix",void 0),(0,r.default)(this,"viewMatrixUncentered",void 0),(0,r.default)(this,"viewMatrixInverse",void 0),(0,r.default)(this,"viewProjectionMatrix",void 0),(0,r.default)(this,"pixelProjectionMatrix",void 0),(0,r.default)(this,"pixelUnprojectionMatrix",void 0),(0,r.default)(this,"resolution",void 0),(0,r.default)(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||m,this.focalDistance=t.focalDistance||1,this.position=t.position||g,this.modelMatrix=t.modelMatrix||null;let{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?h.PROJECTION_MODE.WEB_MERCATOR:h.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:h.PROJECTION_MODE.IDENTITY}equals(t){return t instanceof v&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&(0,s.equals)(t.projectionMatrix,this.projectionMatrix)&&(0,s.equals)(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:e=!0}={}){let n=this.projectPosition(t),r=(0,d.worldToPixels)(n,this.pixelProjectionMatrix),[i,o]=r,s=e?o:this.height-o;return 2===t.length?[i,s]:[i,s,r[2]]}unproject(t,{topLeft:e=!0,targetZ:n}={}){let[r,i,o]=t,s=e?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],l=(0,d.pixelsToWorld)([r,s,o],this.pixelUnprojectionMatrix,a),[u,c,h]=this.unprojectPosition(l);return Number.isFinite(o)?[u,c,h]:Number.isFinite(n)?[u,c,n]:[u,c]}projectPosition(t){let[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){let[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){let e=(0,d.lngLatToWorld)(t);return e[1]=(0,s.clamp)(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?(0,d.worldToLngLat)(t):t}getBounds(t={}){let e={targetZ:t.z||0},n=this.unproject([0,0],e),r=this.unproject([this.width,0],e),i=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}getDistanceScales(t){return t?(0,d.getDistanceScales)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:e,width:n=1,height:r=1}){return t<this.x+this.width&&this.x<t+n&&e<this.y+this.height&&this.y<e+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(0,o.getFrustumPlanes)(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,e){return null}_initProps(t){let e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=(0,d.getMeterZoom)({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||(0,d.getDistanceScales)({latitude:n,longitude:e}));let r=Math.pow(2,this.zoom);this.scale=r;let{position:i,modelMatrix:o}=t,s=g;if(i&&(s=o?new(0,a.default)(o).transformAsVector(i,[]):i),this.isGeospatial){let t=this.projectPosition([e,n,0]);this.center=new(0,u.default)(s).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(s)}_initMatrices(t){let{viewMatrix:e=p,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:l,fovy:d=75,near:h=.1,far:g=1e3,padding:m=null,focalDistance:v=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=new(0,a.default)().multiplyRight(e).translate(new(0,u.default)(this.center).negate()),this.projectionMatrix=n||function({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:o,near:l,far:u}){let c=t/e,d=n?new(0,a.default)().orthographic({fovy:r,aspect:c,focalDistance:i,near:l,far:u}):new(0,a.default)().perspective({fovy:r,aspect:c,near:l,far:u});if(o){let{left:n=0,right:r=0,top:i=0,bottom:a=0}=o,l=(0,s.clamp)((n+t-r)/2,0,t)-t/2,u=(0,s.clamp)((i+e-a)/2,0,e)-e/2;d[8]-=2*l/t,d[9]+=2*u/e}return d}({width:this.width,height:this.height,orthographic:r,fovyRadians:l||d*f,focalDistance:v,padding:m,near:h,far:g});let _=(0,o.createMat4)();c.multiply(_,_,this.projectionMatrix),c.multiply(_,_,this.viewMatrix),this.viewProjectionMatrix=_,this.viewMatrixInverse=c.invert([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=(0,o.getCameraPosition)(this.viewMatrixInverse);let y=(0,o.createMat4)(),b=(0,o.createMat4)();c.scale(y,y,[this.width/2,-this.height/2,1]),c.translate(y,y,[1,-1,0]),c.multiply(b,y,this.viewProjectionMatrix),this.pixelProjectionMatrix=b,this.pixelUnprojectionMatrix=c.invert((0,o.createMat4)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||(0,i.default).warn("Pixel project matrix not invertible")()}}(0,r.default)(v,"displayName","Viewport")}),u("cn1FU",function(e,n){let r,i;t(e.exports,"default",()=>v);var o,s,a=l("b4XGN"),u=l("esRzZ"),c=l("3F3qn"),d=l("hnOie"),h=l("88MOt"),f=l("4iX2G"),p=l("bpIRf");(o=s||(s={}))[o.COL0ROW0=0]="COL0ROW0",o[o.COL0ROW1=1]="COL0ROW1",o[o.COL0ROW2=2]="COL0ROW2",o[o.COL0ROW3=3]="COL0ROW3",o[o.COL1ROW0=4]="COL1ROW0",o[o.COL1ROW1=5]="COL1ROW1",o[o.COL1ROW2=6]="COL1ROW2",o[o.COL1ROW3=7]="COL1ROW3",o[o.COL2ROW0=8]="COL2ROW0",o[o.COL2ROW1=9]="COL2ROW1",o[o.COL2ROW2=10]="COL2ROW2",o[o.COL2ROW3=11]="COL2ROW3",o[o.COL3ROW0=12]="COL3ROW0",o[o.COL3ROW1=13]="COL3ROW1",o[o.COL3ROW2=14]="COL3ROW2",o[o.COL3ROW3=15]="COL3ROW3";let g=45*Math.PI/180,m=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class v extends a.default{static get IDENTITY(){return i||Object.freeze(i=new v),i}static get ZERO(){return r||Object.freeze(r=new v([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),r}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return s}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1==arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,o,s,a,l,u,c,d,h,f,p,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=u,this[10]=c,this[11]=d,this[12]=h,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(t,e,n,r,i,o,s,a,l,u,c,d,h,f,p,g){return this[0]=t,this[1]=i,this[2]=l,this[3]=h,this[4]=e,this[5]=o,this[6]=u,this[7]=f,this[8]=n,this[9]=s,this[10]=c,this[11]=p,this[12]=r,this[13]=a,this[14]=d,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(m)}fromObject(t){return this.check()}fromQuaternion(t){return d.fromQuat(this,t),this.check()}frustum(t){let{left:e,right:n,bottom:r,top:i,near:o=.1,far:s=500}=t;return s===1/0?(this[0]=2*o/(n-e),this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=2*o/(i-r),this[6]=0,this[7]=0,this[8]=(n+e)/(n-e),this[9]=(i+r)/(i-r),this[10]=-1,this[11]=-1,this[12]=0,this[13]=0,this[14]=-2*o,this[15]=0):d.frustum(this,e,n,r,i,o,s),this.check()}lookAt(t){let{eye:e,center:n=[0,0,0],up:r=[0,1,0]}=t;return d.lookAt(this,e,n,r),this.check()}ortho(t){let{left:e,right:n,bottom:r,top:i,near:o=.1,far:s=500}=t;return d.ortho(this,e,n,r,i,o,s),this.check()}orthographic(t){let{fovy:e=g,aspect:n=1,focalDistance:r=1,near:i=.1,far:o=500}=t;_(e);let s=r*Math.tan(e/2),a=s*n;return this.ortho({left:-a,right:a,bottom:-s,top:s,near:i,far:o})}perspective(t){let{fovy:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=t;return _(e),d.perspective(this,e,n,r,i),this.check()}determinant(){return d.determinant(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];let n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];let n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}transpose(){return d.transpose(this,this),this.check()}invert(){return d.invert(this,this),this.check()}multiplyLeft(t){return d.multiply(this,t,this),this.check()}multiplyRight(t){return d.multiply(this,this,t),this.check()}rotateX(t){return d.rotateX(this,this,t),this.check()}rotateY(t){return d.rotateY(this,this,t),this.check()}rotateZ(t){return d.rotateZ(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return d.rotate(this,this,t,e),this.check()}scale(t){return d.scale(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return d.translate(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=p.transformMat4(e||[-0,-0,-0,-0],t,this),(0,u.checkVector)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){let n;let{length:r}=t;switch(r){case 2:n=h.transformMat4(e||[-0,-0],t,this);break;case 3:n=f.transformMat4(e||[-0,-0,-0],t,this);break;default:throw Error("Illegal vector")}return(0,u.checkVector)(n,t.length),n}transformAsVector(t,e){let n;switch(t.length){case 2:n=(0,c.vec2_transformMat4AsVector)(e||[-0,-0],t,this);break;case 3:n=(0,c.vec3_transformMat4AsVector)(e||[-0,-0,-0],t,this);break;default:throw Error("Illegal vector")}return(0,u.checkVector)(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}function _(t){if(t>2*Math.PI)throw Error("expected radians")}}),u("b4XGN",function(e,n){t(e.exports,"default",()=>s);var r=l("cuOSU"),i=l("esRzZ"),o=l("a0auE");class s extends r.default{toString(){let t="[";if(o.config.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+"]"}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=(0,i.checkNumber)(n),this}getColumn(t,e=Array(this.RANK).fill(-0)){let n=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[n+t];return e}setColumn(t,e){let n=t*this.RANK;for(let t=0;t<this.RANK;++t)this[n+t]=e[t];return this}}}),u("88MOt",function(e,n){t(e.exports,"add",()=>o),t(e.exports,"scale",()=>s),t(e.exports,"length",()=>a),t(e.exports,"negate",()=>u),t(e.exports,"lerp",()=>c),t(e.exports,"transformMat4",()=>d),t(e.exports,"sub",()=>h);var r,i=l("7EJz5");function o(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function s(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function a(t){return Math.hypot(t[0],t[1])}function u(t,e){return t[0]=-e[0],t[1]=-e[1],t}function c(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function d(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var h=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};r=new i.ARRAY_TYPE(2),i.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0)}),u("auS2n",function(e,n){t(e.exports,"getBounds",()=>l("3Qy2i").default),t(e.exports,"fitBounds",()=>l("itRg6").default),t(e.exports,"normalizeViewportProps",()=>l("aFNkd").default),t(e.exports,"flyToViewport",()=>l("bS5uW").default),t(e.exports,"getFlyToDuration",()=>l("bS5uW").getFlyToDuration),t(e.exports,"lngLatToWorld",()=>l("gZN7e").lngLatToWorld),t(e.exports,"worldToLngLat",()=>l("gZN7e").worldToLngLat),t(e.exports,"worldToPixels",()=>l("gZN7e").worldToPixels),t(e.exports,"pixelsToWorld",()=>l("gZN7e").pixelsToWorld),t(e.exports,"altitudeToFovy",()=>l("gZN7e").altitudeToFovy),t(e.exports,"fovyToAltitude",()=>l("gZN7e").fovyToAltitude),t(e.exports,"getMeterZoom",()=>l("gZN7e").getMeterZoom),t(e.exports,"unitsPerMeter",()=>l("gZN7e").unitsPerMeter),t(e.exports,"getDistanceScales",()=>l("gZN7e").getDistanceScales),t(e.exports,"addMetersToLngLat",()=>l("gZN7e").addMetersToLngLat),t(e.exports,"getViewMatrix",()=>l("gZN7e").getViewMatrix),t(e.exports,"getProjectionParameters",()=>l("gZN7e").getProjectionParameters),l("7qkwD"),l("3Qy2i"),l("itRg6"),l("aFNkd"),l("bS5uW"),l("gZN7e")}),u("7qkwD",function(t,e){l("2qeFG"),l("3FIK9"),l("gZN7e"),l("itRg6"),l("3Qy2i"),l("hnOie"),l("88MOt"),l("4iX2G")}),u("3FIK9",function(e,n){t(e.exports,"createMat4",()=>i),t(e.exports,"transformVector",()=>o),t(e.exports,"mod",()=>s),t(e.exports,"lerp",()=>a),t(e.exports,"clamp",()=>u),t(e.exports,"log2",()=>c);var r=l("bpIRf");function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t,e){let n=(0,r.transformMat4)([],e,t);return(0,r.scale)(n,n,1/n[3]),n}function s(t,e){let n=t%e;return n<0?e+n:n}function a(t,e,n){return n*e+(1-n)*t}function u(t,e,n){return t<e?e:t>n?n:t}let c=Math.log2||function(t){return Math.log(t)*Math.LOG2E}}),u("gZN7e",function(e,n){t(e.exports,"MAX_LATITUDE",()=>f),t(e.exports,"DEFAULT_ALTITUDE",()=>p),t(e.exports,"zoomToScale",()=>g),t(e.exports,"scaleToZoom",()=>m),t(e.exports,"lngLatToWorld",()=>v),t(e.exports,"worldToLngLat",()=>_),t(e.exports,"getMeterZoom",()=>y),t(e.exports,"unitsPerMeter",()=>b),t(e.exports,"getDistanceScales",()=>x),t(e.exports,"addMetersToLngLat",()=>E),t(e.exports,"getViewMatrix",()=>T),t(e.exports,"getProjectionParameters",()=>S),t(e.exports,"altitudeToFovy",()=>P),t(e.exports,"fovyToAltitude",()=>C),t(e.exports,"getProjectionMatrix",()=>A),t(e.exports,"worldToPixels",()=>w),t(e.exports,"pixelsToWorld",()=>D);var r=l("3FIK9"),i=l("hnOie"),o=l("88MOt"),s=l("4iX2G"),a=l("68NzH");let u=Math.PI,c=u/4,d=u/180,h=180/u,f=85.051129,p=1.5;function g(t){return Math.pow(2,t)}function m(t){return(0,r.log2)(t)}function v(t){let[e,n]=t;(0,a.default)(Number.isFinite(e)),(0,a.default)(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");let r=512*(u+Math.log(Math.tan(c+n*d*.5)))/(2*u);return[512*(e*d+u)/(2*u),r]}function _(t){let[e,n]=t,r=2*(Math.atan(Math.exp(n/512*(2*u)-u))-c);return[(e/512*(2*u)-u)*h,r*h]}function y(t){let{latitude:e}=t;return(0,a.default)(Number.isFinite(e)),m(4003e4*Math.cos(e*d))-9}function b(t){return 512/4003e4/Math.cos(t*d)}function x(t){let{latitude:e,longitude:n,highPrecision:r=!1}=t;(0,a.default)(Number.isFinite(e)&&Number.isFinite(n));let i=Math.cos(e*d),o=512/360/i,s=512/4003e4/i,l={unitsPerMeter:[s,s,s],metersPerUnit:[1/s,1/s,1/s],unitsPerDegree:[512/360,o,s],degreesPerUnit:[1/(512/360),1/o,1/s]};if(r){let t=d*Math.tan(e*d)/i,n=512/4003e4*t,r=n/o*s;l.unitsPerDegree2=[0,512/360*t/2,n],l.unitsPerMeter2=[r,0,r]}return l}function E(t,e){let[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:l,unitsPerMeter2:u}=x({longitude:n,latitude:r,highPrecision:!0}),c=v(t);c[0]+=o*(l[0]+u[0]*s),c[1]+=s*(l[1]+u[1]*s);let d=_(c);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],(i||0)+(a||0)]:d}function T(t){let{height:e,pitch:n,bearing:o,altitude:a,scale:l,center:u}=t,c=(0,r.createMat4)();i.translate(c,c,[0,0,-a]),i.rotateX(c,c,-n*d),i.rotateZ(c,c,o*d);let h=l/e;return i.scale(c,c,[h,h,h]),u&&i.translate(c,c,s.negate([],u)),c}function S(t){let{width:e,height:n,altitude:i,pitch:o=0,offset:s,center:a,scale:l,nearZMultiplier:u=1,farZMultiplier:c=1}=t,{fovy:h=P(p)}=t;void 0!==i&&(h=P(i));let f=h*d,g=o*d,m=C(h),v=m;a&&(v+=a[2]*l/Math.cos(g)/n);let _=f*(.5+(s?s[1]:0)/n),y=Math.sin(_)*v/Math.sin((0,r.clamp)(Math.PI/2-g-_,.01,Math.PI-.01));return{fov:f,aspect:e/n,focalDistance:m,near:u,far:Math.min((Math.sin(g)*y+v)*c,10*v)}}function A(t){let{fov:e,aspect:n,near:r,far:o}=S(t);return i.perspective([],e,n,r,o)}function P(t){return 2*Math.atan(.5/t)*h}function C(t){return .5/Math.tan(.5*t*d)}function w(t,e){let[n,i,o=0]=t;return(0,a.default)(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o)),(0,r.transformVector)(e,[n,i,o,1])}function D(t,e,n=0){let[i,s,l]=t;if((0,a.default)(Number.isFinite(i)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(l))return(0,r.transformVector)(e,[i,s,l,1]);let u=(0,r.transformVector)(e,[i,s,0,1]),c=(0,r.transformVector)(e,[i,s,1,1]),d=u[2],h=c[2];return o.lerp([],u,c,d===h?0:((n||0)-d)/(h-d))}}),u("68NzH",function(e,n){t(e.exports,"default",()=>r);function r(t,e){if(!t)throw Error(e||"@math.gl/web-mercator: assertion failed.")}}),u("itRg6",function(e,n){t(e.exports,"default",()=>s);var r=l("68NzH"),i=l("3FIK9"),o=l("gZN7e");function s(t){let{width:e,height:n,bounds:s,minExtent:a=0,maxZoom:l=24,offset:u=[0,0]}=t,[[c,d],[h,f]]=s,p=function(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:((0,r.default)(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),g=(0,o.lngLatToWorld)([c,(0,i.clamp)(f,-o.MAX_LATITUDE,o.MAX_LATITUDE)]),m=(0,o.lngLatToWorld)([h,(0,i.clamp)(d,-o.MAX_LATITUDE,o.MAX_LATITUDE)]),v=[Math.max(Math.abs(m[0]-g[0]),a),Math.max(Math.abs(m[1]-g[1]),a)],_=[e-p.left-p.right-2*Math.abs(u[0]),n-p.top-p.bottom-2*Math.abs(u[1])];(0,r.default)(_[0]>0&&_[1]>0);let y=_[0]/v[0],b=_[1]/v[1],x=(p.right-p.left)/2/y,E=(p.top-p.bottom)/2/b,T=[(m[0]+g[0])/2+x,(m[1]+g[1])/2+E],S=(0,o.worldToLngLat)(T),A=Math.min(l,(0,i.log2)(Math.abs(Math.min(y,b))));return(0,r.default)(Number.isFinite(A)),{longitude:S[0],latitude:S[1],zoom:A}}}),u("3Qy2i",function(e,n){t(e.exports,"default",()=>a);var r=l("gZN7e"),i=l("88MOt"),o=l("3FIK9");let s=Math.PI/180;function a(t,e=0){let n,r;let{width:i,height:o,unproject:l}=t,c={targetZ:e},d=l([0,o],c),h=l([i,o],c);return(t.fovy?.5*t.fovy*s:Math.atan(.5/t.altitude))>(90-t.pitch)*s-.01?(n=u(t,0,e),r=u(t,i,e)):(n=l([0,0],c),r=l([i,0],c)),[d,h,r,n]}function u(t,e,n){let{pixelUnprojectionMatrix:s}=t,a=(0,o.transformVector)(s,[e,0,1,1]),l=(0,o.transformVector)(s,[e,t.height,1,1]),u=(n*t.distanceScales.unitsPerMeter[2]-a[2])/(l[2]-a[2]),c=i.lerp([],a,l,u),d=(0,r.worldToLngLat)(c);return d.push(n),d}}),u("aFNkd",function(e,n){t(e.exports,"default",()=>o);var r=l("gZN7e"),i=l("3FIK9");function o(t){let{width:e,height:n,pitch:o=0}=t,{longitude:s,latitude:a,zoom:l,bearing:u=0}=t;(s<-180||s>180)&&(s=(0,i.mod)(s+180,360)-180),(u<-180||u>180)&&(u=(0,i.mod)(u+180,360)-180);let c=(0,i.log2)(n/512);if(l<=c)l=c,a=0;else{let t=n/2/Math.pow(2,l),e=(0,r.worldToLngLat)([0,t])[1];if(a<e)a=e;else{let e=(0,r.worldToLngLat)([0,512-t])[1];a>e&&(a=e)}}return{width:e,height:n,longitude:s,latitude:a,zoom:l,pitch:o,bearing:u}}}),u("bS5uW",function(e,n){t(e.exports,"default",()=>u),t(e.exports,"getFlyToDuration",()=>c);var r=l("3FIK9"),i=l("gZN7e"),o=l("88MOt");let s=["longitude","latitude","zoom"],a={curve:1.414,speed:1.2};function u(t,e,n,a){let{startZoom:l,startCenterXY:u,uDelta:c,w0:h,u1:f,S:p,rho:g,rho2:m,r0:v}=d(t,e,a);if(f<.01){let i={};for(let o of s){let s=t[o],a=e[o];i[o]=(0,r.lerp)(s,a,n)}return i}let _=n*p,y=Math.cosh(v)/Math.cosh(v+g*_),b=(Math.cosh(v)*Math.tanh(v+g*_)-Math.sinh(v))/m*h/f,x=l+(0,i.scaleToZoom)(1/y),E=o.scale([],c,b);o.add(E,E,u);let T=(0,i.worldToLngLat)(E);return{longitude:T[0],latitude:T[1],zoom:x}}function c(t,e,n){let r;let i={...a,...n},{screenSpeed:o,speed:s,maxDuration:l}=i,{S:u,rho:c}=d(t,e,i),h=1e3*u;return r=Number.isFinite(o)?h/(o/c):h/s,Number.isFinite(l)&&r>l?0:r}function d(t,e,n){let r=(n=Object.assign({},a,n)).curve,s=t.zoom,l=[t.longitude,t.latitude],u=(0,i.zoomToScale)(s),c=e.zoom,d=[e.longitude,e.latitude],h=(0,i.zoomToScale)(c-s),f=(0,i.lngLatToWorld)(l),p=(0,i.lngLatToWorld)(d),g=o.sub([],p,f),m=Math.max(t.width,t.height),v=m/h,_=o.length(g)*u,y=Math.max(_,.01),b=r*r,x=(v*v-m*m+b*b*y*y)/(2*m*b*y),E=(v*v-m*m-b*b*y*y)/(2*v*b*y),T=Math.log(Math.sqrt(x*x+1)-x),S=Math.log(Math.sqrt(E*E+1)-E);return{startZoom:s,startCenterXY:f,uDelta:g,w0:m,u1:_,S:(S-T)/r,rho:r,rho2:b,r0:T,r1:S}}}),u("hRLk6",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("56tgz"),o=l("61trH");let s=0;class a{constructor(...t){(0,r.default)(this,"id",void 0),(0,r.default)(this,"props",void 0),(0,r.default)(this,"count",void 0),this.props=(0,o.createProps)(this,t),this.id=this.props.id,this.count=s++}clone(t){let{props:e}=this,n={};for(let t in e[i.ASYNC_DEFAULTS_SYMBOL])t in e[i.ASYNC_RESOLVED_SYMBOL]?n[t]=e[i.ASYNC_RESOLVED_SYMBOL][t]:t in e[i.ASYNC_ORIGINAL_SYMBOL]&&(n[t]=e[i.ASYNC_ORIGINAL_SYMBOL][t]);return new this.constructor({...e,...n,...t})}}(0,r.default)(a,"componentName","Component"),(0,r.default)(a,"defaultProps",{})}),u("61trH",function(e,n){t(e.exports,"createProps",()=>a);var r=l("i5wGC"),i=l("gl1Lh"),o=l("kE4bA"),s=l("56tgz");function a(t,e){let n;for(let t=e.length-1;t>=0;t--){let r=e[t];"extensions"in r&&(n=r.extensions)}let a=Object.create(function t(e,n){var a;let l="_mergedDefaultProps";if(n)for(let t of n){let e=t.constructor;e&&(l+=":".concat(e.extensionName||e.name))}return u(e,a=l)&&e[a]||(e[l]=function(e,n){var a,l;if(!e.prototype)return null;let c=t(Object.getPrototypeOf(e)),d=(l="defaultProps",u(a=e,l)&&a[l]||{}),h=(0,o.parsePropTypes)(d),f=Object.assign(Object.create(null),c,h.defaultProps),p=Object.assign(Object.create(null),null==c?void 0:c[s.PROP_TYPES_SYMBOL],h.propTypes),g=Object.assign(Object.create(null),null==c?void 0:c[s.DEPRECATED_PROPS_SYMBOL],h.deprecatedProps);for(let e of n){let n=t(e.constructor);n&&(Object.assign(f,n),Object.assign(p,n[s.PROP_TYPES_SYMBOL]),Object.assign(g,n[s.DEPRECATED_PROPS_SYMBOL]))}return Object.defineProperties(f,{id:{writable:!0,value:function(t){let e=t.componentName;return e||(0,r.default).warn("".concat(t.name,".componentName not specified"))(),e||t.name}(e)}}),function(t,e){let n={},r={};for(let t in e){let o=e[t],{name:a,value:l}=o;o.async&&(n[a]=l,r[a]=function(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||(0,i.isAsyncIterable)(e)?this[s.ASYNC_ORIGINAL_SYMBOL][t]=e:this[s.ASYNC_RESOLVED_SYMBOL][t]=e},get(){if(this[s.ASYNC_RESOLVED_SYMBOL]){if(t in this[s.ASYNC_RESOLVED_SYMBOL])return this[s.ASYNC_RESOLVED_SYMBOL][t]||this[s.ASYNC_DEFAULTS_SYMBOL][t];if(t in this[s.ASYNC_ORIGINAL_SYMBOL]){let e=this[s.COMPONENT_SYMBOL]&&this[s.COMPONENT_SYMBOL].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[s.ASYNC_DEFAULTS_SYMBOL][t]}}return this[s.ASYNC_DEFAULTS_SYMBOL][t]}}}(a))}t[s.ASYNC_DEFAULTS_SYMBOL]=n,t[s.ASYNC_ORIGINAL_SYMBOL]={},Object.defineProperties(t,r)}(f,p),function(t,e){for(let n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){let i="".concat(this.id,": ").concat(n);for(let r of e[n])u(this,r)||(this[r]=t);(0,r.default).deprecated(i,e[n].join("/"))()}})}(f,g),f[s.PROP_TYPES_SYMBOL]=p,f[s.DEPRECATED_PROPS_SYMBOL]=g,0!==n.length||u(e,"_propTypes")||(e._propTypes=p),f}(e,n||[]))}(t.constructor,n));a[s.COMPONENT_SYMBOL]=t,a[s.ASYNC_ORIGINAL_SYMBOL]={},a[s.ASYNC_RESOLVED_SYMBOL]={};for(let t=0;t<e.length;++t){let n=e[t];for(let t in n)a[t]=n[t]}return Object.freeze(a),a}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}),u("kE4bA",function(e,n){t(e.exports,"parsePropTypes",()=>s);var r=l("G0MmT"),i=l("dHpMo");let o={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||u(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>(0,i.deepEqual)(t,e,1)},accessor:{validate(t,e){let n=c(t);return"function"===n||n===c(e.value)},equal:(t,e,n)=>"function"==typeof e||(0,i.deepEqual)(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||u(t),equal(t,e,n){let{compare:r}=n,o=Number.isInteger(r)?r:r?1:0;return r?(0,i.deepEqual)(t,e,o):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;let{compare:r}=n,o=Number.isInteger(r)?r:r?1:0;return r?(0,i.deepEqual)(t,e,o):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{let{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{let i=n.context;return i&&i.gl?(0,r.createTexture)(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{(0,r.destroyTexture)(n.id,t)}}};function s(t){let e={},n={},r={};for(let[i,o]of Object.entries(t)){let t=null==o?void 0:o.deprecatedFor;if(t)r[i]=Array.isArray(t)?t:[t];else{let t=function(t,e){switch(c(e)){case"object":return a(t,e);case"array":return a(t,{type:"array",value:e,compare:!1});case"boolean":return a(t,{type:"boolean",value:e});case"number":return a(t,{type:"number",value:e});case"function":return a(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}(i,o);e[i]=t,n[i]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function a(t,e){return"type"in e?{name:t,...o[e.type],...e}:"value"in e?{name:t,type:c(e.value),...e}:{name:t,type:"object",value:e}}function u(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function c(t){return u(t)?"array":null===t?"null":typeof t}}),u("G0MmT",function(e,n){t(e.exports,"createTexture",()=>s),t(e.exports,"destroyTexture",()=>a);var r=l("35qVw");let i={10241:9987,10240:9729,10242:33071,10243:33071},o={};function s(t,e,n,s){if(n instanceof r.default)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let a=null;n.compressed&&(a={10241:n.data.length>1?9985:9729});let l=new r.default(e,{...n,parameters:{...i,...a,...s}});return o[l.id]=t,l}function a(t,e){e&&e instanceof r.default&&o[e.id]===t&&(e.delete(),delete o[e.id])}}),u("dHpMo",function(e,n){t(e.exports,"deepEqual",()=>function t(e,n,r){if(e===n)return!0;if(!r||!e||!n)return!1;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t(e[i],n[i],r-1))return!1;return!0}if(Array.isArray(n))return!1;if("object"==typeof e&&"object"==typeof n){let i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(let o of i)if(!n.hasOwnProperty(o)||!t(e[o],n[o],r-1))return!1;return!0}return!1})}),u("5UbfZ",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG"),i=l("dH5dc");class o extends i.default{constructor({attributeManager:t,layer:e}){super(e),(0,r.default)(this,"attributeManager",void 0),(0,r.default)(this,"needsRedraw",void 0),(0,r.default)(this,"needsUpdate",void 0),(0,r.default)(this,"subLayers",void 0),(0,r.default)(this,"usesPickingColorCache",void 0),(0,r.default)(this,"hasPickingBuffer",void 0),(0,r.default)(this,"changeFlags",void 0),(0,r.default)(this,"viewport",void 0),(0,r.default)(this,"uniformTransitions",void 0),(0,r.default)(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){let n=this.layer,r=null==n?void 0:n.props.fetch;return r?r(e,{propName:t,layer:n}):super._fetch(t,e)}_onResolve(t,e){let n=this.layer;if(n){let r=n.props.onDataLoad;"data"===t&&r&&r(e,{propName:t,layer:n})}}_onError(t,e){let n=this.layer;n&&n.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}}),u("dH5dc",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("gl1Lh"),o=l("56tgz");let s=Object.freeze({});class a{constructor(t){(0,r.default)(this,"component",void 0),(0,r.default)(this,"onAsyncPropUpdated",void 0),(0,r.default)(this,"asyncProps",void 0),(0,r.default)(this,"oldProps",void 0),(0,r.default)(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(let t in this.asyncProps){let e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||s}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){let e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){let e=this.asyncProps[t];return!!(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(let t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[o.COMPONENT_SYMBOL]||this.component;let e=t[o.ASYNC_RESOLVED_SYMBOL]||{},n=t[o.ASYNC_ORIGINAL_SYMBOL]||t,r=t[o.ASYNC_DEFAULTS_SYMBOL]||{};for(let t in e){let n=e[t];this._createAsyncPropData(t,r[t]),this._updateAsyncProp(t,n),e[t]=this.getAsyncProp(t)}for(let t in n){let e=n[t];this._createAsyncPropData(t,r[t]),this._updateAsyncProp(t,e)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){if(this._didAsyncInputValueChange(t,e)){if("string"==typeof e&&(e=this._fetch(t,e)),e instanceof Promise){this._watchPromise(t,e);return}if((0,i.isAsyncIterable)(e)){this._resolveAsyncIterable(t,e);return}this._setPropValue(t,e)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps)for(let t in this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}_didAsyncInputValueChange(t,e){let n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();let n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){let r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){let n=this.asyncProps[t];if(n){n.pendingLoadCount++;let r=n.pendingLoadCount;e.then(e=>{this.component&&(e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,r),this._onResolve(t,e))}).catch(e=>{this._onError(t,e)})}}async _resolveAsyncIterable(t,e){if("data"!==t){this._setPropValue(t,e);return}let n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;let r=n.pendingLoadCount,i=[],o=0;for await(let n of e){if(!this.component)return;let{dataTransform:e}=this.component.props;Object.defineProperty(i=e?e(n,i):i.concat(n),"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(t,i,r)}this._onResolve(t,i)}_postProcessValue(t,e){let n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){let n=this.component&&this.component.props[o.PROP_TYPES_SYMBOL];this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}}),u("bIcUs",function(e,n){t(e.exports,"load",()=>a);var r=l("jh8sd"),i=l("9bDx9"),o=l("7VcV9"),s=l("itAWv");async function a(t,e,n,a){Array.isArray(e)||(0,i.isLoaderObject)(e)||(n=e,e=void 0);let l=(0,o.getFetchFunction)(n),u=t;return"string"==typeof t&&(u=await l(t)),(0,r.isBlob)(t)&&(u=await l(t)),await (0,s.parse)(u,e,n)}}),u("jh8sd",function(e,n){t(e.exports,"isObject",()=>o),t(e.exports,"isPureObject",()=>s),t(e.exports,"isIterable",()=>a),t(e.exports,"isAsyncIterable",()=>l),t(e.exports,"isIterator",()=>u),t(e.exports,"isResponse",()=>c),t(e.exports,"isBlob",()=>d),t(e.exports,"isBuffer",()=>h),t(e.exports,"isReadableStream",()=>g);let r=t=>"boolean"==typeof t,i=t=>"function"==typeof t,o=t=>null!==t&&"object"==typeof t,s=t=>o(t)&&t.constructor===({}).constructor,a=t=>t&&"function"==typeof t[Symbol.iterator],l=t=>t&&"function"==typeof t[Symbol.asyncIterator],u=t=>t&&i(t.next),c=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,d=t=>"undefined"!=typeof Blob&&t instanceof Blob,h=t=>t&&"object"==typeof t&&t.isBuffer,f=t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||o(t)&&i(t.tee)&&i(t.cancel)&&i(t.getReader),p=t=>o(t)&&i(t.read)&&i(t.pipe)&&r(t.readable),g=t=>f(t)||p(t)}),u("9bDx9",function(e,n){t(e.exports,"isLoaderObject",()=>i),t(e.exports,"normalizeLoader",()=>o);var r=l("dCQB8");function i(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function o(t){var e,n;let o;return(0,r.assert)(t,"null loader"),(0,r.assert)(i(t),"invalid loader"),Array.isArray(t)&&(o=t[1],t={...t=t[0],options:{...t.options,...o}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}}),u("dCQB8",function(e,n){t(e.exports,"assert",()=>r);function r(t,e){if(!t)throw Error(e||"loader assertion failed.")}}),u("7VcV9",function(e,n){t(e.exports,"getFetchFunction",()=>s);var r=l("jh8sd"),i=l("6laBw"),o=l("40keb");function s(t,e){let n=(0,o.getGlobalLoaderOptions)(),s=t||n;return"function"==typeof s.fetch?s.fetch:(0,r.isObject)(s.fetch)?t=>(0,i.fetchFile)(t,s):null!=e&&e.fetch?null==e?void 0:e.fetch:i.fetchFile}}),u("6laBw",function(e,n){t(e.exports,"fetchFile",()=>o);var r=l("aSpYV"),i=l("3GgBn");async function o(t,e){if("string"==typeof t){t=(0,r.resolvePath)(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await (0,i.makeResponse)(t)}}),u("aSpYV",function(e,n){t(e.exports,"resolvePath",()=>i);let r={};function i(t){for(let e in r)if(t.startsWith(e)){let n=r[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat("").concat(t)),t}}),u("3GgBn",function(e,n){t(e.exports,"makeResponse",()=>o),t(e.exports,"checkResponse",()=>s);var r=l("jh8sd"),i=l("ePZJP");async function o(t){if((0,r.isResponse)(t))return t;let e={},n=(0,i.getResourceContentLength)(t);n>=0&&(e["content-length"]=String(n));let o=(0,i.getResourceUrl)(t),s=(0,i.getResourceMIMEType)(t);s&&(e["content-type"]=s);let a=await u(t);a&&(e["x-first-bytes"]=a),"string"==typeof t&&(t=new TextEncoder().encode(t));let l=new Response(t,{headers:e});return Object.defineProperty(l,"url",{value:o}),l}async function s(t){if(!t.ok)throw Error(await a(t))}async function a(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{let n=t.headers.get("Content-Type"),r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(t){}return e}async function u(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){let e=t.slice(0,5);return await new Promise(t=>{let n=new FileReader;n.onload=e=>{var n;return t(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)})}if(t instanceof ArrayBuffer){let e=function(t){let e="",n=new Uint8Array(t);for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(e)}return null}}),u("ePZJP",function(e,n){t(e.exports,"getResourceUrl",()=>s),t(e.exports,"getResourceMIMEType",()=>a),t(e.exports,"getResourceContentLength",()=>u);var r=l("jh8sd"),i=l("7RyCu"),o=l("gcAYc");function s(t){return(0,r.isResponse)(t)?t.url:(0,r.isBlob)(t)?t.name||"":"string"==typeof t?t:""}function a(t){if((0,r.isResponse)(t)){let e=t.headers.get("content-type")||"",n=(0,o.stripQueryString)(t.url);return(0,i.parseMIMEType)(e)||(0,i.parseMIMETypeFromURL)(n)}return(0,r.isBlob)(t)?t.type||"":"string"==typeof t?(0,i.parseMIMETypeFromURL)(t):""}function u(t){return(0,r.isResponse)(t)?t.headers["content-length"]||-1:(0,r.isBlob)(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}}),u("7RyCu",function(e,n){t(e.exports,"parseMIMEType",()=>o),t(e.exports,"parseMIMETypeFromURL",()=>s);let r=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,i=/^([-\w.]+\/[-\w.+]+)/;function o(t){let e=i.exec(t);return e?e[1]:t}function s(t){let e=r.exec(t);return e?e[1]:""}}),u("gcAYc",function(e,n){t(e.exports,"extractQueryString",()=>i),t(e.exports,"stripQueryString",()=>o);let r=/\?.*/;function i(t){let e=t.match(r);return e&&e[0]}function o(t){return t.replace(r,"")}}),u("40keb",function(e,n){t(e.exports,"getGlobalLoaderState",()=>s),t(e.exports,"getGlobalLoaderOptions",()=>a),t(e.exports,"normalizeOptions",()=>u);var r=l("jh8sd"),i=l("dhkXj"),o=l("gUI1P");function s(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state=t._state||{},t._state}let a=()=>{let t=s();return t.globalOptions=t.globalOptions||{...o.DEFAULT_LOADER_OPTIONS},t.globalOptions};function u(t,e,n,r){return function(t,e){for(let n of(c(t,null,o.DEFAULT_LOADER_OPTIONS,o.REMOVED_LOADER_OPTIONS,e),e)){let r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};c(r,n.id,i,o,e)}}(t,n=Array.isArray(n=n||[])?n:[n]),function(t,e,n){let r={...t.options||{}};return!n||"baseUri"in r||(r.baseUri=n),null===r.log&&(r.log=new i.NullLog),d(r,a()),d(r,e),r}(e,t,r)}function c(t,e,n,o,s){let a=e||"Top level",l=e?"".concat(e,"."):"";for(let u in t){let c=!e&&(0,r.isObject)(t[u]),d="baseUri"===u&&!e,h="workerUrl"===u&&e;if(!(u in n)&&!d&&!h){if(u in o)(0,i.probeLog).warn("".concat(a," loader option '").concat(l).concat(u,"' no longer supported, use '").concat(o[u],"'"))();else if(!c){let t=function(t,e){let n=t.toLowerCase(),r="";for(let i of e)for(let e in i.options){if(t===e)return"Did you mean '".concat(i.id,".").concat(e,"'?");let o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(e,"'?"))}return r}(u,s);(0,i.probeLog).warn("".concat(a," loader option '").concat(l).concat(u,"' not recognized. ").concat(t))()}}}}function d(t,e){for(let n in e)if(n in e){let i=e[n];(0,r.isPureObject)(i)&&(0,r.isPureObject)(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}}),u("dhkXj",function(e,n){t(e.exports,"probeLog",()=>i),t(e.exports,"NullLog",()=>o),t(e.exports,"ConsoleLog",()=>s);var r=l("2qeFG");l("gNj4N");let i=new(l("irQqN")).Log({id:"loaders.gl"});class o{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class s{constructor(){(0,r.default)(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}}}),u("gUI1P",function(e,n){t(e.exports,"DEFAULT_LOADER_OPTIONS",()=>i),t(e.exports,"REMOVED_LOADER_OPTIONS",()=>o);var r=l("4XzuU");let i={fetch:null,mimeType:void 0,nothrow:!1,log:new(l("dhkXj")).ConsoleLog,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:r.isBrowser,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},o={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"}}),u("4XzuU",function(e,n){t(e.exports,"isBrowser",()=>s);var r=l("ibaza");let i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document};i.self||i.window||i.global,i.window||i.self||i.global,i.global||i.self||i.window,i.document;let s=("object"!=typeof r||String(r),!0),a=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version);a&&parseFloat(a[1])}),u("itAWv",function(e,n){t(e.exports,"parse",()=>p);var r=l("93mpO"),i=l("aw3Np"),o=l("Y8qUM"),s=l("9bDx9"),a=l("jh8sd"),u=l("40keb"),c=l("9Qdzf"),d=l("iNa8r"),h=l("ePZJP"),f=l("jgKGZ");async function p(t,e,n,i){(0,r.assert)(!i||"object"==typeof i),!e||Array.isArray(e)||(0,s.isLoaderObject)(e)||(i=void 0,n=e,e=void 0),t=await t,n=n||{};let o=(0,h.getResourceUrl)(t),a=e,l=(0,d.getLoadersFromContext)(a,i),c=await (0,f.selectLoader)(t,l,n);return c?(n=(0,u.normalizeOptions)(n,c,l,o),i=(0,d.getLoaderContext)({url:o,parse:p,loaders:l},n,i||null),await g(c,t,n,i)):null}async function g(t,e,n,s){if((0,i.validateWorkerVersion)(t),(0,a.isResponse)(e)){let t=e,{ok:n,redirected:r,status:i,statusText:o,type:a,url:l}=t,u=Object.fromEntries(t.headers.entries());s.response={headers:u,ok:n,redirected:r,status:i,statusText:o,type:a,url:l}}if(e=await (0,c.getArrayBufferOrStringFromData)(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,s,t);if((0,o.canParseWithWorker)(t,n))return await (0,o.parseWithWorker)(t,e,n,s,p);if(t.parseText&&"string"==typeof e)return await t.parseText(e,n,s,t);if(t.parse)return await t.parse(e,n,s,t);throw(0,r.assert)(!t.parseSync),Error("".concat(t.id," loader - no parser found and worker is disabled"))}}),u("93mpO",function(e,n){t(e.exports,"assert",()=>r);function r(t,e){if(!t)throw Error(e||"loaders.gl assertion failed.")}}),u("aw3Np",function(e,n){t(e.exports,"validateWorkerVersion",()=>o);var r=l("93mpO"),i=l("enqsL");function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.VERSION;(0,r.assert)(t,"no worker provided");let n=t.version;return!!e&&!!n}}),u("enqsL",function(e,n){t(e.exports,"VERSION",()=>r);let r="3.4.15"}),u("Y8qUM",function(e,n){t(e.exports,"canParseWithWorker",()=>s),t(e.exports,"parseWithWorker",()=>a);var r=l("krF7U"),i=l("1bvRJ"),o=l("8brxz");function s(t,e){return!!(0,o.default).isSupported()&&(!!i.isBrowser||null!=e&&!!e._nodeWorkers)&&t.worker&&(null==e?void 0:e.worker)}async function a(t,e,n,i,s){let a=t.id,l=(0,r.getWorkerURL)(t,n),c=(0,o.default).getWorkerFarm(n).getWorkerPool({name:a,url:l});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));let d=await c.startJob("process-on-worker",u.bind(null,s));d.postMessage("process",{input:e,options:n,context:i});let h=await d.result;return await h.result}async function u(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(Error(r.error));break;case"process":let{id:i,input:o,options:s}=r;try{let n=await t(o,s);e.postMessage("done",{id:i,result:n})}catch(n){let t=n instanceof Error?n.message:"unknown error";e.postMessage("error",{id:i,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}}),u("krF7U",function(e,n){t(e.exports,"getWorkerURL",()=>i);var r=l("93mpO");function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e[t.id]||{},i="".concat(t.id,"-worker.js"),o=n.workerUrl;if(o||"compression"!==t.id||(o=e.workerUrl),"test"===e._workerType&&(o="modules/".concat(t.module,"/dist/").concat(i)),!o){let e=t.version;"latest"===e&&(e="latest");let n=e?"@".concat(e):"";o="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(i)}return(0,r.assert)(o),o}}),u("1bvRJ",function(e,n){t(e.exports,"isBrowser",()=>s),t(e.exports,"isMobile",()=>a);var r=l("ibaza");let i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document};i.self||i.window||i.global,i.window||i.self||i.global,i.global||i.self||i.window,i.document;let s="object"!=typeof r||"[object process]"!==String(r)||!0,a="undefined"!=typeof window&&void 0!==window.orientation,u=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version);u&&parseFloat(u[1])}),u("8brxz",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("4fBYv"),o=l("azQCN");let s={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class a{static isSupported(){return(0,o.default).isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a._workerFarm=a._workerFarm||new a({}),a._workerFarm.setProps(t),a._workerFarm}constructor(t){(0,r.default)(this,"props",void 0),(0,r.default)(this,"workerPools",new Map),this.props={...s},this.setProps(t),this.workerPools=new Map}destroy(){for(let t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){for(let e of(this.props={...this.props,...t},this.workerPools.values()))e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){let{name:e,source:n,url:r}=t,o=this.workerPools.get(e);return o||((o=new i.default({name:e,source:n,url:r})).setProps(this._getWorkerPoolProps()),this.workerPools.set(e,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(0,r.default)(a,"_workerFarm",void 0)}),u("4fBYv",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("1bvRJ"),o=l("azQCN"),s=l("iVSR5");class a{static isSupported(){return(0,o.default).isSupported()}constructor(t){(0,r.default)(this,"name","unnamed"),(0,r.default)(this,"source",void 0),(0,r.default)(this,"url",void 0),(0,r.default)(this,"maxConcurrency",1),(0,r.default)(this,"maxMobileConcurrency",1),(0,r.default)(this,"onDebug",()=>{}),(0,r.default)(this,"reuseWorkers",!0),(0,r.default)(this,"props",{}),(0,r.default)(this,"jobQueue",[]),(0,r.default)(this,"idleQueue",[]),(0,r.default)(this,"count",0),(0,r.default)(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e),r=new Promise(r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;let t=this._getAvailableWorker();if(!t)return;let e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});let n=new s.default(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new o.default({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return i.isMobile?this.maxMobileConcurrency:this.maxConcurrency}}}),u("azQCN",function(e,n){t(e.exports,"default",()=>d);var r=l("2qeFG"),i=l("hQ2Mx"),o=l("1bvRJ"),s=l("93mpO"),a=l("bH3bu"),u=l("9n3qC");let c=()=>{};class d{static isSupported(){return"undefined"!=typeof Worker&&o.isBrowser||void 0!==i.NodeWorker&&!o.isBrowser}constructor(t){(0,r.default)(this,"name",void 0),(0,r.default)(this,"source",void 0),(0,r.default)(this,"url",void 0),(0,r.default)(this,"terminated",!1),(0,r.default)(this,"worker",void 0),(0,r.default)(this,"onMessage",void 0),(0,r.default)(this,"onError",void 0),(0,r.default)(this,"_loadableURL","");let{name:e,source:n,url:i}=t;(0,s.assert)(n||i),this.name=e,this.source=n,this.url=i,this.onMessage=c,this.onError=t=>console.log(t),this.worker=o.isBrowser?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=c,this.onError=c,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,e){e=e||(0,u.getTransferList)(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),Error(e)}_createBrowserWorker(){this._loadableURL=(0,a.getLoadableWorkerURL)({source:this.source,url:this.url});let t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){let e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new i.NodeWorker(e,{eval:!1})}else if(this.source)t=new i.NodeWorker(this.source,{eval:!0});else throw Error("no worker");return t.on("message",t=>{this.onMessage(t)}),t.on("error",t=>{this.onError(t)}),t.on("exit",t=>{}),t}}}),u("hQ2Mx",function(e,n){t(e.exports,"NodeWorker",()=>r);class r{terminate(){}}}),u("bH3bu",function(e,n){t(e.exports,"getLoadableWorkerURL",()=>o);var r=l("93mpO");let i=new Map;function o(t){var e;(0,r.assert)(t.source&&!t.url||!t.source&&t.url);let n=i.get(t.source||t.url);return!n&&(t.url&&(n=(e=t.url).startsWith("http")?s("try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):e,i.set(t.url,n)),t.source&&(n=s(t.source),i.set(t.source,n))),(0,r.assert)(n),n}function s(t){let e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}}),u("9n3qC",function(e,n){t(e.exports,"getTransferList",()=>function t(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0,o=i||new Set;if(e){if(r(e))o.add(e);else if(r(e.buffer))o.add(e.buffer);else if(ArrayBuffer.isView(e));else if(n&&"object"==typeof e)for(let r in e)t(e[r],n,o)}return void 0===i?Array.from(o):[]});function r(t){return!!t&&!!(t instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&t instanceof MessagePort||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)}}),u("iVSR5",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG"),i=l("93mpO");class o{constructor(t,e){(0,r.default)(this,"name",void 0),(0,r.default)(this,"workerThread",void 0),(0,r.default)(this,"isRunning",!0),(0,r.default)(this,"result",void 0),(0,r.default)(this,"_resolve",()=>{}),(0,r.default)(this,"_reject",()=>{}),this.name=t,this.workerThread=e,this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e})}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){(0,i.assert)(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){(0,i.assert)(this.isRunning),this.isRunning=!1,this._reject(t)}}}),u("9Qdzf",function(e,n){t(e.exports,"getArrayBufferOrStringFromData",()=>u);var r=l("dOsK1"),i=l("jh8sd"),o=l("7HZTN"),s=l("3GgBn");let a="Cannot convert supplied data type";async function u(t,e,n){let l=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||l)return function(t,e,n){if(e.text&&"string"==typeof t)return t;if((0,i.isBuffer)(t)&&(t=t.buffer),t instanceof ArrayBuffer){let n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer,r=t.byteLength||t.length;return(0!==t.byteOffset||r!==n.byteLength)&&(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw Error(a)}(t,e,0);if((0,i.isBlob)(t)&&(t=await (0,s.makeResponse)(t)),(0,i.isResponse)(t)){let n=t;return await (0,s.checkResponse)(n),e.binary?await n.arrayBuffer():await n.text()}if((0,i.isReadableStream)(t)&&(t=(0,o.makeIterator)(t,n)),(0,i.isIterable)(t)||(0,i.isAsyncIterable)(t))return(0,r.concatenateArrayBuffersAsync)(t);throw Error(a)}}),u("dOsK1",function(e,n){t(e.exports,"concatenateArrayBuffersAsync",()=>i);var r=l("e3rm8");async function i(t){let e=[];for await(let n of t)e.push(n);return(0,r.concatenateArrayBuffers)(...e)}}),u("e3rm8",function(e,n){function r(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;let r=new Uint8Array(t),i=new Uint8Array(e);for(let t=0;t<r.length;++t)if(r[t]!==i[t])return!1;return!0}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=e.map(t=>t instanceof ArrayBuffer?new Uint8Array(t):t),i=new Uint8Array(r.reduce((t,e)=>t+e.byteLength,0)),o=0;for(let t of r)i.set(t,o),o+=t.byteLength;return i.buffer}t(e.exports,"compareArrayBuffers",()=>r),t(e.exports,"concatenateArrayBuffers",()=>i)}),u("7HZTN",function(e,n){t(e.exports,"makeIterator",()=>u);var r=l("2GuB0"),i=l("801z2"),o=l("dNV9O"),s=l("4Qp6R"),a=l("jh8sd");function u(t,e){if("string"==typeof t)return(0,r.makeStringIterator)(t,e);if(t instanceof ArrayBuffer)return(0,i.makeArrayBufferIterator)(t,e);if((0,a.isBlob)(t))return(0,o.makeBlobIterator)(t,e);if((0,a.isReadableStream)(t))return(0,s.makeStreamIterator)(t,e);if((0,a.isResponse)(t))return(0,s.makeStreamIterator)(t.body,e);throw Error("makeIterator")}}),u("2GuB0",function(e,n){t(e.exports,"makeStringIterator",()=>r);function*r(t,e){let n=(null==e?void 0:e.chunkSize)||262144,r=0,i=new TextEncoder;for(;r<t.length;){let e=Math.min(t.length-r,n),o=t.slice(r,r+e);r+=e,yield i.encode(o)}}}),u("801z2",function(e,n){t(e.exports,"makeArrayBufferIterator",()=>r);function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){let{chunkSize:n=262144}=e,r=0;for(;r<t.byteLength;){let e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),o=new Uint8Array(t,r,e);new Uint8Array(i).set(o),r+=e,yield i}}()}}),u("dNV9O",function(e,n){t(e.exports,"makeBlobIterator",()=>r);async function*r(t,e){let n=(null==e?void 0:e.chunkSize)||1048576,r=0;for(;r<t.size;){let e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}}),u("4Qp6R",function(e,n){t(e.exports,"makeStreamIterator",()=>o);var r=l("4XzuU"),i=l("eRK8h");function o(t,e){return r.isBrowser?s(t,e):a(t,e)}async function*s(t,e){let n;let r=t.getReader();try{for(;;){let t=n||r.read();null!=e&&e._streamReadAhead&&(n=r.read());let{done:o,value:s}=await t;if(o)return;yield(0,i.toArrayBuffer)(s)}}catch(t){r.releaseLock()}}async function*a(t,e){for await(let e of t)yield(0,i.toArrayBuffer)(e)}}),u("eRK8h",function(e,n){t(e.exports,"toArrayBuffer",()=>i);var r=l("3vuch");function i(t){if(t&&"object"==typeof t&&t.isBuffer)return r.toArrayBuffer(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t)return new TextEncoder().encode(t).buffer;if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw Error("toArrayBuffer")}}),u("3vuch",function(e,n){function r(t){return t}function i(t){throw Error("Buffer not supported in browser")}t(e.exports,"toArrayBuffer",()=>r),t(e.exports,"toBuffer",()=>i)}),u("iNa8r",function(e,n){t(e.exports,"getLoaderContext",()=>s),t(e.exports,"getLoadersFromContext",()=>a);var r=l("7VcV9"),i=l("gcAYc"),o=l("01KSh");function s(t,e,n){if(n)return n;let s={fetch:(0,r.getFetchFunction)(e,t),...t};if(s.url){let t=(0,i.stripQueryString)(s.url);s.baseUrl=t,s.queryString=(0,i.extractQueryString)(s.url),s.filename=o.filename(t),s.baseUrl=o.dirname(t)}return Array.isArray(s.loaders)||(s.loaders=null),s}function a(t,e){let n;if(!e&&t&&!Array.isArray(t))return t;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){let t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}}),u("01KSh",function(e,n){t(e.exports,"filename",()=>i),t(e.exports,"dirname",()=>o),t(e.exports,"join",()=>s),t(e.exports,"resolve",()=>a);var r=l("clkV5");function i(t){let e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function o(t){let e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}function s(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(e=e.map((t,n)=>(n&&(t=t.replace(new RegExp("^".concat("/")),"")),n!==e.length-1&&(t=t.replace(new RegExp("".concat("/","$")),"")),t))).join("/")}function a(){let t;let e=[];for(let t=0;t<arguments.length;t++)e[t]=t<0||arguments.length<=t?void 0:arguments[t];let n="",i=!1;for(let o=e.length-1;o>=-1&&!i;o--){let s;o>=0?s=e[o]:(void 0===t&&(t=(0,r.getCWD)()),s=t),0!==s.length&&(n="".concat(s,"/").concat(n),i=s.charCodeAt(0)===u)}return(n=function(t,e){let n,r="",i=-1,o=0,s=!1;for(let a=0;a<=t.length;++a){if(a<t.length)n=t.charCodeAt(a);else if(n===u)break;else n=u;if(n===u){if(i===a-1||1===o);else if(i!==a-1&&2===o){if(r.length<2||!s||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2)){if(r.length>2){let t=r.length-1,e=t;for(;e>=0&&r.charCodeAt(e)!==u;--e);if(e!==t){r=-1===e?"":r.slice(0,e),i=a,o=0,s=!1;continue}}else if(2===r.length||1===r.length){r="",i=a,o=0,s=!1;continue}}e&&(r.length>0?r+="/..":r="..",s=!0)}else{let e=t.slice(i+1,a);r.length>0?r+="/".concat(e):r=e,s=!1}i=a,o=0}else 46===n&&-1!==o?++o:o=-1}return r}(n,!i),i)?"/".concat(n):n.length>0?n:"."}let u=47}),u("clkV5",function(e,n){t(e.exports,"getCWD",()=>i);var r=l("ibaza");function i(){var t;if(void 0!==r&&void 0!==r.cwd)return r.cwd();let e=null===(t=window.location)||void 0===t?void 0:t.pathname;return(null==e?void 0:e.slice(0,e.lastIndexOf("/")+1))||""}}),u("jgKGZ",function(e,n){t(e.exports,"selectLoader",()=>f);var r=l("e3rm8"),i=l("01KSh"),o=l("9bDx9"),s=l("dxlmz"),a=l("ePZJP"),u=l("4J9Fm"),c=l("jh8sd"),d=l("gcAYc");let h=/\.([^.]+)$/;async function f(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!g(t))return null;let i=p(t,e,{...n,nothrow:!0},r);if(i)return i;if((0,c.isBlob)(t)&&(i=p(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!i&&!(null!=n&&n.nothrow))throw Error(m(t));return i}function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!g(t))return null;if(e&&!Array.isArray(e))return(0,o.normalizeLoader)(e);let i=[];e&&(i=i.concat(e)),null!=n&&n.ignoreRegisteredLoaders||i.push(...(0,u.getRegisteredLoaders)()),function(t){for(let e of t)(0,o.normalizeLoader)(e)}(i);let l=function(t,e,n,r){let i=(0,a.getResourceUrl)(t),o=(0,a.getResourceMIMEType)(t),l=(0,d.stripQueryString)(i)||(null==r?void 0:r.url),u=null,c="";if(null!=n&&n.mimeType&&(u=v(e,null==n?void 0:n.mimeType),c="match forced by supplied MIME type ".concat(null==n?void 0:n.mimeType)),u=u||function(t,e){let n=e&&h.exec(e),r=n&&n[1];return r?function(t,e){for(let n of(e=e.toLowerCase(),t))for(let t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,l),c=c||(u?"matched url ".concat(l):""),u=u||v(e,o),c=c||(u?"matched MIME type ".concat(o):""),u=u||function(t,e){if(!e)return null;for(let n of t)if("string"==typeof e){if(function(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(e=>t.startsWith(e))}(e,n))return n}else if(ArrayBuffer.isView(e)){if(_(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&_(e,0,n))return n;return null}(e,t),c=c||(u?"matched initial data ".concat(y(t)):""),u=u||v(e,null==n?void 0:n.fallbackMimeType),c=c||(u?"matched fallback MIME type ".concat(o):"")){var f;(0,s.log).log(1,"selectLoader selected ".concat(null===(f=u)||void 0===f?void 0:f.name,": ").concat(c,"."))}return u}(t,i,n,r);if(!l&&!(null!=n&&n.nothrow))throw Error(m(t));return l}function g(t){return!(t instanceof Response)||204!==t.status}function m(t){let e=(0,a.getResourceUrl)(t),n=(0,a.getResourceMIMEType)(t),r="No valid loader found (";r+=e?"".concat(i.filename(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");let o=t?y(t):"";return r+=o?' first bytes: "'.concat(o,'"'):"first bytes: not available",r+=")"}function v(t,e){for(let n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function _(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>(function(t,e,n,i){if(i instanceof ArrayBuffer)return(0,r.compareArrayBuffers)(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":let o=b(t,e,i.length);return i===o;default:return!1}})(t,e,n,i))}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?b(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?b(t,0,e):""}function b(t,e,n){if(t.byteLength<e+n)return"";let r=new DataView(t),i="";for(let t=0;t<n;t++)i+=String.fromCharCode(r.getUint8(e+t));return i}}),u("dxlmz",function(e,n){t(e.exports,"log",()=>r),l("gNj4N");let r=new(l("irQqN")).Log({id:"loaders.gl"})}),u("4J9Fm",function(e,n){t(e.exports,"registerLoaders",()=>s),t(e.exports,"getRegisteredLoaders",()=>a);var r=l("9bDx9"),i=l("40keb");let o=()=>{let t=(0,i.getGlobalLoaderState)();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function s(t){let e=o();for(let n of t=Array.isArray(t)?t:[t]){let t=(0,r.normalizeLoader)(n);e.find(e=>t===e)||e.unshift(t)}}function a(){return o()}}),u("lUg0r",function(e,n){t(e.exports,"default",()=>r);var r={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...l("aPnqr").picking}}),u("aPnqr",function(e,n){t(e.exports,"picking",()=>i);let r={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},i={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e={};if(void 0!==t.pickingSelectedColor){if(t.pickingSelectedColor){let n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0}if(t.pickingHighlightColor){let n=Array.from(t.pickingHighlightColor,t=>t/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}}}),u("2WjM0",function(e,n){t(e.exports,"default",()=>r);var r={name:"project32",dependencies:[l("ixmOo").default],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}}),u("ixmOo",function(e,n){t(e.exports,"default",()=>u);var r=l("jQjls"),i=l("4KnZi"),o=l("4er9g"),s=l("jBhUX");let a={};var u={name:"project",dependencies:[r.fp32,i.default],vs:o.default,getUniforms:function(t=a){return"viewport"in t?(0,s.getUniformsFromViewport)(t):{}}}}),u("jQjls",function(e,n){t(e.exports,"fp32",()=>r);let r={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}}),u("4KnZi",function(e,n){t(e.exports,"default",()=>i);let r="#define SMOOTH_EDGE_RADIUS 0.5";var i={name:"geometry",vs:"\n".concat(r,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(r,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")}}),u("4er9g",function(e,n){t(e.exports,"default",()=>a);var r=l("heh00");let i=Object.keys(r.COORDINATE_SYSTEM).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(r.COORDINATE_SYSTEM[t],";")).join(""),o=Object.keys(r.PROJECTION_MODE).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(r.PROJECTION_MODE[t],";")).join(""),s=Object.keys(r.UNIT).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(r.UNIT[t],";")).join("");var a="".concat(i,"\n").concat(o,"\n").concat(s,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n")}),u("aFzkX",function(e,n){t(e.exports,"default",()=>s);var r=l("8DSly"),i=l("6uUH7");let o={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class s{static get DRAW_MODE(){return o}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,i.uid)("geometry"),drawMode:n=o.TRIANGLES,attributes:r={},indices:s=null,vertexCount:a=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){for(let n in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){let e=t[n];e=ArrayBuffer.isView(e)?{value:e}:e,(0,r.assert)(ArrayBuffer.isView(e.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||e.size||(e.size=3),"indices"===n?((0,r.assert)(!this.indices),this.indices=e):this.attributes[n]=e}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(let e in t){let{value:r,size:i,constant:o}=t[e];!o&&r&&i>=1&&(n=Math.min(n,r.length/i))}return(0,r.assert)(Number.isFinite(n)),n}}}),u("cnCaG",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  if (dh == 0.0) {\n    return sourceZ + deltaZ * ratio;\n  }\n  float unitZ = deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n    float antiMeridianX = 0.0;\n\n    if (useShortestPath) {\n      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n      }\n      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < antiMeridianX) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(curr, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n"}),u("4hnqt",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("3kbul",function(e,n){t(e.exports,"default",()=>m);var r=l("2qeFG"),i=l("heh00"),o=l("8JeSb"),s=l("lUg0r"),a=l("2WjM0"),u=l("aFzkX"),c=l("i9o5q");l("auS2n");var d=l("gZN7e"),h=l("9U7Xm"),f=l("fDv34"),p=l("cVKAb");let g={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:i.COORDINATE_SYSTEM.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class m extends o.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0)}getShaders(){return super.getShaders({vs:f.default,fs:p.default,modules:[a.default,s.default]})}initializeState(){let t=this.getAttributeManager();t.remove(["instancePickingColors"]),t.add({indices:{size:1,isIndexed:!0,update:t=>t.value=this.state.mesh.indices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:t=>t.value=this.state.mesh.positions,noAlloc:!0},texCoords:{size:2,update:t=>t.value=this.state.mesh.texCoords,noAlloc:!0}})}updateState({props:t,oldProps:e,changeFlags:n}){let r=this.getAttributeManager();if(n.extensionsChanged){var i;let{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),r.invalidateAll()}if(t.bounds!==e.bounds){let t=this.state.mesh,e=this._createMesh();for(let n in this.state.model.setVertexCount(e.vertexCount),e)t&&t[n]!==e[n]&&r.invalidate(n);this.setState({mesh:e,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==e._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){let{image:e}=this.props,n=t.info;if(!n.color||!e)return n.bitmap=null,n;let{width:r,height:i}=e;n.index=0;let o=function(t){let[e,n,r]=t;return[(e+(15&r)/16)/256,(n+(240&r)/256)/256]}(n.color),s=[Math.floor(o[0]*r),Math.floor(o[1]*i)];return n.bitmap={size:{width:r,height:i},uv:o,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){let{bounds:t}=this.props,e=t;return v(t)&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),(0,h.default)(e,this.context.viewport.resolution)}_getModel(t){return t?new c.default(t,{...this.getShaders(),id:this.props.id,geometry:new u.default({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){let{uniforms:e,moduleParameters:n}=t,{model:r,coordinateConversion:i,bounds:o,disablePicking:s}=this.state,{image:a,desaturate:l,transparentColor:u,tintColor:c}=this.props;(!n.pickingActive||!s)&&a&&r&&r.setUniforms(e).setUniforms({bitmapTexture:a,desaturate:l,transparentColor:u.map(t=>t/255),tintColor:c.slice(0,3).map(t=>t/255),coordinateConversion:i,bounds:o}).draw()}_getCoordinateUniforms(){let{LNGLAT:t,CARTESIAN:e,DEFAULT:n}=i.COORDINATE_SYSTEM,{_imageCoordinateSystem:r}=this.props;if(r!==n){let{bounds:n}=this.props;if(!v(n))throw Error("_imageCoordinateSystem only supports rectangular bounds");let i=this.context.viewport.resolution?t:e;if((r=r===t?t:e)===t&&i===e)return{coordinateConversion:-1,bounds:n};if(r===e&&i===t){let t=(0,d.lngLatToWorld)([n[0],n[1]]),e=(0,d.lngLatToWorld)([n[2],n[3]]);return{coordinateConversion:1,bounds:[t[0],t[1],e[0],e[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function v(t){return Number.isFinite(t[0])}(0,r.default)(m,"layerName","BitmapLayer"),(0,r.default)(m,"defaultProps",g)}),u("9U7Xm",function(e,n){t(e.exports,"default",()=>s);var r=l("a0auE");let i=new Uint16Array([0,2,1,0,3,2]),o=new Float32Array([0,1,0,0,1,0,1,1]);function s(t,e){if(!e)return function(t){let e=new Float64Array(12);for(let n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:i,texCoords:o}}(t);let n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),s=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),a=Math.ceil(n/e)+1,l=Math.ceil(s/e)+1,u=(a-1)*(l-1)*6,c=new Uint32Array(u),d=new Float32Array(a*l*2),h=new Float64Array(a*l*3),f=0,p=0;for(let e=0;e<a;e++){let n=e/(a-1);for(let i=0;i<l;i++){let o=i/(l-1),s=(0,r.lerp)((0,r.lerp)(t[0],t[1],o),(0,r.lerp)(t[3],t[2],o),n);h[3*f+0]=s[0],h[3*f+1]=s[1],h[3*f+2]=s[2]||0,d[2*f+0]=n,d[2*f+1]=1-o,e>0&&i>0&&(c[p++]=f-l,c[p++]=f-l-1,c[p++]=f-1,c[p++]=f-l,c[p++]=f-1,c[p++]=f),f++}}return{vertexCount:u,positions:h,indices:c,texCoords:d}}}),u("fDv34",function(e,n){t(e.exports,"default",()=>r);var r="\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n"}),u("cVKAb",function(e,n){t(e.exports,"default",()=>r);var r="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n")}),u("5yBro",function(e,n){t(e.exports,"default",()=>v);var r=l("2qeFG"),i=l("8JeSb"),o=l("i5wGC"),s=l("lUg0r"),a=l("2WjM0"),u=l("heh00"),c=l("aFzkX"),d=l("i9o5q"),h=l("f5Dv9"),f=l("57nAI"),p=l("7l4Dt");let g=[0,0,0,255],m={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:g},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class v extends i.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0)}getShaders(){return super.getShaders({vs:h.default,fs:f.default,modules:[a.default,s.default]})}initializeState(){this.state={iconManager:new p.default(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:g},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);let{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:u}=e,{iconManager:c}=this.state,d=o||this.internalState.isAsyncPropLoading("iconAtlas");if(c.setProps({loadOptions:e.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?s:null,textureParameters:u}),d?n.iconMapping!==e.iconMapping&&i.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&c.packIcons(a,l),r.extensionsChanged){var h;let{gl:t}=this.context;null===(h=this.state.model)||void 0===h||h.delete(),this.state.model=this._getModel(t),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){let{sizeScale:e,sizeMinPixels:n,sizeMaxPixels:r,sizeUnits:i,billboard:o,alphaCutoff:s}=this.props,{iconManager:a}=this.state,l=a.getTexture();l&&this.state.model.setUniforms(t).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:u.UNIT[i],sizeScale:e,sizeMinPixels:n,sizeMaxPixels:r,billboard:o,alphaCutoff:s}).draw()}_getModel(t){return new d.default(t,{...this.getShaders(),id:this.props.id,geometry:new c.default({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;let n=null===(e=this.getCurrentLayer())||void 0===e?void 0:e.props.onIconError;n?n(t):(0,o.default).error(t.error.message)()}getInstanceOffset(t){let{width:e,height:n,anchorX:r=e/2,anchorY:i=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-r,n/2-i]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){let{x:e,y:n,width:r,height:i}=this.state.iconManager.getIconMapping(t);return[e,n,r,i]}}(0,r.default)(v,"defaultProps",m),(0,r.default)(v,"layerName","IconLayer")}),u("f5Dv9",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n"}),u("57nAI",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("7l4Dt",function(e,n){t(e.exports,"default",()=>f);var r=l("2qeFG"),i=l("hzwiv"),o=l("35qVw"),s=l("bIcUs"),a=l("gl1Lh");let u=()=>{},c={10241:9987,10240:9729,10242:33071,10243:33071};function d(t){return t&&(t.id||t.url)}function h(t,e,n){for(let r=0;r<e.length;r++){let{icon:i,xOffset:o}=e[r];t[d(i)]={...i,x:o,y:n}}}class f{constructor(t,{onUpdate:e=u,onError:n=u}){(0,r.default)(this,"gl",void 0),(0,r.default)(this,"onUpdate",void 0),(0,r.default)(this,"onError",void 0),(0,r.default)(this,"_loadOptions",null),(0,r.default)(this,"_texture",null),(0,r.default)(this,"_externalTexture",null),(0,r.default)(this,"_mapping",{}),(0,r.default)(this,"_textureParameters",null),(0,r.default)(this,"_pendingCount",0),(0,r.default)(this,"_autoPacking",!1),(0,r.default)(this,"_xOffset",0),(0,r.default)(this,"_yOffset",0),(0,r.default)(this,"_rowHeight",0),(0,r.default)(this,"_buffer",4),(0,r.default)(this,"_canvasWidth",1024),(0,r.default)(this,"_canvasHeight",0),(0,r.default)(this,"_canvas",null),this.gl=t,this.onUpdate=e,this.onError=n}finalize(){var t;null===(t=this._texture)||void 0===t||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){let e=this._autoPacking?d(t):t;return this._mapping[e]||{}}setProps({loadOptions:t,autoPacking:e,iconAtlas:n,iconMapping:r,textureParameters:i}){if(t&&(this._loadOptions=t),void 0!==e&&(this._autoPacking=e),r&&(this._mapping=r),n){var o;null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=n}i&&(this._textureParameters=i)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"==typeof document)return;let n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};let r={},{iterable:i,objectInfo:o}=(0,a.createIterable)(t);for(let t of i){o.index++;let i=e(t,o),s=d(i);if(!i)throw Error("Icon is missing.");if(!i.url)throw Error("Icon url is missing.");r[s]||n[s]&&i.url===n[s].url||(r[s]={...i,source:t,sourceIndex:o.index})}return r}(t,e,this._mapping)||{});if(n.length>0){let{mapping:t,xOffset:e,yOffset:r,rowHeight:s,canvasHeight:a}=function({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let l=0;l<t.length;l++){let u=t[l];if(!n[d(u)]){let{height:t,width:l}=u;r+l+e>s&&(h(n,a,i),r=0,i=o+i+e,o=0,a=[]),a.push({icon:u,xOffset:r}),r=r+l+e,o=Math.max(o,t)}}return a.length>0&&h(n,a,i),{mapping:n,rowHeight:o,xOffset:r,yOffset:i,canvasWidth:s,canvasHeight:Math.pow(2,Math.ceil(Math.log2(o+i+e)))}}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=t,this._xOffset=e,this._yOffset=r,this._canvasHeight=a,this._texture||(this._texture=new o.default(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||c})),this._texture.height!==this._canvasHeight&&(this._texture=function(t,e,n,r){let s=t.width,a=t.height,l=new o.default(t.gl,{width:e,height:n,parameters:r});return(0,i.copyToTexture)(t,l,{targetY:0,width:s,height:a}),t.delete(),l}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||c)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){let e=this._canvas.getContext("2d",{willReadFrequently:!0});for(let n of t)this._pendingCount++,(0,s.load)(n.url,this._loadOptions).then(t=>{let r=d(n),i=this._mapping[r],{x:o,y:s,width:a,height:l}=i,{data:u,width:c,height:h}=function(t,e,n,r){let i=Math.min(n/e.width,r/e.height),o=Math.floor(e.width*i),s=Math.floor(e.height*i);return 1===i?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}(e,t,a,l);this._texture.setSubImageData({data:u,x:o+(a-c)/2,y:s+(l-h)/2,width:c,height:h}),i.width=c,i.height=h,this._texture.generateMipmap(),this.onUpdate()}).catch(t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})}).finally(()=>{this._pendingCount--})}}}),u("bx4mA",function(e,n){t(e.exports,"default",()=>p);var r=l("2qeFG"),i=l("8JeSb"),o=l("lUg0r"),s=l("2WjM0"),a=l("heh00"),u=l("aFzkX"),c=l("i9o5q"),d=l("3DOuU"),h=l("fjMlQ");let f={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class p extends i.default{getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:d.default,fs:h.default,modules:[s.default,o.default]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;let{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){let{widthUnits:e,widthScale:n,widthMinPixels:r,widthMaxPixels:i,wrapLongitude:o}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:a.UNIT[e],widthScale:n,widthMinPixels:r,widthMaxPixels:i,useShortestPath:o?1:0}).draw(),o&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){return new c.default(t,{...this.getShaders(),id:this.props.id,geometry:new u.default({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0})}}(0,r.default)(p,"layerName","LineLayer"),(0,r.default)(p,"defaultProps",f)}),u("3DOuU",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(p, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n"}),u("fjMlQ",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("8nEh8",function(e,n){t(e.exports,"default",()=>m);var r=l("2qeFG"),i=l("itX10"),o=l("8JeSb"),s=l("lUg0r"),a=l("2WjM0"),u=l("heh00"),c=l("aFzkX"),d=l("i9o5q"),h=l("dPWzJ"),f=l("f8xsz");let p=[0,0,0,255],g=[0,0,1];class m extends o.default{getShaders(){return super.getShaders({vs:h.default,fs:f.default,modules:[a.default,i.gouraudLighting,s.default]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:g},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:p}})}updateState(t){let{changeFlags:e,props:n}=t;if(super.updateState(t),e.extensionsChanged){var r;let{gl:t}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}e.dataChanged&&function(t){let{header:e,attributes:n}=t;e&&n&&(t.length=e.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}(n.data)}draw({uniforms:t}){let{pointSize:e,sizeUnits:n}=this.props;this.state.model.setUniforms(t).setUniforms({sizeUnits:u.UNIT[n],radiusPixels:e}).draw()}_getModel(t){let e=[];for(let t=0;t<3;t++){let n=t/3*Math.PI*2;e.push(2*Math.cos(n),2*Math.sin(n),0)}return new d.default(t,{...this.getShaders(),id:this.props.id,geometry:new c.default({drawMode:4,attributes:{positions:new Float32Array(e)}}),isInstanced:!0})}}(0,r.default)(m,"layerName","PointCloudLayer"),(0,r.default)(m,"defaultProps",{sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:g},getColor:{type:"accessor",value:p},material:!0,radiusPixels:{deprecatedFor:"pointSize"}})}),u("itX10",function(e,n){t(e.exports,"gouraudLighting",()=>a),t(e.exports,"phongLighting",()=>u);var r=l("MotWT"),i=l("kurG9");let o={};function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if(!("material"in t))return{};let{material:e}=t;return e?function(t){let{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(t=>t/255)}}(e):{lighting_uEnabled:!1}}let a={name:"gouraud-lighting",dependencies:[r.lights],vs:i.default,defines:{LIGHTING_VERTEX:1},getUniforms:s},u={name:"phong-lighting",dependencies:[r.lights],fs:i.default,defines:{LIGHTING_FRAGMENT:1},getUniforms:s}}),u("MotWT",function(e,n){t(e.exports,"lights",()=>s);var r=l("749HG");let i={lightSources:{}};function o(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(t=>t*e/255)}let s={name:"lights",vs:r.default,fs:r.default,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if("lightSources"in e){let{ambientLight:t,pointLights:n,directionalLights:r}=e.lightSources||{};return t||n&&n.length>0||r&&r.length>0?Object.assign({},function(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t,i={};return e?i["lighting_uAmbientLight.color"]=o(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((t,e)=>{i["lighting_uPointLight[".concat(e,"].color")]=o(t),i["lighting_uPointLight[".concat(e,"].position")]=t.position,i["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((t,e)=>{i["lighting_uDirectionalLight[".concat(e,"].color")]=o(t),i["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction}),i.lighting_uDirectionalLightCount=r.length,i}({ambientLight:t,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){let n={pointLights:[],directionalLights:[]};for(let t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}}}),u("749HG",function(e,n){t(e.exports,"default",()=>r);var r="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n"}),u("kurG9",function(e,n){t(e.exports,"default",()=>r);var r="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n"}),u("dPWzJ",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\nuniform int sizeUnits;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n"}),u("f8xsz",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("jxCpk",function(e,n){t(e.exports,"default",()=>g);var r=l("2qeFG"),i=l("8JeSb"),o=l("lUg0r"),s=l("2WjM0"),a=l("heh00"),u=l("aFzkX"),c=l("i9o5q"),d=l("htr1z"),h=l("4qdGg");let f=[0,0,0,255],p={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:f},getLineColor:{type:"accessor",value:f},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class g extends i.default{getShaders(){return super.getShaders({vs:d.default,fs:h.default,modules:[s.default,o.default]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;let{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){let{radiusUnits:e,radiusScale:n,radiusMinPixels:r,radiusMaxPixels:i,stroked:o,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:o?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:a.UNIT[e],radiusScale:n,radiusMinPixels:r,radiusMaxPixels:i,lineWidthUnits:a.UNIT[c],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}).draw()}_getModel(t){return new c.default(t,{...this.getShaders(),id:this.props.id,geometry:new u.default({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}(0,r.default)(g,"defaultProps",p),(0,r.default)(g,"layerName","ScatterplotLayer")}),u("htr1z",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n"}),u("4qdGg",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (!filled) {\n    discard;\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("id5nG",function(e,n){t(e.exports,"default",()=>y);var r=l("2qeFG"),i=l("itX10"),o=l("8JeSb"),s=l("lUg0r"),a=l("2WjM0"),u=l("heh00"),c=l("9bhog"),d=l("bF9op");l("eFBWR");var h=l("dpEr0"),f=l("i9o5q"),p=l("45MqR"),g=l("c5xhZ"),m=l("4JPg1");let v=[0,0,0,255],_={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:v},getLineColor:{type:"accessor",value:v},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class y extends o.default{getShaders(){let{gl:t}=this.context,e=!(0,h.isWebGL2)(t),n={},r=this.props.flatShading&&(0,d.hasFeature)(t,c.FEATURES.GLSL_DERIVATIVES);return r&&(n.FLAT_SHADING=1),super.getShaders({vs:g.default,fs:m.default,defines:n,transpileToGLSL100:e,modules:[a.default,r?i.phongLighting:i.gouraudLighting,s.default]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:v},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:v},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(t){super.updateState(t);let{props:e,oldProps:n,changeFlags:r}=t,i=r.extensionsChanged||e.flatShading!==n.flatShading;if(i){var o;let{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}(i||e.diskResolution!==n.diskResolution||e.vertices!==n.vertices||(e.extruded||e.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(e)}getGeometry(t,e,n){let r=new p.default({radius:1,height:n?2:0,vertices:e,nradial:t}),i=0;if(e)for(let n=0;n<t;n++){let r=e[n];i+=Math.sqrt(r[0]*r[0]+r[1]*r[1])/t}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/t)*i}),r}_getModel(t){return new f.default(t,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry({diskResolution:t,vertices:e,extruded:n,stroked:r}){let i=this.getGeometry(t,e,n||r);this.setState({fillVertexCount:i.attributes.POSITION.value.length/3,wireframeVertexCount:i.indices.value.length}),this.state.model.setProps({geometry:i})}draw({uniforms:t}){let{lineWidthUnits:e,lineWidthScale:n,lineWidthMinPixels:r,lineWidthMaxPixels:i,radiusUnits:o,elevationScale:s,extruded:a,filled:l,stroked:c,wireframe:d,offset:h,coverage:f,radius:p,angle:g}=this.props,{model:m,fillVertexCount:v,wireframeVertexCount:_,edgeDistance:y}=this.state;m.setUniforms(t).setUniforms({radius:p,angle:g/180*Math.PI,offset:h,extruded:a,stroked:c,coverage:f,elevationScale:s,edgeDistance:y,radiusUnits:u.UNIT[o],widthUnits:u.UNIT[e],widthScale:n,widthMinPixels:r,widthMaxPixels:i}),a&&d&&(m.setProps({isIndexed:!0}),m.setVertexCount(_).setDrawMode(1).setUniforms({isStroke:!0}).draw()),l&&(m.setProps({isIndexed:!1}),m.setVertexCount(v).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!a&&c&&(m.setProps({isIndexed:!1}),m.setVertexCount(2*v/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}(0,r.default)(y,"layerName","ColumnLayer"),(0,r.default)(y,"defaultProps",_)}),u("45MqR",function(e,n){t(e.exports,"default",()=>a);var r=l("i5wGC"),i=l("aFzkX"),o=l("6uUH7");l("g9wDZ");var s=l("7uDGN");class a extends i.default{constructor(t){let{id:e=(0,o.uid)("column-geometry")}=t,{indices:n,attributes:i}=function(t){let{radius:e,height:n=1,nradial:i=10}=t,{vertices:o}=t;o&&((0,r.default).assert(o.length>=i),o=o.flatMap(t=>[t[0],t[1]]),(0,s.modifyPolygonWindingDirection)(o,s.WINDING.COUNTER_CLOCKWISE));let a=n>0,l=i+1,u=a?3*l+1:i,c=2*Math.PI/i,d=new Uint16Array(a?6*i:0),h=new Float32Array(3*u),f=new Float32Array(3*u),p=0;if(a){for(let t=0;t<l;t++){let r=t*c,s=t%i,a=Math.sin(r),l=Math.cos(r);for(let t=0;t<2;t++)h[p+0]=o?o[2*s]:l*e,h[p+1]=o?o[2*s+1]:a*e,h[p+2]=(.5-t)*n,f[p+0]=o?o[2*s]:l,f[p+1]=o?o[2*s+1]:a,p+=3}h[p+0]=h[p-3],h[p+1]=h[p-2],h[p+2]=h[p-1],p+=3}for(let t=a?0:1;t<l;t++){let r=Math.floor(t/2)*Math.sign(.5-t%2),s=r*c,a=(r+i)%i,l=Math.sin(s),u=Math.cos(s);h[p+0]=o?o[2*a]:u*e,h[p+1]=o?o[2*a+1]:l*e,h[p+2]=n/2,f[p+2]=1,p+=3}if(a){let t=0;for(let e=0;e<i;e++)d[t++]=2*e+0,d[t++]=2*e+2,d[t++]=2*e+0,d[t++]=2*e+1,d[t++]=2*e+1,d[t++]=2*e+3}return{indices:d,attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f}}}}(t);super({...t,id:e,indices:n,attributes:i})}}}),u("g9wDZ",function(e,n){t(e.exports,"modifyPolygonWindingDirection",()=>l("7uDGN").modifyPolygonWindingDirection),t(e.exports,"WINDING",()=>l("7uDGN").WINDING),t(e.exports,"cutPolygonByGrid",()=>l("giujB").cutPolygonByGrid),t(e.exports,"cutPolylineByGrid",()=>l("giujB").cutPolylineByGrid),t(e.exports,"cutPolylineByMercatorBounds",()=>l("2TwCu").cutPolylineByMercatorBounds),t(e.exports,"cutPolygonByMercatorBounds",()=>l("2TwCu").cutPolygonByMercatorBounds),l("3bOO0"),l("7uDGN"),l("fV9UN"),l("3ZFWU"),l("giujB"),l("2TwCu")}),u("3bOO0",function(t,e){l("2qeFG"),l("a0auE"),l("7uDGN")}),u("7uDGN",function(e,n){t(e.exports,"WINDING",()=>i),t(e.exports,"modifyPolygonWindingDirection",()=>o),t(e.exports,"getPolygonSignedArea",()=>s),t(e.exports,"forEachSegmentInPolygon",()=>a),t(e.exports,"modifyPolygonWindingDirectionPoints",()=>u),t(e.exports,"getPolygonSignedAreaPoints",()=>c),t(e.exports,"forEachSegmentInPolygonPoints",()=>d);var r=l("a0auE");let i={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function o(t,e,n={}){return function(t,e={}){return Math.sign(s(t,e))}(t,n)!==e&&(function(t,e){let{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,s=Math.floor(o/2);for(let e=0;e<s;++e){let r=n+e*i,s=n+(o-1-e)*i;for(let e=0;e<i;++e){let n=t[r+e];t[r+e]=t[s+e],t[s+e]=n}}}(t,n),!0)}function s(t,e={}){let{start:n=0,end:r=t.length}=e,i=e.size||2,o=0;for(let e=n,s=r-i;e<r;e+=i)o+=(t[e]-t[s])*(t[e+1]+t[s+1]),s=e;return o/2}function a(t,e,n={}){let{start:i=0,end:o=t.length,size:s=2,isClosed:l}=n,u=(o-i)/s;for(let n=0;n<u-1;++n)e(t[i+n*s],t[i+n*s+1],t[i+(n+1)*s],t[i+(n+1)*s+1],n,n+1);let c=i+(u-1)*s;l||(0,r.equals)(t[i],t[c])&&(0,r.equals)(t[i+1],t[c+1])||e(t[c],t[c+1],t[i],t[i+1],u-1,0)}function u(t,e,n={}){return function(t,e={}){return Math.sign(c(t,e))}(t,n)!==e&&(t.reverse(),!0)}function c(t,e={}){let{start:n=0,end:r=t.length}=e,i=0;for(let e=n,o=r-1;e<r;++e)i+=(t[e][0]-t[o][0])*(t[e][1]+t[o][1]),o=e;return i/2}function d(t,e,n={}){let{start:i=0,end:o=t.length,isClosed:s}=n;for(let n=i;n<o-1;++n)e(t[n],t[n+1],n,n+1);s||(0,r.equals)(t[o-1],t[0])||e(t[o-1],t[0],o-1,0)}}),u("fV9UN",function(t,e){l("7uDGN")}),u("3ZFWU",function(e,n){function r(t,e,n,i,o=[]){let s,a;if(8&n)s=(i[3]-t[1])/(e[1]-t[1]),a=3;else if(4&n)s=(i[1]-t[1])/(e[1]-t[1]),a=1;else if(2&n)s=(i[2]-t[0])/(e[0]-t[0]),a=2;else{if(!(1&n))return null;s=(i[0]-t[0])/(e[0]-t[0]),a=0}for(let n=0;n<t.length;n++)o[n]=(1&a)===n?i[a]:s*(e[n]-t[n])+t[n];return o}function i(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}t(e.exports,"bitCode",()=>i),t(e.exports,"intersect",()=>r),l("8XzPO")}),u("8XzPO",function(e,n){function r(t,e){let n=e.length,r=t.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function i(t,e){let n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function o(t,e,n,r,i=[]){let s=r+e*n;for(let e=0;e<n;e++)i[e]=t[s+e];return i}t(e.exports,"push",()=>r),t(e.exports,"copy",()=>i),t(e.exports,"getPointAtIndex",()=>o)}),u("giujB",function(e,n){t(e.exports,"cutPolylineByGrid",()=>o),t(e.exports,"cutPolygonByGrid",()=>a);var r=l("3ZFWU"),i=l("8XzPO");function o(t,e){let n,o;let{size:s=2,broken:a=!1,gridResolution:l=10,gridOffset:u=[0,0],startIndex:d=0,endIndex:h=t.length}=e||{},f=(h-d)/s,p=[],g=[p],m=(0,i.getPointAtIndex)(t,0,s,d),v=c(m,l,u,[]),_=[];(0,i.push)(p,m);for(let e=1;e<f;e++){for(n=(0,i.getPointAtIndex)(t,e,s,d,n),o=(0,r.bitCode)(n,v);o;){var y;(0,r.intersect)(m,n,o,v,_);let t=(0,r.bitCode)(_,v);t&&((0,r.intersect)(m,_,t,v,_),o=t),(0,i.push)(p,_),(0,i.copy)(m,_),8&(y=o)?(v[1]+=l,v[3]+=l):4&y?(v[1]-=l,v[3]-=l):2&y?(v[0]+=l,v[2]+=l):1&y&&(v[0]-=l,v[2]-=l),a&&p.length>s&&(p=[],g.push(p),(0,i.push)(p,m)),o=(0,r.bitCode)(n,v)}(0,i.push)(p,n),(0,i.copy)(m,n)}return a?g:g[0]}function s(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function a(t,e=null,n){if(!t.length)return[];let{size:i=2,gridResolution:o=10,gridOffset:l=[0,0],edgeTypes:d=!1}=n||{},h=[],f=[{pos:t,types:d?Array(t.length/i).fill(1):null,holes:e||[]}],p=[[],[]],g=[];for(;f.length;){let{pos:t,types:e,holes:n}=f.shift();(function(t,e,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let r=0;r<n;r+=e){let e=t[r],n=t[r+1];i=e<i?e:i,o=e>o?e:o,s=n<s?n:s,a=n>a?n:a}r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a})(t,i,n[0]||t.length,p),g=c(p[0],o,l,g);let a=(0,r.bitCode)(p[1],g);if(a){let r=u(t,e,i,0,n[0]||t.length,g,a),o={pos:r[0].pos,types:r[0].types,holes:[]},l={pos:r[1].pos,types:r[1].types,holes:[]};f.push(o,l);for(let c=0;c<n.length;c++)(r=u(t,e,i,n[c],n[c+1]||t.length,g,a))[0]&&(o.holes.push(o.pos.length),o.pos=s(o.pos,r[0].pos),d&&(o.types=s(o.types,r[0].types))),r[1]&&(l.holes.push(l.pos.length),l.pos=s(l.pos,r[1].pos),d&&(l.types=s(l.types,r[1].types)))}else{let r={positions:t};d&&(r.edgeTypes=e),n.length&&(r.holeIndices=n),h.push(r)}}return h}function u(t,e,n,o,s,a,l){let u,c,d;let h=(s-o)/n,f=[],p=[],g=[],m=[],v=[],_=(0,i.getPointAtIndex)(t,h-1,n,o),y=Math.sign(8&l?_[1]-a[3]:_[0]-a[2]),b=e&&e[h-1],x=0,E=0;for(let s=0;s<h;s++)u=(0,i.getPointAtIndex)(t,s,n,o,u),c=Math.sign(8&l?u[1]-a[3]:u[0]-a[2]),d=e&&e[o/n+s],c&&y&&y!==c&&((0,r.intersect)(_,u,l,a,v),(0,i.push)(f,v)&&g.push(b),(0,i.push)(p,v)&&m.push(b)),c<=0?((0,i.push)(f,u)&&g.push(d),x-=c):g.length&&(g[g.length-1]=0),c>=0?((0,i.push)(p,u)&&m.push(d),E+=c):m.length&&(m[m.length-1]=0),(0,i.copy)(_,u),y=c,b=d;return[x?{pos:f,types:e&&g}:null,E?{pos:p,types:e&&m}:null]}function c(t,e,n,r){let i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}}),u("2TwCu",function(e,n){t(e.exports,"cutPolylineByMercatorBounds",()=>o),t(e.exports,"cutPolygonByMercatorBounds",()=>s);var r=l("giujB"),i=l("8XzPO");function o(t,e){let{size:n=2,startIndex:i=0,endIndex:o=t.length,normalize:s=!0}=e||{},l=t.slice(i,o);a(l,n,0,o-i);let c=(0,r.cutPolylineByGrid)(l,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(let t of c)u(t,n);return c}function s(t,e=null,n){let{size:o=2,normalize:l=!0,edgeTypes:c=!1}=n||{};e=e||[];let d=[],h=[],f=0,p=0;for(let r=0;r<=e.length;r++){let s=e[r]||t.length,l=p,u=function(t,e,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=e){let e=Math.abs(t[s]);e>i&&(i=e,o=s-1)}return o}(t,o,f,s);for(let e=u;e<s;e++)d[p++]=t[e];for(let e=f;e<u;e++)d[p++]=t[e];a(d,o,l,p),function(t,e,n,r,o=85.051129){let s=t[n],a=t[r-e];if(Math.abs(s-a)>180){let r=(0,i.getPointAtIndex)(t,0,e,n);r[0]+=360*Math.round((a-s)/360),(0,i.push)(t,r),r[1]=Math.sign(r[1])*o,(0,i.push)(t,r),r[0]=s,(0,i.push)(t,r)}}(d,o,l,p,null==n?void 0:n.maxLatitude),f=s,h[r]=p}h.pop();let g=(0,r.cutPolygonByGrid)(d,h,{size:o,gridResolution:360,gridOffset:[-180,-180],edgeTypes:c});if(l)for(let t of g)u(t.positions,o);return g}function a(t,e,n,r){let i,o=t[0];for(let s=n;s<r;s+=e){let e=(i=t[s])-o;(e>180||e<-180)&&(i-=360*Math.round(e/360)),t[s]=o=i}}function u(t,e){let n;let r=t.length/e;for(let i=0;i<r&&((n=t[i*e])+180)%360==0;i++);let i=-(360*Math.round(n/360));if(0!==i)for(let n=0;n<r;n++)t[n*e]+=i}}),u("c5xhZ",function(e,n){t(e.exports,"default",()=>r);var r="#version 300 es\n\n#define SHADER_NAME column-layer-vertex-shader\n\nin vec3 positions;\nin vec3 normals;\n\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\n\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool stroked;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int radiusUnits;\nuniform int widthUnits;\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (stroked) {\n    float widthPixels = clamp(\n      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n    if (isStroke) {\n      strokeOffsetRatio -= sign(positions.z) * halfOffset;\n    } else {\n      strokeOffsetRatio -= halfOffset;\n    }\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;\n  if (radiusUnits == UNIT_METERS) {\n    offset = project_size(offset);\n  }\n  vec3 pos = vec3(offset, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n#ifdef FLAT_SHADING\n    position_commonspace = geometry.position;\n    vColor = vec4(color.rgb, color.a * opacity);\n#else\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n#endif\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n"}),u("4JPg1",function(e,n){t(e.exports,"default",()=>r);var r="#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nuniform vec3 project_uCameraPosition;\nuniform bool extruded;\nuniform bool isStroke;\n\nout vec4 fragColor;\n\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  fragColor = vColor;\n#ifdef FLAT_SHADING\n  if (extruded && !isStroke && !picking_uActive) {\n    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n  }\n#endif\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"}),u("lrudf",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("kf9nP"),o=l("heh00"),s=l("id5nG");class a extends s.default{getGeometry(t){return new i.default}draw({uniforms:t}){let{elevationScale:e,extruded:n,offset:r,coverage:i,cellSize:s,angle:a,radiusUnits:l}=this.props;this.state.model.setUniforms(t).setUniforms({radius:s/2,radiusUnits:o.UNIT[l],angle:a,offset:r,extruded:n,coverage:i,elevationScale:e,edgeDistance:1,isWireframe:!1}).draw()}}(0,r.default)(a,"layerName","GridCellLayer"),(0,r.default)(a,"defaultProps",{cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}})}),u("kf9nP",function(e,n){t(e.exports,"default",()=>d);var r=l("aFzkX"),i=l("6uUH7");let o=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),s=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),a=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),u=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),c={POSITION:{size:3,value:new Float32Array(s)},NORMAL:{size:3,value:new Float32Array(a)},TEXCOORD_0:{size:2,value:new Float32Array(u)}};class d extends r.default{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,i.uid)("cube-geometry")}=t;super({...t,id:e,indices:{size:1,value:new Uint16Array(o)},attributes:{...c,...t.attributes}})}}}),u("1qtHd",function(e,n){t(e.exports,"default",()=>v);var r=l("2qeFG"),i=l("8JeSb"),o=l("lUg0r"),s=l("2WjM0"),a=l("heh00"),u=l("aFzkX"),c=l("i9o5q"),d=l("8jwpM"),h=l("cutUT"),f=l("afjzA");let p=[0,0,0,255],g={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:p},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},m={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class v extends i.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0)}getShaders(){return super.getShaders({vs:h.default,fs:f.default,modules:[s.default,o.default]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:m,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:m,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:m,defaultValue:p},instancePickingColors:{size:3,type:5121,accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n)}}),this.setState({pathTesselator:new d.default({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);let{props:e,changeFlags:n}=t,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){let{pathTesselator:t}=this.state,i=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:i.getPath,buffers:i,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||r.invalidateAll()}if(n.extensionsChanged){var i;let{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),r.invalidateAll()}}getPickingInfo(t){let e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find(t=>t.__source.index===n)),e}disablePickingIndex(t){let{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw({uniforms:t}){let{jointRounded:e,capRounded:n,billboard:r,miterLimit:i,widthUnits:o,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(e),capType:Number(n),billboard:r,widthUnits:a.UNIT[o],widthScale:s,miterLimit:i,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){return new c.default(t,{...this.getShaders(),id:this.props.id,geometry:new u.default({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){let{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){let{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}(0,r.default)(v,"defaultProps",g),(0,r.default)(v,"layerName","PathLayer")}),u("8jwpM",function(e,n){t(e.exports,"default",()=>o);var r=l("1mxGs"),i=l("jNWZO");class o extends r.default{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?(0,i.normalizePath)(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(s(t)){let e=0;for(let n of t)e+=this.getGeometrySize(n);return e}let e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize){if(t&&s(t))for(let n of t){let t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}}_updateSegmentTypes(t,e){let n=this.attributes.segmentTypes,r=!!t&&this.isClosed(t),{vertexStart:i,geometrySize:o}=e;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}_updatePositions(t,e){let{positions:n}=this.attributes;if(!n||!t)return;let{vertexStart:r,geometrySize:i}=e,o=[,,,];for(let e=r,s=0;s<i;e++,s++)this.getPointOnPath(t,s,o),n[3*e]=o[0],n[3*e+1]=o[1],n[3*e+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e,n=[]){let{positionSize:r}=this;e*r>=t.length&&(e+=1-t.length/r);let i=e*r;return n[0]=t[i],n[1]=t[i+1],n[2]=3===r&&t[i+2]||0,n}isClosed(t){if(!this.normalize)return!!this.opts.loop;let{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function s(t){return Array.isArray(t[0])}}),u("1mxGs",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("gl1Lh"),o=l("kSmYn"),s=l("321bC"),a=l("8FSmA");class u{constructor(t){(0,r.default)(this,"opts",void 0),(0,r.default)(this,"typedArrayManager",void 0),(0,r.default)(this,"indexStarts",[0]),(0,r.default)(this,"vertexStarts",[0]),(0,r.default)(this,"vertexCount",0),(0,r.default)(this,"instanceCount",0),(0,r.default)(this,"attributes",void 0),(0,r.default)(this,"_attributeDefs",void 0),(0,r.default)(this,"data",void 0),(0,r.default)(this,"getGeometry",void 0),(0,r.default)(this,"geometryBuffer",void 0),(0,r.default)(this,"buffers",void 0),(0,r.default)(this,"positionSize",void 0),(0,r.default)(this,"normalize",void 0);let{attributes:e={}}=t;this.typedArrayManager=o.default,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);let{data:e,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=e,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===o?2:3),this.buffers=n,this.normalize=l,i&&((0,s.default)(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),l||(n.positions=i)),this.geometryBuffer=n.positions,Array.isArray(a))for(let t of a)this._rebuildGeometry(t);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}getGeometryFromBuffer(t){let e=t.value||t;return ArrayBuffer.isView(e)?(0,i.getAccessorFromBuffer)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){let{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:o}=this;for(let s in i)if(s in r)o.release(n[s]),n[s]=null;else{let r=i[s];r.copy=e,n[s]=o.allocate(n[s],t,r)}}_forEachGeometry(t,e,n){let{data:r,getGeometry:o}=this,{iterable:s,objectInfo:a}=(0,i.createIterable)(r,e,n);for(let e of s)a.index++,t(o?o(e,a):null,a.index)}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:r}=this,{data:i,geometryBuffer:o}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(e=[0],n=[0]),this.normalize||!o)this._forEachGeometry((t,e)=>{let r=t&&this.normalizeGeometry(t);u[e]=r,n[e+1]=n[e]+(r?this.getGeometrySize(r):0)},s,l),r=n[n.length-1];else if(r=(n=i.startIndices)[i.length]||0,ArrayBuffer.isView(o))r=r||o.length/this.positionSize;else if(o instanceof a.default){let t=o.accessor.stride||4*this.positionSize;r=r||o.byteLength/t}else if(o.buffer){let t=o.stride||4*this.positionSize;r=r||o.buffer.byteLength/t}else if(o.value){let t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;r=r||t.length/e}this._allocate(r,!!t),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=r;let c={};this._forEachGeometry((t,i)=>{let o=u[i]||t;c.vertexStart=n[i],c.indexStart=e[i];let s=i<n.length-1?n[i+1]:r;c.geometrySize=s-n[i],c.geometryIndex=i,this.updateGeometryAttributes(o,c)},s,l),this.vertexCount=e[e.length-1]}}}),u("jNWZO",function(e,n){t(e.exports,"normalizePath",()=>o),l("g9wDZ");var r=l("giujB"),i=l("2TwCu");function o(t,e,n,o){let s;if(Array.isArray(t[0])){s=Array(t.length*e);for(let n=0;n<t.length;n++)for(let r=0;r<e;r++)s[n*e+r]=t[n][r]||0}else s=t;return n?(0,r.cutPolylineByGrid)(s,{size:e,gridResolution:n}):o?(0,i.cutPolylineByMercatorBounds)(s,{size:e}):s}}),u("cutUT",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n"}),u("afjzA",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("ccAbQ",function(e,n){t(e.exports,"default",()=>p);var r=l("2qeFG"),i=l("9EzF6"),o=l("gl1Lh"),s=l("i5wGC"),a=l("55Fuy"),u=l("1qtHd"),c=l("gGYm5"),d=l("8y8S1");let h=[0,0,0,255],f={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:h},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class p extends i.default{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&(0,s.default).removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:t}){let e=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getPolygon);if(e&&Array.isArray(t.dataChanged)){let e=this.state.paths.slice(),n=t.dataChanged.map(t=>(0,d.replaceInRange)({data:e,getIndex:t=>t.__source.index,dataRange:t,replace:this._getPaths(t)}));this.setState({paths:e,pathsDiff:n})}else e&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(t={}){let{data:e,getPolygon:n,positionFormat:r,_normalize:i}=this.props,s=[],a="XY"===r?2:3,{startRow:l,endRow:u}=t,{iterable:d,objectInfo:h}=(0,o.createIterable)(e,l,u);for(let t of d){h.index++;let e=n(t,h);i&&(e=c.normalize(e,a));let{holeIndices:r}=e,o=e.positions||e;if(r)for(let e=0;e<=r.length;e++){let n=o.slice(r[e-1]||0,r[e]||o.length);s.push(this.getSubLayerRow({path:n},t,h.index))}else s.push(this.getSubLayerRow({path:o},t,h.index))}return s}renderLayers(){let{data:t,_dataDiff:e,stroked:n,filled:r,extruded:i,wireframe:o,_normalize:s,_windingOrder:l,elevationScale:c,transitions:d,positionFormat:f}=this.props,{lineWidthUnits:p,lineWidthScale:g,lineWidthMinPixels:m,lineWidthMaxPixels:v,lineJointRounded:_,lineMiterLimit:y,lineDashJustified:b}=this.props,{getFillColor:x,getLineColor:E,getLineWidth:T,getLineDashArray:S,getElevation:A,getPolygon:P,updateTriggers:C,material:w}=this.props,{paths:D,pathsDiff:L}=this.state,R=this.getSubLayerClass("fill",a.default),O=this.getSubLayerClass("stroke",u.default),I=this.shouldRenderSubLayer("fill",D)&&new R({_dataDiff:e,extruded:i,elevationScale:c,filled:r,wireframe:o,_normalize:s,_windingOrder:l,getElevation:A,getFillColor:x,getLineColor:i&&o?E:h,material:w,transitions:d},this.getSubLayerProps({id:"fill",updateTriggers:C&&{getPolygon:C.getPolygon,getElevation:C.getElevation,getFillColor:C.getFillColor,lineColors:i&&o,getLineColor:C.getLineColor}}),{data:t,positionFormat:f,getPolygon:P}),M=!i&&n&&this.shouldRenderSubLayer("stroke",D)&&new O({_dataDiff:L&&(()=>L),widthUnits:p,widthScale:g,widthMinPixels:m,widthMaxPixels:v,jointRounded:_,miterLimit:y,dashJustified:b,_pathType:"loop",transitions:d&&{getWidth:d.getLineWidth,getColor:d.getLineColor,getPath:d.getPolygon},getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(T),getDashArray:this.getSubLayerAccessor(S)},this.getSubLayerProps({id:"stroke",updateTriggers:C&&{getWidth:C.getLineWidth,getColor:C.getLineColor,getDashArray:C.getLineDashArray}}),{data:D,positionFormat:f,getPath:t=>t.path});return[!i&&I,M,i&&I]}}(0,r.default)(p,"layerName","PolygonLayer"),(0,r.default)(p,"defaultProps",f)}),u("9EzF6",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("8JeSb"),o=l("dSHHv"),s=l("3tWMN"),a=l("56tgz");class u extends i.default{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){let{object:e}=t;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id&&(t.object=e.__source.object,t.index=e.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){let{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"==typeof t){let e={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}return t}getSubLayerProps(t={}){var e;let{opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:d,coordinateOrigin:h,wrapLongitude:f,positionFormat:p,modelMatrix:g,extensions:m,fetch:v,operation:_,_subLayerProps:y}=this.props,b={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:d,coordinateOrigin:h,wrapLongitude:f,positionFormat:p,modelMatrix:g,extensions:m,fetch:v,operation:_},x=y&&t.id&&y[t.id],E=x&&x.updateTriggers,T=t.id||"sublayer";if(x){let e=this.props[a.PROP_TYPES_SYMBOL],n=t.type?t.type._propTypes:{};for(let t in x){let r=n[t]||e[t];r&&"accessor"===r.type&&(x[t]=this.getSubLayerAccessor(x[t]))}}for(let n of(Object.assign(b,t,x),b.id="".concat(this.props.id,"-").concat(T),b.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...E},m)){let t=n.getSubLayerProps.call(this,n);t&&Object.assign(b,t,{updateTriggers:Object.assign(b.updateTriggers,t.updateTriggers)})}return b}_updateAutoHighlight(t){for(let e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers,r=!n||this.needsUpdate();if(r){let t=this.renderLayers();n=(0,s.flatten)(t,Boolean),this.internalState.subLayers=n}for(let t of((0,o.default)("compositeLayer.renderLayers",this,r,n),n))t.parent=this}}(0,r.default)(u,"layerName","CompositeLayer")}),u("55Fuy",function(e,n){t(e.exports,"default",()=>b);var r=l("2qeFG"),i=l("heh00"),o=l("itX10"),s=l("8JeSb"),a=l("lUg0r"),u=l("2WjM0"),c=l("9bhog"),d=l("aFzkX"),h=l("bF9op"),f=l("i9o5q"),p=l("455ko"),g=l("avbzt"),m=l("5IUJt"),v=l("f18Qs");let _=[0,0,0,255],y={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class b extends s.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0)}getShaders(t){return super.getShaders({vs:"top"===t?g.default:m.default,fs:v.default,defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[u.default,o.gouraudLighting,a.default]})}get wrapLongitude(){return!1}initializeState(){let t;let{gl:e,viewport:n}=this.context,{coordinateSystem:r}=this.props,{_full3d:o}=this.props;n.isGeospatial&&r===i.COORDINATE_SYSTEM.DEFAULT&&(r=i.COORDINATE_SYSTEM.LNGLAT),r===i.COORDINATE_SYSTEM.LNGLAT&&(t=o?n.projectPosition.bind(n):n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new p.default({preproject:t,fp64:this.use64bitPositions(),IndexType:!e||(0,h.hasFeatures)(e,c.FEATURES.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});let s=this.getAttributeManager();s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:y,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:y,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:y,accessor:"getFillColor",defaultValue:_,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:y,accessor:"getLineColor",defaultValue:_,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){let e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find(t=>t.__source.index===n)),e}disablePickingIndex(t){let{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw({uniforms:t}){let{extruded:e,filled:n,wireframe:r,elevationScale:i}=this.props,{topModel:o,sideModel:s,polygonTesselator:a}=this.state,l={...t,extruded:!!e,elevationScale:i};s&&(s.setInstanceCount(a.instanceCount-1),s.setUniforms(l),r&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(a.vertexCount),o.setUniforms(l).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);let{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager();if(r.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded){var o;null===(o=this.state.models)||void 0===o||o.forEach(t=>t.delete()),this.setState(this._getModels(this.context.gl)),i.invalidateAll()}}updateGeometry({props:t,oldProps:e,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){let{polygonTesselator:e}=this.state,r=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:r.getPolygon,buffers:r,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:t._full3d}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){let e,n;let{id:r,filled:i,extruded:o}=this.props;if(i){let n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,e=new f.default(t,{...n,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return o&&((n=new f.default(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new d.default({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1})).userData.excludeAttributes={indices:!0}),{models:[n,e].filter(Boolean),topModel:e,sideModel:n}}calculateIndices(t){let{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){let{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}(0,r.default)(b,"defaultProps",{filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:_},getLineColor:{type:"accessor",value:_},material:!0}),(0,r.default)(b,"layerName","SolidPolygonLayer")}),u("455ko",function(e,n){t(e.exports,"default",()=>a);var r=l("gGYm5"),i=l("1mxGs");l("g9wDZ");var o=l("giujB"),s=l("2TwCu");class a extends i.default{constructor(t){let{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){let{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);let e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){let e=r.normalize(t,this.positionSize);return this.opts.resolution?(0,o.cutPolygonByGrid)(r.getPositions(e),r.getHoleIndices(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?(0,s.cutPolygonByMercatorBounds)(r.getPositions(e),r.getHoleIndices(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(u(t)){let e=0;for(let n of t)e+=this.getGeometrySize(n);return e}return r.getPositions(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&u(t))for(let n of t){let t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,{geometryIndex:e,vertexStart:n,indexStart:i}){let{attributes:o,indexStarts:s,typedArrayManager:a}=this,l=o.indices;if(!l||!t)return;let u=i,c=r.getSurfaceIndices(t,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+c.length,{copy:!0});for(let t=0;t<c.length;t++)l[u++]=c[t]+n;s[e+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:e,geometrySize:n}){let{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;let s=r.getPositions(t);for(let t=e,r=0;r<n;t++,r++){let e=s[r*o],n=s[r*o+1],a=o>2?s[r*o+2]:0;i[3*t]=e,i[3*t+1]=n,i[3*t+2]=a}}_updateVertexValid(t,{vertexStart:e,geometrySize:n}){let{positionSize:i}=this,o=this.attributes.vertexValid,s=t&&r.getHoleIndices(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,e):o.fill(1,e,e+n),s)for(let t=0;t<s.length;t++)o[e+s[t]/i-1]=0;o[e+n-1]=0}}function u(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}}),u("gGYm5",function(e,n){t(e.exports,"getPositions",()=>u),t(e.exports,"getHoleIndices",()=>c),t(e.exports,"normalize",()=>f),t(e.exports,"getSurfaceIndices",()=>m);var r=l("7wyyT");l("g9wDZ");var i=l("7uDGN");let o=i.WINDING.CLOCKWISE,s=i.WINDING.COUNTER_CLOCKWISE,a={isClosed:!0};function u(t){return"positions"in t?t.positions:t}function c(t){return"holeIndices"in t?t.holeIndices:null}function d(t,e,n,r,o){let s=e,l=n.length;for(let e=0;e<l;e++)for(let i=0;i<r;i++)t[s++]=n[e][i]||0;if(!function(t){let e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let e=0;e<r;e++)t[s++]=n[0][e]||0;return a.start=e,a.end=s,a.size=r,(0,i.modifyPolygonWindingDirection)(t,o,a),s}function h(t,e,n,r,o=0,s,l){let u=(s=s||n.length)-o;if(u<=0)return e;let c=e;for(let e=0;e<u;e++)t[c++]=n[o+e];if(!function(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}(n,r,o,s))for(let e=0;e<r;e++)t[c++]=n[o+e];return a.start=e,a.end=c,a.size=r,(0,i.modifyPolygonWindingDirection)(t,l,a),c}function f(t,e){var n;!function(t){if(!Array.isArray(t=t&&t.positions||t)&&!ArrayBuffer.isView(t))throw Error("invalid polygon")}(t);let r=[],i=[];if("positions"in t){let{positions:n,holeIndices:a}=t;if(a){let t=0;for(let l=0;l<=a.length;l++)t=h(r,t,n,e,a[l-1],a[l],0===l?o:s),i.push(t);return i.pop(),{positions:r,holeIndices:i}}t=n}if(!Array.isArray(t[0]))return h(r,0,t,e,0,r.length,o),r;if(!((n=t).length>=1&&n[0].length>=2&&Number.isFinite(n[0][0]))){let n=0;for(let[a,l]of t.entries())n=d(r,n,l,e,0===a?o:s),i.push(n);return i.pop(),{positions:r,holeIndices:i}}return d(r,0,t,e,o),r}function p(t,e,n){let r=t.length/3,i=0;for(let o=0;o<r;o++){let s=(o+1)%r;i+=t[3*o+e]*t[3*s+n],i-=t[3*s+e]*t[3*o+n]}return Math.abs(i/2)}function g(t,e,n,r){let i=t.length/3;for(let o=0;o<i;o++){let i=3*o,s=t[i+0],a=t[i+1],l=t[i+2];t[i+e]=s,t[i+n]=a,t[i+r]=l}}function m(t,e,n,i){let o=c(t);o&&(o=o.map(t=>t/e));let s=u(t),a=i&&3===e;if(n){let t=s.length;s=s.slice();let r=[];for(let i=0;i<t;i+=e){r[0]=s[i],r[1]=s[i+1],a&&(r[2]=s[i+2]);let t=n(r);s[i]=t[0],s[i+1]=t[1],a&&(s[i+2]=t[2])}}if(a){let t=p(s,0,1),e=p(s,0,2),r=p(s,1,2);if(!t&&!e&&!r)return[];t>e&&t>r||(e>r?(n||(s=s.slice()),g(s,0,2,1)):(n||(s=s.slice()),g(s,2,0,1)))}return(r&&r.__esModule?r.default:r)(s,o,e)}}),u("7wyyT",function(t,e){function n(t,e,n){n=n||2;var d,h,g,v,_,y,b,x=e&&e.length,E=x?e[0]*n:t.length,T=r(t,0,E,n,!0),S=[];if(!T||T.next===T.prev)return S;if(x&&(T=function(t,e,n,s){var u,c,d,h,g,m=[];for(u=0,c=e.length;u<c;u++)d=e[u]*s,h=u<c-1?e[u+1]*s:t.length,(g=r(t,d,h,s,!1))===g.next&&(g.steiner=!0),m.push(function(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t)return n}(g));for(m.sort(o),u=0;u<m.length;u++)n=function(t,e){var n=function(t,e){var n,r,i,o=e,s=t.x,u=t.y,c=-1/0;do{if(u<=o.y&&u>=o.next.y&&o.next.y!==o.y){var d=o.x+(u-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(d<=s&&d>c&&(c=d,i=o.x<o.next.x?o:o.next,d===s))return i}o=o.next}while(o!==e)if(!i)return null;var h,p=i,g=i.x,m=i.y,v=1/0;o=i;do s>=o.x&&o.x>=g&&s!==o.x&&a(u<m?s:c,u,g,m,u<m?c:s,u,o.x,o.y)&&(h=Math.abs(u-o.y)/(s-o.x),f(o,t)&&(h<v||h===v&&(o.x>i.x||o.x===i.x&&(n=i,r=o,0>l(n.prev,n,r.prev)&&0>l(r.next,n,n.next))))&&(i=o,v=h)),o=o.next;while(o!==p)return i}(t,e);if(!n)return e;var r=p(n,t);return i(r,r.next),i(n,n.next)}(m[u],n);return n}(t,e,T,n)),t.length>80*n){d=g=t[0],h=v=t[1];for(var A=n;A<E;A+=n)_=t[A],y=t[A+1],_<d&&(d=_),y<h&&(h=y),_>g&&(g=_),y>v&&(v=y);b=0!==(b=Math.max(g-d,v-h))?32767/b:0}return function t(e,n,r,o,d,h,g){if(e){!g&&h&&function(t,e,n,r){var i=t;do 0===i.z&&(i.z=s(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t)i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(e,o,d,h);for(var v,_,y=e;e.prev!==e.next;){if(v=e.prev,_=e.next,h?function(t,e,n,r){var i=t.prev,o=t.next;if(l(i,t,o)>=0)return!1;for(var u=i.x,c=t.x,d=o.x,h=i.y,f=t.y,p=o.y,g=u<c?u<d?u:d:c<d?c:d,m=h<f?h<p?h:p:f<p?f:p,v=u>c?u>d?u:d:c>d?c:d,_=h>f?h>p?h:p:f>p?f:p,y=s(g,m,e,n,r),b=s(v,_,e,n,r),x=t.prevZ,E=t.nextZ;x&&x.z>=y&&E&&E.z<=b;){if(x.x>=g&&x.x<=v&&x.y>=m&&x.y<=_&&x!==i&&x!==o&&a(u,h,c,f,d,p,x.x,x.y)&&l(x.prev,x,x.next)>=0||(x=x.prevZ,E.x>=g&&E.x<=v&&E.y>=m&&E.y<=_&&E!==i&&E!==o&&a(u,h,c,f,d,p,E.x,E.y)&&l(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;x&&x.z>=y;){if(x.x>=g&&x.x<=v&&x.y>=m&&x.y<=_&&x!==i&&x!==o&&a(u,h,c,f,d,p,x.x,x.y)&&l(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;E&&E.z<=b;){if(E.x>=g&&E.x<=v&&E.y>=m&&E.y<=_&&E!==i&&E!==o&&a(u,h,c,f,d,p,E.x,E.y)&&l(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}(e,o,d,h):function(t){var e=t.prev,n=t.next;if(l(e,t,n)>=0)return!1;for(var r=e.x,i=t.x,o=n.x,s=e.y,u=t.y,c=n.y,d=r<i?r<o?r:o:i<o?i:o,h=s<u?s<c?s:c:u<c?u:c,f=r>i?r>o?r:o:i>o?i:o,p=s>u?s>c?s:c:u>c?u:c,g=n.next;g!==e;){if(g.x>=d&&g.x<=f&&g.y>=h&&g.y<=p&&a(r,s,i,u,o,c,g.x,g.y)&&l(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}(e)){n.push(v.i/r|0),n.push(e.i/r|0),n.push(_.i/r|0),m(e),e=_.next,y=_.next;continue}if((e=_)===y){g?1===g?t(e=function(t,e,n){var r=t;do{var o=r.prev,s=r.next.next;!u(o,s)&&c(o,r,r.next,s)&&f(o,s)&&f(s,o)&&(e.push(o.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),m(r),m(r.next),r=t=s),r=r.next}while(r!==t)return i(r)}(i(e),n,r),n,r,o,d,h,2):2===g&&function(e,n,r,o,s,a){var d=e;do{for(var h,g,m=d.next.next;m!==d.prev;){if(d.i!==m.i&&(h=d,g=m,h.next.i!==g.i&&h.prev.i!==g.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&c(n,n.next,t,e))return!0;n=n.next}while(n!==t)return!1}(h,g)&&(f(h,g)&&f(g,h)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t)return r}(h,g)&&(l(h.prev,h,g.prev)||l(h,g.prev,g))||u(h,g)&&l(h.prev,h,h.next)>0&&l(g.prev,g,g.next)>0))){var v=p(d,m);d=i(d,d.next),v=i(v,v.next),t(d,n,r,o,s,a,0),t(v,n,r,o,s,a,0);return}m=m.next}d=d.next}while(d!==e)}(e,n,r,o,d,h):t(i(e),n,r,o,d,h,1);break}}}}(T,S,n,d,h,b,0),S}function r(t,e,n,r,i){var o,s;if(i===_(t,e,n,r)>0)for(o=e;o<n;o+=r)s=g(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=g(o,t[o],t[o+1],s);return s&&u(s,s.next)&&(m(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,!r.steiner&&(u(r,r.next)||0===l(r.prev,r,r.next))){if(m(r),(r=e=r.prev)===r.next)break;n=!0}else r=r.next;while(n||r!==e)return e}function o(t,e){return t.x-e.x}function s(t,e,n,r,i){return(t=((t=((t=((t=((t=(t-n)*i|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)|(e=((e=((e=((e=((e=(e-r)*i|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)<<1}function a(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function l(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function u(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,n,r){var i=h(l(t,e,n)),o=h(l(t,e,r)),s=h(l(n,r,t)),a=h(l(n,r,e));return!!(i!==o&&s!==a||0===i&&d(t,n,e)||0===o&&d(t,r,e)||0===s&&d(n,t,r)||0===a&&d(n,e,r))}function d(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function h(t){return t>0?1:t<0?-1:0}function f(t,e){return 0>l(t.prev,t,t.next)?l(t,e,t.next)>=0&&l(t,t.prev,e)>=0:0>l(t,e,t.prev)||0>l(t,t.next,e)}function p(t,e){var n=new v(t.i,t.x,t.y),r=new v(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function g(t,e,n,r){var i=new v(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function m(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function v(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=n,t.exports.default=n,n.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(_(t,0,o,n));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,c=a<l-1?e[a+1]*n:t.length;s-=Math.abs(_(t,u,c,n))}var d=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}}),u("avbzt",function(e,n){t(e.exports,"default",()=>i);var r=l("lEpCh"),i="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(r.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n")}),u("lEpCh",function(e,n){t(e.exports,"default",()=>r);var r="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n"}),u("5IUJt",function(e,n){t(e.exports,"default",()=>i);var r=l("lEpCh"),i="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(r.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n")}),u("f18Qs",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("8y8S1",function(e,n){t(e.exports,"replaceInRange",()=>r);function r({data:t,getIndex:e,dataRange:n,replace:r}){let{startRow:i=0,endRow:o=1/0}=n,s=t.length,a=s,l=s;for(let n=0;n<s;n++){let r=e(t[n]);if(a>n&&r>=i&&(a=n),r>=o){l=n;break}}let u=a,c=l-a!==r.length?t.slice(l):void 0;for(let e=0;e<r.length;e++)t[u++]=r[e];if(c){for(let e=0;e<c.length;e++)t[u++]=c[e];t.length=u}return{startRow:a,endRow:a+r.length}}}),u("iX3Ia",function(e,n){t(e.exports,"default",()=>f);var r=l("2qeFG"),i=l("9EzF6"),o=l("8y8S1"),s=l("9sMCS"),a=l("j3H5C"),u=l("h9JYQ"),c=l("kKwDE");let d=["points","linestrings","polygons"],h={...(0,a.getDefaultProps)(a.POINT_LAYER.circle),...(0,a.getDefaultProps)(a.POINT_LAYER.icon),...(0,a.getDefaultProps)(a.POINT_LAYER.text),...(0,a.getDefaultProps)(a.LINE_LAYER),...(0,a.getDefaultProps)(a.POLYGON_LAYER),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class f extends i.default{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:e}){if(!e.dataChanged)return;let{data:n}=this.props,r=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:r}),r?this._updateStateBinary({props:t,changeFlags:e}):this._updateStateJSON({props:t,changeFlags:e})}_updateStateBinary({props:t,changeFlags:e}){let n=(0,c.createLayerPropsFromBinary)(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:e}){let n=(0,u.getGeojsonFeatures)(t.data),r=this.getSubLayerRow.bind(this),i={},s={};if(Array.isArray(e.dataChanged)){let t=this.state.features;for(let e in t)i[e]=t[e].slice(),s[e]=[];for(let a of e.dataChanged){let e=(0,u.separateGeojsonFeatures)(n,r,a);for(let n in t)s[n].push((0,o.replaceInRange)({data:i[n],getIndex:t=>t.__source.index,dataRange:a,replace:e[n]}))}}else i=(0,u.separateGeojsonFeatures)(n,r);let a=(0,c.createLayerPropsFromFeatures)(i,s);this.setState({features:i,featuresDiff:s,layerProps:a})}getPickingInfo(t){let e=super.getPickingInfo(t),{index:n,sourceLayer:r}=e;return e.featureType=d.find(t=>r.id.startsWith("".concat(this.id,"-").concat(t,"-"))),n>=0&&r.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){let e="".concat(this.id,"-points-"),n="points"===t.featureType;for(let r of this.getSubLayers())r.id.startsWith(e)===n&&r.updateAutoHighlight(t)}_renderPolygonLayer(){let{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons.data)&&this.getSubLayerClass(r,a.POLYGON_LAYER.type);if(i){let o=(0,a.forwardProps)(this,a.POLYGON_LAYER.props),s=t&&e;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new i(o,this.getSubLayerProps({id:r,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){let{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",o=!t&&e&&this.shouldRenderSubLayer(r,n.polygonsOutline.data)&&this.getSubLayerClass(r,a.LINE_LAYER.type),s=this.shouldRenderSubLayer(i,n.lines.data)&&this.getSubLayerClass(i,a.LINE_LAYER.type);if(o||s){let t=(0,a.forwardProps)(this,a.LINE_LAYER.props);return[o&&new o(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.polygonsOutline),s&&new s(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){let{pointType:t}=this.props,{layerProps:e,binary:n}=this.state,{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=e.points.data.findIndex(t=>t.__source.index===r));let i=new Set(t.split("+")),o=[];for(let t of i){let i="points-".concat(t),s=a.POINT_LAYER[t],l=s&&this.shouldRenderSubLayer(i,e.points.data)&&this.getSubLayerClass(i,s.type);if(l){let u=(0,a.forwardProps)(this,s.props),c=e.points;if("text"===t&&n){let{instancePickingColors:t,...e}=c.data.attributes;c={...c,data:{...c.data,attributes:e}}}o.push(new l(u,this.getSubLayerProps({id:i,updateTriggers:u.updateTriggers,highlightedObjectIndex:r}),c))}}return o}renderLayers(){let{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){let{binary:e}=this.state;return e&&"function"==typeof t?(e,n)=>{let{data:r,index:i}=n;return t((0,s.binaryToFeatureForAccesor)(r,i),n)}:super.getSubLayerAccessor(t)}}(0,r.default)(f,"layerName","GeoJsonLayer"),(0,r.default)(f,"defaultProps",h)}),u("9sMCS",function(e,n){function r(t,e){if(!t)return null;let n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return -1!==n?function(t,e,n){let r={properties:{...t.properties[e]}};for(let e in t.numericProps)r.properties[e]=t.numericProps[e].value[n];return r}(t,r,n):null}function i(t,e){let n={points:null,lines:null,polygons:null};for(let r in n){let i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);let o=[];for(let t=0;t<i.length;t++)e(i[t],o),n[r][3*t+0]=o[0],n[r][3*t+1]=o[1],n[r][3*t+2]=o[2]}return n}t(e.exports,"binaryToFeatureForAccesor",()=>r),t(e.exports,"calculatePickingColors",()=>i)}),u("j3H5C",function(e,n){t(e.exports,"POINT_LAYER",()=>u),t(e.exports,"LINE_LAYER",()=>c),t(e.exports,"POLYGON_LAYER",()=>d),t(e.exports,"getDefaultProps",()=>h),t(e.exports,"forwardProps",()=>f);var r=l("5yBro"),i=l("jxCpk"),o=l("jtM2J"),s=l("1qtHd"),a=l("55Fuy");let u={circle:{type:i.default,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:r.default,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:o.default,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},c={type:s.default,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},d={type:a.default,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function h({type:t,props:e}){let n={};for(let r in e)n[r]=t.defaultProps[e[r]];return n}function f(t,e){let{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(let o in e){let s=e[o],a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}}),u("jtM2J",function(e,n){t(e.exports,"default",()=>m);var r=l("2qeFG"),i=l("9EzF6"),o=l("gl1Lh"),s=l("i5wGC"),a=l("791Ug"),u=l("3k3Fe"),c=l("iE7Wx"),d=l("eYmBf");let h={start:1,middle:0,end:-1},f={top:1,center:0,bottom:-1},p=[0,0,0,255],g={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:p},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:u.DEFAULT_FONT_SETTINGS.characterSet},fontFamily:u.DEFAULT_FONT_SETTINGS.fontFamily,fontWeight:u.DEFAULT_FONT_SETTINGS.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:p},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:p},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class m extends i.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0),(0,r.default)(this,"getBoundingRect",(t,e)=>{let{size:[n,r]}=this.transformParagraph(t,e),{fontSize:i}=this.state.fontAtlasManager.props;n/=i,r/=i;let{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(h["function"==typeof o?o(t,e):o]-1)*n/2,(f["function"==typeof s?s(t,e):s]-1)*r/2,n,r]}),(0,r.default)(this,"getIconOffsets",(t,e)=>{let{getTextAnchor:n,getAlignmentBaseline:r}=this.props,{x:i,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(t,e),u=h["function"==typeof n?n(t,e):n],c=f["function"==typeof r?r(t,e):r],d=i.length,p=Array(2*d),g=0;for(let t=0;t<d;t++){let e=(1-u)*(a-s[t])/2;p[g++]=(u-1)*a/2+e+i[t],p[g++]=(c-1)*l/2+o[t]}return p})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new u.default},this.props.maxWidth>0&&(0,s.default).warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){let{props:e,oldProps:n,changeFlags:r}=t;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){let{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:i}=this.state,o={...t,characterSet:i,fontFamily:e,fontWeight:n};if(!r.mapping)return r.setProps(o),!0;for(let t in o)if(o[t]!==r.props[t])return r.setProps(o),!0;return!1}_updateText(){var t;let e;let{data:n,characterSet:r}=this.props,i=null===(t=n.attributes)||void 0===t?void 0:t.getText,{getText:s}=this.props,a=n.startIndices,l="auto"===r&&new Set;if(i&&a){let{texts:t,characterCount:r}=(0,c.getTextFromBuffer)({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:a,characterSet:l});e=r,s=(e,{index:n})=>t[n]}else{let{iterable:t,objectInfo:r}=(0,o.createIterable)(n);for(let n of(a=[0],e=0,t)){r.index++;let t=Array.from(s(n,r)||"");l&&t.forEach(l.add,l),e+=t.length,a.push(e)}}this.setState({getText:s,startIndices:a,numInstances:e,characterSet:l||r})}transformParagraph(t,e){let{fontAtlasManager:n}=this.state,r=n.mapping,i=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props,l=i(t,e)||"";return(0,c.transformParagraph)(l,s,o,a*n.props.fontSize,r)}renderLayers(){let{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:r,texture:i,mapping:o},styleVersion:s}=this.state,{data:l,_dataDiff:c,getPosition:h,getColor:f,getSize:p,getAngle:g,getPixelOffset:m,getBackgroundColor:v,getBorderColor:_,getBorderWidth:y,backgroundPadding:b,background:x,billboard:E,fontSettings:T,outlineWidth:S,outlineColor:A,sizeScale:P,sizeUnits:C,sizeMinPixels:w,sizeMaxPixels:D,transitions:L,updateTriggers:R}=this.props,O=this.getSubLayerClass("characters",a.default),I=this.getSubLayerClass("background",d.default);return[x&&new I({getFillColor:v,getLineColor:_,getLineWidth:y,padding:b,getPosition:h,getSize:p,getAngle:g,getPixelOffset:m,billboard:E,sizeScale:P,sizeUnits:C,sizeMinPixels:w,sizeMaxPixels:D,transitions:L&&{getPosition:L.getPosition,getAngle:L.getAngle,getSize:L.getSize,getFillColor:L.getBackgroundColor,getLineColor:L.getBorderColor,getLineWidth:L.getBorderWidth,getPixelOffset:L.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:R.getPosition,getAngle:R.getAngle,getSize:R.getSize,getFillColor:R.getBackgroundColor,getLineColor:R.getBorderColor,getLineWidth:R.getBorderWidth,getPixelOffset:R.getPixelOffset,getBoundingRect:{getText:R.getText,getTextAnchor:R.getTextAnchor,getAlignmentBaseline:R.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new O({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:u.DEFAULT_FONT_SETTINGS.smoothing,outlineWidth:S/(T.radius||u.DEFAULT_FONT_SETTINGS.radius),outlineColor:A,iconAtlas:i,iconMapping:o,getPosition:h,getColor:f,getSize:p,getAngle:g,getPixelOffset:m,billboard:E,sizeScale:P*r,sizeUnits:C,sizeMinPixels:w*r,sizeMaxPixels:D*r,transitions:L&&{getPosition:L.getPosition,getAngle:L.getAngle,getColor:L.getColor,getSize:L.getSize,getPixelOffset:L.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:R.getText,getPosition:R.getPosition,getAngle:R.getAngle,getColor:R.getColor,getSize:R.getSize,getPixelOffset:R.getPixelOffset,getIconOffsets:{getTextAnchor:R.getTextAnchor,getAlignmentBaseline:R.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:c,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){(0,u.setFontAtlasCacheLimit)(t)}}(0,r.default)(m,"defaultProps",g),(0,r.default)(m,"layerName","TextLayer")}),u("791Ug",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("i5wGC"),o=l("5yBro"),s=l("c1euz");let a=[];class u extends o.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:s.default}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:e,target:n})=>this.encodePickingColor(e,n)}})}updateState(t){super.updateState(t);let{props:e,oldProps:n}=t,{outlineColor:r}=e;r!==n.outlineColor&&((r=r.map(t=>t/255))[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!e.sdf&&e.outlineWidth&&(0,i.default).warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){let{sdf:e,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state,o=r?Math.max(n,.75*(1-r)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:.75,outlineBuffer:o,gamma:n,sdf:!!e,outlineColor:i},super.draw(t),e&&r){let{iconManager:t}=this.state;t.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:.75}})}}getInstanceOffset(t){return t?Array.from(t).flatMap(t=>super.getInstanceOffset(t)):a}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(t=>super.getInstanceIconFrame(t)):a}}(0,r.default)(u,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),(0,r.default)(u,"layerName","MultiIconLayer")}),u("c1euz",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("3k3Fe",function(e,n){t(e.exports,"DEFAULT_FONT_SETTINGS",()=>u),t(e.exports,"setFontAtlasCacheLimit",()=>h),t(e.exports,"default",()=>f);var r=l("2qeFG"),i=l("9z40C"),o=l("i5wGC"),s=l("iE7Wx"),a=l("cu2gS");let u={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){let t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},c=new a.default(3);function d(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function h(t){(0,o.default).assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),c=new a.default(t)}class f{constructor(){(0,r.default)(this,"props",{...u}),(0,r.default)(this,"_key",void 0),(0,r.default)(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){let{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(t={}){Object.assign(this.props,t),this._key=this._getKey();let e=function(t,e){let n;n=new Set("string"==typeof e?Array.from(e):e);let r=c.get(t);if(!r)return n;for(let t in r.mapping)n.has(t)&&n.delete(t);return n}(this._key,this.props.characterSet),n=c.get(this._key);if(n&&0===e.size){this._atlas!==n&&(this._atlas=n);return}let r=this._generateFontAtlas(e,n);this._atlas=r,c.set(this._key,r)}_generateFontAtlas(t,e){let{fontFamily:n,fontWeight:r,fontSize:o,buffer:a,sdf:l,radius:u,cutoff:c}=this.props,h=e&&e.data;h||((h=document.createElement("canvas")).width=1024);let f=h.getContext("2d",{willReadFrequently:!0});d(f,n,o,r);let{mapping:p,canvasHeight:g,xOffset:m,yOffset:v}=(0,s.buildMapping)({getFontWidth:t=>f.measureText(t).width,fontHeight:1.2*o,buffer:a,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(h.height!==g){let t=f.getImageData(0,0,h.width,h.height);h.height=g,f.putImageData(t,0,0)}if(d(f,n,o,r),l){let e=new i.default({fontSize:o,buffer:a,radius:u,cutoff:c,fontFamily:n,fontWeight:"".concat(r)});for(let n of t){let{data:t,width:r,height:i,glyphTop:s}=e.draw(n);p[n].width=r,p[n].layoutOffsetY=.9*o-s;let a=f.createImageData(r,i);(function(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]})(t,a),f.putImageData(a,p[n].x,p[n].y)}}else for(let e of t)f.fillText(e,p[e].x,p[e].y+a+.9*o);return{xOffset:m,yOffset:v,mapping:p,data:h,width:h.width,height:h.height}}_getKey(){let{fontFamily:t,fontWeight:e,fontSize:n,buffer:r,sdf:i,radius:o,cutoff:s}=this.props;return i?"".concat(t," ").concat(e," ").concat(n," ").concat(r," ").concat(o," ").concat(s):"".concat(t," ").concat(e," ").concat(n," ").concat(r)}}}),u("9z40C",function(e,n){t(e.exports,"default",()=>r);class r{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=r,this.radius=n;let a=this.size=t+4*e,l=this._createCanvas(a),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${s} ${o} ${t}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){let e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){let{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.ctx.measureText(t),a=Math.ceil(n),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-o))),u=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=l+2*this.buffer,d=u+2*this.buffer,h=Math.max(c*d,0),f=new Uint8ClampedArray(h),p={data:f,width:c,height:d,glyphWidth:l,glyphHeight:u,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===l||0===u)return p;let{ctx:g,buffer:m,gridInner:v,gridOuter:_}=this;g.clearRect(m,m,l,u),g.fillText(t,m,m+a);let y=g.getImageData(m,m,l,u);_.fill(1e20,0,h),v.fill(0,0,h);for(let t=0;t<u;t++)for(let e=0;e<l;e++){let n=y.data[4*(t*l+e)+3]/255;if(0===n)continue;let r=(t+m)*c+e+m;if(1===n)_[r]=0,v[r]=1e20;else{let t=.5-n;_[r]=t>0?t*t:0,v[r]=t<0?t*t:0}}i(_,0,0,c,d,c,this.f,this.v,this.z),i(v,m,m,l,u,c,this.f,this.v,this.z);for(let t=0;t<h;t++){let e=Math.sqrt(_[t])-Math.sqrt(v[t]);f[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}}function i(t,e,n,r,i,s,a,l,u){for(let c=e;c<e+r;c++)o(t,n*s+c,s,i,a,l,u);for(let c=n;c<n+i;c++)o(t,c*s+e,1,r,a,l,u)}function o(t,e,n,r,i,o,s){o[0]=0,s[0]=-1e20,s[1]=1e20,i[0]=t[e];for(let a=1,l=0,u=0;a<r;a++){i[a]=t[e+a*n];let r=a*a;do{let t=o[l];u=(i[a]-i[t]+r-t*t)/(a-t)/2}while(u<=s[l]&&--l>-1)o[++l]=a,s[l]=u,s[l+1]=1e20}for(let a=0,l=0;a<r;a++){for(;s[l+1]<a;)l++;let r=o[l],u=a-r;t[e+a*n]=i[r]+u*u}}}),u("iE7Wx",function(e,n){t(e.exports,"buildMapping",()=>o),t(e.exports,"transformParagraph",()=>u),t(e.exports,"getTextFromBuffer",()=>c);var r=l("i5wGC");let i=[];function o({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let l=0,u=s,c=n+2*r;for(let s of t)if(!o[s]){let t=e(s);u+t+2*r>i&&(u=0,l++),o[s]={x:u+r,y:a+l*c+r,width:t,height:c,layoutWidth:t,layoutHeight:n},u+=t+2*r}return{mapping:o,xOffset:u,yOffset:a+l*c,canvasHeight:Math.pow(2,Math.ceil(Math.log2(a+(l+1)*c)))}}function s(t,e,n,r){let i=0;for(let s=e;s<n;s++){var o;i+=(null===(o=r[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return i}function a(t,e,n,r,i,o){let a=e,l=0;for(let u=e;u<n;u++){let e=s(t,u,u+1,i);l+e>r&&(a<u&&o.push(u),a=u,l=0),l+=e}return l}function u(t,e,n,o,l){let u=Array.from(t),c=u.length,d=Array(c),h=Array(c),f=Array(c),p=("break-word"===n||"break-all"===n)&&isFinite(o)&&o>0,g=[0,0],m=[0,0],v=0,_=0,y=0;for(let t=0;t<=c;t++){let x=u[t];if(("\n"===x||t===c)&&(y=t),y>_){let t=p?function(t,e,n,r,i=0,o){void 0===o&&(o=t.length);let l=[];return"break-all"===e?a(t,i,o,n,r,l):function(t,e,n,r,i,o){let l=e,u=e,c=e,d=0;for(let h=e;h<n;h++)if(" "===t[h]?c=h+1:(" "===t[h+1]||h+1===n)&&(c=h+1),c>u){let e=s(t,u,c,i);d+e>r&&(l<u&&(o.push(u),l=u,d=0),e>r&&(e=a(t,u,c,r,i,o),l=o[o.length-1])),u=c,d+=e}return d}(t,i,o,n,r,l),l}(u,n,o,l,_,y):i;for(let n=0;n<=t.length;n++){let i=0===n?_:t[n-1],o=n<t.length?t[n]:y;!function(t,e,n,i,o,s){let a=0,l=0;for(let s=e;s<n;s++){let e=t[s],n=i[e];n?(l||(l=n.layoutHeight),o[s]=a+n.layoutWidth/2,a+=n.layoutWidth):((0,r.default).warn("Missing character: ".concat(e," (").concat(e.codePointAt(0),")"))(),o[s]=a,a+=32)}s[0]=a,s[1]=l}(u,i,o,l,d,m);for(let t=i;t<o;t++){var b;let e=(null===(b=l[u[t]])||void 0===b?void 0:b.layoutOffsetY)||0;h[t]=v+m[1]/2+e,f[t]=m[0]}v+=m[1]*e,g[0]=Math.max(g[0],m[0])}_=y}"\n"===x&&(d[_]=0,h[_]=0,f[_]=0,_++)}return g[1]=v,{x:d,y:h,rowWidth:f,size:g}}function c({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:o}){let s=t.BYTES_PER_ELEMENT,a=n?n/s:1,l=r?r/s:0,u=i[e]||Math.ceil((t.length-l)/a),c=o&&new Set,d=Array(e),h=t;if(a>1||l>0){h=new t.constructor(u);for(let e=0;e<u;e++)h[e]=t[e*a+l]}for(let t=0;t<e;t++){let e=i[t],n=i[t+1]||u,r=h.subarray(e,n);d[t]=String.fromCodePoint.apply(null,r),c&&r.forEach(c.add,c)}if(c)for(let t of c)o.add(String.fromCodePoint(t));return{texts:d,characterCount:u}}}),u("cu2gS",function(e,n){t(e.exports,"default",()=>i);var r=l("2qeFG");class i{constructor(t=5){(0,r.default)(this,"limit",void 0),(0,r.default)(this,"_cache",{}),(0,r.default)(this,"_order",[]),this.limit=t}get(t){let e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?this.delete(t):Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t)}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){let e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}}),u("eYmBf",function(e,n){t(e.exports,"default",()=>p);var r=l("2qeFG"),i=l("8JeSb"),o=l("lUg0r"),s=l("2WjM0"),a=l("heh00"),u=l("aFzkX"),c=l("i9o5q"),d=l("fTGuP"),h=l("9VzHb");let f={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class p extends i.default{constructor(...t){super(...t),(0,r.default)(this,"state",void 0)}getShaders(){return super.getShaders({vs:d.default,fs:h.default,modules:[s.default,o.default]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);let{changeFlags:e}=t;if(e.extensionsChanged){var n;let{gl:t}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){let{billboard:e,sizeScale:n,sizeUnits:r,sizeMinPixels:i,sizeMaxPixels:o,getLineWidth:s}=this.props,{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:e,stroked:!!s,padding:l,sizeUnits:a.UNIT[r],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:o}).draw()}_getModel(t){return new c.default(t,{...this.getShaders(),id:this.props.id,geometry:new u.default({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}(0,r.default)(p,"defaultProps",f),(0,r.default)(p,"layerName","TextBackgroundLayer")}),u("fTGuP",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n"}),u("9VzHb",function(e,n){t(e.exports,"default",()=>r);var r="#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}),u("h9JYQ",function(e,n){t(e.exports,"getGeojsonFeatures",()=>i),t(e.exports,"separateGeojsonFeatures",()=>o);var r=l("i5wGC");function i(t){if(Array.isArray(t))return t;switch((0,r.default).assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return(0,r.default).assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function o(t,e,n={}){let i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:a=0,endRow:l=t.length}=n;for(let n=a;n<l;n++){let o=t[n],{geometry:a}=o;if(a){if("GeometryCollection"===a.type){(0,r.default).assert(Array.isArray(a.geometries),"GeoJSON does not have geometries array");let{geometries:t}=a;for(let r=0;r<t.length;r++)s(t[r],i,e,o,n)}else s(a,i,e,o,n)}}return i}function s(t,e,n,i,o){let{type:s,coordinates:l}=t,{pointFeatures:u,lineFeatures:c,polygonFeatures:d,polygonOutlineFeatures:h}=e;if(!function(t,e){let n=a[t];for((0,r.default).assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(s,l)){(0,r.default).warn("".concat(s," coordinates are malformed"))();return}switch(s){case"Point":u.push(n({geometry:t},i,o));break;case"MultiPoint":l.forEach(t=>{u.push(n({geometry:{type:"Point",coordinates:t}},i,o))});break;case"LineString":c.push(n({geometry:t},i,o));break;case"MultiLineString":l.forEach(t=>{c.push(n({geometry:{type:"LineString",coordinates:t}},i,o))});break;case"Polygon":d.push(n({geometry:t},i,o)),l.forEach(t=>{h.push(n({geometry:{type:"LineString",coordinates:t}},i,o))});break;case"MultiPolygon":l.forEach(t=>{d.push(n({geometry:{type:"Polygon",coordinates:t}},i,o)),t.forEach(t=>{h.push(n({geometry:{type:"LineString",coordinates:t}},i,o))})})}}let a={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4}}),u("kKwDE",function(e,n){t(e.exports,"createLayerPropsFromFeatures",()=>s),t(e.exports,"createLayerPropsFromBinary",()=>a);var r=l("9sMCS");function i(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function o(t){return t.geometry.coordinates}function s(t,e){let n=i(),{pointFeatures:r,lineFeatures:s,polygonFeatures:a,polygonOutlineFeatures:l}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=o,n.lines.data=s,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=o,n.polygons.data=a,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=o,n.polygonsOutline.data=l,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=o,n}function a(t,e){let n=i(),{points:o,lines:s,polygons:a}=t,l=(0,r.calculatePickingColors)(t,e);return n.points.data={length:o.positions.value.length/o.positions.size,attributes:{...o.attributes,getPosition:o.positions,instancePickingColors:{size:3,value:l.points}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.lines.data={length:s.pathIndices.value.length-1,startIndices:s.pathIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:3,value:l.lines}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.lines._pathType="open",n.polygons.data={length:a.polygonIndices.value.length-1,startIndices:a.polygonIndices.value,attributes:{...a.attributes,getPolygon:a.positions,pickingColors:{size:3,value:l.polygons}},properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},n.polygons._normalize=!1,a.triangles&&(n.polygons.data.attributes.indices=a.triangles.value),n.polygonsOutline.data={length:a.primitivePolygonIndices.value.length-1,startIndices:a.primitivePolygonIndices.value,attributes:{...a.attributes,getPath:a.positions,instancePickingColors:{size:3,value:l.polygons}},properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},n.polygonsOutline._pathType="open",n}}),u("g6n2j",function(e,n){t(e.exports,"VERSION",()=>l("zqwE1").VERSION),t(e.exports,"COORDINATE_SYSTEM",()=>l("heh00").COORDINATE_SYSTEM),t(e.exports,"OPERATION",()=>l("heh00").OPERATION),t(e.exports,"UNIT",()=>l("heh00").UNIT),t(e.exports,"LightingEffect",()=>l("ehOSN").default),t(e.exports,"AmbientLight",()=>l("iFrzE").AmbientLight),t(e.exports,"DirectionalLight",()=>l("3CPVc").DirectionalLight),t(e.exports,"PointLight",()=>l("heyL3").PointLight),t(e.exports,"_CameraLight",()=>l("9brHK").default),t(e.exports,"_SunLight",()=>l("30tkg").default),t(e.exports,"PostProcessEffect",()=>l("6PDxZ").default),t(e.exports,"_LayersPass",()=>l("cXiBv").default),t(e.exports,"_PickLayersPass",()=>l("fiWK9").default),t(e.exports,"Deck",()=>l("fFfEi").default),t(e.exports,"LayerManager",()=>l("TOhfL").default),t(e.exports,"AttributeManager",()=>l("qyCgO").default),t(e.exports,"Layer",()=>l("8JeSb").default),t(e.exports,"CompositeLayer",()=>l("9EzF6").default),t(e.exports,"DeckRenderer",()=>l("l349Q").default),t(e.exports,"Viewport",()=>l("5Vmrk").default),t(e.exports,"WebMercatorViewport",()=>l("cu0SC").default),t(e.exports,"_GlobeViewport",()=>l("59UxP").default),t(e.exports,"OrbitViewport",()=>l("dYCDq").default),t(e.exports,"OrthographicViewport",()=>l("94SQj").default),t(e.exports,"FirstPersonViewport",()=>l("jLYbI").default),t(e.exports,"picking",()=>l("lUg0r").default),t(e.exports,"project",()=>l("ixmOo").default),t(e.exports,"project32",()=>l("2WjM0").default),t(e.exports,"gouraudLighting",()=>l("itX10").gouraudLighting),t(e.exports,"phongLighting",()=>l("itX10").phongLighting),t(e.exports,"shadow",()=>l("9XoO5").default),t(e.exports,"View",()=>l("jdrcl").default),t(e.exports,"MapView",()=>l("j70FB").default),t(e.exports,"FirstPersonView",()=>l("3wMh3").default),t(e.exports,"OrbitView",()=>l("27FzP").default),t(e.exports,"OrthographicView",()=>l("8L5Az").default),t(e.exports,"_GlobeView",()=>l("hLSJi").default),t(e.exports,"Controller",()=>l("ewH3q").default),t(e.exports,"MapController",()=>l("hTYIw").default),t(e.exports,"_GlobeController",()=>l("7shHs").default),t(e.exports,"FirstPersonController",()=>l("aP4Sk").default),t(e.exports,"OrbitController",()=>l("5Nz8Z").default),t(e.exports,"OrthographicController",()=>l("huOFC").default),t(e.exports,"LayerExtension",()=>l("5YUt1").default),t(e.exports,"TRANSITION_EVENTS",()=>l("560LF").TRANSITION_EVENTS),t(e.exports,"TransitionInterpolator",()=>l("gq9cf").default),t(e.exports,"LinearInterpolator",()=>l("jAEIu").default),t(e.exports,"FlyToInterpolator",()=>l("l4xuh").default),t(e.exports,"log",()=>l("i5wGC").default),t(e.exports,"assert",()=>l("321bC").default),t(e.exports,"createIterable",()=>l("gl1Lh").createIterable),t(e.exports,"fp64LowPart",()=>l("jmseR").fp64LowPart),t(e.exports,"Tesselator",()=>l("1mxGs").default),t(e.exports,"_fillArray",()=>l("3tWMN").fillArray),t(e.exports,"_flatten",()=>l("3tWMN").flatten),t(e.exports,"_count",()=>l("aacbl").count),t(e.exports,"_deepEqual",()=>l("dHpMo").deepEqual),t(e.exports,"_memoize",()=>l("cB0Rj").default),t(e.exports,"_mergeShaders",()=>l("1B3Sr").mergeShaders),t(e.exports,"_compareProps",()=>l("jWEec").compareProps),l("zqwE1"),l("heh00"),l("ehOSN"),l("iFrzE"),l("3CPVc"),l("heyL3"),l("9brHK"),l("30tkg"),l("6PDxZ"),l("cXiBv"),l("fiWK9"),l("fFfEi"),l("TOhfL"),l("qyCgO"),l("8JeSb"),l("9EzF6"),l("l349Q"),l("5Vmrk"),l("cu0SC"),l("59UxP"),l("dYCDq"),l("94SQj"),l("jLYbI"),l("itX10"),l("lUg0r"),l("fUe8q"),l("ixmOo"),l("2WjM0"),l("9XoO5"),l("jdrcl"),l("j70FB"),l("3wMh3"),l("27FzP"),l("8L5Az"),l("hLSJi"),l("ewH3q"),l("hTYIw"),l("7shHs"),l("aP4Sk"),l("5Nz8Z"),l("huOFC"),l("5YUt1"),l("560LF"),l("gq9cf"),l("jAEIu"),l("l4xuh"),l("i5wGC"),l("321bC"),l("gl1Lh"),l("jmseR"),l("1mxGs"),l("3tWMN"),l("aacbl"),l("dHpMo"),l("cB0Rj"),l("1B3Sr"),l("jWEec")}),u("zqwE1",function(e,n){t(e.exports,"VERSION",()=>u);var r=l("4J9Fm"),i=l("5tC4z"),o=l("i5wGC"),s=l("dSHHv"),a=l("e6NSU");let u=function(){let t="8.9.36",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||((0,o.default).log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:o.default,_registerLoggers:s.register},(0,r.registerLoaders)([a.default,[i.ImageLoader,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}()}),u("5tC4z",function(e,n){t(e.exports,"ImageLoader",()=>s);var r=l("d9jiL"),i=l("6fla1"),o=l("61iTE");let s={id:"image",module:"images",name:"Images",version:r.VERSION,mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:i.parseImage,tests:[t=>!!(0,o.getBinaryImageMetadata)(new DataView(t))],options:{image:{type:"auto",decode:!0}}}}),u("d9jiL",function(e,n){t(e.exports,"VERSION",()=>r);let r="3.4.15"}),u("6fla1",function(e,n){t(e.exports,"parseImage",()=>c);var r=l("dCQB8"),i=l("fkLXO"),o=l("2fx4G"),s=l("eLA5e"),a=l("avdfH"),u=l("2ujCp");async function c(t,e,n){let l;let c=((e=e||{}).image||{}).type||"auto",{url:d}=n||{};switch(function(t){switch(t){case"auto":case"data":return(0,i.getDefaultImageType)();default:return(0,i.isImageTypeSupported)(t),t}}(c)){case"imagebitmap":l=await (0,a.parseToImageBitmap)(t,e,d);break;case"image":l=await (0,s.parseToImage)(t,e,d);break;case"data":l=await (0,u.parseToNodeImage)(t,e);break;default:(0,r.assert)(!1)}return"data"===c&&(l=(0,o.getImageData)(l)),l}}),u("fkLXO",function(e,n){t(e.exports,"isImageTypeSupported",()=>u),t(e.exports,"getDefaultImageType",()=>c);var r=l("4XzuU");let{_parseImageNode:i}=globalThis,o="undefined"!=typeof Image,s="undefined"!=typeof ImageBitmap,a=!!r.isBrowser||!!i;function u(t){switch(t){case"auto":return s||o||a;case"imagebitmap":return s;case"image":return o;case"data":return a;default:throw Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function c(){if(s)return"imagebitmap";if(o)return"image";if(a)return"data";throw Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}}),u("2fx4G",function(e,n){t(e.exports,"getImageData",()=>r);function r(t){switch(function(t){let e="undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null;if(!e)throw Error("Not an image");return e}(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw Error("getImageData")}}}),u("eLA5e",function(e,n){t(e.exports,"parseToImage",()=>i);var r=l("fajp5");async function i(t,e,n){let i=(0,r.getBlobOrSVGDataUrl)(t,n),s=self.URL||self.webkitURL,a="string"!=typeof i&&s.createObjectURL(i);try{return await o(a||i,e)}finally{a&&s.revokeObjectURL(a)}}async function o(t,e){let n=new Image;return(n.src=t,e.image&&e.image.decode&&n.decode)?(await n.decode(),n):await new Promise((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(Error("Could not load image ".concat(t,": ").concat(e)))}catch(t){r(t)}})}}),u("fajp5",function(e,n){t(e.exports,"isSVG",()=>o),t(e.exports,"getBlobOrSVGDataUrl",()=>s),t(e.exports,"getBlob",()=>a);let r=/^data:image\/svg\+xml/,i=/\.svg((\?|#).*)?$/;function o(t){return t&&(r.test(t)||i.test(t))}function s(t,e){if(o(e)){let e=new TextDecoder().decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(t){throw Error(t.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return a(t,e)}function a(t,e){if(o(e))throw Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}}),u("avdfH",function(e,n){t(e.exports,"parseToImageBitmap",()=>a);var r=l("fajp5"),i=l("eLA5e");let o={},s=!0;async function a(t,e,n){let o;o=(0,r.isSVG)(n)?await (0,i.parseToImage)(t,e,n):(0,r.getBlob)(t,n);let s=e&&e.imagebitmap;return await u(o,s)}async function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function(t){for(let e in t||o)return!1;return!0}(e)||!s)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(t){console.warn(t),s=!1}return await createImageBitmap(t)}}),u("2ujCp",function(e,n){t(e.exports,"parseToNodeImage",()=>o);var r=l("dCQB8"),i=l("61iTE");async function o(t,e){let{mimeType:n}=(0,i.getBinaryImageMetadata)(t)||{},o=globalThis._parseImageNode;return(0,r.assert)(o),await o(t,n)}}),u("61iTE",function(e,n){t(e.exports,"getBinaryImageMetadata",()=>i);var r=l("cv4xv");function i(t){let e=o(t);return function(t){let e=o(t);return e.byteLength>=24&&0x89504e47===e.getUint32(0,!1)?{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}:null}(e)||function(t){let e=o(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2)))return null;let{tableMarkers:n,sofMarkers:r}=function(){let t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}(),i=2;for(;i+9<e.byteLength;){let t=e.getUint16(i,!1);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,!1),width:e.getUint16(i+7,!1)};if(!n.has(t))break;i+=2,i+=e.getUint16(i,!1)}return null}(e)||function(t){let e=o(t);return e.byteLength>=10&&0x47494638===e.getUint32(0,!1)?{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}:null}(e)||function(t){let e=o(t);return e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}:null}(e)||function(t){let e=new Uint8Array(t instanceof DataView?t.buffer:t),n=(0,r.getISOBMFFMediaType)(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function o(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw Error("toDataView")}}),u("cv4xv",function(e,n){function r(t){return!function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[...e].map(t=>t.charCodeAt(0));for(let e=0;e<r.length;++e)if(r[e]!==t[e+n])return!1;return!0}(t,"ftyp",4)||(96&t[8])==0?null:function(t){switch(String.fromCharCode(...t.slice(8,12)).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t)}t(e.exports,"getISOBMFFMediaType",()=>r)}),u("e6NSU",function(e,n){t(e.exports,"default",()=>r);var r={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){let e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse}}),u("ehOSN",function(e,n){t(e.exports,"default",()=>m);var r=l("2qeFG"),i=l("j7nLR"),o=l("35qVw"),s=l("iFrzE"),a=l("3CPVc"),u=l("cn1FU"),c=l("iNLNk"),d=l("7UfXm"),h=l("9XoO5");let f={color:[255,255,255],intensity:1},p=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],g=[0,0,0,200/255];class m{constructor(t={}){(0,r.default)(this,"id","lighting-effect"),(0,r.default)(this,"props",void 0),(0,r.default)(this,"shadowColor",g),(0,r.default)(this,"shadow",void 0),(0,r.default)(this,"ambientLight",void 0),(0,r.default)(this,"directionalLights",void 0),(0,r.default)(this,"pointLights",void 0),(0,r.default)(this,"shadowPasses",[]),(0,r.default)(this,"shadowMaps",[]),(0,r.default)(this,"dummyShadowMap",null),(0,r.default)(this,"programManager",void 0),(0,r.default)(this,"shadowMatrices",void 0),this.setProps(t)}setProps(t){for(let e in this.ambientLight=null,this.directionalLights=[],this.pointLights=[],t){let n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow),this.props=t}preRender(t,{layers:e,layerFilter:n,viewports:r,onViewportActive:s,views:a}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),!this.programManager&&(this.programManager=(0,i.default).getDefaultProgramManager(t),h.default&&this.programManager.addDefaultModule(h.default)),this.dummyShadowMap||(this.dummyShadowMap=new o.default(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++)this.shadowPasses[t].render({layers:e,layerFilter:n,viewports:r,onViewportActive:s,views:a,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){let e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(e=>e.getProjectedLight({layer:t})),pointLights:this.pointLights.map(e=>e.getProjectedLight({layer:t}))},e}cleanup(){for(let t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(h.default),this.programManager=null)}_calculateMatrices(){let t=[];for(let e of this.directionalLights){let n=new(0,u.default)().lookAt({eye:new(0,c.default)(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){let n=new d.default(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){let{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new s.AmbientLight(f),this.directionalLights.push(new a.DirectionalLight(p[0]),new a.DirectionalLight(p[1])))}}}),u("iFrzE",function(e,n){t(e.exports,"AmbientLight",()=>s);var r=l("2qeFG");let i=[255,255,255],o=0;class s{constructor(t={}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"color",void 0),(0,r.default)(this,"intensity",void 0),(0,r.default)(this,"type","ambient");let{color:e=i}=t,{intensity:n=1}=t;this.id=t.id||"ambient-".concat(o++),this.color=e,this.intensity=n}}}),u("3CPVc",function(e,n){t(e.exports,"DirectionalLight",()=>u);var r=l("2qeFG"),i=l("iNLNk");let o=[255,255,255],s=[0,0,-1],a=0;class u{constructor(t={}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"color",void 0),(0,r.default)(this,"intensity",void 0),(0,r.default)(this,"type","directional"),(0,r.default)(this,"direction",void 0),(0,r.default)(this,"shadow",void 0);let{color:e=o}=t,{intensity:n=1}=t,{direction:l=s}=t,{_shadow:u=!1}=t;this.id=t.id||"directional-".concat(a++),this.color=e,this.intensity=n,this.type="directional",this.direction=new(0,i.default)(l).normalize().toArray(),this.shadow=u}getProjectedLight(t){return this}}}),u("7UfXm",function(e,n){t(e.exports,"default",()=>d);var r=l("2qeFG"),i=l("cXiBv");l("eFBWR");var o=l("fCLVZ"),s=l("2Eryf"),a=l("67hSA"),u=l("i8qYD"),c=l("35qVw");class d extends i.default{constructor(t,e){super(t,e),(0,r.default)(this,"shadowMap",void 0),(0,r.default)(this,"depthBuffer",void 0),(0,r.default)(this,"fbo",void 0),this.shadowMap=new c.default(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new u.default(t,{format:33189,width:1,height:1}),this.fbo=new a.default(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){let e=this.fbo;(0,s.withParameters)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{let n=t.viewports[0],r=(0,o.cssToDeviceRatio)(this.gl),i=n.width*r,s=n.height*r;(i!==e.width||s!==e.height)&&e.resize({width:i,height:s}),super.render({...t,target:e,pass:"shadow"})})}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}}),u("cXiBv",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("5I3Zy"),o=l("34dnL");l("eFBWR");var s=l("fCLVZ"),a=l("2Eryf");class u extends i.default{constructor(...t){super(...t),(0,r.default)(this,"_lastRenderIndex",-1)}render(t){let e=this.gl;return(0,a.setParameters)(e,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){let{target:e,moduleParameters:n,viewports:r,views:i,onViewportActive:o,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";let u=this.gl;l&&function(t,e){let n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;(0,a.setParameters)(t,{viewport:[0,0,n,r]}),t.clear(16640)}(u,e),s&&(this._lastRenderIndex=-1);let c=[];for(let s of r){let r=i&&i[s.id];null==o||o(s);let a=this._getDrawLayerParams(s,t);for(let i of s.subViewports||[s]){let o=this._drawLayersInViewport(u,{target:e,moduleParameters:n,viewport:i,view:r,pass:t.pass,layers:t.layers},a);c.push(o)}}return c}_getDrawLayerParams(t,{layers:e,pass:n,isPicking:r=!1,layerFilter:i,cullRect:o,effects:s,moduleParameters:a},l=!1){let u=[],c=function t(e=0,n={}){let r={},i=(o,s)=>{let a;let l=o.props._offset,u=o.id,c=o.parent&&o.parent.id;if(!c||c in n||i(o.parent,!1),c in r){let e=r[c]=r[c]||t(n[c],n);a=e(o,s),r[u]=e}else Number.isFinite(l)?(a=l+(n[c]||0),r[u]=null):a=e;return s&&a>=e&&(e=a+1),n[u]=a,a};return i}(this._lastRenderIndex+1),d={layer:e[0],viewport:t,isPicking:r,renderPass:n,cullRect:o},h={};for(let r=0;r<e.length;r++){let o=e[r],f=this._shouldDrawLayer(o,d,i,h),p={shouldDrawLayer:f};f&&!l&&(p.layerRenderIndex=c(o,f),p.moduleParameters=this._getModuleParameters(o,s,n,a),p.layerParameters=this.getLayerParameters(o,r,t)),u[r]=p}return u}_drawLayersInViewport(t,{layers:e,moduleParameters:n,pass:r,target:i,viewport:l,view:u},c){let d=function(t,{moduleParameters:e,target:n,viewport:r}){let i=n&&"default-framebuffer"!==n.id,o=e&&e.devicePixelRatio||(0,s.cssToDeviceRatio)(t),a=i?n.height:t.drawingBufferHeight;return[r.x*o,a-(r.y+r.height)*o,r.width*o,r.height*o]}(t,{moduleParameters:n,target:i,viewport:l});if(u&&u.props.clear){let e=!0===u.props.clear?{color:!0,depth:!0}:u.props.clear;(0,a.withParameters)(t,{scissorTest:!0,scissor:d},()=>(0,o.clear)(t,e))}let h={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};(0,a.setParameters)(t,{viewport:d});for(let t=0;t<e.length;t++){let n=e[t],{shouldDrawLayer:i,layerRenderIndex:o,moduleParameters:s,layerParameters:a}=c[t];if(i&&n.props.pickable&&h.pickableCount++,n.isComposite)h.compositeCount++;else if(i){h.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,o),s.viewport=l;try{n._drawLayer({moduleParameters:s,uniforms:{layerIndex:o},parameters:a})}catch(t){n.raiseError(t,"drawing ".concat(n," to ").concat(r))}}}return h}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,r){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let i=t.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){let t=e.layer.id;if(t in r||(r[t]=n(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,r){var i,o;let a=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:(0,s.cssToDeviceRatio)(this.gl)});if(e)for(let n of e)Object.assign(a,null===(o=n.getModuleParameters)||void 0===o?void 0:o.call(n,t));return Object.assign(a,this.getModuleParameters(t,e),r)}}}),u("5I3Zy",function(e,n){t(e.exports,"default",()=>i);var r=l("2qeFG");class i{constructor(t,e={id:"pass"}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"gl",void 0),(0,r.default)(this,"props",void 0);let{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}}),u("9XoO5",function(e,n){t(e.exports,"default",()=>p);var r=l("heh00"),i=l("ixmOo"),o=l("cn1FU"),s=l("iNLNk"),a=l("cB0Rj");l("auS2n");var u=l("gZN7e");let c=(0,a.default)(function({viewport:t,center:e}){return new(0,o.default)(t.viewProjectionMatrix).invert().transform(e)}),d=(0,a.default)(function({viewport:t,shadowMatrices:e}){let n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,a=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(t=>(function(t,e){let[n,r,i]=t,o=(0,u.pixelsToWorld)([n,r,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]})(t,r));for(let r of e){let e=r.clone().translate(new(0,s.default)(t.center).negate()),i=a.map(t=>e.transform(t)),l=new(0,o.default)().ortho({left:Math.min(...i.map(t=>t[0])),right:Math.max(...i.map(t=>t[0])),bottom:Math.min(...i.map(t=>t[1])),top:Math.max(...i.map(t=>t[1])),near:Math.min(...i.map(t=>-t[2])),far:Math.max(...i.map(t=>-t[2]))});n.push(l.multiplyRight(r))}return n}),h=[0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];var p={name:"shadow",dependencies:[i.default],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){let{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};let i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||h,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},o=c({viewport:t.viewport,center:e.project_uCenter}),a=[],l=d({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let n=0;n<t.shadowMatrices.length;n++){let i=l[n],u=i.clone().translate(new(0,s.default)(t.viewport.center).negate());e.project_uCoordinateSystem===r.COORDINATE_SYSTEM.LNGLAT&&e.project_uProjectionMode===r.PROJECTION_MODE.WEB_MERCATOR?(l[n]=u,a[n]=o):(l[n]=i.clone().multiplyRight(f),a[n]=u.transform(o))}for(let e=0;e<l.length;e++)i["shadow_uViewProjectionMatrices[".concat(e,"]")]=l[e],i["shadow_uProjectCenters[".concat(e,"]")]=a[e],t.shadowMaps&&t.shadowMaps.length>0?i["shadow_uShadowMap".concat(e)]=t.shadowMaps[e]:i["shadow_uShadowMap".concat(e)]=t.dummyShadowMap;return i}(t,e):{}}}),u("heyL3",function(e,n){t(e.exports,"PointLight",()=>d);var r=l("2qeFG"),i=l("bWXWI"),o=l("heh00");let s=[255,255,255],a=[0,0,1],u=[0,0,1],c=0;class d{constructor(t={}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"color",void 0),(0,r.default)(this,"intensity",void 0),(0,r.default)(this,"type","point"),(0,r.default)(this,"position",void 0),(0,r.default)(this,"attenuation",void 0),(0,r.default)(this,"projectedLight",void 0);let{color:e=s}=t,{intensity:n=1}=t,{position:i=u}=t;this.id=t.id||"point-".concat(c++),this.color=e,this.intensity=n,this.type="point",this.position=i,this.attenuation=t.attenuation?t.attenuation:"intensity"in t?[0,0,t.intensity||0]:a,this.projectedLight={...this}}getProjectedLight({layer:t}){let{projectedLight:e}=this,n=t.context.viewport,{coordinateSystem:r,coordinateOrigin:s}=t.props,a=(0,i.projectPosition)(this.position,{viewport:n,coordinateSystem:r,coordinateOrigin:s,fromCoordinateSystem:n.isGeospatial?o.COORDINATE_SYSTEM.LNGLAT:o.COORDINATE_SYSTEM.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return e.color=this.color,e.intensity=this.intensity,e.position=a,e}}}),u("9brHK",function(e,n){t(e.exports,"default",()=>o);var r=l("heyL3"),i=l("jBhUX");class o extends r.PointLight{getProjectedLight({layer:t}){let{projectedLight:e}=this,n=t.context.viewport,{coordinateSystem:r,coordinateOrigin:o,modelMatrix:s}=t.props,{project_uCameraPosition:a}=(0,i.getUniformsFromViewport)({viewport:n,modelMatrix:s,coordinateSystem:r,coordinateOrigin:o});return e.color=this.color,e.intensity=this.intensity,e.position=a,e}}}),u("30tkg",function(e,n){t(e.exports,"default",()=>s);var r=l("2qeFG"),i=l("3CPVc");l("2f9pJ");var o=l("6K7CW");class s extends i.DirectionalLight{constructor(t){super(t),(0,r.default)(this,"timestamp",void 0),this.timestamp=t.timestamp}getProjectedLight({layer:t}){let{viewport:e}=t.context;if(e.resolution&&e.resolution>0){let[t,e,n]=(0,o.getSunDirection)(this.timestamp,0,0);this.direction=[t,-n,e]}else{let{latitude:t,longitude:n}=e;this.direction=(0,o.getSunDirection)(this.timestamp,t,n)}return this}}}),u("2f9pJ",function(e,n){t(e.exports,"getSunDirection",()=>l("6K7CW").getSunDirection),l("6K7CW")}),u("6K7CW",function(e,n){t(e.exports,"getSunDirection",()=>o);let r=Math.PI/180,i=23.4397*r;function o(t,e,n){let{azimuth:o,altitude:s}=function(t,e,n){var o,s,a;let l=r*e,u=("number"==typeof(a=t)?a:a.getTime())/864e5-.5+2440588-2451545,c=function(t){let e=function(t){let e=r*(1.9148*Math.sin(t)+.02*Math.sin(2*t)+3e-4*Math.sin(3*t));return t+e+102.9372*r+Math.PI}(r*(357.5291+.98560028*t));return{declination:Math.asin(0*Math.cos(i)+1*Math.sin(i)*Math.sin(e)),rightAscension:Math.atan2(Math.sin(e)*Math.cos(i)-Math.tan(0)*Math.sin(i),Math.cos(e))}}(u),d=(o=-(r*n),r*(280.147+360.9856235*u)-o-c.rightAscension);return{azimuth:Math.atan2(Math.sin(d),Math.cos(d)*Math.sin(l)-Math.tan(c.declination)*Math.cos(l)),altitude:Math.asin(Math.sin(l)*Math.sin(s=c.declination)+Math.cos(l)*Math.cos(s)*Math.cos(d))}}(t,e,n);return[Math.sin(o)*Math.cos(s),Math.cos(o)*Math.cos(s),-Math.sin(s)]}}),u("6PDxZ",function(e,n){t(e.exports,"default",()=>s);var r=l("2qeFG"),i=l("e0JdK"),o=l("4bnKl");class s{constructor(t,e={}){(0,r.default)(this,"id",void 0),(0,r.default)(this,"props",void 0),(0,r.default)(this,"module",void 0),(0,r.default)(this,"passes",void 0),this.id="".concat(t.name,"-pass"),this.props=e,(0,o.normalizeShaderModule)(t),this.module=t}setProps(t){this.props=t}preRender(){}postRender(t,e){let n=this.passes||function(t,e,n){if(!e.passes){let r=c(e);return[new i.default(t,{id:n,module:e,fs:r})]}return e.passes.map((r,o)=>{let s=c(e,r),a="".concat(n,"-").concat(o);return new i.default(t,{id:a,module:e,fs:s})})}(t,this.module,this.id);this.passes=n;let{target:r}=e,o=e.inputBuffer,s=e.swapBuffer;for(let t=0;t<this.passes.length;t++){r&&t===this.passes.length-1&&(s=r),this.passes[t].render({inputBuffer:o,outputBuffer:s,moduleSettings:this.props});let e=s;s=o,o=e}return o}cleanup(){if(this.passes){for(let t of this.passes)t.delete();this.passes=void 0}}}let a=t=>"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(t,"(gl_FragColor, texSize, texCoord);\n}\n"),u=t=>"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(t,"(texture, texSize, texCoord);\n}\n");function c(t,e=t){return e.filter?a("string"==typeof e.filter?e.filter:"".concat(t.name,"_filterColor")):e.sampler?u("string"==typeof e.sampler?e.sampler:"".concat(t.name,"_sampleColor")):null}}),u("e0JdK",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("34dnL"),o=l("eESKj");l("eFBWR");var s=l("2Eryf"),a=l("5I3Zy");class u extends a.default{constructor(t,e){super(t,e),(0,r.default)(this,"model",void 0);let{module:n,fs:i,id:s}=e;this.model=new o.default(t,{id:s,fs:i,modules:[n]})}render(t){let e=this.gl;(0,s.setParameters)(e,{viewport:[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}),(0,s.withParameters)(e,{framebuffer:t.outputBuffer,clearColor:[0,0,0,0]},()=>this._renderPass(e,t))}delete(){this.model.delete(),this.model=null}_renderPass(t,e){let{inputBuffer:n}=e;(0,i.clear)(t,{color:!0}),this.model.draw({moduleSettings:e.moduleSettings,uniforms:{texture:n,texSize:[n.width,n.height]},parameters:{depthWrite:!1,depthTest:!1}})}}}),u("eESKj",function(e,n){t(e.exports,"default",()=>s);var r=l("i9o5q"),i=l("aFzkX");let o=[-1,-1,1,-1,-1,1,1,1];class s extends r.default{constructor(t,e){let n=o.map(t=>-1===t?0:t);super(t,Object.assign({},e,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new i.default({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(o)},aTexCoord:{size:2,value:new Float32Array(n)},aCoordinate:{size:2,value:new Float32Array(n)}}})})),this.setVertexCount(4)}}}),u("fiWK9",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("cXiBv");l("eFBWR");var o=l("2Eryf"),s=l("i5wGC");let a={blendFunc:[1,0,32771,0],blendEquation:32774};class u extends i.default{constructor(...t){super(...t),(0,r.default)(this,"pickZ",void 0),(0,r.default)(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:n,viewports:r,onViewportActive:i,pickingFBO:s,deviceRect:{x:l,y:u,width:d,height:h},cullRect:f,effects:p,pass:g="picking",pickZ:m,moduleParameters:v}){let _=this.gl;this.pickZ=m;let y=this._resetColorEncoder(m),b=(0,o.withParameters)(_,{scissorTest:!0,scissor:[l,u,d,h],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...a,blend:!m},()=>super.render({target:s,layers:t,layerFilter:e,views:n,viewports:r,onViewportActive:i,cullRect:f,effects:null==p?void 0:p.filter(t=>t.useInPicking),pass:g,isPicking:!0,moduleParameters:v}));return this._colorEncoderState=null,{decodePickingColor:y&&c.bind(null,y),stats:b}}shouldDrawLayer(t){let{pickable:e,operation:n}=t.props;return e&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){let r={...t.props.parameters},{pickable:i,operation:o}=t.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(r,a),r.blend=!0,r.blendColor=function(t,e,n){let r;let{byLayer:i,byAlpha:o}=t,a=i.get(e);return a?(a.viewports.push(n),r=a.a):(r=i.size+1)<=255?(a={a:r,layer:e,viewports:[n]},i.set(e,a),o[r]=a):((0,s.default).warn("Too many pickable layers, only picking the first 255")(),r=0),[0,0,0,r/255]}(this._colorEncoderState,t,n)):r.blend=!1,o.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function c(t,e){let n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}}),u("fFfEi",function(e,n){t(e.exports,"default",()=>w);var r=l("2qeFG"),i=l("TOhfL"),o=l("ffd97"),s=l("j70FB"),a=l("154ul"),u=l("l349Q"),c=l("btrKo"),d=l("EQwfy"),h=l("i5wGC"),f=l("dHpMo"),p=l("kSmYn"),g=l("zqwE1"),m=l("hYmhc"),v=l("5Jg7q");l("eFBWR");var _=l("2pf24"),y=l("2Eryf"),b=l("88ZWZ"),x=l("8PNUE");l("jlzaK");var E=l("iRPdy");l("3PsW6");var T=l("bVu26"),S=l("321bC"),A=l("heh00");function P(){}let C={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:P,onResize:P,onViewStateChange:P,onInteractionStateChange:P,onBeforeRender:P,onAfterRender:P,onLoad:P,onError:t=>(0,h.default).error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class w{constructor(t){(0,r.default)(this,"props",void 0),(0,r.default)(this,"width",0),(0,r.default)(this,"height",0),(0,r.default)(this,"userData",{}),(0,r.default)(this,"canvas",null),(0,r.default)(this,"viewManager",null),(0,r.default)(this,"layerManager",null),(0,r.default)(this,"effectManager",null),(0,r.default)(this,"deckRenderer",null),(0,r.default)(this,"deckPicker",null),(0,r.default)(this,"eventManager",null),(0,r.default)(this,"tooltip",null),(0,r.default)(this,"metrics",void 0),(0,r.default)(this,"animationLoop",void 0),(0,r.default)(this,"stats",void 0),(0,r.default)(this,"viewState",void 0),(0,r.default)(this,"cursorState",void 0),(0,r.default)(this,"_needsRedraw",void 0),(0,r.default)(this,"_pickRequest",void 0),(0,r.default)(this,"_lastPointerDownInfo",null),(0,r.default)(this,"_metricsCounter",void 0),(0,r.default)(this,"_onPointerMove",t=>{let{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;let n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t}),(0,r.default)(this,"_onEvent",t=>{let e=A.EVENTS[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;let r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler],l=!1;s&&(l=s.call(o,i,t)),!l&&a&&a(i,t)}),(0,r.default)(this,"_onPointerDown",t=>{let e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo}),this.props={...C,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&(0,h.default).warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,m.default)()&&(0,h.default).warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"==typeof document||(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new E.default({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&(0,p.default).setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,r,i,o,s,a,l;null===(t=this.animationLoop)||void 0===t||t.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(i=this.deckRenderer)||void 0===i||i.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&(0,h.default).removed("onLayerHover","onHover")(),"onLayerClick"in t&&(0,h.default).removed("onLayerClick","onClick")(),t.initialViewState&&!(0,f.deepEqual)(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);let e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);let n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e||n||r||i||o}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});(e=t||e)&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return(0,S.default)(this.viewManager),this.viewManager.views}getViewports(t){return(0,S.default)(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){let e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,e=!1){for(let n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(let e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_pick(t,e,n){(0,S.default)(this.deckPicker);let{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();let i=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(e).timeEnd(),i}_createCanvas(t){let e=t.canvas;return"string"==typeof e&&(e=document.getElementById(e),(0,S.default)(e)),e||((e=document.createElement("canvas")).id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(e)),Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;let{width:e,height:n}=t;if(e||0===e){let t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var r;let e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=t.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e,n,r;let{canvas:i}=this;if(!i)return;let o=null!==(t=i.clientWidth)&&void 0!==t?t:i.width,s=null!==(e=i.clientHeight)&&void 0!==e?e:i.height;(o!==this.width||s!==this.height)&&(this.width=o,this.height=s,null===(n=this.viewManager)||void 0===n||n.setProps({width:o,height:s}),null===(r=this.layerManager)||void 0===r||r.activateViewport(this.getViewports()[0]),this.props.onResize({width:o,height:s}))}_createAnimationLoop(t){let{width:e,height:n,gl:r,glOptions:i,debug:o,onError:s,onBeforeRender:a,onAfterRender:l,useDevicePixels:u}=t;return new v.default({width:e,height:n,useDevicePixels:u,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:t=>(0,_.createGLContext)({...i,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new s.default({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){let{onError:t}=this.props;this.animationLoop&&t&&t(Error("WebGL context is lost"))}_pickAndCallback(){let{_pickRequest:t}=this;if(t.event){let{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let i=r,o=!1;for(let r of n){var e;i=r,o=(null===(e=r.layer)||void 0===e?void 0:e.onHover(r,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip&&this.tooltip){let t=this.props.getTooltip(i);this.tooltip.setTooltip(t,i.x,i.y)}t.event=null}}_updateCursor(){let t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,(0,_.instrumentGLContext)(t,{enable:!0,copyState:!0})),this.tooltip=new d.default(this.canvas),(0,y.setParameters)(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);let e=new x.Timeline;for(let n in e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new T.default(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),A.EVENTS)this.eventManager.on(n,this._onEvent);this.viewManager=new o.default({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let n=this.viewManager.getViewports()[0];this.layerManager=new i.default(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new a.default,this.deckRenderer=new u.default(t),this.deckPicker=new c.default(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){let{gl:n}=this.layerManager.context;(0,y.setParameters)(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),(0,h.default).table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){let e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},!this.props.viewState&&this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){let{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();let e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){let{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();let n=(0,b.lumaStats).get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}(0,r.default)(w,"defaultProps",C),(0,r.default)(w,"VERSION",g.VERSION)}),u("TOhfL",function(e,n){t(e.exports,"default",()=>p);var r=l("2qeFG"),i=l("8PNUE"),o=l("56tgz"),s=l("i5wGC"),a=l("dSHHv"),u=l("3tWMN");l("jlzaK");var c=l("iRPdy"),d=l("hOaiK"),h=l("5Vmrk"),f=l("fUe8q");class p{constructor(t,{deck:e,stats:n,viewport:o,timeline:s}={}){(0,r.default)(this,"layers",void 0),(0,r.default)(this,"context",void 0),(0,r.default)(this,"resourceManager",void 0),(0,r.default)(this,"_lastRenderedLayers",[]),(0,r.default)(this,"_needsRedraw",!1),(0,r.default)(this,"_needsUpdate",!1),(0,r.default)(this,"_nextLayers",null),(0,r.default)(this,"_debug",!1),(0,r.default)(this,"activateViewport",t=>{(0,a.default)("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)}),this.layers=[],this.resourceManager=new d.default({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&(0,f.createProgramManager)(t),stats:n||new c.default({id:"deck.gl"}),viewport:o||new h.default({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new i.Timeline,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){for(let t of(this.resourceManager.finalize(),this.layers))this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;for(let n of(t.clearRedrawFlags&&(this._needsRedraw=!1),this.layers)){let r=n.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(e=>t.find(t=>0===e.id.indexOf(t))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){(0,a.default)("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;let n=(0,u.flatten)(t,Boolean);for(let t of n)t.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){let t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){let n={};for(let e of t)n[e.id]?(0,s.default).warn("Multiple old layers with same id ".concat(e.id))():n[e.id]=e;let r=[];this._updateSublayersRecursively(e,n,r),this._finalizeOldLayers(n);let i=!1;for(let t of r)if(t.hasUniformTransition()){i="Uniform transition in ".concat(t);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(t,e,n){for(let r of t){r.context=this.context;let t=e[r.id];null===t&&(0,s.default).warn("Multiple new layers with same id ".concat(r.id))(),e[r.id]=null;let i=null;try{this._debug&&t!==r&&r.validateProps(),t?(this._transferLayerState(t,r),this._updateLayer(r)):this._initializeLayer(r),n.push(r),i=r.isComposite?r.getSubLayers():null}catch(t){this._handleError("matching",t,r)}i&&this._updateSublayersRecursively(i,e,n)}}_finalizeOldLayers(t){for(let e in t){let n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=o.LIFECYCLE.INITIALIZED}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=o.LIFECYCLE.MATCHED,e!==t&&(t.lifecycle=o.LIFECYCLE.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=o.LIFECYCLE.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=o.LIFECYCLE.FINALIZED}catch(e){this._handleError("finalization",e,t)}}}}),u("8PNUE",function(e,n){t(e.exports,"Timeline",()=>o);let r=1,i=1;class o{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){let{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,s=r++,a={time:0,delay:e,duration:n,rate:i,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(t){for(let[e,n]of(this.channels.delete(t),this.animations))n.channel===t&&this.detachAnimation(e)}isFinished(t){let e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;let e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){for(let e of(this.time=Math.max(0,t),this.channels.values()))this._setChannelTime(e,this.time);for(let t of this.animations.values()){let{animation:e,channel:n}=t;e.setTime(this.getTime(n))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){let n=i++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){let n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}}),u("hOaiK",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG"),i=l("4Y3At");class o{constructor({gl:t,protocol:e}){(0,r.default)(this,"protocol",void 0),(0,r.default)(this,"_context",void 0),(0,r.default)(this,"_resources",void 0),(0,r.default)(this,"_consumers",void 0),(0,r.default)(this,"_pruneRequest",void 0),this.protocol=e||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add({resourceId:t,data:e,forceUpdate:n=!1,persistent:r=!0}){let o=this._resources[t];o?o.setData(e,n):(o=new i.default(t,e,this._context),this._resources[t]=o),o.persistent=r}remove(t){let e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){let e=this._consumers[t];if(e){for(let t in e){let n=e[t],r=this._resources[n.resourceId];r&&r.unsubscribe(n)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:n,requestId:r="default"}){let{_resources:i,protocol:o}=this;t.startsWith(o)&&!i[t=t.replace(o,"")]&&this.add({resourceId:t,data:null,persistent:!1});let s=i[t];if(this._track(n,r,s,e),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let t in this._resources)this._resources[t].delete()}_track(t,e,n,r){let i=this._consumers,o=i[t]=i[t]||{},s=o[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(o[e]=s,s.onChange=r,s.resourceId=n.id,n.subscribe(s))}_prune(){for(let t of(this._pruneRequest=null,Object.keys(this._resources))){let e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}}),u("4Y3At",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG"),i=l("bIcUs");class o{constructor(t,e,n){(0,r.default)(this,"id",void 0),(0,r.default)(this,"context",void 0),(0,r.default)(this,"isLoaded",void 0),(0,r.default)(this,"persistent",void 0),(0,r.default)(this,"_loadCount",0),(0,r.default)(this,"_subscribers",new Set),(0,r.default)(this,"_data",void 0),(0,r.default)(this,"_loader",void 0),(0,r.default)(this,"_error",void 0),(0,r.default)(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,e){if(t===this._data&&!e)return;this._data=t;let n=++this._loadCount,r=t;for(let e of("string"==typeof t&&(r=(0,i.load)(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)}).catch(t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t),this._subscribers))e.onChange(this.getData())}}}),u("fUe8q",function(e,n){t(e.exports,"createProgramManager",()=>a),t(e.exports,"project",()=>l("ixmOo").default),l("itX10");var r=l("j7nLR"),i=l("ixmOo");l("2WjM0"),l("9XoO5"),l("lUg0r");let o=[i.default],s=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function a(t){let e=(0,r.default).getDefaultProgramManager(t);for(let t of o)e.addDefaultModule(t);for(let t of s)e.addShaderHook(t);return e}}),u("ffd97",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("dHpMo"),o=l("i5wGC"),s=l("3tWMN");class a{constructor(t){(0,r.default)(this,"width",void 0),(0,r.default)(this,"height",void 0),(0,r.default)(this,"views",void 0),(0,r.default)(this,"viewState",void 0),(0,r.default)(this,"controllers",void 0),(0,r.default)(this,"timeline",void 0),(0,r.default)(this,"_viewports",void 0),(0,r.default)(this,"_viewportMap",void 0),(0,r.default)(this,"_isUpdating",void 0),(0,r.default)(this,"_needsRedraw",void 0),(0,r.default)(this,"_needsUpdate",void 0),(0,r.default)(this,"_eventManager",void 0),(0,r.default)(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(let t in this.controllers){let e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(let t in this.controllers){let e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter(e=>e.containsPixel(t)):this._viewports}getViews(){let t={};return this.views.forEach(e=>{t[e.id]=e}),t}getView(t){return this.views.find(e=>e.id===t)}getViewState(t){let e="string"==typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){let n=this.getViewports(),r={x:t[0],y:t[1]};for(let i=n.length-1;i>=0;--i){let o=n[i];if(o.containsPixel(r)){let n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=(0,s.flatten)(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?((0,i.deepEqual)(t,this.viewState,3)||this.setNeedsUpdate("viewState changed"),this.viewState=t):(0,o.default).warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new e.type({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var n;return null===(n=this.getView(t.id))||void 0===n?void 0:n.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,n,r){let i=t.controller;if(i&&n){let o={...e,...i,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(t,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){let{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=t.length;r--;){let i=t[r],o=this.getViewState(i),s=i.makeViewport({viewState:o,width:this.width,height:this.height}),a=e[i.id],l=!!i.controller;l&&!a&&(n=!0),(n||!l)&&a&&(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,o,s,a),s&&this._viewports.unshift(s)}for(let t in e){let n=e[t];n&&!this.controllers[t]&&n.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,e){return t.length!==e.length||t.some((n,r)=>!t[r].equals(e[r]))}}}),u("j70FB",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("jdrcl"),o=l("cu0SC"),s=l("hTYIw");class a extends i.default{get ViewportType(){return o.default}get ControllerType(){return s.default}}(0,r.default)(a,"displayName","MapView")}),u("jdrcl",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("5Vmrk"),o=l("TNc94"),s=l("dHpMo"),a=l("321bC");class u{constructor(t){(0,r.default)(this,"id",void 0),(0,r.default)(this,"viewportInstance",void 0),(0,r.default)(this,"_x",void 0),(0,r.default)(this,"_y",void 0),(0,r.default)(this,"_width",void 0),(0,r.default)(this,"_height",void 0),(0,r.default)(this,"_padding",void 0),(0,r.default)(this,"props",void 0);let{id:e,x:n=0,y:s=0,width:l="100%",height:u="100%",padding:c=null,viewportInstance:d}=t||{};(0,a.default)(!d||d instanceof i.default),this.viewportInstance=d,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=(0,o.parsePosition)(n),this._y=(0,o.parsePosition)(s),this._width=(0,o.parsePosition)(l),this._height=(0,o.parsePosition)(u),this._padding=c&&{left:(0,o.parsePosition)(c.left||0),right:(0,o.parsePosition)(c.right||0),top:(0,o.parsePosition)(c.top||0),bottom:(0,o.parsePosition)(c.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&(0,s.deepEqual)(this.props,t.props,2))}makeViewport({width:t,height:e,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);let r=this.getDimensions({width:t,height:e});return r.height&&r.width?new this.ViewportType({...n,...this.props,...r}):null}getViewStateId(){let{viewState:t}=this.props;return"string"==typeof t?t:(null==t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;let e={...t};for(let t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:e}){let n={x:(0,o.getPosition)(this._x,t),y:(0,o.getPosition)(this._y,e),width:(0,o.getPosition)(this._width,t),height:(0,o.getPosition)(this._height,e)};return this._padding&&(n.padding={left:(0,o.getPosition)(this._padding.left,t),top:(0,o.getPosition)(this._padding.top,e),right:(0,o.getPosition)(this._padding.right,t),bottom:(0,o.getPosition)(this._padding.bottom,e)}),n}get controller(){let t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"==typeof t?{type:t}:{type:this.ControllerType,...t}:null}}}),u("TNc94",function(e,n){t(e.exports,"parsePosition",()=>i),t(e.exports,"getPosition",()=>o);let r=/([0-9]+\.?[0-9]*)(%|px)/;function i(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":let e=r.exec(t);if(e&&e.length>=3){let t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw Error("Could not parse position string ".concat(t))}}function o(t,e){return t.relative?Math.round(t.position*e):t.position}}),u("hTYIw",function(e,n){t(e.exports,"MapState",()=>d),t(e.exports,"default",()=>h);var r=l("2qeFG"),i=l("a0auE"),o=l("ewH3q"),s=l("2nQsY");l("auS2n");var a=l("aFNkd"),u=l("321bC"),c=l("jAEIu");class d extends s.default{constructor(t){let{width:e,height:n,latitude:i,longitude:o,zoom:s,bearing:a=0,pitch:l=0,altitude:c=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:p=60,minPitch:g=0,startPanLngLat:m,startZoomLngLat:v,startRotatePos:_,startBearing:y,startPitch:b,startZoom:x,normalize:E=!0}=t;(0,u.default)(Number.isFinite(o)),(0,u.default)(Number.isFinite(i)),(0,u.default)(Number.isFinite(s)),super({width:e,height:n,latitude:i,longitude:o,zoom:s,bearing:a,pitch:l,altitude:c,maxZoom:h,minZoom:f,maxPitch:p,minPitch:g,normalize:E,position:d},{startPanLngLat:m,startZoomLngLat:v,startRotatePos:_,startBearing:y,startPitch:b,startZoom:x}),(0,r.default)(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){let n=this.getState().startPanLngLat||this._unproject(e);if(!n)return this;let r=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:n=0}){let r;let{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();return i&&void 0!==o&&void 0!==s?(r=t?this._getNewRotation(t,i,s,o):{bearing:o+e,pitch:s+n},this._getUpdatedState(r)):this}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:n}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(e)||this._unproject(t)),!o)return this;let{maxZoom:s,minZoom:a}=this.getViewportProps(),l=r+Math.log2(n);l=(0,i.clamp)(l,a,s);let u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){let e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(t){let{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=(0,i.clamp)(r,n,e);let{maxPitch:o,minPitch:s,pitch:l}=t;t.pitch=(0,i.clamp)(l,s,o);let{normalize:u=!0}=t;return u&&Object.assign(t,(0,a.default)(t)),t}_zoomFromCenter(t){let{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){let{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){let e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,r){let o=t[0]-e[0],s=t[1]-e[1],a=t[1],l=e[1],{width:u,height:c}=this.getViewportProps(),d=0;s>0?Math.abs(c-l)>5&&(d=s/(l-c)*1.2):s<0&&l>5&&(d=1-a/l),d=(0,i.clamp)(d,-1,1);let{minPitch:h,maxPitch:f}=this.getViewportProps(),p=n;return d>0?p=n+d*(f-n):d<0&&(p=n-d*(h-n)),{pitch:p,bearing:r+o/u*180}}}class h extends o.default{constructor(...t){super(...t),(0,r.default)(this,"ControllerState",d),(0,r.default)(this,"transition",{transitionDuration:300,transitionInterpolator:new c.default({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),(0,r.default)(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];let e=this.props;super.setProps(t),e&&e.height===t.height||this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}}),u("ewH3q",function(e,n){t(e.exports,"default",()=>m);var r=l("2qeFG"),i=l("560LF"),o=l("jAEIu");let s={transitionDuration:0},a=t=>1-(1-t)*(1-t),u=["wheel"],c=["panstart","panmove","panend"],d=["pinchstart","pinchmove","pinchend"],h=["tripanstart","tripanmove","tripanend"],f=["doubletap"],p=["keydown"],g={};class m{constructor(t){(0,r.default)(this,"props",void 0),(0,r.default)(this,"state",{}),(0,r.default)(this,"transitionManager",void 0),(0,r.default)(this,"eventManager",void 0),(0,r.default)(this,"onViewStateChange",void 0),(0,r.default)(this,"onStateChange",void 0),(0,r.default)(this,"makeViewport",void 0),(0,r.default)(this,"_controllerState",void 0),(0,r.default)(this,"_events",{}),(0,r.default)(this,"_interactionState",{isDragging:!1}),(0,r.default)(this,"_customEvents",[]),(0,r.default)(this,"_eventStartBlocked",null),(0,r.default)(this,"_panMove",!1),(0,r.default)(this,"invertPan",!1),(0,r.default)(this,"dragMode","rotate"),(0,r.default)(this,"inertia",0),(0,r.default)(this,"scrollZoom",!0),(0,r.default)(this,"dragPan",!0),(0,r.default)(this,"dragRotate",!0),(0,r.default)(this,"doubleClickZoom",!0),(0,r.default)(this,"touchZoom",!0),(0,r.default)(this,"touchRotate",!1),(0,r.default)(this,"keyboard",!0),this.transitionManager=new i.default({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(let e in this._events)if(this._events[e]){var t;null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;let e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){let{x:e,y:n}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-n]}isPointInBounds(t,e){let{width:n,height:r}=this.props;if(e&&e.handled)return!1;let i=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r;return i&&e&&e.stopPropagation(),i}isFunctionKeyPressed(t){let{srcEvent:e}=t;return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){let e=setTimeout(()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);let{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;let{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=t,g=!!this.onViewStateChange;this.toggleEvents(u,g&&n),this.toggleEvents(c,g),this.toggleEvents(d,g&&(s||a)),this.toggleEvents(h,g&&a),this.toggleEvents(f,g&&o),this.toggleEvents(p,g&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach(t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))})}updateViewport(t,e=null,n={}){let r={...t.getViewportProps(),...e},i=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),i){let t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);let r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,s,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;let e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,s,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){let{inertia:e}=this;if(this.dragPan&&e&&t.velocity){let n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:a},{isDragging:!1,isPanning:!0})}else{let t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;let e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,s,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){let{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){let n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:a},{isDragging:!1,isRotating:!0})}else{let t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();let{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=t,o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);let s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,s,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;let e=this.getCenter(t);e[0]-=t.deltaX;let n=this.controllerState.rotate({pos:e});return this.updateViewport(n,s,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;let{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){let n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:a},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{let t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return g._startPinchRotation=t.rotation,g._lastPinchEvent=t,this.updateViewport(n,s,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){let{scale:n}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){let{rotation:n}=t;e=e.rotate({deltaAngleX:g._startPinchRotation-n})}return this.updateViewport(e,s,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),g._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;let{inertia:e}=this,{_lastPinchEvent:n}=g;if(this.touchZoom&&e&&n&&t.scale!==n.scale){let r=this.getCenter(t),i=this.controllerState.rotateEnd(),o=Math.log2(t.scale),s=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,o+s*e/2);i=i.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:a},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{let t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return g._startPinchRotation=null,g._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){let e;if(!this.keyboard)return!1;let n=this.isFunctionKeyPressed(t),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this,l={};switch(t.srcEvent.code){case"Minus":e=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),l.isZooming=!0;break;case"Equal":e=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),l.isZooming=!0;break;case"ArrowLeft":n?(e=a.rotateLeft(o),l.isRotating=!0):(e=a.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":n?(e=a.rotateRight(o),l.isRotating=!0):(e=a.moveRight(i),l.isPanning=!0);break;case"ArrowUp":n?(e=a.rotateUp(s),l.isRotating=!0):(e=a.moveUp(i),l.isPanning=!0);break;case"ArrowDown":n?(e=a.rotateDown(s),l.isRotating=!0):(e=a.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),l),!0}_getTransitionProps(t){let{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new o.default({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:s}}}),u("560LF",function(e,n){t(e.exports,"TRANSITION_EVENTS",()=>s),t(e.exports,"default",()=>c);var r=l("2qeFG"),i=l("65H6S");let o=()=>{},s={BREAK:1,SNAP_TO_END:2,IGNORE:3},a=t=>t,u=s.BREAK;class c{constructor(t){(0,r.default)(this,"getControllerState",void 0),(0,r.default)(this,"props",void 0),(0,r.default)(this,"propsInTransition",void 0),(0,r.default)(this,"transition",void 0),(0,r.default)(this,"onViewStateChange",void 0),(0,r.default)(this,"onStateChange",void 0),(0,r.default)(this,"_onTransitionUpdate",t=>{let{time:e,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=t,a=s(e/o),l=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new i.default(t.timeline),this.onViewStateChange=t.onViewStateChange||o,this.onStateChange=t.onStateChange||o}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1,n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let r=n;if(this.transition.inProgress){let{interruption:t,endProps:e}=this.transition.settings;r={...n,...t===s.SNAP_TO_END?e:this.propsInTransition||n}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){let{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&!!n}_isUpdateDueToCurrentTransition(t){return!!this.transition.inProgress&&!!this.propsInTransition&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===s.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){let n=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0===o)return;let s=i.initializeProps(t,r);this.propsInTransition={};let l={duration:o,easing:e.transitionEasing||a,interpolator:i,interruption:e.transitionInterruption||u,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null==t||t(e)}}}}),u("jAEIu",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("gq9cf"),o=l("a0auE");let s=["longitude","latitude","zoom","bearing","pitch"],a=["longitude","latitude","zoom"];class u extends i.default{constructor(t={}){let e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:s,required:a},super(n.transitionProps),(0,r.default)(this,"opts",void 0),this.opts=n}initializeProps(t,e){let n=super.initializeProps(t,e),{makeViewport:r,around:i}=this.opts;if(r&&i){let o=r(t),s=r(e),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){let r={};for(let i of this._propsToExtract)r[i]=(0,o.lerp)(t[i]||0,e[i]||0,n);if(e.aroundPosition&&this.opts.makeViewport){let i=this.opts.makeViewport({...e,...r});Object.assign(r,i.panByPosition(e.aroundPosition,(0,o.lerp)(t.around,e.around,n)))}return r}}}),u("gq9cf",function(e,n){t(e.exports,"default",()=>s);var r=l("2qeFG"),i=l("a0auE"),o=l("321bC");class s{constructor(t){(0,r.default)(this,"_propsToCompare",void 0),(0,r.default)(this,"_propsToExtract",void 0),(0,r.default)(this,"_requiredProps",void 0);let{compare:e,extract:n,required:i}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=i}arePropsEqual(t,e){for(let n of this._propsToCompare)if(!(n in t)||!(n in e)||!(0,i.equals)(t[n],e[n]))return!1;return!0}initializeProps(t,e){let n={},r={};for(let i of this._propsToExtract)(i in t||i in e)&&(n[i]=t[i],r[i]=e[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach(e=>{let n=t[e];(0,o.default)(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))})}}}),u("2nQsY",function(e,n){t(e.exports,"default",()=>i);var r=l("2qeFG");class i{constructor(t,e){(0,r.default)(this,"_viewportProps",void 0),(0,r.default)(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}}),u("154ul",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("dHpMo"),o=l("ehOSN");let s=new o.default;class a{constructor(){(0,r.default)(this,"effects",void 0),(0,r.default)(this,"_resolvedEffects",[]),(0,r.default)(this,"_defaultEffects",[]),(0,r.default)(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){let e=this._defaultEffects;if(!e.find(e=>e.id===t.id)){let n=e.findIndex(e=>{var n,r;return(null!==(n=e.order)&&void 0!==n?n:1/0)-(null!==(r=t.order)&&void 0!==r?r:1/0)>0});n<0?e.push(t):e.splice(n,0,t),this._setEffects(this.effects)}}setProps(t){"effects"in t&&!(0,i.deepEqual)(t.effects,this.effects,1)&&this._setEffects(t.effects)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){let e={};for(let t of this.effects)e[t.id]=t;let n=[];for(let r of t){let t=e[r.id];t&&t!==r?t.setProps?(t.setProps(r.props),n.push(t)):(t.cleanup(),n.push(r)):n.push(r),delete e[r.id]}for(let t in e)e[t].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some(t=>t instanceof o.default)||this._resolvedEffects.push(s),this._needsRedraw="effects changed"}finalize(){for(let t of this._resolvedEffects)t.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}}),u("l349Q",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("dSHHv"),o=l("jhh0q"),s=l("fiWK9"),a=l("67hSA");class u{constructor(t){(0,r.default)(this,"gl",void 0),(0,r.default)(this,"layerFilter",void 0),(0,r.default)(this,"drawPickingColors",void 0),(0,r.default)(this,"drawLayersPass",void 0),(0,r.default)(this,"pickLayersPass",void 0),(0,r.default)(this,"renderCount",void 0),(0,r.default)(this,"_needsRedraw",void 0),(0,r.default)(this,"renderBuffers",void 0),(0,r.default)(this,"lastPostProcessEffect",void 0),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new o.default(t),this.pickLayersPass=new s.default(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;let e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t,target:t.target||(0,a.default).getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);let r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,o=e.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,(0,i.default)("deckRenderer.renderLayers",this,o,t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){let{renderBuffers:t}=this;for(let e of t)e.delete();t.length=0}_preRender(t,e){for(let n of(this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{},t))e.preRenderStats[n.id]=n.preRender(this.gl,e),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){let{renderBuffers:t}=this;for(let e of(0===t.length&&t.push(new a.default(this.gl),new a.default(this.gl)),t))e.resize()}_postRender(t,e){let{renderBuffers:n}=this,r={...e,inputBuffer:n[0],swapBuffer:n[1],target:null};for(let i of t)if(i.postRender){if(i.id===this.lastPostProcessEffect){r.target=e.target,i.postRender(this.gl,r);break}let t=i.postRender(this.gl,r);r.inputBuffer=t,r.swapBuffer=t===n[0]?n[1]:n[0]}}}}),u("jhh0q",function(e,n){t(e.exports,"default",()=>i);var r=l("cXiBv");class i extends r.default{shouldDrawLayer(t){let{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}}),u("btrKo",function(e,n){t(e.exports,"default",()=>f);var r=l("2qeFG");l("eFBWR");var i=l("fCLVZ"),o=l("dpEr0"),s=l("67hSA"),a=l("hzwiv"),u=l("35qVw"),c=l("fiWK9"),d=l("ls84Y"),h=l("lJPZo");class f{constructor(t){(0,r.default)(this,"gl",void 0),(0,r.default)(this,"pickingFBO",void 0),(0,r.default)(this,"depthFBO",void 0),(0,r.default)(this,"pickLayersPass",void 0),(0,r.default)(this,"layerFilter",void 0),(0,r.default)(this,"lastPickedInfo",void 0),(0,r.default)(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new c.default(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:e,layers:n,viewports:r},i=this.lastPickedInfo.info){let o=i&&i.layer&&i.layer.id,s=i&&i.viewport&&i.viewport.id,a=o?n.find(t=>t.id===o):null,l=s&&r.find(t=>t.id===s)||r[0],u=l&&l.unproject([t-l.x,e-l.y]);return{...i,x:t,y:e,viewport:l,coordinate:u,layer:a}}_resizeBuffer(){var t,e;let{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new s.default(n),(0,s.default).isSupported(n,{colorBufferFloat:!0}))){let t=new s.default(n);t.attach({36064:new u.default(n,{format:(0,o.isWebGL2)(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;let e=t.filter(t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite);return e.length?e:null}_pickClosestObject({layers:t,views:e,viewports:n,x:r,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){let p;let g=this._getPickable(t),m=(0,i.cssToDeviceRatio)(this.gl);if(!g)return{result:[],emptyInfo:(0,h.getEmptyPickingInfo)({viewports:n,x:r,y:o,pixelRatio:m})};this._resizeBuffer();let v=(0,i.cssToDevicePixels)(this.gl,[r,o],!0),_=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],y=Math.round(s*m),{width:b,height:x}=this.pickingFBO,E=this._getPickingRect({deviceX:_[0],deviceY:_[1],deviceRadius:y,deviceWidth:b,deviceHeight:x}),T={x:r-s,y:o-s,width:2*s+1,height:2*s+1},S=[],A=new Set;for(let t=0;t<a;t++){let i,s;if(E){let t=this._drawAndSample({layers:g,views:e,viewports:n,onViewportActive:c,deviceRect:E,cullRect:T,effects:f,pass:"picking:".concat(l)});i=(0,d.getClosestObject)({...t,deviceX:_[0],deviceY:_[1],deviceRadius:y,deviceRect:E})}else i={pickedColor:null,pickedObjectIndex:-1};if(i.pickedLayer&&u&&this.depthFBO){let{pickedColors:t}=this._drawAndSample({layers:[i.pickedLayer],views:e,viewports:n,onViewportActive:c,deviceRect:{x:i.pickedX,y:i.pickedY,width:1,height:1},cullRect:T,effects:f,pass:"picking:".concat(l,":z")},!0);t[3]&&(s=t[0])}for(let e of(i.pickedLayer&&t+1<a&&(A.add(i.pickedLayer),i.pickedLayer.disablePickingIndex(i.pickedObjectIndex)),(p=(0,h.processPickInfo)({pickInfo:i,lastPickedInfo:this.lastPickedInfo,mode:l,layers:g,viewports:n,x:r,y:o,z:s,pixelRatio:m})).values()))e.layer&&S.push(e);if(!i.pickedColor)break}for(let t of A)t.restorePickingColors();return{result:S,emptyInfo:p.get(null)}}_pickVisibleObjects({layers:t,views:e,viewports:n,x:r,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){let p=this._getPickable(t);if(!p)return[];this._resizeBuffer();let g=(0,i.cssToDeviceRatio)(this.gl),m=(0,i.cssToDevicePixels)(this.gl,[r,o],!0),v=m.x,_=m.y+m.height,y=(0,i.cssToDevicePixels)(this.gl,[r+s,o+a],!0),b=y.x+y.width,x=y.y,E=this._drawAndSample({layers:p,views:e,viewports:n,onViewportActive:c,deviceRect:{x:v,y:x,width:b-v,height:_-x},cullRect:{x:r,y:o,width:s,height:a},effects:f,pass:"picking:".concat(l)}),T=(0,d.getUniqueObjects)(E),S=new Map,A=Number.isFinite(u);for(let t=0;t<T.length;t++){var P;if(A&&u&&S.size>=u)break;let e=T[t],n={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:g},i=null!==(P=(n=(0,h.getLayerPickingInfo)({layer:e.pickedLayer,info:n,mode:l})).object)&&void 0!==P?P:"".concat(n.layer.id,"[").concat(n.index,"]");S.has(i)||S.set(i,n)}return Array.from(S.values())}_drawAndSample({layers:t,views:e,viewports:n,onViewportActive:r,deviceRect:i,cullRect:o,effects:s,pass:l},u=!1){let c=u?this.depthFBO:this.pickingFBO,d={layers:t,layerFilter:this.layerFilter,views:e,viewports:n,onViewportActive:r,pickingFBO:c,deviceRect:i,cullRect:o,effects:s,pass:l,pickZ:u,preRenderStats:{}};for(let t of s)t.useInPicking&&(d.preRenderStats[t.id]=t.preRender(this.gl,d));let{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:g,height:m}=i,v=new(u?Float32Array:Uint8Array)(g*m*4);return(0,a.readPixelsToArray)(c,{sourceX:f,sourceY:p,sourceWidth:g,sourceHeight:m,target:v}),{pickedColors:v,decodePickingColor:h}}_getPickingRect({deviceX:t,deviceY:e,deviceRadius:n,deviceWidth:r,deviceHeight:i}){let o=Math.max(0,t-n),s=Math.max(0,e-n),a=Math.min(r,t+n+1)-o,l=Math.min(i,e+n+1)-s;return a<=0||l<=0?null:{x:o,y:s,width:a,height:l}}}}),u("ls84Y",function(e,n){t(e.exports,"getClosestObject",()=>o),t(e.exports,"getUniqueObjects",()=>s);var r=l("i5wGC");let i={pickedColor:null,pickedObjectIndex:-1};function o({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:o,deviceRadius:s,deviceRect:a}){let{x:l,y:u,width:c,height:d}=a,h=s*s,f=-1,p=0;for(let e=0;e<d;e++){let r=e+u-o,i=r*r;if(i>h)p+=4*c;else for(let e=0;e<c;e++){if(t[p+3]-1>=0){let t=e+l-n,r=t*t+i;r<=h&&(h=r,f=p)}p+=4}}if(f>=0){let n=t.slice(f,f+4),i=e(n);if(i){let t=Math.floor(f/4/c),e=f/4-t*c;return{...i,pickedColor:n,pickedX:l+e,pickedY:u+t}}(0,r.default).error("Picked non-existent layer. Is picking buffer corrupt?")()}return i}function s({pickedColors:t,decodePickingColor:e}){let n=new Map;if(t){for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){let o=t.slice(i,i+4),s=o.join(",");if(!n.has(s)){let t=e(o);t?n.set(s,{...t,color:o}):(0,r.default).error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}}),u("lJPZo",function(e,n){function r({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:o}){let s,a=e[0];if(e.length>1&&(a=function(t,e){for(let n=t.length-1;n>=0;n--){let r=t[n];if(r.containsPixel(e))return r}return t[0]}((null==t?void 0:t.pickedViewports)||e,{x:r,y:i})),a){let t=[r-a.x,i-a.y];void 0!==o&&(t[2]=o),s=a.unproject(t)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:s,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function i(t){let{pickInfo:e,lastPickedInfo:n,mode:i,layers:s}=t,{pickedColor:a,pickedLayer:l,pickedObjectIndex:u}=e,c=l?[l]:[];if("hover"===i){let t=n.index,e=n.layerId,r=l?l.props.id:null;if(r!==e||u!==t){if(r!==e){let t=s.find(t=>t.props.id===e);t&&c.unshift(t)}n.layerId=r,n.index=u,n.info=null}}let d=r(t),h=new Map;return h.set(null,d),c.forEach(t=>{let e={...d};t===l&&(e.color=a,e.index=u,e.picked=!0);let r=(e=o({layer:t,info:e,mode:i})).layer;t===l&&"hover"===i&&(n.info=e),h.set(r.id,e),"hover"===i&&r.updateAutoHighlight(e)}),h}function o({layer:t,info:e,mode:n}){for(;t&&e;){let r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}t(e.exports,"getEmptyPickingInfo",()=>r),t(e.exports,"processPickInfo",()=>i),t(e.exports,"getLayerPickingInfo",()=>o)}),u("EQwfy",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG");let i={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class o{constructor(t){(0,r.default)(this,"el",null),(0,r.default)(this,"isVisible",!1);let e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,i),e.appendChild(this.el))}setTooltip(t,e,n){let r=this.el;if(r){if("string"==typeof t)r.innerText=t;else if(t)t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className);else{this.isVisible=!1,r.style.display="none";return}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),t&&"object"==typeof t&&"style"in t&&Object.assign(r.style,t.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}}),u("5Jg7q",function(e,n){t(e.exports,"default",()=>g),l("eFBWR");var r=l("2pf24"),i=l("dpEr0"),o=l("2Eryf"),s=l("8DSly"),a=l("bOBe4"),u=l("67hSA");l("eFBWR");var c=l("3FPsK"),d=l("88ZWZ"),h=l("dUIDr");let f=(0,l("c9Jp0").default)()&&"undefined"!=typeof document,p=0;class g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onCreateContext:e=t=>(0,r.createGLContext)(t),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:a,gl:l=null,glOptions:u={},debug:h=!1,createFramebuffer:f=!1,autoResizeViewport:g=!0,autoResizeDrawingBuffer:m=!0,stats:v=(0,d.lumaStats).get("animation-loop-".concat(p++))}=t,{useDevicePixels:_=!0}=t;"useDevicePixelRatio"in t&&((0,c.log).deprecated("useDevicePixelRatio","useDevicePixels")(),_=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:s,onError:a,gl:l,glOptions:u,debug:h,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=v,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:g,autoResizeDrawingBuffer:m,useDevicePixels:_}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return(0,s.assert)("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;let e=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=(0,h.default).isSupported(this.gl,["timers"])?new h.default(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())});return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return(0,c.log).removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){let t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=f?new Promise((t,e)=>{if(f&&"complete"===document.readyState){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(0,a.cancelAnimationFrame)(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(0,a.requestAnimationFrame)(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){let{width:t,height:e,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||e!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"==typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?(0,r.instrumentGLContext)(this.props.gl,t):this.onCreateContext(t),!(0,i.isWebGL)(this.gl))throw Error("AnimationLoop.onCreateContext - illegal context returned");(0,o.resetParameters)(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){let t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";let e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);let n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){let t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&(0,r.resizeGLContext)(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new u.default(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){let{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}}),u("bOBe4",function(e,n){function r(t){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function i(t){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}t(e.exports,"requestAnimationFrame",()=>r),t(e.exports,"cancelAnimationFrame",()=>i)}),u("dUIDr",function(e,n){t(e.exports,"default",()=>u);var r=l("jXHZc"),i=l("9bhog"),o=l("bF9op");l("eFBWR");var s=l("dpEr0"),a=l("8DSly");class u extends r.default{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,s.isWebGL2)(t),r=(0,o.hasFeatures)(t,i.FEATURES.TIMER_QUERY),l=n||r;for(let t of e)switch(t){case"queries":l=l&&n;break;case"timers":l=l&&r;break;default:(0,a.assert)(!1)}return l}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;let t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise((n,r)=>{let i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)}),this._pollingPromise}_createHandle(){return u.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}}),u("3PsW6",function(e,n){t(e.exports,"EventManager",()=>l("bVu26").default),l("bVu26")}),u("bVu26",function(e,n){t(e.exports,"default",()=>h);var r=l("983iL"),i=l("hvChw"),o=l("ldshM"),s=l("8UE9P"),a=l("gV1zw"),u=l("7tJCG"),c=l("iHwr4");let d={events:null,recognizers:null,recognizerOptions:{},Manager:r.Manager,touchAction:"none",tabIndex:0};class h{constructor(t=null,e){this._onBasicInput=t=>{let{srcEvent:e}=t,n=c.BASIC_EVENT_ALIASES[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...d,...e},this.events=new Map,this.setElement(t);let{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;let{options:e}=this,n=e.Manager;for(let r in this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||(0,c.RECOGNIZERS)}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(c.RECOGNIZER_COMPATIBLE_MAP).forEach(t=>{let e=this.manager.get(t);e&&(0,c.RECOGNIZER_COMPATIBLE_MAP)[t].forEach(t=>{e.recognizeWith(t)})}),e.recognizerOptions){let t=this.manager.get(r);if(t){let n=e.recognizerOptions[r];delete n.enable,t.set(n)}}for(let[n,r]of(this.wheelInput=new i.default(t,this._onOtherEvent,{enable:!1}),this.moveInput=new o.default(t,this._onOtherEvent,{enable:!1}),this.keyInput=new s.default(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new a.default(t,this._onOtherEvent,{enable:!1}),this.events))r.isEmpty()||(this._toggleRecognizer(r.recognizerName,!0),this.manager.on(n,r.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){let{manager:n}=this;if(!n)return;let r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});let i=c.RECOGNIZER_FALLBACK_MAP[t];i&&!this.options.recognizers&&i.forEach(i=>{let o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,i){if("string"!=typeof t){for(let o in n=e,t)this._addEventHandler(o,t[o],n,r,i);return}let{manager:o,events:s}=this,a=c.GESTURE_EVENT_ALIASES[t]||t,l=s.get(a);!l&&(l=new u.default(this),s.set(a,l),l.recognizerName=c.EVENT_RECOGNIZER_MAP[a]||a,o&&o.on(a,l.handleEvent)),l.add(t,e,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!=typeof t){for(let e in t)this._removeEventHandler(e,t[e]);return}let{events:n}=this,r=c.GESTURE_EVENT_ALIASES[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){let{recognizerName:t}=i,e=!1;for(let r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}}),u("983iL",function(e,n){t(e.exports,"Manager",()=>o),t(e.exports,"default",()=>s);var r=l("dzvIj"),i=l("7T9lB");(0,i.enhancePointerEventInput)(r.PointerEventInput),(0,i.enhanceMouseInput)(r.MouseInput);let o=r.Manager;var s=r}),u("dzvIj",function(t,e){!/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */function(e,n,r,i){var o,s=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),l=Math.round,u=Math.abs,c=Date.now;function d(t,e,n){return setTimeout(_(t,n),e)}function h(t,e,n){return!!Array.isArray(t)&&(f(t,n[e],n),!0)}function f(t,e,n){var r;if(t){if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}}function p(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,i,r),t.apply(this,arguments)}}o="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}:Object.assign;var g=p(function(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&t[r[o]]===i)&&(t[r[o]]=e[r[o]]),o++;return t},"extend","Use `assign`."),m=p(function(t,e){return g(t,e,!0)},"merge","Use `assign`.");function v(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&o(r,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function y(t,e){return"function"==typeof t?t.apply(e&&e[0]||i,e):t}function b(t,e,n){f(S(e),function(e){t.addEventListener(e,n,!1)})}function x(t,e,n){f(S(e),function(e){t.removeEventListener(e,n,!1)})}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function S(t){return t.trim().split(/\s+/g)}function A(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return -1}function P(t){return Array.prototype.slice.call(t,0)}function C(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];0>A(i,s)&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function w(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((r=(n=s[a])?n+o:e)in t)return r;a++}return i}var D=1;function L(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var R="ontouchstart"in e,O=w(e,"PointerEvent")!==i,I=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),M="touch",F="mouse",N=["x","y"],B=["clientX","clientY"];function k(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&n.handler(e)},this.init()}function j(t,e,n){var r,o,s,a,l,d,h,f,p,g,m,v,_,y,b,x=n.pointers.length,T=n.changedPointers.length,S=1&e&&x-T==0,A=12&e&&x-T==0;n.isFirst=!!S,n.isFinal=!!A,S&&(t.session={}),n.eventType=e,r=t.session,s=(o=n.pointers).length,r.firstInput||(r.firstInput=z(n)),s>1&&!r.firstMultiple?r.firstMultiple=z(n):1===s&&(r.firstMultiple=!1),a=r.firstInput,d=(l=r.firstMultiple)?l.center:a.center,h=n.center=U(o),n.timeStamp=c(),n.deltaTime=n.timeStamp-a.timeStamp,n.angle=H(d,h),n.distance=W(d,h),f=n.center,p=r.offsetDelta||{},g=r.prevDelta||{},m=r.prevInput||{},(1===n.eventType||4===m.eventType)&&(g=r.prevDelta={x:m.deltaX||0,y:m.deltaY||0},p=r.offsetDelta={x:f.x,y:f.y}),n.deltaX=g.x+(f.x-p.x),n.deltaY=g.y+(f.y-p.y),n.offsetDirection=V(n.deltaX,n.deltaY),v=G(n.deltaTime,n.deltaX,n.deltaY),n.overallVelocityX=v.x,n.overallVelocityY=v.y,n.overallVelocity=u(v.x)>u(v.y)?v.x:v.y,n.scale=l?(_=l.pointers,W(o[0],o[1],B)/W(_[0],_[1],B)):1,n.rotation=l?(y=l.pointers,H(o[1],o[0],B)+H(y[1],y[0],B)):0,n.maxPointers=r.prevInput?n.pointers.length>r.prevInput.maxPointers?n.pointers.length:r.prevInput.maxPointers:n.pointers.length,function(t,e){var n,r,o,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(l>25||a.velocity===i)){var c=e.deltaX-a.deltaX,d=e.deltaY-a.deltaY,h=G(l,c,d);r=h.x,o=h.y,n=u(h.x)>u(h.y)?h.x:h.y,s=V(c,d),t.lastInterval=e}else n=a.velocity,r=a.velocityX,o=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=s}(r,n),b=t.element,E(n.srcEvent.target,b)&&(b=n.srcEvent.target),n.target=b,t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function z(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:c(),pointers:e,center:U(e),deltaX:t.deltaX,deltaY:t.deltaY}}function U(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:l(n/e),y:l(r/e)}}function G(t,e,n){return{x:e/t||0,y:n/t||0}}function V(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function W(t,e,n){n||(n=N);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function H(t,e,n){n||(n=N);var r=e[n[0]]-t[n[0]];return 180*Math.atan2(e[n[1]]-t[n[1]],r)/Math.PI}k.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(L(this.element),this.evWin,this.domHandler)}};var X={mousedown:1,mousemove:2,mouseup:4};function Y(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,k.apply(this,arguments)}v(Y,k,{handler:function(t){var e=X[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:F,srcEvent:t}))}});var q={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Z={2:M,3:"pen",4:F,5:"kinect"},K="pointerdown",J="pointermove pointerup pointercancel";function Q(){this.evEl=K,this.evWin=J,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(K="MSPointerDown",J="MSPointerMove MSPointerUp MSPointerCancel"),v(Q,k,{handler:function(t){var e=this.store,n=!1,r=q[t.type.toLowerCase().replace("ms","")],i=Z[t.pointerType]||t.pointerType,o=i==M,s=A(e,t.pointerId,"pointerId");1&r&&(0===t.button||o)?s<0&&(e.push(t),s=e.length-1):12&r&&(n=!0),!(s<0)&&(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),n&&e.splice(s,1))}});var $={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function tt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,k.apply(this,arguments)}function te(t,e){var n=P(t.touches),r=P(t.changedTouches);return 12&e&&(n=C(n.concat(r),"identifier",!0)),[n,r]}v(tt,k,{handler:function(t){var e=$[t.type];if(1===e&&(this.started=!0),this.started){var n=te.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:t})}}});var tn={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function tr(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},k.apply(this,arguments)}function ti(t,e){var n=P(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=P(t.changedTouches),a=[],l=this.target;if(o=n.filter(function(t){return E(t.target,l)}),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;if(a.length)return[C(o.concat(a),"identifier",!0),a]}function to(){k.apply(this,arguments);var t=_(this.handler,this);this.touch=new tr(this.manager,t),this.mouse=new Y(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ts(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ta.call(this,e)):12&t&&ta.call(this,e)}function ta(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},2500)}}function tl(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}v(tr,k,{handler:function(t){var e=tn[t.type],n=ti.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:t})}}),v(to,k,{handler:function(t,e,n){var r=n.pointerType==M,i=n.pointerType==F;if(!i||!n.sourceCapabilities||!n.sourceCapabilities.firesTouchEvents){if(r)ts.call(this,e,n);else if(i&&tl.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var tu=w(a.style,"touchAction"),tc=tu!==i,td="compute",th="auto",tf="manipulation",tp="none",tg="pan-x",tm="pan-y",tv=function(){if(!tc)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=!n||e.CSS.supports("touch-action",r)}),t}();function t_(t,e){this.manager=t,this.set(e)}function ty(t){var e;this.options=o({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=(e=this.options.enable)===i||e,this.state=1,this.simultaneous={},this.requireFail=[]}function tb(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function tx(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function tE(t,e){var n=e.manager;return n?n.get(t):t}function tT(){ty.apply(this,arguments)}function tS(){tT.apply(this,arguments),this.pX=null,this.pY=null}function tA(){tT.apply(this,arguments)}function tP(){ty.apply(this,arguments),this._timer=null,this._input=null}function tC(){tT.apply(this,arguments)}function tw(){tT.apply(this,arguments)}function tD(){ty.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function tL(t,e){var n,r;return(e=e||{}).recognizers=(n=e.recognizers,r=tL.defaults.preset,n===i?r:n),new tR(t,e)}function tR(t,e){var n;this.options=o({},tL.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this.options.inputClass)?n:O?Q:I?tr:R?to:Y)(this,j),this.touchAction=new t_(this,this.options.touchAction),tO(this,!0),f(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function tO(t,e){var n,r=t.element;r.style&&(f(t.options.cssProps,function(i,o){n=w(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}t_.prototype={set:function(t){t==td&&(t=this.compute()),tc&&this.manager.element.style&&tv[t]&&(this.manager.element.style[tu]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(T(t,tp))return tp;var e=T(t,tg),n=T(t,tm);return e&&n?tp:e||n?e?tg:tm:T(t,tf)?tf:th}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented){e.preventDefault();return}var r=this.actions,i=T(r,tp)&&!tv[tp],o=T(r,tm)&&!tv[tm],s=T(r,tg)&&!tv[tg];if(i){var a=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(a&&l&&u)return}if((!s||!o)&&(i||o&&6&n||s&&24&n))return this.preventSrc(e)},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},ty.prototype={defaults:{},set:function(t){return o(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(h(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=tE(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return h(t,"dropRecognizeWith",this)||(t=tE(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(h(t,"requireFailure",this))return this;var e=this.requireFail;return -1===A(e,t=tE(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(h(t,"dropRequireFailure",this))return this;t=tE(t,this);var e=A(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+tb(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+tb(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=o({},t);if(!y(this.options.enable,[this,e])){this.reset(),this.state=32;return}56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},v(tT,ty,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:32}}),v(tS,tT,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(tm),24&t&&e.push(tg),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return tT.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=tx(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),v(tA,tT,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tp]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),v(tP,ty,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[th]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,r&&n&&(!(12&t.eventType)||i)){if(1&t.eventType)this.reset(),this._timer=d(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8}else this.reset();return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),v(tC,tT,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tp]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),v(tw,tT,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return tS.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=tx(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),v(tD,ty,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tf]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||W(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=d(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=d(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),tL.VERSION="2.0.7",tL.defaults={domEvents:!1,touchAction:td,enable:!0,inputTarget:null,inputClass:null,preset:[[tC,{enable:!1}],[tA,{enable:!1},["rotate"]],[tw,{direction:6}],[tS,{direction:6},["swipe"]],[tD],[tD,{event:"doubletap",taps:2},["tap"]],[tP]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},tR.prototype={set:function(t){return o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e,n=this.session;if(!n.stopped){this.touchAction.preventDefaults(t);var r=this.recognizers,i=n.curRecognizer;(!i||i&&8&i.state)&&(i=n.curRecognizer=null);for(var o=0;o<r.length;)e=r[o],2!==n.stopped&&(!i||e==i||e.canRecognizeWith(i))?e.recognize(t):e.reset(),!i&&14&e.state&&(i=n.curRecognizer=e),o++}},get:function(t){if(t instanceof ty)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(h(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(h(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=A(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return f(S(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==i){var n=this.handlers;return f(S(t),function(t){e?n[t]&&n[t].splice(A(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&((r=n.createEvent("Event")).initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r));var r,i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](e),o++}},destroy:function(){this.element&&tO(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(tL,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:tR,Input:k,TouchAction:t_,TouchInput:tr,MouseInput:Y,PointerEventInput:Q,TouchMouseInput:to,SingleTouchInput:tt,Recognizer:ty,AttrRecognizer:tT,Tap:tD,Pan:tS,Swipe:tw,Pinch:tA,Rotate:tC,Press:tP,on:b,off:x,each:f,merge:m,extend:g,assign:o,inherit:v,bindFn:_,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=tL,"function"==typeof define&&define.amd?define(function(){return tL}):t.exports?t.exports=tL:e[r]=tL}(window,document,"Hammer")}),u("7T9lB",function(e,n){t(e.exports,"enhancePointerEventInput",()=>i),t(e.exports,"enhanceMouseInput",()=>o);let r={mousedown:1,mousemove:2,mouseup:4};function i(t){let e=t.prototype.handler;t.prototype.handler=function(t){let n=this.store;t.button>0&&"pointerdown"===t.type&&!function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,e=>e.pointerId===t.pointerId)&&n.push(t),e.call(this,t)}}function o(t){t.prototype.handler=function(t){let e=r[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.buttons&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}}),u("hvChw",function(e,n){t(e.exports,"default",()=>c);var r=l("4LiVY"),i=l("iHwr4"),o=l("SqK9r");let s=-1!==(0,o.userAgent).indexOf("firefox"),{WHEEL_EVENTS:a}=i.INPUT_EVENT_TYPES,u="wheel";class c extends r.default{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;o.window.WheelEvent&&(s&&t.deltaMode===o.window.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.window.devicePixelRatio),t.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%4.000244140625==0&&(e=Math.floor(e/4.000244140625)),t.shiftKey&&e&&(e*=.25),this.callback({type:u,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(a),this.events.forEach(e=>t.addEventListener(e,this.handleEvent,!!o.passiveSupported&&{passive:!1}))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===u&&(this.options.enable=e)}}}),u("4LiVY",function(e,n){t(e.exports,"default",()=>r);class r{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}}),u("iHwr4",function(e,n){t(e.exports,"RECOGNIZERS",()=>i),t(e.exports,"RECOGNIZER_COMPATIBLE_MAP",()=>o),t(e.exports,"RECOGNIZER_FALLBACK_MAP",()=>s),t(e.exports,"BASIC_EVENT_ALIASES",()=>a),t(e.exports,"INPUT_EVENT_TYPES",()=>u),t(e.exports,"EVENT_RECOGNIZER_MAP",()=>c),t(e.exports,"GESTURE_EVENT_ALIASES",()=>d);var r=l("983iL");let i=r.default?[[r.default.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[r.default.Rotate,{enable:!1}],[r.default.Pinch,{enable:!1}],[r.default.Swipe,{enable:!1}],[r.default.Pan,{threshold:0,enable:!1}],[r.default.Press,{enable:!1}],[r.default.Tap,{event:"doubletap",taps:2,enable:!1}],[r.default.Tap,{event:"anytap",enable:!1}],[r.default.Tap,{enable:!1}]]:null,o={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},s={doubletap:["tap"]},a={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},u={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},c={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},d={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"}}),u("SqK9r",function(e,n){t(e.exports,"userAgent",()=>r),t(e.exports,"window",()=>i),t(e.exports,"passiveSupported",()=>s);let r="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:o;void 0!==o||window;let s=!1;try{i.addEventListener("test",null,{get passive(){return s=!0,!0}}),i.removeEventListener("test",null)}catch(t){s=!1}}),u("ldshM",function(e,n){t(e.exports,"default",()=>d);var r=l("4LiVY");let{MOUSE_EVENTS:i}=l("iHwr4").INPUT_EVENT_TYPES,o="pointermove",s="pointerover",a="pointerout",u="pointerenter",c="pointerleave";class d extends r.default{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;let{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(i),this.events.forEach(e=>t.addEventListener(e,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===o&&(this.enableMoveEvent=e),t===s&&(this.enableOverEvent=e),t===a&&(this.enableOutEvent=e),t===u&&(this.enableEnterEvent=e),t===c&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(s,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(a,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(u,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(c,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.buttons&&(this.pressed=!1),this.pressed||this._emit(o,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}}),u("8UE9P",function(e,n){t(e.exports,"default",()=>a);var r=l("4LiVY");let{KEY_EVENTS:i}=l("iHwr4").INPUT_EVENT_TYPES,o="keydown",s="keyup";class a extends r.default{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{let e=t.target||t.srcElement;("INPUT"!==e.tagName||"text"!==e.type)&&"TEXTAREA"!==e.tagName&&(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:o,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:s,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(i),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(e=>t.addEventListener(e,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===o&&(this.enableDownEvent=e),t===s&&(this.enableUpEvent=e)}}}),u("gV1zw",function(e,n){t(e.exports,"default",()=>o);var r=l("4LiVY");let i="contextmenu";class o extends r.default{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:i,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===i&&(this.options.enable=e)}}}),u("7tJCG",function(e,n){t(e.exports,"default",()=>o);var r=l("WXr6E");let i={srcElement:"root",priority:0};class o{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;let e=this._normalizeEvent(t),n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n,r=!1,o=!1){let{handlers:s,handlersByElement:a}=this,l=i;"string"==typeof n||n&&n.addEventListener?l={...i,srcElement:n}:n&&(l={...i,...n});let u=a.get(l.srcElement);u||(u=[],a.set(l.srcElement,u));let c={type:t,handler:e,srcElement:l.srcElement,priority:l.priority};r&&(c.once=!0),o&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let d=u.length-1;for(;d>=0&&!(u[d].priority>=c.priority);)d--;u.splice(d+1,0,c)}remove(t,e){let{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){let o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);let t=r.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&r.delete(o.srcElement)}}this._active=n.some(t=>!t.passive)}_emit(t,e){let n=this.handlersByElement.get(e);if(n){let e=!1,r=()=>{t.handled=!0},i=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<n.length;s++){let{type:a,handler:l,once:u}=n[s];if(l({...t,type:a,stopPropagation:r,stopImmediatePropagation:i}),u&&o.push(n[s]),e)break}for(let t=0;t<o.length;t++){let{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){let e=this.eventManager.getElement();return{...t,...(0,r.whichButtons)(t),...(0,r.getOffsetPosition)(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}}),u("WXr6E",function(e,n){t(e.exports,"whichButtons",()=>i),t(e.exports,"getOffsetPosition",()=>o);let r={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function i(t){let e=r[t.srcEvent.type];if(!e)return null;let{buttons:n,button:i}=t.srcEvent,o=!1,s=!1,a=!1;return 2===e?(o=!!(1&n),s=!!(4&n),a=!!(2&n)):(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function o(t,e){let n=t.center;if(!n)return null;let r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1,s={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o};return{center:n,offsetCenter:s}}}),u("59UxP",function(e,n){t(e.exports,"default",()=>h);var r=l("2qeFG"),i=l("cn1FU"),o=l("5Vmrk"),s=l("heh00"),a=l("4iX2G"),u=l("bpIRf");let c=Math.PI/180,d=180/Math.PI;class h extends o.default{constructor(t={}){let{latitude:e=0,longitude:n=0,zoom:o=0,nearZMultiplier:s=.1,farZMultiplier:a=2,resolution:l=10}=t,{height:u,altitude:d=1.5}=t;u=u||1,d=Math.max(.75,d);let h=new(0,i.default)().lookAt({eye:[0,-d,0],up:[0,0,1]}),f=Math.pow(2,o);h.rotateX(e*c),h.rotateZ(-n*c),h.scale(f/u),super({...t,height:u,viewMatrix:h,longitude:n,latitude:e,zoom:o,distanceScales:function(){let t=Math.PI/180*256;return{unitsPerMeter:[4018225162502676e-20,4018225162502676e-20,4018225162502676e-20],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[t,t,4018225162502676e-20],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,24886.609375]}}(),fovyRadians:2*Math.atan(.5/d),focalDistance:d,near:s,far:Math.min(2,1/(512*f/u)+1)*d*a}),(0,r.default)(this,"longitude",void 0),(0,r.default)(this,"latitude",void 0),(0,r.default)(this,"resolution",void 0),this.latitude=e,this.longitude=n,this.resolution=l}get projectionMode(){return s.PROJECTION_MODE.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){let e={targetZ:t.z||0},n=this.unproject([0,this.height/2],e),r=this.unproject([this.width/2,0],e),i=this.unproject([this.width,this.height/2],e),o=this.unproject([this.width/2,this.height],e);return i[0]<this.longitude&&(i[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}unproject(t,{topLeft:e=!0,targetZ:n}={}){let r;let[i,o,s]=t,l=e?o:this.height-o,{pixelUnprojectionMatrix:u}=this;if(Number.isFinite(s))r=f(u,[i,l,s,1]);else{let t=f(u,[i,l,-1,1]),e=f(u,[i,l,1,1]),o=((n||0)/6370972+1)*256,s=a.sqrLen(a.sub([],t,e)),c=a.sqrLen(t),d=a.sqrLen(e),h=(4*c*d-(s-c-d)**2)/16*4/s,p=(Math.sqrt(c-h)-Math.sqrt(Math.max(0,o*o-h)))/Math.sqrt(s);r=a.lerp([],t,e,p)}let[c,d,h]=this.unprojectPosition(r);return Number.isFinite(s)?[c,d,h]:Number.isFinite(n)?[c,d,n]:[c,d]}projectPosition(t){let[e,n,r=0]=t,i=e*c,o=n*c,s=Math.cos(o),a=(r/6370972+1)*256;return[Math.sin(i)*s*a,-Math.cos(i)*s*a,Math.sin(o)*a]}unprojectPosition(t){let[e,n,r]=t,i=a.len(t);return[Math.atan2(e,-n)*d,Math.asin(r/i)*d,(i/256-1)*6370972]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){let n=this.unproject(e);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function f(t,e){let n=u.transformMat4([],e,t);return u.scale(n,n,1/n[3]),n}}),u("dYCDq",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("5Vmrk"),o=l("cn1FU");l("auS2n");var s=l("gZN7e");let a=Math.PI/180;class u extends i.default{constructor(t){let{height:e,projectionMatrix:n,fovy:i=50,orbitAxis:l="Z",target:u=[0,0,0],rotationX:c=0,rotationOrbit:d=0,zoom:h=0}=t,f=n?n[5]/2:(0,s.fovyToAltitude)(i);super({...t,longitude:void 0,viewMatrix:function({height:t,focalDistance:e,orbitAxis:n,rotationX:r,rotationOrbit:i,zoom:s}){let l=new(0,o.default)().lookAt({eye:"Z"===n?[0,-e,0]:[0,0,e],up:"Z"===n?[0,0,1]:[0,1,0]});l.rotateX(r*a),"Z"===n?l.rotateZ(i*a):l.rotateY(i*a);let u=Math.pow(2,s)/t;return l.scale(u),l}({height:e||1,focalDistance:f,orbitAxis:l,rotationX:c,rotationOrbit:d,zoom:h}),fovy:i,focalDistance:f,position:u,zoom:h}),(0,r.default)(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(t,{topLeft:e=!0}={}){let[n,r,i=this.projectedCenter[2]]=t,o=e?r:this.height-r,[a,l,u]=(0,s.pixelsToWorld)([n,o,i],this.pixelUnprojectionMatrix);return[a,l,u]}panByPosition(t,e){let n=this.project(t),r=[this.width/2+n[0]-e[0],this.height/2+n[1]-e[1],this.projectedCenter[2]];return{target:this.unproject(r)}}}}),u("94SQj",function(e,n){t(e.exports,"default",()=>c);var r=l("5Vmrk"),i=l("a0auE"),o=l("cn1FU");l("auS2n");var s=l("gZN7e"),a=l("88MOt");let u=new(0,o.default)().lookAt({eye:[0,0,1]});class c extends r.default{constructor(t){let e;let{width:n,height:r,near:s=.1,far:a=1e3,zoom:l=0,target:c=[0,0,0],padding:d=null,flipY:h=!0}=t,f=Array.isArray(l)?l[0]:l,p=Array.isArray(l)?l[1]:l,g=Math.min(f,p),m=Math.pow(2,g);if(f!==p){let t=Math.pow(2,f),n=Math.pow(2,p);e={unitsPerMeter:[t/m,n/m,1],metersPerUnit:[m/t,m/n,1]}}super({...t,longitude:void 0,position:c,viewMatrix:u.clone().scale([m,m*(h?-1:1),m]),projectionMatrix:function({width:t,height:e,near:n,far:r,padding:s}){let a=-t/2,l=t/2,u=-e/2,c=e/2;if(s){let{left:n=0,right:r=0,top:o=0,bottom:d=0}=s,h=(0,i.clamp)((n+t-r)/2,0,t)-t/2,f=(0,i.clamp)((o+e-d)/2,0,e)-e/2;a-=h,l-=h,u+=f,c+=f}return new(0,o.default)().ortho({left:a,right:l,bottom:u,top:c,near:n,far:r})}({width:n||1,height:r||1,padding:d,near:s,far:a}),zoom:g,distanceScales:e})}projectFlat([t,e]){let{unitsPerMeter:n}=this.distanceScales;return[t*n[0],e*n[1]]}unprojectFlat([t,e]){let{metersPerUnit:n}=this.distanceScales;return[t*n[0],e*n[1]]}panByPosition(t,e){let n=(0,s.pixelsToWorld)(e,this.pixelUnprojectionMatrix),r=this.projectFlat(t),i=a.add([],r,a.negate([],n)),o=a.add([],this.center,i);return{target:this.unprojectFlat(o)}}}}),u("jLYbI",function(e,n){t(e.exports,"default",()=>u);var r=l("2qeFG"),i=l("5Vmrk");l("auS2n");var o=l("gZN7e"),s=l("6XgeF"),a=l("cn1FU");class u extends i.default{constructor(t){let{longitude:e,latitude:n,modelMatrix:i,bearing:l=0,pitch:u=0,up:c=[0,0,1]}=t,d=new s.default({bearing:l,pitch:-90===u?1e-4:90+u}).toVector3().normalize(),h=i?new(0,a.default)(i).transformAsVector(d):d,f=Number.isFinite(n)?(0,o.getMeterZoom)({latitude:n}):0;super({...t,zoom:f,viewMatrix:new(0,a.default)().lookAt({eye:[0,0,0],center:h,up:c}).scale(Math.pow(2,f))}),(0,r.default)(this,"longitude",void 0),(0,r.default)(this,"latitude",void 0),this.latitude=n,this.longitude=e}}}),u("6XgeF",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("iNLNk"),o=l("a0auE"),s=l("4iX2G");class a{constructor({phi:t=0,theta:e=0,radius:n=1,bearing:i,pitch:o,altitude:s,radiusScale:a=6371e3}={}){(0,r.default)(this,"phi",void 0),(0,r.default)(this,"theta",void 0),(0,r.default)(this,"radius",void 0),(0,r.default)(this,"radiusScale",void 0),this.phi=t,this.theta=e,this.radius=n||s||1,this.radiusScale=a||1,void 0!==i&&(this.bearing=i),void 0!==o&&(this.pitch=o),this.check()}toString(){return this.formatString(o.config)}formatString({printTypes:t=!1}){let e=o.formatValue;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return(0,o.equals)(this.radius,t.radius)&&(0,o.equals)(this.theta,t.theta)&&(0,o.equals)(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-(0,o.degrees)(this.phi)}set bearing(t){this.phi=Math.PI-(0,o.radians)(t)}get pitch(){return(0,o.degrees)(this.theta)}set pitch(t){this.theta=(0,o.radians)(t)}get longitude(){return(0,o.degrees)(this.phi)}get latitude(){return(0,o.degrees)(this.theta)}get lng(){return(0,o.degrees)(this.phi)}get lat(){return(0,o.degrees)(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}clone(){return new a().copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,n]){return this.radius=1+n/this.radiusScale,this.phi=(0,o.radians)(e),this.theta=(0,o.radians)(t),this.check()}fromVector3(t){return this.radius=s.length(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos((0,o.clamp)(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new(0,i.default)(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}check(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw Error("SphericalCoordinates: some fields set to invalid numbers");return this}}}),u("3wMh3",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("jdrcl"),o=l("jLYbI"),s=l("aP4Sk");class a extends i.default{get ViewportType(){return o.default}get ControllerType(){return s.default}}(0,r.default)(a,"displayName","FirstPersonView")}),u("aP4Sk",function(e,n){t(e.exports,"default",()=>f);var r=l("2qeFG"),i=l("ewH3q"),o=l("2nQsY"),s=l("jmseR"),a=l("jAEIu"),u=l("6XgeF"),c=l("a0auE"),d=l("iNLNk");class h extends o.default{constructor(t){let{width:e,height:n,position:r=[0,0,0],bearing:i=0,pitch:o=0,longitude:s=null,latitude:a=null,maxPitch:l=90,minPitch:u=-90,startRotatePos:c,startBearing:d,startPitch:h,startZoomPosition:f}=t;super({width:e,height:n,position:r,bearing:i,pitch:o,longitude:s,latitude:a,maxPitch:l,minPitch:u},{startRotatePos:c,startBearing:d,startPitch:h,startZoomPosition:f})}panStart(){return this}pan(){return this}panEnd(){return this}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:n=0}){let r;let{startRotatePos:i,startBearing:o,startPitch:s}=this.getState(),{width:a,height:l}=this.getViewportProps();return i&&void 0!==o&&void 0!==s?(r=t?{bearing:o-180*((t[0]-i[0])/a),pitch:s-90*((t[1]-i[1])/l)}:{bearing:o-e,pitch:s-n},this._getUpdatedState(r)):this}rotateEnd(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}zoomStart(){return this._getUpdatedState({startZoomPosition:this.getViewportProps().position})}zoom({scale:t}){let{startZoomPosition:e}=this.getState();e||(e=this.getViewportProps().position);let n=this.getDirection();return this._move(n,20*Math.log2(t),e)}zoomEnd(){return this._getUpdatedState({startZoomPosition:null})}moveLeft(t=20){let e=this.getDirection(!0);return this._move(e.rotateZ({radians:Math.PI/2}),t)}moveRight(t=20){let e=this.getDirection(!0);return this._move(e.rotateZ({radians:-Math.PI/2}),t)}moveUp(t=20){let e=this.getDirection(!0);return this._move(e,t)}moveDown(t=20){let e=this.getDirection(!0);return this._move(e.negate(),t)}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}zoomIn(t=2){return this.zoom({scale:t})}zoomOut(t=2){return this.zoom({scale:1/t})}shortestPathFrom(t){let e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),null!==i&&null!==e.longitude&&Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}_move(t,e,n=this.getViewportProps().position){let r=t.scale(e);return this._getUpdatedState({position:new(0,d.default)(n).add(r)})}getDirection(t=!1){return new u.default({bearing:this.getViewportProps().bearing,pitch:t?90:90+this.getViewportProps().pitch}).toVector3().normalize()}_getUpdatedState(t){return new h({...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){let{pitch:e,maxPitch:n,minPitch:r,longitude:i,bearing:o}=t;return t.pitch=(0,c.clamp)(e,r,n),null!==i&&(i<-180||i>180)&&(t.longitude=(0,s.mod)(i+180,360)-180),(o<-180||o>180)&&(t.bearing=(0,s.mod)(o+180,360)-180),t}}class f extends i.default{constructor(...t){super(...t),(0,r.default)(this,"ControllerState",h),(0,r.default)(this,"transition",{transitionDuration:300,transitionInterpolator:new a.default(["position","pitch","bearing"])})}}}),u("27FzP",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("jdrcl"),o=l("dYCDq"),s=l("5Nz8Z");class a extends i.default{constructor(t={}){super(t),this.props.orbitAxis=t.orbitAxis||"Z"}get ViewportType(){return o.default}get ControllerType(){return s.default}}(0,r.default)(a,"displayName","OrbitView")}),u("5Nz8Z",function(e,n){t(e.exports,"OrbitState",()=>c),t(e.exports,"default",()=>d);var r=l("2qeFG"),i=l("a0auE"),o=l("ewH3q"),s=l("2nQsY"),a=l("jmseR"),u=l("jAEIu");class c extends s.default{constructor(t){let{width:e,height:n,rotationX:i=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:d=1/0,startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:v}=t;super({width:e,height:n,rotationX:i,rotationOrbit:o,target:s,zoom:a,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:d},{startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:v}),(0,r.default)(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:e}){let n=this.getState().startPanPosition||e;if(!n)return this;let r=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:n=0}){let r;let{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||void 0===o||void 0===s)return this;if(t){let e=(t[0]-i[0])/a;(o<-90||o>90)&&(e*=-1),r={rotationX:o+180*((t[1]-i[1])/l),rotationOrbit:s+180*e}}else r={rotationX:o+n,rotationOrbit:s+e};return this._getUpdatedState(r)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){let e=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:r}=n;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:n}){let{startZoom:r,startZoomPosition:i}=this.getState();if(i||(r=this.getViewportProps().zoom,i=this._unproject(e)||this._unproject(t)),!i)return this;let o=this._calculateNewZoom({scale:n,startZoom:r}),s=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...s.panByPosition(i,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){let e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom({scale:t,startZoom:e}){let{maxZoom:n,minZoom:r}=this.getViewportProps();void 0===e&&(e=this.getViewportProps().zoom);let o=e+Math.log2(t);return(0,i.clamp)(o,r,n)}_panFromCenter(t){let{width:e,height:n,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){let{maxZoom:e,minZoom:n,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:l}=t;return t.zoom=Array.isArray(r)?[(0,i.clamp)(r[0],n,e),(0,i.clamp)(r[1],n,e)]:(0,i.clamp)(r,n,e),t.rotationX=(0,i.clamp)(t.rotationX,s,o),(l<-180||l>180)&&(t.rotationOrbit=(0,a.mod)(l+180,360)-180),t}}class d extends o.default{constructor(...t){super(...t),(0,r.default)(this,"ControllerState",c),(0,r.default)(this,"transition",{transitionDuration:300,transitionInterpolator:new u.default({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}}),u("8L5Az",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("jdrcl"),o=l("94SQj"),s=l("huOFC");class a extends i.default{get ViewportType(){return o.default}get ControllerType(){return s.default}}(0,r.default)(a,"displayName","OrthographicView")}),u("huOFC",function(e,n){t(e.exports,"default",()=>c);var r=l("2qeFG"),i=l("a0auE"),o=l("ewH3q"),s=l("5Nz8Z"),a=l("jAEIu");class u extends s.OrbitState{constructor(t){super(t),(0,r.default)(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:e}){let{maxZoom:n,minZoom:r}=this.getViewportProps();void 0===e&&(e=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(e)){let[t,s]=e;switch(this.zoomAxis){case"X":t=(0,i.clamp)(t+o,r,n);break;case"Y":s=(0,i.clamp)(s+o,r,n);break;default:let a=Math.min(t+o,s+o);a<r&&(o+=r-a),(a=Math.max(t+o,s+o))>n&&(o+=n-a),t+=o,s+=o}return[t,s]}return(0,i.clamp)(e+o,r,n)}}class c extends o.default{constructor(...t){super(...t),(0,r.default)(this,"ControllerState",u),(0,r.default)(this,"transition",{transitionDuration:300,transitionInterpolator:new a.default(["target","zoom"])}),(0,r.default)(this,"dragMode","pan")}_onPanRotate(){return!1}}}),u("hLSJi",function(e,n){t(e.exports,"default",()=>a);var r=l("2qeFG"),i=l("jdrcl"),o=l("59UxP"),s=l("7shHs");class a extends i.default{get ViewportType(){return o.default}get ControllerType(){return s.default}}(0,r.default)(a,"displayName","GlobeView")}),u("7shHs",function(e,n){t(e.exports,"default",()=>d);var r=l("2qeFG"),i=l("a0auE"),o=l("ewH3q"),s=l("hTYIw"),a=l("jmseR"),u=l("jAEIu");class c extends s.MapState{applyConstraints(t){let{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=(0,i.clamp)(r,n,e);let{longitude:o,latitude:s}=t;return(o<-180||o>180)&&(t.longitude=(0,a.mod)(o+180,360)-180),t.latitude=(0,i.clamp)(s,-89,89),t}}class d extends o.default{constructor(...t){super(...t),(0,r.default)(this,"ControllerState",c),(0,r.default)(this,"transition",{transitionDuration:300,transitionInterpolator:new u.default(["longitude","latitude","zoom"])}),(0,r.default)(this,"dragMode","pan")}setProps(t){super.setProps(t),this.dragRotate=!1,this.touchRotate=!1}}}),u("5YUt1",function(e,n){t(e.exports,"default",()=>o);var r=l("2qeFG"),i=l("dHpMo");class o{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(t){(0,r.default)(this,"opts",void 0),t&&(this.opts=t)}equals(t){return this===t||this.constructor===t.constructor&&(0,i.deepEqual)(this.opts,t.opts,1)}getShaders(t){return null}getSubLayerProps(t){let{defaultProps:e}=t.constructor,n={updateTriggers:{}};for(let t in e)if(t in this.props){let r=e[t],i=this.props[t];n[t]=i,r&&"accessor"===r.type&&(n.updateTriggers[t]=this.props.updateTriggers[t],"function"==typeof i&&(n[t]=this.getSubLayerAccessor(i)))}return n}initializeState(t,e){}updateState(t,e){}onNeedsRedraw(t){}getNeedsPickingBuffer(t){return!1}draw(t,e){}finalizeState(t,e){}}(0,r.default)(o,"defaultProps",{}),(0,r.default)(o,"extensionName","LayerExtension")}),u("l4xuh",function(e,n){t(e.exports,"default",()=>c);var r=l("2qeFG"),i=l("gq9cf"),o=l("a0auE");l("auS2n");var s=l("bS5uW");let a={bearing:0,pitch:0,position:[0,0,0]},u={speed:1.2,curve:1.414};class c extends i.default{constructor(t={}){super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),(0,r.default)(this,"opts",void 0),this.opts={...u,...t}}interpolateProps(t,e,n){let r=(0,s.default)(t,e,n,this.opts);for(let i in a)r[i]=(0,o.lerp)(t[i]||a[i],e[i]||a[i],n);return r}getDuration(t,e){let{transitionDuration:n}=e;return"auto"===n&&(n=(0,s.getFlyToDuration)(t,e,this.opts)),n}}}),u("fZJBV",function(e,n){t(e.exports,"createGLContext",()=>l("2pf24").createGLContext),t(e.exports,"instrumentGLContext",()=>l("2pf24").instrumentGLContext),t(e.exports,"isWebGL",()=>l("dpEr0").isWebGL),t(e.exports,"isWebGL2",()=>l("dpEr0").isWebGL2),t(e.exports,"getParameters",()=>l("2Eryf").getParameters),t(e.exports,"setParameters",()=>l("2Eryf").setParameters),t(e.exports,"withParameters",()=>l("2Eryf").withParameters),t(e.exports,"resetParameters",()=>l("2Eryf").resetParameters),t(e.exports,"cssToDeviceRatio",()=>l("fCLVZ").cssToDeviceRatio),t(e.exports,"cssToDevicePixels",()=>l("fCLVZ").cssToDevicePixels),t(e.exports,"lumaStats",()=>l("88ZWZ").lumaStats),t(e.exports,"FEATURES",()=>l("9bhog").FEATURES),t(e.exports,"hasFeature",()=>l("bF9op").hasFeature),t(e.exports,"hasFeatures",()=>l("bF9op").hasFeatures),t(e.exports,"Buffer",()=>l("8FSmA").default),t(e.exports,"Program",()=>l("fFgiT").default),t(e.exports,"Framebuffer",()=>l("67hSA").default),t(e.exports,"Renderbuffer",()=>l("i8qYD").default),t(e.exports,"Texture2D",()=>l("35qVw").default),t(e.exports,"TextureCube",()=>l("5FCdj").default),t(e.exports,"VertexShader",()=>l("a9mg8").VertexShader),t(e.exports,"FragmentShader",()=>l("a9mg8").FragmentShader),t(e.exports,"clear",()=>l("34dnL").clear),t(e.exports,"readPixelsToArray",()=>l("hzwiv").readPixelsToArray),t(e.exports,"readPixelsToBuffer",()=>l("hzwiv").readPixelsToBuffer),t(e.exports,"cloneTextureFrom",()=>l("8zbqc").cloneTextureFrom),t(e.exports,"copyToTexture",()=>l("hzwiv").copyToTexture),t(e.exports,"Texture3D",()=>l("01H3k").default),t(e.exports,"TransformFeedback",()=>l("aSEg7").default),t(e.exports,"AnimationLoop",()=>l("5Jg7q").default),t(e.exports,"Model",()=>l("i9o5q").default),t(e.exports,"Transform",()=>l("jIwbZ").default),t(e.exports,"ProgramManager",()=>l("j7nLR").default),t(e.exports,"Timeline",()=>l("8PNUE").Timeline),t(e.exports,"Geometry",()=>l("aFzkX").default),t(e.exports,"ClipSpace",()=>l("eESKj").default),t(e.exports,"ConeGeometry",()=>l("iH3BW").default),t(e.exports,"CubeGeometry",()=>l("kf9nP").default),t(e.exports,"CylinderGeometry",()=>l("fc6Iz").default),t(e.exports,"IcoSphereGeometry",()=>l("bZI6d").default),t(e.exports,"PlaneGeometry",()=>l("aZzSN").default),t(e.exports,"SphereGeometry",()=>l("fPXRu").default),t(e.exports,"TruncatedConeGeometry",()=>l("80NS5").default),t(e.exports,"normalizeShaderModule",()=>l("4bnKl").normalizeShaderModule),t(e.exports,"fp32",()=>l("jQjls").fp32),t(e.exports,"fp64",()=>l("eG4qQ").fp64),t(e.exports,"project",()=>l("4B81Y").project),t(e.exports,"dirlight",()=>l("iIYTc").dirlight),t(e.exports,"picking",()=>l("aPnqr").picking),t(e.exports,"gouraudLighting",()=>l("itX10").gouraudLighting),t(e.exports,"phongLighting",()=>l("itX10").phongLighting),t(e.exports,"pbr",()=>l("LMiIT").pbr),t(e.exports,"log",()=>l("3FPsK").log),t(e.exports,"assert",()=>l("8DSly").assert),t(e.exports,"uid",()=>l("6uUH7").uid),l("eFBWR"),l("2pf24"),l("fCLVZ"),l("2Eryf"),l("dpEr0"),l("8DSly"),l("8FSmA"),l("34dnL"),l("8zbqc"),l("hzwiv"),l("9bhog"),l("a9mg8"),l("67hSA"),l("bF9op"),l("eFBWR"),l("3FPsK"),l("88ZWZ"),l("fFgiT"),l("i8qYD"),l("35qVw"),l("01H3k"),l("5FCdj"),l("aSEg7"),l("6uUH7"),l("5Jg7q"),l("eESKj"),l("iH3BW"),l("kf9nP"),l("fc6Iz"),l("aFzkX"),l("bZI6d"),l("i9o5q"),l("aZzSN"),l("j7nLR"),l("fPXRu"),l("8PNUE"),l("jIwbZ"),l("80NS5"),l("iIYTc"),l("jQjls"),l("eG4qQ"),l("itX10"),l("4bnKl"),l("LMiIT"),l("aPnqr"),l("4B81Y")}),u("iH3BW",function(e,n){t(e.exports,"default",()=>o);var r=l("80NS5"),i=l("6uUH7");class o extends r.default{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,i.uid)("cone-geometry"),radius:n=1,cap:r=!0}=t;super({...t,id:e,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:n})}}}),u("80NS5",function(e,n){t(e.exports,"default",()=>s);var r=l("aFzkX"),i=l("6uUH7");let o={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class s extends r.default{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,i.uid)("truncated-code-geometry")}=t,{indices:n,attributes:r}=function(t){let{bottomRadius:e=0,topRadius:n=0,height:r=1,nradial:i=10,nvertical:s=10,verticalAxis:a="y",topCap:l=!1,bottomCap:u=!1}=t,c=(l?2:0)+(u?2:0),d=(i+1)*(s+1+c),h=Math.atan2(e-n,r),f=Math.sin,p=Math.cos,g=Math.PI,m=p(h),v=f(h),_=l?-2:0,y=s+(u?2:0),b=i+1,x=new Uint16Array(i*(s+c)*6),E=o[a],T=new Float32Array(3*d),S=new Float32Array(3*d),A=new Float32Array(2*d),P=0,C=0;for(let t=_;t<=y;t++){let o,a=t/s,l=r*a;t<0?(l=0,a=1,o=e):t>s?(l=r,a=1,o=n):o=e+t/s*(n-e),(-2===t||t===s+2)&&(o=0,a=0),l-=r/2;for(let e=0;e<b;e++){let n=f(e*g*2/i),r=p(e*g*2/i);T[P+E[0]]=n*o,T[P+E[1]]=l,T[P+E[2]]=r*o,S[P+E[0]]=t<0||t>s?0:n*m,S[P+E[1]]=t<0?-1:t>s?1:v,S[P+E[2]]=t<0||t>s?0:r*m,A[C+0]=e/i,A[C+1]=a,C+=2,P+=3}}for(let t=0;t<s+c;t++)for(let e=0;e<i;e++){let n=(t*i+e)*6;x[n+0]=b*(t+0)+0+e,x[n+1]=b*(t+0)+1+e,x[n+2]=b*(t+1)+1+e,x[n+3]=b*(t+0)+0+e,x[n+4]=b*(t+1)+1+e,x[n+5]=b*(t+1)+0+e}return{indices:x,attributes:{POSITION:{size:3,value:T},NORMAL:{size:3,value:S},TEXCOORD_0:{size:2,value:A}}}}(t);super({...t,id:e,indices:n,attributes:{...r,...t.attributes}})}}}),u("fc6Iz",function(e,n){t(e.exports,"default",()=>o);var r=l("80NS5"),i=l("6uUH7");class o extends r.default{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,i.uid)("cylinder-geometry"),radius:n=1}=t;super({...t,id:e,bottomRadius:n,topRadius:n})}}}),u("bZI6d",function(e,n){t(e.exports,"default",()=>u);var r=l("iNLNk"),i=l("aFzkX"),o=l("6uUH7");let s=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],a=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1];class u extends i.default{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,o.uid)("ico-sphere-geometry")}=t,{indices:n,attributes:i}=function(t){let{iterations:e=0}=t,n=Math.PI,i=2*n,o=[...s],l=[...a];o.push(),l.push();let u=(()=>{let t={};return(e,n)=>{let r=(e*=3)<(n*=3)?e:n,i=e>n?e:n,s="".concat(r,"|").concat(i);if(s in t)return t[s];let a=o[e],l=o[e+1],u=o[e+2],c=o[n],d=o[n+1],h=o[n+2],f=(a+c)/2,p=(l+d)/2,g=(u+h)/2,m=Math.sqrt(f*f+p*p+g*g);return f/=m,p/=m,g/=m,o.push(f,p,g),t[s]=o.length/3-1}})();for(let t=0;t<e;t++){let t=[];for(let e=0;e<l.length;e+=3){let n=u(l[e+0],l[e+1]),r=u(l[e+1],l[e+2]),i=u(l[e+2],l[e+0]);t.push(i,l[e+0],n,n,l[e+1],r,r,l[e+2],i,n,r,i)}l=t}let c=Array(o.length),d=Array(o.length/3*2),h=l.length;for(let t=h-3;t>=0;t-=3){let e;let s=l[t+0],a=l[t+1],u=l[t+2],h=3*s,f=3*a,p=3*u,g=2*s,m=2*a,v=2*u,_=o[h+0],y=o[h+1],b=o[h+2],x=Math.acos(b/Math.sqrt(_*_+y*y+b*b)),E=Math.atan2(y,_)+n,T=x/n,S=1-E/i,A=o[f+0],P=o[f+1],C=o[f+2],w=Math.acos(C/Math.sqrt(A*A+P*P+C*C)),D=Math.atan2(P,A)+n,L=w/n,R=1-D/i,O=o[p+0],I=o[p+1],M=o[p+2],F=Math.acos(M/Math.sqrt(O*O+I*I+M*M)),N=Math.atan2(I,O)+n,B=F/n,k=1-N/i,j=[O-A,I-P,M-C],z=[_-A,y-P,b-C],U=new(0,r.default)(j).cross(z).normalize();(0===S||0===R||0===k)&&(0===S||S>.5)&&(0===R||R>.5)&&(0===k||k>.5)&&(o.push(o[h+0],o[h+1],o[h+2]),e=o.length/3-1,l.push(e),d[2*e+0]=1,d[2*e+1]=T,c[3*e+0]=U.x,c[3*e+1]=U.y,c[3*e+2]=U.z,o.push(o[f+0],o[f+1],o[f+2]),e=o.length/3-1,l.push(e),d[2*e+0]=1,d[2*e+1]=L,c[3*e+0]=U.x,c[3*e+1]=U.y,c[3*e+2]=U.z,o.push(o[p+0],o[p+1],o[p+2]),e=o.length/3-1,l.push(e),d[2*e+0]=1,d[2*e+1]=B,c[3*e+0]=U.x,c[3*e+1]=U.y,c[3*e+2]=U.z),c[h+0]=c[f+0]=c[p+0]=U.x,c[h+1]=c[f+1]=c[p+1]=U.y,c[h+2]=c[f+2]=c[p+2]=U.z,d[g+0]=S,d[g+1]=T,d[m+0]=R,d[m+1]=L,d[v+0]=k,d[v+1]=B}return{indices:{size:1,value:new Uint16Array(l)},attributes:{POSITION:{size:3,value:new Float32Array(o)},NORMAL:{size:3,value:new Float32Array(c)},TEXCOORD_0:{size:2,value:new Float32Array(d)}}}}(t);super({...t,id:e,indices:n,attributes:{...i,...t.attributes}})}}}),u("aZzSN",function(e,n){t(e.exports,"default",()=>s);var r=l("aFzkX"),i=l("jdsFt"),o=l("6uUH7");class s extends r.default{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,o.uid)("plane-geometry")}=t,{indices:n,attributes:r}=function(t){let{type:e="x,y",offset:n=0,flipCull:r=!1,unpack:o=!1}=t,s=e.split(","),a=t["".concat(s[0],"len")]||1,l=t["".concat(s[1],"len")]||1,u=t["n".concat(s[0])]||1,c=t["n".concat(s[1])]||1,d=(u+1)*(c+1),h=new Float32Array(3*d),f=new Float32Array(3*d),p=new Float32Array(2*d);r&&(a=-a);let g=0,m=0;for(let t=0;t<=c;t++)for(let i=0;i<=u;i++){let o=i/u,s=t/c;switch(p[g+0]=r?1-o:o,p[g+1]=s,e){case"x,y":h[m+0]=a*o-.5*a,h[m+1]=l*s-.5*l,h[m+2]=n,f[m+0]=0,f[m+1]=0,f[m+2]=r?1:-1;break;case"x,z":h[m+0]=a*o-.5*a,h[m+1]=n,h[m+2]=l*s-.5*l,f[m+0]=0,f[m+1]=r?1:-1,f[m+2]=0;break;case"y,z":h[m+0]=n,h[m+1]=a*o-.5*a,h[m+2]=l*s-.5*l,f[m+0]=r?1:-1,f[m+1]=0,f[m+2]=0;break;default:throw Error("PlaneGeometry: unknown type")}g+=2,m+=3}let v=u+1,_=new Uint16Array(u*c*6);for(let t=0;t<c;t++)for(let e=0;e<u;e++){let n=(t*u+e)*6;_[n+0]=(t+0)*v+e,_[n+1]=(t+1)*v+e,_[n+2]=(t+0)*v+e+1,_[n+3]=(t+1)*v+e,_[n+4]=(t+1)*v+e+1,_[n+5]=(t+0)*v+e+1}let y={indices:{size:1,value:_},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:p}}};return o?(0,i.unpackIndexedGeometry)(y):y}(t);super({...t,id:e,indices:n,attributes:{...r,...t.attributes}})}}}),u("jdsFt",function(e,n){t(e.exports,"unpackIndexedGeometry",()=>r);function r(t){let{indices:e,attributes:n}=t;if(!e)return t;let r=e.value.length,i={};for(let t in n){let{constant:o,value:s,size:a}=n[t];if(o||!a)continue;let l=new s.constructor(r*a);for(let t=0;t<r;++t){let n=e.value[t];for(let e=0;e<a;e++)l[t*a+e]=s[n*a+e]}i[t]={size:a,value:l}}return{attributes:Object.assign({},n,i)}}}),u("fPXRu",function(e,n){t(e.exports,"default",()=>o);var r=l("aFzkX"),i=l("6uUH7");class o extends r.default{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e=(0,i.uid)("sphere-geometry")}=t,{indices:n,attributes:r}=function(t){let{nlat:e=10,nlong:n=10}=t,{radius:r=1}=t,i=Math.PI-0,o=2*Math.PI-0,s=(e+1)*(n+1);if("number"==typeof r){let t=r;r=(e,n,r,i,o)=>t}let a=new Float32Array(3*s),l=new Float32Array(3*s),u=new Float32Array(2*s),c=new(s>65535?Uint32Array:Uint16Array)(e*n*6);for(let t=0;t<=e;t++)for(let s=0;s<=n;s++){let c=s/n,d=t/e,h=s+t*(n+1),f=2*h,p=3*h,g=o*c,m=i*d,v=Math.sin(g),_=Math.sin(m),y=Math.cos(m),b=Math.cos(g)*_,x=v*_,E=r(b,y,x,c,d);a[p+0]=E*b,a[p+1]=E*y,a[p+2]=E*x,l[p+0]=b,l[p+1]=y,l[p+2]=x,u[f+0]=c,u[f+1]=1-d}let d=n+1;for(let t=0;t<n;t++)for(let n=0;n<e;n++){let r=(t*e+n)*6;c[r+0]=n*d+t,c[r+1]=n*d+t+1,c[r+2]=(n+1)*d+t,c[r+3]=(n+1)*d+t,c[r+4]=n*d+t+1,c[r+5]=(n+1)*d+t+1}return{indices:{size:1,value:c},attributes:{POSITION:{size:3,value:a},NORMAL:{size:3,value:l},TEXCOORD_0:{size:2,value:u}}}}(t);super({...t,id:e,indices:n,attributes:{...r,...t.attributes}})}}}),u("iIYTc",function(e,n){t(e.exports,"dirlight",()=>o);var r=l("4B81Y");let i={lightDirection:new Float32Array([1,1,2])},o={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e={};return t.lightDirection&&(e.dirlight_uLightDirection=t.lightDirection),e},dependencies:[r.project]}}),u("4B81Y",function(e,n){t(e.exports,"project",()=>a);var r=l("cn1FU");let i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o={modelMatrix:i,viewMatrix:i,projectionMatrix:i,cameraPositionWorld:[0,0,0]},s="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",a={name:"project",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let e={};return void 0!==t.modelMatrix&&(e.modelMatrix=t.modelMatrix),void 0!==t.viewMatrix&&(e.viewMatrix=t.viewMatrix),void 0!==t.projectionMatrix&&(e.projectionMatrix=t.projectionMatrix),void 0!==t.cameraPositionWorld&&(e.cameraPositionWorld=t.cameraPositionWorld),(void 0!==t.projectionMatrix||void 0!==t.viewMatrix)&&(e.viewProjectionMatrix=new(0,r.default)(t.projectionMatrix).multiplyRight(t.viewMatrix)),e},vs:"".concat(s,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(s)}}),u("eG4qQ",function(e,n){t(e.exports,"fp64",()=>u);var r=l("4MpYm"),i=l("cOEJP"),o=l("7fezZ");let s={ONE:1},a={name:"fp64-arithmetic",vs:i.default,fs:null,getUniforms:function(){return s},fp64ify:r.fp64ify,fp64LowPart:r.fp64LowPart,fp64ifyMatrix4:r.fp64ifyMatrix4},u={name:"fp64",vs:o.default,fs:null,dependencies:[a],fp64ify:r.fp64ify,fp64LowPart:r.fp64LowPart,fp64ifyMatrix4:r.fp64ifyMatrix4}}),u("4MpYm",function(e,n){function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}function i(t){return t-Math.fround(t)}function o(t){let e=new Float32Array(32);for(let n=0;n<4;++n)for(let i=0;i<4;++i){let o=4*n+i;r(t[4*i+n],e,2*o)}return e}t(e.exports,"fp64ify",()=>r),t(e.exports,"fp64LowPart",()=>i),t(e.exports,"fp64ifyMatrix4",()=>o)}),u("cOEJP",function(e,n){t(e.exports,"default",()=>r);var r="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n"}),u("7fezZ",function(e,n){t(e.exports,"default",()=>r);var r="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"}),u("LMiIT",function(e,n){t(e.exports,"pbr",()=>s);var r=l("MotWT"),i=l("b0W8t"),o=l("jFYky");let s={name:"pbr",vs:i.default,fs:o.default,defines:{LIGHTING_FRAGMENT:1},dependencies:[r.lights]}}),u("b0W8t",function(e,n){t(e.exports,"default",()=>r);var r="uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n"}),u("jFYky",function(e,n){t(e.exports,"default",()=>r);var r="#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n"}),u("4It7H",function(e,n){Object.defineProperty(e.exports,"__esModule",{value:!0,configurable:!0}),t(e.exports,"default",()=>r);var r={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:0xffffffff,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}});var c={};e=l("cm1RJ"),n=l("g6n2j"),r=l("fZJBV"),i=l("4It7H"),c=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=152)}([function(t,e,n){n.r(e),n.d(e,"Angles",function(){return r}),n.d(e,"EmptyArray",function(){return i}),n.d(e,"EmptyObject",function(){return o}),n.d(e,"TreeTypes",function(){return s}),n.d(e,"Shapes",function(){return a});var r={Degrees0:0,Degrees45:.25*Math.PI,Degrees90:.5*Math.PI,Degrees180:Math.PI,Degrees270:1.5*Math.PI,Degrees360:2*Math.PI},i=[],o={},s={Circular:"cr",Diagonal:"dg",Hierarchical:"hr",Radial:"rd",Rectangular:"rc"},a={Chevron:"chevron",ChevronInverted:"chevron-inverted",ChevronLeft:"chevron-left",ChevronRight:"chevron-right",Circle:"circle",Cross:"cross",Diamond:"diamond",Dot:"dot",DoubleChevron:"double-chevron",DoubleChevronInverted:"double-chevron-inverted",DoubleChevronLeft:"double-chevron-left",DoubleChevronRight:"double-chevron-right",Heptagon:"heptagon",HeptagonInverted:"heptagon-inverted",Heptagram:"heptagram",HeptagramInverted:"heptagram-inverted",Hexagon:"hexagon",Hexagram:"hexagram",Octagon:"octagon",Octagram:"octagram",Pentagon:"pentagon",PentagonInverted:"pentagon-inverted",Pentagram:"pentagram",PentagramInverted:"pentagram-inverted",Plus:"plus",Square:"square",Star:"pentagram",StarInverted:"pentagram-inverted",Tetragram:"tetragram",Triangle:"triangle",TriangleInverted:"triangle-inverted",TriangleLeft:"triangle-left",TriangleRight:"triangle-right",Wye:"wye",WyeInverted:"wye-inverted"}},function(t,e,n){var r=n(0);e.a=Object.freeze({alignLabels:!1,backgroundColour:null,blockHeaderFontSize:13,blockPadding:4,blocks:[],blockSize:16,branchLengthsDigits:4,branchLengthsFormat:null,branchZoom:0,centre:[.5,.5],collapsedIds:r.EmptyArray,edgeOverlapFactor:-.5,fillColour:[51,51,51,255],fontColour:[51,51,51,255],fontFamily:"monospace",fontSize:16,haloRadius:12,haloWidth:4,highlightColour:[60,115,131,255],interactive:!1,metadata:{},minScale:.01,nodeOverlapFactor:.1,nodeShape:"circle",nodeSize:14,padding:16,rootId:null,rotatedIds:r.EmptyArray,scaleLineAlpha:!1,selectedIds:r.EmptyArray,shapeBorderAlpha:.28,shapeBorderWidth:1,showBlockHeaders:!1,showBlockLabels:!1,showBranchLengths:!1,showEdges:!0,showInternalLabels:!1,showLabels:!1,showLeafLabels:!1,showPiecharts:!1,showShapeBorders:!1,showShapes:!0,size:{height:150,width:300},stepZoom:0,strokeColour:[34,34,34,255],strokeWidth:1,styleLeafLabels:!1,styleNodeEdges:!1,styles:{},treeToCanvasRatio:.25,type:r.TreeTypes.Rectangular,zoom:0})},function(t,e,n){function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.pop(),i=null,o=null,s=null;return function t(n){if(null===i||null===n.props||i!==n.props){for(var a=[],l=0;l<e.length;l++)a.push(e[l].call(null,n));a.push(n);var u=!1;if(null===o||null===a)u=!0;else for(var c=0;c<a.length;c++)if(o[c]!==a[c]){u=!0;break}if(u){if(n.log&&t.displayName){var d=performance.now();s=r.apply(null,a);var h=performance.now();n.log("selector %s took:",t.displayName,h-d)}else s=r.apply(null,a)}o=a}return i=n.props,s}}function i(){var t=arguments,e=Symbol("selector");return function n(i){var o=i.cache.get(e);return void 0===o&&((o=r.apply(null,t)).displayName=n.displayName,i.cache.set(e,o)),o.apply(null,arguments)}}n.r(e),n.d(e,"default",function(){return i})},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,n){t.exports=e},function(t,e,n){n.r(e),n.d(e,"default",function(){return s});var r=n(26),i=new Map,o=[0,0,0,0];function s(t){if(Array.isArray(t))return t;if("transparent"===t)return o;var e=Object(r.default)(),n=i.get(t);return void 0===n&&(e.fillStyle="rgba(0, 0, 0, 0)",e.fillStyle=t,e.fillRect(0,0,1,1),n=e.getImageData(0,0,1,1).data,i.set(t,n)),n}o.isTransparent=!0},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(51);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(48).default,i=n(122);t.exports=function(t,e){return e&&("object"===r(e)||"function"==typeof e)?e:i(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){function r(t){return Math.pow(2,t)}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){var r=n(71),i=n(72),o=n(53),s=n(73);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(59),i=n(60),o=n(53),s=n(61);t.exports=function(t){return r(t)||i(t)||o(t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(121);function i(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},t.exports.default=t.exports,t.exports.__esModule=!0,i(e,n,o||e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){n.r(e),e.default=function(t){return Math.log2(t)}},function(t,e,n){n.r(e);var r=n(0);function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=r.Angles.Degrees270,s=r.Angles.Degrees360/t,a=[],l=0;l<=t;l+=1)a.push([e+i*Math.cos(o+l*s),n+i*Math.sin(o+l*s)]);return a.push(a[0]),a}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=.5*r,o=Math.PI/t,s=[],a=Math.PI/2*3;s.push([e,n-r]);for(var l=0;l<t;l++)s.push([e+Math.cos(a)*r,n+Math.sin(a)*r]),s.push([e+Math.cos(a+=o)*i,n+Math.sin(a)*i]),a+=o;return s.push([e,n-r]),s}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:180;return{renderCanvas:function(n,i,o,s){return s.rotate(e/180*r.Angles.Degrees180),t.renderCanvas(n,i,o,s)},renderSvg:function(n,r,i,o){return t.renderSvg(n,r,i,'transform="rotate('.concat(e,",").concat(n,",").concat(r,')" ').concat(o))}}}function a(t){return{renderCanvas:function(e,n,r,i){i.moveTo(e+r*t[0][0],n+r*t[0][1]);for(var o=0;o<t.length;o++){var s=t[o];null===s?i.moveTo(e+r*t[o+1][0],n+r*t[o+1][1]):i.lineTo(e+r*s[0],n+r*s[1])}},renderSvg:function(e,n,r,i){var o=[];o.push("M ".concat(e+r*t[0][0],",").concat(n+r*t[0][1]));for(var s=0;s<t.length;s++){var a=t[s];null===a?o.push("M ".concat(e+r*t[s+1][0],",").concat(n+r*t[s+1][1])):o.push("L ".concat(e+r*a[0],",").concat(n+r*a[1]))}return'<path d="'.concat(o.join(" "),'Z" ').concat(i," />")}}}var l={};l.circle={renderCanvas:function(t,e,n,i){i.arc(t,e,n,r.Angles.Degrees0,r.Angles.Degrees360)},renderSvg:function(t,e,n,r){return'<circle cx="'.concat(t,'" cy="').concat(e,'" r="').concat(n,'" ').concat(r," />")}},l.diamond=a(i(4)),l.dot={renderCanvas:function(t,e,n,i){i.arc(t,e,n/8,r.Angles.Degrees0,r.Angles.Degrees360)},renderSvg:function(t,e,n,r){return'<circle cx="'.concat(t,'" cy="').concat(e,'" r="').concat(n/8,'" ').concat(r," />")}},l.heptagon=a(i(7)),l["heptagon-inverted"]=s(l.heptagon),l.heptagram=a(o(7)),l["heptagram-inverted"]=s(l.heptagram),l.hexagon=a(i(6)),l.hexagram=a(o(6)),l.octagon=a(i(8)),l.octagram=a(o(8)),l.pentagon=a(i(5)),l["pentagon-inverted"]=s(l.pentagon),l.pentagram=a(o(5)),l["pentagram-inverted"]=s(l.pentagram),l.plus=a([[-1/4,-1],[1/4,-1],[1/4,-1/4],[1,-1/4],[1,1/4],[1/4,1/4],[1/4,1],[-1/4,1],[-1/4,1/4],[-1,1/4],[-1,-1/4],[-1/4,-1/4],[-1/4,-1]]),l.cross=s(l.plus,45),l.square=a([[-1,-1],[-1,1],[1,1],[1,-1],[-1,-1]]),l.tetragram=a(o(4)),l.triangle=a(i(3)),l["triangle-inverted"]=s(l.triangle),l["triangle-right"]=s(l.triangle,90),l["triangle-left"]=s(l.triangle,-90),l.chevron=a([[0,-1],[1,0],[1,1],[0,0],[-1,1],[-1,0],[0,-1]]),l["double-chevron"]=a([[0,-1],[1,-.5],[1,0],[0,-.5],[-1,0],[-1,-.5],[0,-1],null,[0,0],[1,.5],[1,1],[0,.5],[-1,1],[-1,.5],[0,0]]),l["chevron-inverted"]=s(l.chevron),l["double-chevron-inverted"]=s(l["double-chevron"]),l["chevron-right"]=s(l.chevron,90),l["double-chevron-right"]=s(l["double-chevron"],90),l["chevron-left"]=s(l.chevron,-90),l["double-chevron-left"]=s(l["double-chevron"],-90),l.wye=a([[.366025,.211325],[.366025,.943376],[-.366025,.943376],[-.366025,.211325],[-1,-.154701],[-.633975,-.788675],[0,-.42265],[.633975,-.788675],[1,-.154701]]),l["wye-inverted"]=s(l.wye),l.star=l.pentagram,e.default=l},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(25);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t){var e,n=[],o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,void 0)}}(t))){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(Object(r.default)(t));try{for(o.s();!(e=o.n()).done;){var s=e.value,a=s.name||s.id||"";if(s.isLeaf)n.push("".concat(a,":").concat(s.branchLength));else if(s!==t){var l=n.splice(n.length-s.children.length,s.children.length);n.push("(".concat(l.join(","),")").concat(a,":").concat(s.branchLength))}}}catch(t){o.e(t)}finally{o.f()}return"(".concat(n.join(","),");")}},function(t,e,n){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n){var r=t.indexOf(e);if(-1===r)return t.concat(e);var i=t.concat();return i.splice(r,1),i}return[e]}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(t,e){var n,i;return!0===(null!==(n=t.props.interactive)&&void 0!==n?n:r.a.interactive)||!0===(null===(i=t.props.interactive)||void 0===i?void 0:i[e])}},function(t,e,n){n.d(e,"a",function(){return o});var r=n(13),i=n.n(r);function o(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=i()(t,4),r=n[0],o=n[1],s=n[2],a=n[3],l=void 0===a?255:a;return 0===l?"none":e||255===l?"rgb(".concat(r,", ").concat(o,", ").concat(s,")"):"rgba(".concat(r,", ").concat(o,", ").concat(s,", ").concat(l/255,")")}},function(t,e,n){var r=n(14),i=n.n(r),o=n(1),s=n(2);e.a=Object(s.default)(function(t){return t.getStrokeColour()},function(t){var e;return null!==(e=t.props.shapeBorderAlpha)&&void 0!==e?e:o.a.shapeBorderAlpha},function(t,e){var n=i()(t);return n[3]=255*e,n})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(0);function i(t){var e=t.angle/r.Angles.Degrees360*360;return t.inverted?180-e:360-e}},function(t,e){t.exports=r},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(14),i=n.n(r);function o(t){for(var e=[],n=[t];n.length;){var r=n.pop();Array.isArray(r.children)&&n.push.apply(n,i()(r.children)),e.push(r)}return e.reverse()}},function(t,e,n){var r;n.r(e),e.default=function(){return r||(r=document.createElement("canvas").getContext("2d")),r}},function(t,e,n){function r(t,e){var n=t.getCanvasSize(),r=t.getDrawingArea(),i=[n.width/2,n.height/2],o=[r.width/2+r.left,r.height/2+r.top],s=[i[0]-o[0],i[1]-o[1]];return[(-e[0]+s[0])/n.width+.5,(-e[1]+s[1])/n.height+.5]}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(27);function i(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"xy",s=t.unprojectPoint(i),a=n/e,l=[s[0]*a,s[1]*a],u=t.projectPoint(l),c=t.getScale(),d="x"===o||"xy"===o?(u[0]-i[0])/c:0,h="y"===o||"xy"===o?(u[1]-i[1])/c:0,f=t.getView(),p=[f.target[0]+d,f.target[1]+h];return Object(r.default)(t,p)}},function(t,e){t.exports=i},function(t,e){t.exports.parse_newick=function(t){for(var e=[],n={},r=t.split(/\s*(;|\(|\)|,|:)\s*/),i=0;i<r.length;i++){var o=r[i];switch(o){case"(":var s={};n.children=[s],e.push(n),n=s;break;case",":s={},e[e.length-1].children.push(s),n=s;break;case")":n=e.pop();break;case":":break;default:var a=r[i-1];")"==a||"("==a||","==a?n.name=o:":"==a&&(n.branch_length=parseFloat(o))}}return n}},function(t,e,n){var r=n(0),i=n(2);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s=Object(i.default)(function(t){return t.getTreeType()},function(t){return t.getGraphAfterLayout()},function(t){return t.getBranchScale()},function(t){return t.getStepScale()},function(t){return t.getScale()},function(t){return t.getFontSize()},function(t,e,n,i,o,s){if(t===r.TreeTypes.Circular||t===r.TreeTypes.Radial){var a=2*Math.asin(.75*s/(2*(e.root.totalSubtreeLength*n*o))),l=Math.floor(r.Angles.Degrees360/a);return Math.ceil(e.root.totalLeaves/l)}var u=e.root.totalLeaves*i*o/s,c=e.root.totalLeaves/u;return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.log(2)))}),a=Object(i.default)(function(t){return t.getGraphWithStyles()},function(t){return t.getTreeType()},s,function(t,e,n){if(n<=1){var i,s=[],a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(t.leaves);try{for(a.s();!(i=a.n()).done;){var l=i.value;l.label&&s.push(l)}}catch(t){a.e(t)}finally{a.f()}return s}for(var u=t.leaves.length-(e===r.TreeTypes.Circular||e===r.TreeTypes.Radial?Math.ceil(n/2):0),c=[],d=0;d<t.leaves.length;d++)if(d<u&&d%n==0){var h=t.leaves[d];h.label&&c.push(h)}return c});a.displayName="labelled-leaf-nodes",e.a=a},function(t,e,n){var r=n(2);e.a=Object(r.default)(function(t){return t.getAlignLeafLabels()},function(t){return t.getGraphAfterLayout().root.totalSubtreeLength},function(t){return t.getBranchScale()},function(t){return t.getScale()},function(t){return t.getShowShapes()?t.getNodeSize():0},function(t,e,n,r,i){return function(o){var s=i/r;return t&&(s+=(e-o.distanceFromRoot)*n),[o.x+s*Math.cos(o.angle),o.y+s*Math.sin(o.angle)]}})},function(t,e,n){var r=n(1);e.a=function(t){var e;return null!==(e=t.props.shapeBorderWidth)&&void 0!==e?e:r.a.shapeBorderWidth}},function(t,e,n){var r=n(2),i=n(5),o=n(0);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.a=Object(r.default)(function(t){return t.getGraphWithStyles()},function(t){return t.getAlignLeafLabels()},function(t){return t.props.metadata||o.EmptyObject},function(t){return t.props.blocks||o.EmptyArray},function(t){return t.getMetadataColumnWidth()},function(t){return t.getBranchScale()},function(t){return t.getBlockPadding()},function(t,e,n,r,o,a,l){var u,c=[],d=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(t.leaves);try{for(d.s();!(u=d.n()).done;){var h=u.value;if(h.shape&&!h.isHidden&&h.id in n)for(var f=n[h.id],p=e?a*(t.root.totalSubtreeLength-h.distanceFromRoot):0,g=[h.x+p*Math.cos(h.angle),h.y+p*Math.sin(h.angle)],m=0,v=0;v<r.length;v++){var _=r[v],y=f[_];y&&y.colour&&c.push({position:g,offsetX:m+l+o/2,colour:Object(i.default)(y.colour),columnName:_,block:y,node:h}),m+=o}}}catch(t){d.e(t)}finally{d.f()}return c})},function(t,e,n){var r=n(0),i=n(2);e.a=Object(i.default)(function(t){return t.getGraphWithStyles()},function(t){return t.getAlignLeafLabels()},function(t){return t.hasMetadataLabels()},function(t){return t.props.blocks},function(t){return t.getMetadataColumnWidth()},function(t){return t.getBranchScale()},function(t){return t.getBlockSize()},function(t){return t.getBlockPadding()},function(t){return t.getStepScale()*t.getScale()},function(t,e,n,i,o,s,a,l,u){var c=[],d=t.postorderTraversal[t.root.postIndex-t.root.totalNodes+1],h=d.angle>r.Angles.Degrees90&&d.angle<r.Angles.Degrees270,f=e?s*(t.root.totalSubtreeLength-d.distanceFromRoot):0,p=[d.x+f*Math.cos(d.angle),d.y+f*Math.sin(d.angle)],g=d.angle;n||(g-=r.Angles.Degrees90);for(var m=0,v=(0===g?.5:-.5)*u,_=0;_<i.length;_++){var y=i[_];c.push({node:d,inverted:h,position:p,offsetX:m+l+o/2,offsetY:v,text:y,angle:360-g/r.Angles.Degrees360*360}),m+=o}return c})},function(t,e,n){var r=n(2);e.a=Object(r.default)(function(t){return t.getPixelOffsets().length},function(t){return function(e){var n=e.offsetX+t;return e.offsetY?[n*Math.cos(e.node.angle)+e.offsetY*Math.sin(e.node.angle),n*Math.sin(e.node.angle)+e.offsetY*Math.cos(e.node.angle)]:[n*Math.cos(e.node.angle),n*Math.sin(e.node.angle)]}})},function(t,e,n){e.a=function(t){return Math.min(t.getBlockSize(),t.getBlockHeaderFontSize())}},function(t,e,n){n.r(e);var r=n(14),i=n.n(r);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n){var r,s=[],a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(n.children);try{for(a.s();!(r=a.n()).done;){var l=r.value,u=t.splice(e,l.totalNodes);s.push(u)}}catch(t){a.e(t)}finally{a.f()}for(var c=0;c<s.length;c++){var d=s[c];t.splice.apply(t,[e,0].concat(i()(d)))}}e.default=function(t,e){var n=t.preorderTraversal,r=t.postorderTraversal;s(n,n.indexOf(e)+1,e);for(var i=0;i<n.length;i++)n[i].preIndex=i;s(r,r.indexOf(e)-e.totalNodes+1,e);for(var o=0;o<r.length;o++)r[o].postIndex=o;e.children.reverse()}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(26);function i(t,e,n){var i=Object(r.default)();return i.font="".concat(n,"px ").concat(e),Math.ceil(i.measureText(t).width)}},function(t,e,n){var r=n(2),i=n(41),o=Object(r.default)(function(t){return t.getScale()},function(t){return t.getMaxScale()},function(t){var e;return null!==(e=t.props.minLineAlpha)&&void 0!==e?e:71},function(t,e,n){return t<=1?n:t+.01>=e?255:Math.floor(Object(i.default)([1,e],[n,255])(t))}),s=Object(r.default)(function(t){return t.getStrokeColour()},function(t){return t.props.scaleLineAlpha?o(t):255},function(t,e){return[t[0],t[1],t[2],e]});e.a=s},function(t,e,n){n.r(e);var r=n(13),i=n.n(r);e.default=function(t,e){var n=i()(t,2),r=n[0],o=n[1],s=i()(e,2),a=s[0],l=s[1],u=r-1,c=(l-a)/Math.log10(o-u);return function(t){return c*Math.log10(t-u)+a}}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(43),i=n(17);function o(t,e,n,o,s,a,l){if(o<=0||"none"===t)return"";var u=Object(r.default)(t);if(u)return'<text x="'.concat(e,'" y="').concat(n,'" font-size="').concat(2*o,'px" font-family="Segoe UI Emoji" text-anchor="middle" dominant-baseline="middle" fill="').concat(s,'">').concat(u,"</text>");if(t in i.default)return i.default[t].renderSvg(e,n,o,'fill="'.concat(s,'" stroke="').concat(a,'" stroke-width="').concat(l,'"'));throw Error("Invalid shape ".concat(t))}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/i,i={ad:"\uD83C\uDDE6\uD83C\uDDE9",ae:"\uD83C\uDDE6\uD83C\uDDEA",af:"\uD83C\uDDE6\uD83C\uDDEB",ag:"\uD83C\uDDE6\uD83C\uDDEC",ai:"\uD83C\uDDE6\uD83C\uDDEE",al:"\uD83C\uDDE6\uD83C\uDDF1",am:"\uD83C\uDDE6\uD83C\uDDF2",ao:"\uD83C\uDDE6\uD83C\uDDF4",aq:"\uD83C\uDDE6\uD83C\uDDF6",ar:"\uD83C\uDDE6\uD83C\uDDF7",as:"\uD83C\uDDE6\uD83C\uDDF8",at:"\uD83C\uDDE6\uD83C\uDDF9",au:"\uD83C\uDDE6\uD83C\uDDFA",aw:"\uD83C\uDDE6\uD83C\uDDFC",ax:"\uD83C\uDDE6\uD83C\uDDFD",az:"\uD83C\uDDE6\uD83C\uDDFF",ba:"\uD83C\uDDE7\uD83C\uDDE6",bb:"\uD83C\uDDE7\uD83C\uDDE7",bd:"\uD83C\uDDE7\uD83C\uDDE9",be:"\uD83C\uDDE7\uD83C\uDDEA",bf:"\uD83C\uDDE7\uD83C\uDDEB",bg:"\uD83C\uDDE7\uD83C\uDDEC",bh:"\uD83C\uDDE7\uD83C\uDDED",bi:"\uD83C\uDDE7\uD83C\uDDEE",bj:"\uD83C\uDDE7\uD83C\uDDEF",bl:"\uD83C\uDDE7\uD83C\uDDF1",bm:"\uD83C\uDDE7\uD83C\uDDF2",bn:"\uD83C\uDDE7\uD83C\uDDF3",bo:"\uD83C\uDDE7\uD83C\uDDF4",bq:"\uD83C\uDDE7\uD83C\uDDF6",br:"\uD83C\uDDE7\uD83C\uDDF7",bs:"\uD83C\uDDE7\uD83C\uDDF8",bt:"\uD83C\uDDE7\uD83C\uDDF9",bv:"\uD83C\uDDE7\uD83C\uDDFB",bw:"\uD83C\uDDE7\uD83C\uDDFC",by:"\uD83C\uDDE7\uD83C\uDDFE",bz:"\uD83C\uDDE7\uD83C\uDDFF",ca:"\uD83C\uDDE8\uD83C\uDDE6",cc:"\uD83C\uDDE8\uD83C\uDDE8",cd:"\uD83C\uDDE8\uD83C\uDDE9",cf:"\uD83C\uDDE8\uD83C\uDDEB",cg:"\uD83C\uDDE8\uD83C\uDDEC",ch:"\uD83C\uDDE8\uD83C\uDDED",ci:"\uD83C\uDDE8\uD83C\uDDEE",ck:"\uD83C\uDDE8\uD83C\uDDF0",cl:"\uD83C\uDDE8\uD83C\uDDF1",cm:"\uD83C\uDDE8\uD83C\uDDF2",cn:"\uD83C\uDDE8\uD83C\uDDF3",co:"\uD83C\uDDE8\uD83C\uDDF4",cr:"\uD83C\uDDE8\uD83C\uDDF7",cu:"\uD83C\uDDE8\uD83C\uDDFA",cv:"\uD83C\uDDE8\uD83C\uDDFB",cw:"\uD83C\uDDE8\uD83C\uDDFC",cx:"\uD83C\uDDE8\uD83C\uDDFD",cy:"\uD83C\uDDE8\uD83C\uDDFE",cz:"\uD83C\uDDE8\uD83C\uDDFF",de:"\uD83C\uDDE9\uD83C\uDDEA",dj:"\uD83C\uDDE9\uD83C\uDDEF",dk:"\uD83C\uDDE9\uD83C\uDDF0",dm:"\uD83C\uDDE9\uD83C\uDDF2",do:"\uD83C\uDDE9\uD83C\uDDF4",dz:"\uD83C\uDDE9\uD83C\uDDFF",ec:"\uD83C\uDDEA\uD83C\uDDE8",ee:"\uD83C\uDDEA\uD83C\uDDEA",eg:"\uD83C\uDDEA\uD83C\uDDEC",eh:"\uD83C\uDDEA\uD83C\uDDED",er:"\uD83C\uDDEA\uD83C\uDDF7",es:"\uD83C\uDDEA\uD83C\uDDF8",et:"\uD83C\uDDEA\uD83C\uDDF9",eu:"\uD83C\uDDEA\uD83C\uDDFA",fi:"\uD83C\uDDEB\uD83C\uDDEE",fj:"\uD83C\uDDEB\uD83C\uDDEF",fk:"\uD83C\uDDEB\uD83C\uDDF0",fm:"\uD83C\uDDEB\uD83C\uDDF2",fo:"\uD83C\uDDEB\uD83C\uDDF4",fr:"\uD83C\uDDEB\uD83C\uDDF7",ga:"\uD83C\uDDEC\uD83C\uDDE6",gb:"\uD83C\uDDEC\uD83C\uDDE7",gd:"\uD83C\uDDEC\uD83C\uDDE9",ge:"\uD83C\uDDEC\uD83C\uDDEA",gf:"\uD83C\uDDEC\uD83C\uDDEB",gg:"\uD83C\uDDEC\uD83C\uDDEC",gh:"\uD83C\uDDEC\uD83C\uDDED",gi:"\uD83C\uDDEC\uD83C\uDDEE",gl:"\uD83C\uDDEC\uD83C\uDDF1",gm:"\uD83C\uDDEC\uD83C\uDDF2",gn:"\uD83C\uDDEC\uD83C\uDDF3",gp:"\uD83C\uDDEC\uD83C\uDDF5",gq:"\uD83C\uDDEC\uD83C\uDDF6",gr:"\uD83C\uDDEC\uD83C\uDDF7",gs:"\uD83C\uDDEC\uD83C\uDDF8",gt:"\uD83C\uDDEC\uD83C\uDDF9",gu:"\uD83C\uDDEC\uD83C\uDDFA",gw:"\uD83C\uDDEC\uD83C\uDDFC",gy:"\uD83C\uDDEC\uD83C\uDDFE",hk:"\uD83C\uDDED\uD83C\uDDF0",hm:"\uD83C\uDDED\uD83C\uDDF2",hn:"\uD83C\uDDED\uD83C\uDDF3",hr:"\uD83C\uDDED\uD83C\uDDF7",ht:"\uD83C\uDDED\uD83C\uDDF9",hu:"\uD83C\uDDED\uD83C\uDDFA",id:"\uD83C\uDDEE\uD83C\uDDE9",ie:"\uD83C\uDDEE\uD83C\uDDEA",il:"\uD83C\uDDEE\uD83C\uDDF1",im:"\uD83C\uDDEE\uD83C\uDDF2",in:"\uD83C\uDDEE\uD83C\uDDF3",io:"\uD83C\uDDEE\uD83C\uDDF4",iq:"\uD83C\uDDEE\uD83C\uDDF6",ir:"\uD83C\uDDEE\uD83C\uDDF7",is:"\uD83C\uDDEE\uD83C\uDDF8",it:"\uD83C\uDDEE\uD83C\uDDF9",je:"\uD83C\uDDEF\uD83C\uDDEA",jm:"\uD83C\uDDEF\uD83C\uDDF2",jo:"\uD83C\uDDEF\uD83C\uDDF4",jp:"\uD83C\uDDEF\uD83C\uDDF5",ke:"\uD83C\uDDF0\uD83C\uDDEA",kg:"\uD83C\uDDF0\uD83C\uDDEC",kh:"\uD83C\uDDF0\uD83C\uDDED",ki:"\uD83C\uDDF0\uD83C\uDDEE",km:"\uD83C\uDDF0\uD83C\uDDF2",kn:"\uD83C\uDDF0\uD83C\uDDF3",kp:"\uD83C\uDDF0\uD83C\uDDF5",kr:"\uD83C\uDDF0\uD83C\uDDF7",kw:"\uD83C\uDDF0\uD83C\uDDFC",ky:"\uD83C\uDDF0\uD83C\uDDFE",kz:"\uD83C\uDDF0\uD83C\uDDFF",la:"\uD83C\uDDF1\uD83C\uDDE6",lb:"\uD83C\uDDF1\uD83C\uDDE7",lc:"\uD83C\uDDF1\uD83C\uDDE8",li:"\uD83C\uDDF1\uD83C\uDDEE",lk:"\uD83C\uDDF1\uD83C\uDDF0",lr:"\uD83C\uDDF1\uD83C\uDDF7",ls:"\uD83C\uDDF1\uD83C\uDDF8",lt:"\uD83C\uDDF1\uD83C\uDDF9",lu:"\uD83C\uDDF1\uD83C\uDDFA",lv:"\uD83C\uDDF1\uD83C\uDDFB",ly:"\uD83C\uDDF1\uD83C\uDDFE",ma:"\uD83C\uDDF2\uD83C\uDDE6",mc:"\uD83C\uDDF2\uD83C\uDDE8",md:"\uD83C\uDDF2\uD83C\uDDE9",me:"\uD83C\uDDF2\uD83C\uDDEA",mf:"\uD83C\uDDF2\uD83C\uDDEB",mg:"\uD83C\uDDF2\uD83C\uDDEC",mh:"\uD83C\uDDF2\uD83C\uDDED",mk:"\uD83C\uDDF2\uD83C\uDDF0",ml:"\uD83C\uDDF2\uD83C\uDDF1",mm:"\uD83C\uDDF2\uD83C\uDDF2",mn:"\uD83C\uDDF2\uD83C\uDDF3",mo:"\uD83C\uDDF2\uD83C\uDDF4",mp:"\uD83C\uDDF2\uD83C\uDDF5",mq:"\uD83C\uDDF2\uD83C\uDDF6",mr:"\uD83C\uDDF2\uD83C\uDDF7",ms:"\uD83C\uDDF2\uD83C\uDDF8",mt:"\uD83C\uDDF2\uD83C\uDDF9",mu:"\uD83C\uDDF2\uD83C\uDDFA",mv:"\uD83C\uDDF2\uD83C\uDDFB",mw:"\uD83C\uDDF2\uD83C\uDDFC",mx:"\uD83C\uDDF2\uD83C\uDDFD",my:"\uD83C\uDDF2\uD83C\uDDFE",mz:"\uD83C\uDDF2\uD83C\uDDFF",na:"\uD83C\uDDF3\uD83C\uDDE6",nc:"\uD83C\uDDF3\uD83C\uDDE8",ne:"\uD83C\uDDF3\uD83C\uDDEA",nf:"\uD83C\uDDF3\uD83C\uDDEB",ng:"\uD83C\uDDF3\uD83C\uDDEC",ni:"\uD83C\uDDF3\uD83C\uDDEE",nl:"\uD83C\uDDF3\uD83C\uDDF1",no:"\uD83C\uDDF3\uD83C\uDDF4",np:"\uD83C\uDDF3\uD83C\uDDF5",nr:"\uD83C\uDDF3\uD83C\uDDF7",nu:"\uD83C\uDDF3\uD83C\uDDFA",nz:"\uD83C\uDDF3\uD83C\uDDFF",om:"\uD83C\uDDF4\uD83C\uDDF2",pa:"\uD83C\uDDF5\uD83C\uDDE6",pe:"\uD83C\uDDF5\uD83C\uDDEA",pf:"\uD83C\uDDF5\uD83C\uDDEB",pg:"\uD83C\uDDF5\uD83C\uDDEC",ph:"\uD83C\uDDF5\uD83C\uDDED",pk:"\uD83C\uDDF5\uD83C\uDDF0",pl:"\uD83C\uDDF5\uD83C\uDDF1",pm:"\uD83C\uDDF5\uD83C\uDDF2",pn:"\uD83C\uDDF5\uD83C\uDDF3",pr:"\uD83C\uDDF5\uD83C\uDDF7",ps:"\uD83C\uDDF5\uD83C\uDDF8",pt:"\uD83C\uDDF5\uD83C\uDDF9",pw:"\uD83C\uDDF5\uD83C\uDDFC",py:"\uD83C\uDDF5\uD83C\uDDFE",qa:"\uD83C\uDDF6\uD83C\uDDE6",re:"\uD83C\uDDF7\uD83C\uDDEA",ro:"\uD83C\uDDF7\uD83C\uDDF4",rs:"\uD83C\uDDF7\uD83C\uDDF8",ru:"\uD83C\uDDF7\uD83C\uDDFA",rw:"\uD83C\uDDF7\uD83C\uDDFC",sa:"\uD83C\uDDF8\uD83C\uDDE6",sb:"\uD83C\uDDF8\uD83C\uDDE7",sc:"\uD83C\uDDF8\uD83C\uDDE8",sd:"\uD83C\uDDF8\uD83C\uDDE9",se:"\uD83C\uDDF8\uD83C\uDDEA",sg:"\uD83C\uDDF8\uD83C\uDDEC",sh:"\uD83C\uDDF8\uD83C\uDDED",si:"\uD83C\uDDF8\uD83C\uDDEE",sj:"\uD83C\uDDF8\uD83C\uDDEF",sk:"\uD83C\uDDF8\uD83C\uDDF0",sl:"\uD83C\uDDF8\uD83C\uDDF1",sm:"\uD83C\uDDF8\uD83C\uDDF2",sn:"\uD83C\uDDF8\uD83C\uDDF3",so:"\uD83C\uDDF8\uD83C\uDDF4",sr:"\uD83C\uDDF8\uD83C\uDDF7",ss:"\uD83C\uDDF8\uD83C\uDDF8",st:"\uD83C\uDDF8\uD83C\uDDF9",sv:"\uD83C\uDDF8\uD83C\uDDFB",sx:"\uD83C\uDDF8\uD83C\uDDFD",sy:"\uD83C\uDDF8\uD83C\uDDFE",sz:"\uD83C\uDDF8\uD83C\uDDFF",tc:"\uD83C\uDDF9\uD83C\uDDE8",td:"\uD83C\uDDF9\uD83C\uDDE9",tf:"\uD83C\uDDF9\uD83C\uDDEB",tg:"\uD83C\uDDF9\uD83C\uDDEC",th:"\uD83C\uDDF9\uD83C\uDDED",tj:"\uD83C\uDDF9\uD83C\uDDEF",tk:"\uD83C\uDDF9\uD83C\uDDF0",tl:"\uD83C\uDDF9\uD83C\uDDF1",tm:"\uD83C\uDDF9\uD83C\uDDF2",tn:"\uD83C\uDDF9\uD83C\uDDF3",to:"\uD83C\uDDF9\uD83C\uDDF4",tr:"\uD83C\uDDF9\uD83C\uDDF7",tt:"\uD83C\uDDF9\uD83C\uDDF9",tv:"\uD83C\uDDF9\uD83C\uDDFB",tw:"\uD83C\uDDF9\uD83C\uDDFC",tz:"\uD83C\uDDF9\uD83C\uDDFF",ua:"\uD83C\uDDFA\uD83C\uDDE6",ug:"\uD83C\uDDFA\uD83C\uDDEC",um:"\uD83C\uDDFA\uD83C\uDDF2",us:"\uD83C\uDDFA\uD83C\uDDF8",uy:"\uD83C\uDDFA\uD83C\uDDFE",uz:"\uD83C\uDDFA\uD83C\uDDFF",va:"\uD83C\uDDFB\uD83C\uDDE6",vc:"\uD83C\uDDFB\uD83C\uDDE8",ve:"\uD83C\uDDFB\uD83C\uDDEA",vg:"\uD83C\uDDFB\uD83C\uDDEC",vi:"\uD83C\uDDFB\uD83C\uDDEE",vn:"\uD83C\uDDFB\uD83C\uDDF3",vu:"\uD83C\uDDFB\uD83C\uDDFA",wf:"\uD83C\uDDFC\uD83C\uDDEB",ws:"\uD83C\uDDFC\uD83C\uDDF8",ye:"\uD83C\uDDFE\uD83C\uDDEA",yt:"\uD83C\uDDFE\uD83C\uDDF9",za:"\uD83C\uDDFF\uD83C\uDDE6",zm:"\uD83C\uDDFF\uD83C\uDDF2",zw:"\uD83C\uDDFF\uD83C\uDDFC"};function o(t){return t in i?i[t]:r.test(t)?t:void 0}},function(t,e,n){n.r(e),n.d(e,"default",function(){return a});var r=n(0),i=n(45);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n,o,s){var a=Number.MAX_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;if(s)a=-t.root.totalSubtreeLength,l=-t.root.totalSubtreeLength,u=t.root.totalSubtreeLength,c=t.root.totalSubtreeLength;else{var d=Object(i.default)(t.postorderTraversal,e,n,"bx","by");a=d.min[0],l=d.min[1],u=d.max[0],c=d.max[1]}for(var h=(u+a)/2,f=(c+l)/2,p=e;p<=n;p++){var g=t.postorderTraversal[p];g.bx-=h,g.by-=f,o&&(g.bcx-=h,g.bcy-=f),g.angleDegrees=360-g.angle/r.Angles.Degrees360*360}return{min:[a-h,l-f],max:[u-h,c-f]}}function a(t,e,n){var i=t.root.postIndex-t.root.totalNodes+1,a=t.root.postIndex;if(e===r.TreeTypes.Circular){for(var l=0,u=i;u<a;u++){var c=t.postorderTraversal[u];if(c.isLeaf)c.angle=l*(r.Angles.Degrees360/t.root.visibleLeaves);else{var d=c.children[0].angle,h=c.children[c.children.length-1].angle;c.angle=(h+d)/2}c.coangle=c.angle+r.Angles.Degrees90;var f=Math.cos(c.angle),p=Math.sin(c.angle);c.bx=c.distanceFromRoot*f,c.by=c.distanceFromRoot*p,c.bcx=c.parent.distanceFromRoot*f,c.bcy=c.parent.distanceFromRoot*p,c.inverted=c.angle>r.Angles.Degrees90&&c.angle<=r.Angles.Degrees270,!c.isHidden&&(c.isLeaf||c.isCollapsed)&&(l+=1)}return t.root.bx=0,t.root.by=0,t.root.inverted=t.root.angle>r.Angles.Degrees90&&t.root.angle<=r.Angles.Degrees270,s(t,i,a,!0,n)}if(e===r.TreeTypes.Diagonal){for(var g=0,m=i;m<=a;m++){var v=t.postorderTraversal[m];if(v.angle=r.Angles.Degrees0,v.inverted=!1,v.bx=(t.root.visibleLeaves-v.visibleLeaves)/2,v.isLeaf)v.by=g;else if(v.isCollapsed)v.by=g;else{var _=v.visibleLeaves-v.children[0].visibleLeaves;v.by=v.children[0].by+_/2}v.isLeaf&&(g+=1)}return s(t,i,a)}if(e===r.TreeTypes.Hierarchical){for(var y=0,b=i;b<=a;b++){var x=t.postorderTraversal[b];if(x.angle=r.Angles.Degrees90,x.inverted=!1,x.by=x.distanceFromRoot,x.isLeaf)x.bx=-1*y;else if(x.isCollapsed)x.bx=y;else{var E=x.children[0].bx,T=x.children[x.children.length-1].bx;x.bx=(T+E)/2}!x.isHidden&&(x.isLeaf||x.isCollapsed)&&(y+=1)}return s(t,i,a)}if(e===r.TreeTypes.Radial){for(var S=0,A=i;A<=a;A++){var P=t.postorderTraversal[A];if(P.isLeaf)P.angle=S*(r.Angles.Degrees360/t.root.visibleLeaves);else{var C,w=0,D=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(P.children);try{for(D.s();!(C=D.n()).done;){var L=C.value;w+=L.angle*L.totalLeaves}}catch(t){D.e(t)}finally{D.f()}P.angle=w/P.totalLeaves}!P.isHidden&&(P.isLeaf||P.isCollapsed)&&(S+=1)}t.root.bx=t.root.branchLength*Math.cos(t.root.angle),t.root.by=t.root.branchLength*Math.sin(t.root.angle),t.root.inverted=t.root.angle>r.Angles.Degrees90&&t.root.angle<=r.Angles.Degrees270,t.root.quarter=Math.floor(t.root.angle/r.Angles.Degrees90)+1;for(var R=1;R<t.root.totalNodes;R++){var O=t.preorderTraversal[t.root.preIndex+R];O.bx=O.parent.bx+O.branchLength*Math.cos(O.angle),O.by=O.parent.by+O.branchLength*Math.sin(O.angle),O.inverted=O.angle>r.Angles.Degrees90&&O.angle<=r.Angles.Degrees270,O.quarter=Math.floor(O.angle/r.Angles.Degrees90)+1}return s(t,i,a)}if(e===r.TreeTypes.Rectangular){for(var I=0,M=i;M<=a;M++){var F=t.postorderTraversal[M];if(F.angle=r.Angles.Degrees0,F.inverted=!1,F.bx=F.distanceFromRoot,F.isLeaf)F.by=I;else if(F.isCollapsed)F.by=I;else{var N=F.children[0].by,B=F.children[F.children.length-1].by;F.by=(B+N)/2}!F.isHidden&&(F.isLeaf||F.isCollapsed)&&(I+=1)}return s(t,i,a)}throw Error("Invalid tree type")}},function(t,e,n){function r(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"x",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"y",o=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,u=e;u<=n;u++){var c=t[u];c[r]<o&&(o=c[r]),c[i]<s&&(s=c[i]),c[r]>a&&(a=c[r]),c[i]>l&&(l=c[i])}var d=(a+o)/2,h=(l+s)/2,f=a-o,p=l-s;return{min:[o,s],max:[a,l],centre:[d,h],width:f,height:p}}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.trimQuotes,i=void 0===n||n;performance.mark("getPostorderTraversal");var o=function(t){for(var e=[],n=[t];n.length;){var r=n.pop();r.children&&Array.prototype.push.apply(n,r.children),e.push(r)}return e.reverse()}(t);performance.measure("    getPostorderTraversal","getPostorderTraversal"),performance.mark("getPreorderTraversal");var s=function(t){for(var e=[],n=[t];n.length;){var r=n.shift();e.push(r),r.children&&Array.prototype.unshift.apply(n,r.children)}return e}(t);if(performance.measure("    getPreorderTraversal","getPreorderTraversal"),o.every(function(t){return 0===(t.branchLength||t.branch_length||0)})){t.branchLength=0;for(var a=0;a<s.length;a++){var l=s[a];if(l.children){var u,c=r(l.children);try{for(c.s();!(u=c.n()).done;)u.value.branchLength=1e-9}catch(t){c.e(t)}finally{c.f()}}}}performance.mark("bottom-up traversal");for(var d=0;d<o.length;d++){var h=o[d];if(h.postIndex=d,h.isLeaf=!Array.isArray(h.children),h.branchLength=Math.abs(h.branchLength||h.branch_length||0),delete h.branch_length,h.isLeaf&&"string"==typeof h.name&&(h.id=i?h.name.trim().replace(/^['"]|['"]$/g,""):h.name,delete h.name),h.totalNodes=1,h.totalLeaves=1,h.totalSubtreeLength=0,!h.isLeaf){h.totalNodes=1,h.totalLeaves=0;var f,p=0,g=r(h.children);try{for(g.s();!(f=g.n()).done;){var m=f.value;h.totalNodes+=m.totalNodes,h.totalLeaves+=m.totalLeaves,m.totalSubtreeLength+m.branchLength>p&&(p=m.totalSubtreeLength+m.branchLength),m.parent=h}}catch(t){g.e(t)}finally{g.f()}h.totalSubtreeLength=p}}performance.measure("    bottom-up traversal","bottom-up traversal"),performance.mark("top-down traversal");for(var v={},_=0;_<s.length;_++){var y=s[_];y.preIndex=_,y.id||(y.id=_.toString()),v[y.id]=y,y.visibleLeaves=y.totalLeaves,y.isCollapsed=!1,y.isHidden=!1}return performance.measure("    top-down traversal","top-down traversal"),{nodeById:v,rootNode:t,postorderTraversal:o,preorderTraversal:s}}n.r(e),n.d(e,"default",function(){return o})},function(t,e,n){n.r(e),n.d(e,"default",function(){return x});var r=n(6),i=n.n(r),o=n(8),s=n.n(o),a=n(9),l=n.n(a),u=n(15),c=n.n(u),d=n(10),h=n.n(d),f=n(11),p=n.n(f),g=n(3),m=n.n(g),v=n(7),_=n(16);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function x(t){return function(e){h()(i,e);var n,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=m()(i);return t=n?Reflect.construct(e,arguments,m()(this).constructor):e.apply(this,arguments),p()(this,t)});function i(){return s()(this,i),r.apply(this,arguments)}return l()(i,[{key:"getPointFromEvent",value:function(t){var e=this.getCenter(t);return!!this.isPointInBounds(e,t)&&e}},{key:"calculateScaleDeltaFromWheelDelta",value:function(t){var e=2/(1+Math.exp(-Math.abs(.01*t)));return t<0&&0!==e?1/e:e}},{key:"_onWheel",value:function(e){if(e.srcEvent.metaKey||e.srcEvent.ctrlKey){e.preventDefault();var n=this.getPointFromEvent(e);if(n){var r=this.calculateScaleDeltaFromWheelDelta(e.delta),o=Object(_.default)(r),s=t.getBranchZoom()+o;t.setBranchZoom(s,n)}return!0}if(e.srcEvent.altKey||e.srcEvent.shiftKey){e.preventDefault();var a=this.getPointFromEvent(e);if(a){var l=this.calculateScaleDeltaFromWheelDelta(e.delta),u=Object(_.default)(l),d=t.getStepZoom()+u;t.setStepZoom(d,a)}return!0}return c()(m()(i.prototype),"_onWheel",this).call(this,e)}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getCanvasCentrePoint(),r=this.calculateScaleDeltaFromWheelDelta(e);this.zoom(r,n)}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getCanvasCentrePoint(),r=this.calculateScaleDeltaFromWheelDelta(-e);this.zoom(r,n)}},{key:"zoom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getCanvasCentrePoint(),r=this.ControllerState;this._controllerState=new r(b(b({makeViewport:this.makeViewport},this.controllerStateProps),this._state));var i=this._controllerState.zoom({pos:n,scale:e});this.updateViewport(i,{transitionDuration:0},{isZooming:!0,isPanning:!0})}}]),i}(v.OrthographicController)}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e,n){var r=t[e];t[e]=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return n.call(t,r.bind(t),i)}}n.r(e),e.default=function(t,e,n){var o,s=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t))){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(e);try{for(s.s();!(o=s.n()).done;){var a=o.value;if("function"!=typeof a)throw Error("Invalid plugin");a.call(t,t,i.bind(t,t),n)}}catch(t){s.e(t)}finally{s.f()}}},function(t,e,n){n.r(e);var r=n(55),i=n.n(r),o=n(46),s=["type","data"],a=n(30);e.default=function(t){performance.mark("parse");var e=t;"string"==typeof t&&(e={type:"newick",data:t}),Array.isArray(t)&&(e={type:"jewick",data:t});var n=e,r=n.type,l=n.data,u=i()(n,s),c=null;if("newick"===r||void 0===r)performance.mark("parse newick"),c=a.parse_newick(l),performance.measure("  parse newick","parse newick");else if("jewick"===r||void 0===r)performance.mark("parse jewick"),c=function(t){let e;let n={children:[],name:"",branch_length:0},r=[[n,t]];for(;r.length;){let[t,n]=r.shift();for(let i of n)"string"==typeof i?(e={name:"",branch_length:0},t.children.push(e),e.name=i):"number"==typeof i?e.branch_length=i:Array.isArray(i)&&(e={children:[],name:"",branch_length:0},t.children.push(e),r.push([e,i]))}return n}(l),performance.measure("  parse jewick","parse jewick");else{if("biojs"!==r)throw Error("Source type is not supported: ".concat(r));c=l}performance.mark("treeTraversal");var d=Object(o.default)(c,u);return performance.measure("  treeTraversal","treeTraversal"),performance.measure("parse","parse"),d}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(52);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(51),i=n(56);function o(e,n,s){return i()?t.exports=o=Reflect.construct:t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.exports.default=t.exports,t.exports.__esModule=!0,o.apply(null,arguments)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(91);t.exports=function(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){function r(t,e,n){var r={id:t,isVisible:e,renderLayer:n};return this.layers.push(r),r}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(18);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(){var t,e=this.getGraphAfterLayout(),n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,void 0)}}(t))){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(e.postorderTraversal);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.children&&o.children.sort(function(t,e){return e.totalNodes-t.totalNodes})}}catch(t){n.e(t)}finally{n.f()}this.setSource(Object(r.default)(e.root),this.props.source)}},function(t,e,n){var r=n(52);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){n.r(e);var r=n(0);e.default=function(){switch(this.getTreeType()){case r.TreeTypes.Rectangular:return"x";case r.TreeTypes.Hierarchical:return"y";case r.TreeTypes.Circular:case r.TreeTypes.Radial:return"xy";default:return}}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(19);function i(t){var e=this.findNodeById(t);if(e){var n=Object(r.default)(this.props.collapsedIds,e.id);this.setProps({collapsedIds:n})}}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(18);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(){var t,e=this.getGraphAfterLayout(),n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,void 0)}}(t))){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(e.postorderTraversal);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.children&&o.children.sort(function(t,e){return t.totalNodes-e.totalNodes})}}catch(t){n.e(t)}finally{n.f()}this.setSource(Object(r.default)(e.root),this.props.source)}},function(t,e,n){function r(){this.deck.finalize(),this.deck=void 0,delete this.deck,this.cache.clear(),this.cache=void 0,delete this.cache,this.view=void 0,delete this.view,this.layers=void 0,delete this.layers}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t,e){return JSON.stringify(this.props,e,t)}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getGraphAfterLayout(),r=t?this.findNodeById(t):n.root,i=e.excludeCollapsed,o=void 0===i||i,s=[],a=r.postIndex-r.totalNodes+1;a<r.postIndex;a++){var l=n.postorderTraversal[a];if(l.isLeaf)s.push("".concat(l.label||l.id,":").concat(l.branchLength));else if(o&&l.isCollapsed)s.push("[".concat(l.totalLeaves," hidden ").concat(1===l.totalLeaves?"leaf":"leaves","]:").concat(l.branchLength));else{var u=s.splice(s.length-l.children.length,l.children.length);s.push("(".concat(u.join(","),"):").concat(l.branchLength))}}return"(".concat(s.join(","),");")}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getGraphAfterLayout(),r=t?this.findNodeById(t):n.root,i=e.excludeCollapsed,o=void 0===i||i,s=[],a=r.postIndex-r.totalNodes+1;a<r.postIndex;a++){var l=n.postorderTraversal[a];if(l.isLeaf)s.push("".concat(l.label||l.id)),s.push(l.branchLength);else if(o&&l.isCollapsed)strings.push("[".concat(l.totalLeaves," hidden ").concat(1===l.totalLeaves?"leaf":"leaves","]")),s.push(l.branchLength);else{var u=s.splice(s.length-2*l.children.length,2*l.children.length);s.push(u),s.push(l.branchLength)}}return s}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(){this.deck.setProps({glOptions:{preserveDrawingBuffer:!0}}),this.deck.redraw(!0);var t=this.deck.canvas.toDataURL();return this.deck.setProps({glOptions:void 0}),this.deck.redraw(!0),t}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return b});var r=n(13),i=n.n(r),o=n(31),s=n(32),a=n(33),l=n(22),u=n(34),c=n(35),d=n(36),h=n(37),f=n(40),p=n(42),g=n(21),m=n(0);function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n,r){return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}function b(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.getGraphAfterLayout(),n=this.getCanvasSize(),r=this.getTreeType(),_=.5*this.getNodeSize(),b=[],x=this.getDrawingArea(),E=[x.width/2+x.left,x.height/2+x.top];b.push('<svg viewBox="0 0 '.concat(n.width," ").concat(n.height,'" xmlns="http://www.w3.org/2000/svg">\n')),b.push('<g transform="translate('.concat(E.join(" "),')" >\n'));var T=this.getStrokeWidth(),S=Object(g.a)(Object(f.a)(this));b.push('<g stroke="'.concat(S,'" stroke-width="').concat(T,'" >\n'));for(var A=e.firstIndex+1;A<e.lastIndex;A++){var P=e.preorderTraversal[A];if(r===m.TreeTypes.Circular){if(b.push('<line x1="'.concat(P.x,'" y1="').concat(P.y,'" x2="').concat(P.cx,'" y2="').concat(P.cy,'"  />\n')),P.children&&P.children.length&&!P.isCollapsed){var C=P.children[0],w=P.children[P.children.length-1];b.push(function(t,e,n,r,i){var o=y(t,e,n,i),s=y(t,e,n,r),a=i-r<=Math.PI?"0":"1",l=["M",o.x,o.y,"A",n,n,0,a,0,s.x,s.y];return'<path fill="none" d="'.concat(l.join(" "),'" />')}(e.root.x,e.root.y,P.dist,C.angle,w.angle))}}else r===m.TreeTypes.Diagonal||r===m.TreeTypes.Radial?b.push('<line x1="'.concat(P.x,'" y1="').concat(P.y,'" x2="').concat(P.parent.x,'" y2="').concat(P.parent.y,'"  />\n')):r===m.TreeTypes.Hierarchical?(b.push('<line x1="'.concat(P.x,'" y1="').concat(P.y,'" x2="').concat(P.x,'" y2="').concat(P.parent.y,'"  />\n')),b.push('<line x1="'.concat(P.x,'" y1="').concat(P.parent.y,'" x2="').concat(P.parent.x,'" y2="').concat(P.parent.y,'"  />\n'))):r===m.TreeTypes.Rectangular&&(b.push('<line x1="'.concat(P.x,'" y1="').concat(P.y,'" x2="').concat(P.parent.x,'" y2="').concat(P.y,'"  />\n')),b.push('<line x1="'.concat(P.parent.x,'" y1="').concat(P.y,'" x2="').concat(P.parent.x,'" y2="').concat(P.parent.y,'"  />\n')));P.isCollapsed&&(A+=P.totalNodes-1)}if(b.push("</g>\n"),this.props.showShapes){var D=this.props.showShapeBorders,L="",R="";D&&(L=Object(a.a)(this),R=Object(g.a)(Object(l.a)(this))),b.push("<g>\n");for(var O=e.firstIndex;O<e.lastIndex;O++){var I=e.preorderTraversal[O];I.isLeaf&&I.shape&&!I.isHidden&&(b.push(Object(p.default)(I.shape,I.x,I.y,_,Object(g.a)(I.fillColour),R,L)),b.push("\n")),I.isCollapsed&&(O+=I.totalNodes-1)}b.push("</g>\n")}if(this.props.showLabels&&this.props.showLeafLabels){var M=Object(o.a)(this),F=Object(s.a)(this),N=this.getFontFamily(),B=this.getFontSize();b.push('<g font-family="'.concat(N.replace(/"/g,"'"),'" font-size="').concat(B,'">\n'));var k,j=v(M);try{for(j.s();!(k=j.n()).done;){var z=k.value,U=F(z),G=i()(U,2),V=G[0],W=G[1],H=z.angle/m.Angles.Degrees360*360+(z.inverted?180:0);b.push('<text x="'.concat(V,'" y="').concat(W,'" text-anchor="').concat(z.inverted?"end":"start",'" dominant-baseline="middle" transform="rotate(').concat(H,",").concat(V,",").concat(W,')">').concat(z.label,"</text>\n"))}}catch(t){j.e(t)}finally{j.f()}b.push("</g>\n")}var X,Y=this.getPixelOffsets().length,q=this.getBlockSize(),Z=q/2,K=this.getStepScale(),J=!this.isOrthogonal()||K>q?q:K,Q=J/2,$=v(Object(u.a)(this));try{for($.s();!(X=$.n()).done;){var tt=X.value,te=tt.node.angle/m.Angles.Degrees360*360+(tt.node.inverted?180:0),tn=tt.position[0]+(tt.offsetX+Y)*Math.cos(tt.node.angle),tr=tt.position[1]+(tt.offsetX+Y)*Math.sin(tt.node.angle);b.push('<rect x="'.concat(tn-Z,'" y="').concat(tr-Q,'" width="').concat(q,'" height="').concat(J,'" transform="rotate(').concat(te,",").concat(tn,",").concat(tr,')" fill="').concat(Object(g.a)(tt.colour),'" />\n'))}}catch(t){$.e(t)}finally{$.f()}if(this.hasMetadataHeaders()){var ti=Object(c.a)(this),to=this.getFontFamily(),ts=Object(h.a)(this),ta=Object(d.a)(this);b.push('<g font-family="'.concat(to.replace(/"/g,"'"),'" font-size="').concat(ts,'">\n'));var tl,tu=v(ti);try{for(tu.s();!(tl=tu.n()).done;){var tc=tl.value,td=ta(tc),th=i()(td,2),tf=th[0],tp=th[1],tg=i()(tc.position,2),tm=tg[0],tv=tg[1],t_=tm+tf,ty=tv+tp,tb=tc.angle-(tc.angle%360==0?0:180);b.push('<text x="'.concat(t_,'" y="').concat(ty,'" text-anchor="').concat(tc.inverted?"end":"start",'" dominant-baseline="middle" transform="rotate(').concat(tb,",").concat(t_,",").concat(ty,')">').concat(tc.text,"</text>\n"))}}catch(t){tu.e(t)}finally{tu.f()}b.push("</g>\n")}return b.push("</g>\n"),b.push("</svg>\n"),t?new Blob(b,{type:"image/svg+xml"}):(b.centre=E,b)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){function r(t){var e,n=this.getGraphAfterLayout();"string"==typeof t||"number"==typeof t?e=t:t&&"id"in t&&(e=t.id);var r=n.ids[e];return null!=r?r:void 0}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){this.setProps({branchZoom:r.a.branchZoom,centre:r.a.centre,stepZoom:r.a.stepZoom,zoom:r.a.zoom})}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(0),i=n(1);function o(){switch(this.getTreeType()){case r.TreeTypes.Circular:case r.TreeTypes.Hierarchical:case r.TreeTypes.Rectangular:return this.props.alignLabels||i.a.alignLabels;case r.TreeTypes.Diagonal:case r.TreeTypes.Radial:return!1;default:return}}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.blockHeaderFontSize)&&void 0!==t?t:r.a.blockHeaderFontSize}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){return this.props.blockPadding||r.a.blockPadding}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){return this.props.blockSize||r.a.blockSize}},function(t,e,n){n.r(e),n.d(e,"default",function(){return l});var r=n(0),i=n(2),o=n(12),s=Object(i.default)(function(t){return t.getGraphBeforeLayout()},function(t){return t.getTreeType()},function(t){return t.getDrawingArea()},function(t,e,n){if(t.root.totalSubtreeLength>0)switch(e){case r.TreeTypes.Diagonal:case r.TreeTypes.Rectangular:return n.width/t.root.totalSubtreeLength;case r.TreeTypes.Hierarchical:return n.height/t.root.totalSubtreeLength;case r.TreeTypes.Circular:case r.TreeTypes.Radial:var i=t.width,o=t.height;return n.width/i>n.height/o?n.height/o:n.width/i}throw Error("Cannot compute default branch scale")});s.displayName="branchRatio";var a=Object(i.default)(s,function(t){return t.getBranchZoom()},function(t,e){return t*Object(o.default)(e)});function l(){return a(this)}a.displayName="branch-scale"},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.branchZoom)&&void 0!==t?t:r.a.branchZoom}},function(t,e,n){function r(){return[this.props.size.width/2,this.props.size.height/2]}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e);var r=n(1);e.default=function(){return this.props.size||r.a.size}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(1),i=Object(n(2).default)(function(t){return t.getCanvasSize()},function(t){return t.props.treeToCanvasRatio||r.a.treeToCanvasRatio},function(t){return t.getPadding()},function(t){return t.getPixelOffsets()},function(t,e,n,r){var i=n+r.left,o=n+r.top,s=t.width-n-r.right,a=t.height-n-r.bottom,l=s-i;if(l<t.width*e){var u=t.width*(.5-e/2),c=t.width*(.5+e/2);i>u&&s<c?(i=u,s=c):i>u?i=t.width*e:s<c&&(s=t.width*e),l=s-i}var d=a-o;if(d<t.height*e){var h=t.height*(.5-e/2),f=t.height*(.5+e/2);o>h&&a<f?(o=h,a=f):o>h?o=t.height*e:a<f&&(a=t.height*e),d=a-o}return{width:l,height:d,left:i,top:o,right:s,bottom:a}});function o(){return i(this)}i.displayName="drawing-area"},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(1),i=n(5);function o(){return Object(i.default)(this.props.fillColour||r.a.fillColour)}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){return this.props.fontFamily||r.a.fontFamily}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){return this.props.fontSize||r.a.fontSize}},function(t,e,n){n.r(e),n.d(e,"default",function(){return c});var r=n(6),i=n.n(r),o=n(0);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(t,e,n){return{min:[t.min[0]*e,t.min[1]*n],max:[t.max[0]*e,t.max[1]*n]}}var u=Object(n(2).default)(function(t){return t.getGraphBeforeLayout()},function(t){return t.getTreeType()},function(t){return t.getBranchScale()},function(t){return t.getStepScale()},function(t,e,n,r){var i=t.root.postIndex-t.root.totalNodes+1,s=t.root.postIndex;if(e===o.TreeTypes.Circular){t.root.x=t.root.bx*n,t.root.y=t.root.by*n;for(var u=0;u<t.root.totalNodes;u++){var c=t.preorderTraversal[t.root.preIndex+u];c.x=c.bx*n,c.y=c.by*n,c.dist=c.distanceFromRoot*n,c.cx=c.bcx*n,c.cy=c.bcy*n}return a(a({},t),{},{bounds:l(t.bounds,n,n)})}if(e===o.TreeTypes.Diagonal){t.root.x=t.root.bx*r,t.root.y=t.root.by*r;for(var d=1;d<t.root.totalNodes;d++){var h=t.preorderTraversal[t.root.preIndex+d];h.x=h.bx*r,h.y=h.by*r}return a(a({},t),{},{bounds:l(t.bounds,n,r)})}if(e===o.TreeTypes.Hierarchical){for(var f=i;f<=s;f++){var p=t.postorderTraversal[f];p.x=p.bx*r,p.y=p.by*n}return a(a({},t),{},{bounds:l(t.bounds,n,r)})}if(e===o.TreeTypes.Radial){t.root.x=t.root.bx*n,t.root.y=t.root.by*n;for(var g=1;g<t.root.totalNodes;g++){var m=t.preorderTraversal[t.root.preIndex+g];m.x=m.bx*n,m.y=m.by*n}return a(a({},t),{},{bounds:l(t.bounds,n,n)})}if(e===o.TreeTypes.Rectangular){for(var v=i;v<=s;v++){var _=t.postorderTraversal[v];_.x=_.bx*n,_.y=_.by*r}return a(a({},t),{},{bounds:l(t.bounds,n,r)})}throw Error("Invalid tree type")});function c(){return u(this)}u.displayName="graph-after-layout"},function(t,e,n){n.r(e),n.d(e,"default",function(){return c});var r=n(6),i=n.n(r),o=n(2),s=n(44);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var u=Object(o.default)(function(t){return t.getGraphWithoutLayout()},function(t){return t.getTreeType()},function(t){return t.getAlignLeafLabels()&&t.hasLeafLabels()},function(t,e,n){var r=Object(s.default)(t,e,n);return l(l({},t),{},{width:2*Math.max(-r.min[0],r.max[0]),height:2*Math.max(-r.min[1],r.max[1]),bounds:r})});function c(){return u(this)}u.displayName="graph-before-layout"},function(t,e,n){n.r(e),n.d(e,"default",function(){return g});var r=n(6),i=n.n(r),o=n(2),s=n(50),a=n(38);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var d=Object(o.default)(function(t){return t.props.source},function(t){var e=Object(s.default)(t),n=e.nodeById,r=e.rootNode;return{ids:n,postorderTraversal:e.postorderTraversal,preorderTraversal:e.preorderTraversal,source:t,originalRoot:r,originalSource:t.original||t}});d.displayName="parse-source";var h=Object(o.default)(d,function(t){return t.props.rotatedIds},function(t,e){for(var n=new Set(e||[]),r=0;r<t.postorderTraversal.length;r++){var i=t.preorderTraversal[r];i.isRotated&&!n.has(i.id)?(Object(a.default)(t,i),i.isRotated=!1):!i.isRotated&&n.has(i.id)&&(Object(a.default)(t,i),i.isRotated=!0)}return n});h.displayName="rotate-nodes";var f=Object(o.default)(d,function(t){return t.props.collapsedIds},function(t,e){for(var n=new Set(e),r=1;r<t.postorderTraversal.length;r++){var i=t.preorderTraversal[r];i.isCollapsed=n.has(i.id),i.isHidden=i.parent.isCollapsed||i.parent.isHidden}for(var o=0;o<t.postorderTraversal.length;o++){var s=t.postorderTraversal[o];if(s.isLeaf)s.visibleLeaves=1;else if(s.isCollapsed)s.visibleLeaves=1;else{s.visibleLeaves=0;var a,l=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(s.children);try{for(l.s();!(a=l.n()).done;){var u=a.value;s.visibleLeaves+=u.visibleLeaves}}catch(t){l.e(t)}finally{l.f()}}}return n});f.displayName="collapse-nodes";var p=Object(o.default)(d,function(t){return t.props.rootId},h,f,function(t,e){var n=t.ids[e]||t.preorderTraversal[0];n.distanceFromRoot=0;for(var r=1;r<n.totalNodes;r++){var i=t.preorderTraversal[n.preIndex+r];i.distanceFromRoot=i.parent.distanceFromRoot+i.branchLength}for(var o=n.preIndex,s=n.preIndex+n.totalNodes,a=[],l=1;l<n.totalNodes;l++){var c=t.preorderTraversal[n.preIndex+l];c.isLeaf&&a.push(c),c.isCollapsed&&(l+=c.totalNodes-1)}return u(u({},t),{},{root:n,firstIndex:o,lastIndex:s,leaves:a})});function g(){return p(this)}p.displayName="graph-without-layout"},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){n.r(e),n.d(e,"default",function(){return h});var r=n(6),i=n.n(r),o=n(1),s=n(2),a=n(5);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var c={},d=Object(s.default)(function(t){return t.getGraphAfterLayout()},function(t){return t.props.styles||o.a.styles},function(t){return t.props.styleNodeEdges||o.a.styleNodeEdges},function(t){return t.props.showPiecharts||o.a.showPiecharts},function(t){var e;return null!==(e=t.props.nodeShape)&&void 0!==e?e:o.a.nodeShape},function(t){return t.getFillColour()},function(t){return t.getStrokeColour()},function(t,e,n,r,o,s,d){for(var h=t.root.preIndex,f=t.root.preIndex+t.root.totalNodes,p=h;p<f;p++){var g=t.preorderTraversal[p];if(g.isLeaf){var m=e[g.id]||c;g.shape=void 0===m.shape?o:m.shape,g.fillColour=m.fillColour?Object(a.default)(m.fillColour):s,g.strokeColour=n&&m.strokeColour?Object(a.default)(m.strokeColour):d,g.label=void 0===m.label?g.id:m.label}!r&&g.isCollapsed&&(p+=g.totalNodes-1)}if(n)for(var v=t.root.postIndex-t.root.totalNodes+1,_=t.root.postIndex,y=v;y<=_;y++){var b=t.postorderTraversal[y];if(!b.isLeaf){b.strokeColour=b.children[0].strokeColour;var x,E=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(b.children);try{for(E.s();!(x=E.n()).done;)if(x.value.strokeColour!==b.strokeColour){b.strokeColour=d;break}}catch(t){E.e(t)}finally{E.f()}}}return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t)});function h(){return d(this)}d.displayName="graph-with-styles"},function(t,e,n){function r(){var t;return void 0!==(null!==(t=this.props.highlightedId)&&void 0!==t?t:void 0)?this.getGraphAfterLayout().ids[this.props.highlightedId]:null}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(0);function i(){var t=this.getTreeType(),e=this.getCanvasSize(),n=this.getNodeSize(),i=this.getStepScale();switch(t){case r.TreeTypes.Hierarchical:return e.width/(2*i);case r.TreeTypes.Diagonal:case r.TreeTypes.Rectangular:return e.height/(2*i);case r.TreeTypes.Radial:case r.TreeTypes.Circular:return Math.max(e.width,e.height)/n}return Number.MAX_SAFE_INTEGER}},function(t,e,n){n.r(e);var r=n(16);e.default=function(){return Object(r.default)(this.getMaxScale())}},function(t,e,n){function r(){return this.getBlockSize()+this.getBlockPadding()}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.minScale)&&void 0!==t?t:r.a.minScale}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(16);function i(){return Object(r.default)(this.getMinScale())}},function(t,e,n){n.r(e);var r=n(1);e.default=function(){return this.props.nodeSize||r.a.nodeSize}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.padding)&&void 0!==t?t:r.a.padding}},function(t,e,n){n.r(e),n.d(e,"default",function(){return d});var r=n(0),i=n(2),o=n(39);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a=Object(i.default)(function(t){return t.getGraphWithoutLayout()},function(t){return t.props.styles||r.EmptyObject},function(t,e){for(var n="",r=0;r<t.root.totalNodes;r++){var i=t.preorderTraversal[t.root.preIndex+r];if(i.isLeaf&&!i.isHidden){var o=(i.id in e?e[i.id].label:null)||i.label||i.id;o.length>n.length&&(n=o)}}return n});a.displayName="longest-label";var l=Object(i.default)(a,function(t){return t.getFontFamily()},function(t){return t.getFontSize()},o.default);l.displayName="max-label-width";var u=Object(i.default)(function(t){return t.props.blocks||r.EmptyArray},function(t){return t.getFontFamily()},function(t){return t.getBlockHeaderFontSize()},function(t,e,n){var r,i=0,a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(t);try{for(a.s();!(r=a.n()).done;){var l=r.value;i=Math.max(i,Object(o.default)(l,e,n))}}catch(t){a.e(t)}finally{a.f()}return i});u.metadataTotalLengthMemo="metadata-headers-length",l.metadataTotalLengthMemo="metadata-total-length";var c=Object(i.default)(function(t){return t.getTreeType()},function(t){return t.getShowShapes()?t.getNodeSize():0},function(t){return t.hasLeafLabels()?l(t):0},function(t){return t.hasMetadataHeaders()?u(t):0},function(t){return t.hasMetadata()?t.getMetadataColumnWidth()*(t.props.blocks||r.EmptyArray).length:0},function(t,e,n,i,o){s=0+e+n+o;var s,a=0,l=0,u=0,c=0;switch(t){case r.TreeTypes.Rectangular:case r.TreeTypes.Diagonal:u=Math.max(i,e/2),l=s,c=e/2;break;case r.TreeTypes.Hierarchical:a=Math.max(i,e/2),c=s,u=e/2;break;case r.TreeTypes.Circular:case r.TreeTypes.Radial:a=s,u=s,l=s,c=s}return{length:e+n,left:a,top:u,right:l,bottom:c}});function d(){return c(this)}c.displayName="pixel-offsets"},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(12);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?Object(r.default)(this.getZoom()):null!==(t=this.props.fixedScale)&&void 0!==t?t:Object(r.default)(this.getZoom())}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.showShapes)&&void 0!==t?t:r.a.showShapes}},function(t,e,n){n.r(e),n.d(e,"default",function(){return l});var r=n(0),i=n(2),o=n(12),s=Object(i.default)(function(t){return t.getGraphWithoutLayout()},function(t){return t.getTreeType()},function(t){return t.getDrawingArea()},function(t,e,n){if(e===r.TreeTypes.Rectangular||e===r.TreeTypes.Diagonal)return n.height/t.root.visibleLeaves;if(e===r.TreeTypes.Hierarchical)return n.width/t.root.visibleLeaves;if(e===r.TreeTypes.Circular||e===r.TreeTypes.Radial)return r.Angles.Degrees360/t.root.visibleLeaves;throw Error("Invalid tree type")});s.displayName="step-ratio";var a=Object(i.default)(s,function(t){return t.getStepZoom()},function(t,e){return t*Object(o.default)(e)});function l(){return a(this)}a.displayName="step-scale"},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.stepZoom)&&void 0!==t?t:r.a.stepZoom}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(0);function i(){switch(this.getTreeType()){case r.TreeTypes.Hierarchical:return"x";case r.TreeTypes.Diagonal:case r.TreeTypes.Rectangular:return"y";default:return}}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(1),i=n(5);function o(){var t;return Object(i.default)(null!==(t=this.props.strokeColour)&&void 0!==t?t:r.a.strokeColour)}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.strokeWidth)&&void 0!==t?t:r.a.strokeWidth}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){return this.props.type||r.a.type}},function(t,e,n){n.r(e),n.d(e,"default",function(){return a});var r=n(1),i=n(2),o=Object(i.default)(function(t){var e;return null!==(e=t.props.centre)&&void 0!==e?e:r.a.centre},function(t){return t.getCanvasSize()},function(t){return t.getDrawingArea()},function(t,e,n){var r=[e.width/2,e.height/2],i=[n.width/2+n.left,n.height/2+n.top],o=[r[0]-i[0],r[1]-i[1]];return[-((t[0]-.5)*e.width-o[0]),-((t[1]-.5)*e.height-o[1])]}),s=Object(i.default)(o,function(t){var e;return null!==(e=t.props.zoom)&&void 0!==e?e:r.a.zoom},function(t){return t.getMaxZoom()},function(t){return t.getMinZoom()},function(t,e,n,r){return{target:t,zoom:e,maxZoom:n,minZoom:r}});function a(){return s(this)}},function(t,e,n){function r(){var t=this.getGraphAfterLayout().bounds,e=this.getPixelOffsets(),n=this.getScale();return{min:[t.min[0]-e.left/n,t.min[1]-e.top/n],max:[t.max[0]+e.right/n,t.max[1]+e.bottom/n]}}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return null!==(t=this.props.zoom)&&void 0!==t?t:r.a.zoom}},function(t,e,n){function r(t,e){var n=this.pickNodeFromLayer(t);this.selectNode(n,e.srcEvent.metaKey||e.srcEvent.ctrlKey)}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e);var r=n(20);e.default=function(t,e){var n=Object(r.default)(this,"highlight"),i=Object(r.default)(this,"tooltip");if(n||i){var o=this.pickNodeFromLayer(t);if(n&&this.highlightNode(o,e.srcEvent.metaKey||e.srcEvent.ctrlKey),i){var s="";if(o){var a,l,u=null!==(a=o.label)&&void 0!==a?a:o.id;o.isLeaf?s=u:(s+="Leaves in subtree: ".concat(o.totalLeaves,"."),o.label&&(s+=" Subtree label: ".concat(o.label,"."))),t.object.columnName&&t.object.block&&(s+=". ".concat(t.object.columnName,": ").concat(null!==(l=t.object.block.label)&&void 0!==l?l:t.object.block.colour,"."))}this.setTooltip(s)}}}},function(t,e,n){function r(){return this.props.showLabels&&this.props.showLeafLabels}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(){return!!this.props.metadata&&this.props.blocks&&this.props.blocks.length}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(0);function i(){if(this.hasMetadata()&&this.props.showLabels&&this.props.showBlockHeaders){var t=this.getTreeType();return t===r.TreeTypes.Diagonal||this.props.alignLabels&&(t===r.TreeTypes.Rectangular||t===r.TreeTypes.Hierarchical)}return!1}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(){var t;return this.props.showLabels&&(null!==(t=this.props.showBlockLabels)&&void 0!==t?t:r.a.showBlockLabels)}},function(t,e,n){function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=null!==e?this.findNodeById(e):null,r=n&&!n.isHidden?n.id:null;(null!==(t=this.props.highlightedId)&&void 0!==t?t:null)!==r&&this.setProps({highlightedId:r},"hover")}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),e.default=function(t,e){this.setProps(JSON.parse(t,e))}},function(t,e,n){var r=n(3);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCanvasSize();return t[0]>=e&&t[0]<=n.width-e&&t[1]>=e&&t[1]<=n.height-e}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(0);function i(){switch(this.getTreeType()){case r.TreeTypes.Diagonal:case r.TreeTypes.Hierarchical:case r.TreeTypes.Rectangular:return!0;case r.TreeTypes.Circular:case r.TreeTypes.Radial:return!1;default:throw Error("Invalid tree type")}}},function(t,e,n){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.projectPoint(t);return this.isCanvasPointOnScreen(n,e)}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e);var r=n(18);function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.default=function(){var t,e=this.getGraphAfterLayout(),n=[],o=i(e.leaves);try{for(o.s();!(t=o.n()).done;){for(var s=t.value,a=[],l=s;l.parent;)a.unshift(l.parent),l=l.parent;n.push(a)}}catch(t){o.e(t)}finally{o.f()}for(var u,c,d=0,h=0;h<e.leaves.length;h++)for(var f=h+1;f<e.leaves.length;f++){for(var p=e.leaves[h],g=e.leaves[f],m=void 0,v=0;v<n[h].length&&v<n[f].length&&n[h][v]===n[f][v];v++)m=n[h][v];var _=p.distanceFromRoot+g.distanceFromRoot-2*m.distanceFromRoot;_>d&&(d=_,u=p,c=g)}var y=d/2,b=u.distanceFromRoot>y?u:c,x=n[e.leaves.indexOf(b)];x.push(b);var E,T,S=b.distanceFromRoot-y,A=i(x);try{for(A.s();!(T=A.n()).done;){var P=T.value;if(P.distanceFromRoot>S){E=P;break}}}catch(t){A.e(t)}finally{A.f()}var C={branchLength:0,children:[]};E.branchLength=E.parent.distanceFromRoot-S,function t(e,n,r,o){var s={branchLength:o.branchLength,children:[],parent:r};r.children.push(s);var a,l=i(o.parent.children);try{for(l.s();!(a=l.n()).done;){var u=a.value;u!==o&&s.children.push(u)}}catch(t){l.e(t)}finally{l.f()}o.parent.parent&&o.parent!==n&&t(e,n,s,o.parent)}(this,e.root,C,E),C.children.push(E),E.branchLength=E.distanceFromRoot-S,E.parent=C;var w={type:"newick",original:this.props.source,data:Object(r.default)(C)};this.setSource(w)}},function(t,e,n){function r(t,e){var n=this.deck.pickObject({x:t,y:e});return n?this.pickNodeFromLayer(n):null}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t){var e,n,r=t.layer,i=t.object;return r&&i&&("shapes"===r.id||"edges"===r.id||"leaf-labels"===r.id?n=i:"piecharts"===r.id||"metadata"===r.id?n=i.node:this.log&&this.log("Unknown layer ".concat(r.id))),null!==(e=n)&&void 0!==e?e:null}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t,e){var n=this.getView(this).target,r=null!=e?e:this.getScale(),i=this.getCanvasCentrePoint();return[(t[0]-n[0])*r+i[0],(t[1]-n[1])*r+i[1]]}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.r(e),e.default=function(){if(this.deferred.count>0)return this.deferred.render=!0,void(this.log&&this.log("render is suspended"));var t=performance.now();this.getGraphAfterLayout();var e,n=performance.now(),i=[],o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t))){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(this.layers);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(!0===s.isVisible||s.isVisible(this.props)){s.renderer||(s.renderer=s.renderLayer(this));var a=s.renderer(this);i.push(a)}else s.renderer=null}}catch(t){o.e(t)}finally{o.f()}var l=this.getView(),u=performance.now();this.view.style.width="".concat(this.props.size.width,"px"),this.view.style.height="".concat(this.props.size.height,"px"),this.deck.setProps({viewState:l,width:this.props.size.width,height:this.props.size.height,layers:i});var c=performance.now();this.log&&this.log("layout took ",n-t," milliseconds.","\nrender took ",u-n," milliseconds.","\nupdate took ",c-u," milliseconds.")}},function(t,e,n){n.r(e);var r=n(25);function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.default=function(t){var e=this.findNodeById(t),n=this.getGraphAfterLayout();if(e.parent){var o={branchLength:0,children:[]};(function t(e,n,r,o){var s={branchLength:o.branchLength,children:[],parent:r,name:o.name};r.children.push(s);var a,l=i(o.parent.children);try{for(l.s();!(a=l.n()).done;){var u=a.value;u!==o&&s.children.push(u)}}catch(t){l.e(t)}finally{l.f()}o.parent.parent&&o.parent!==n&&t(e,n,s,o.parent)})(this,n.root,o,e),o.children.push(e);var s={type:"newick",original:this.props.source,data:function(t){var e,n=[],o=i(Object(r.default)(t));try{for(o.s();!(e=o.n()).done;){var s=e.value;if(s.isLeaf)n.push("".concat(s.id,":").concat(s.branchLength));else if(s!==t){var a=n.splice(n.length-s.children.length,s.children.length);n.push("(".concat(a.join(","),")").concat(s.name||"",":").concat(s.branchLength))}}}catch(t){o.e(t)}finally{o.f()}return"(".concat(n.join(","),");")}(o)};this.setSource(s)}}},function(t,e,n){n.r(e),e.default=function(t,e){this.setProps({size:{width:t,height:e}})}},function(t,e,n){n.r(e),e.default=function(){this.deferred.count>0&&(this.deferred.count-=1),0===this.deferred.count&&this.deferred.render&&(this.render(),this.deferred.render=!1)}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(19);function i(t){var e=this.findNodeById(t);e&&this.setProps({rotatedIds:Object(r.default)(this.props.rotatedIds,e.id)})}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(0);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){t&&Array.isArray(t)&&this.setProps({selectedIds:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n&&t.length){var o,s=new Set(t),a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,void 0)}}(t))){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(e);try{for(a.s();!(o=a.n()).done;){var l=o.value;s.add(l)}}catch(t){a.e(t)}finally{a.f()}return Array.from(s)}return e.length?e:r.EmptyArray}(this.props.selectedIds,t,e)})}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(1),i=n(19);function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?this.findNodeById(t):null;if(n&&n.isLeaf){var o=Object(i.default)(this.props.selectedIds,n.id,e);this.setProps({selectedIds:o})}else n||this.setProps({selectedIds:r.a.selectedIds})}},function(t,e,n){n.r(e),n.d(e,"default",function(){return s});var r=n(1),i=n(28),o=n(12);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCanvasCentrePoint(),n=this.branchZoomingAxis();if(n){var s=null!=t?t:r.a.branchZoom;if(e){var a,l=null!==(a=this.props.branchZoom)&&void 0!==a?a:r.a.branchZoom,u=Object(o.default)(l),c=Object(o.default)(s),d=Object(i.default)(this,u,c,e,n);this.setProps({centre:d,branchZoom:s})}else this.setProps({branchZoom:s})}}},function(t,e,n){n.r(e),n.d(e,"default",function(){return a});var r=n(6),i=n.n(r);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e){t&&(this.props=Object.freeze(s(s({},this.props),t))),this.render()}},function(t,e,n){n.r(e),n.d(e,"default",function(){return l});var r=n(6),i=n.n(r),o=n(0),s=n(1);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.EmptyObject,n=this.findNodeById(t);this.setProps(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({rootId:n?n.id:null,centre:s.a.centre,branchZoom:s.a.branchZoom,stepZoom:s.a.stepZoom,zoom:s.a.zoom},e))}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(1),i=n(16);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCanvasCentrePoint(),n=null!=t?t:r.a.scale,o=Object(i.default)(n);this.setZoom(o,e)}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(t,e){var n=t;e&&(n={type:"newick",original:e,data:t}),this.setProps({source:n,rootId:r.a.rootId,collapsedIds:r.a.collapsedIds,rotatedIds:r.a.rotatedId,centre:r.a.centre,branchZoom:r.a.branchZoom,stepZoom:r.a.stepZoom,zoom:r.a.zoom})}},function(t,e,n){n.r(e),n.d(e,"default",function(){return s});var r=n(1),i=n(28),o=n(12);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCanvasCentrePoint(),n=this.getStepZoomingAxis();if(n){var s=null!=t?t:r.a.stepZoom;if(e){var a,l=null!==(a=this.props.stepZoom)&&void 0!==a?a:r.a.stepZoom,u=Object(o.default)(l),c=Object(o.default)(s),d=Object(i.default)(this,u,c,e,n);this.setProps({centre:d,stepZoom:s})}else this.setProps({stepZoom:s})}}},function(t,e,n){function r(t){this.view.title=t?"".concat(t).concat("​".repeat(Math.floor(16*Math.random()))):""}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(1);function i(t){this.setProps({type:t,centre:r.a.centre,branchZoom:r.a.branchZoom,stepZoom:r.a.stepZoom,zoom:r.a.zoom})}},function(t,e,n){n.r(e),n.d(e,"default",function(){return i});var r=n(12);function i(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.getView(),o=null!==(t=n.zoom)&&void 0!==t?t:i.zoom,s=null!==(e=n.centre)&&void 0!==e?e:i.centre;if(o<i.zoom){var a=this.getGraphAfterLayout().bounds,l=this.getPixelOffsets(),u=Object(r.default)(this.getZoom()),c=this.getPadding(),d={min:[a.min[0]-l.left/u,a.min[1]-l.top/u],max:[a.max[0]+l.right/u,a.max[1]+l.bottom/u]};if(this.isCanvasPointOnScreen(this.projectPoint(d.min,u),c)&&this.isCanvasPointOnScreen(this.projectPoint(d.max,u),c))return}this.setProps({fixedScale:n.fixedScale,centre:s,zoom:o},"viewport")}},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(1),i=n(12);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCanvasCentrePoint(),n=null!=t?t:r.a.zoom;if(e){var o=Object(i.default)(n);this.deck.viewManager.controllers.OrthographicView.zoom(o,e)}else this.setView({zoom:n})}},function(t,e,n){n.r(e),e.default=function(){this.deferred.count+=1}},function(t,e,n){function r(t){var e=this.getView(this).target,n=this.getScale(),r=this.getCanvasCentrePoint();return[e[0]+(t[0]-r[0])/n,e[1]+(t[1]-r[1])/n]}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){function r(t,e){var n=t.getDrawingArea(),r=t.getCanvasSize(),i=[r.width/2,r.height/2],o=[n.width/2+n.left,n.height/2+n.top],s=[i[0]-o[0],i[1]-o[1]];return[-((e[0]-.5)*r.width-s[0]),-((e[1]-.5)*r.height-s[1])]}n.r(e),n.d(e,"default",function(){return r})},function(t,e,n){n.r(e),n.d(e,"default",function(){return o});var r=n(14),i=n.n(r);function o(t){for(var e=[],n=[t];n.length;){var r=n.shift();e.push(r),Array.isArray(r.children)&&n.unshift.apply(n,i()(r.children))}return e}},function(t,e,n){n.r(e);var r=n(7),i=n(0),o=n(1),s=n(47),a=n(20),l=n(27),u=n(4),c=n(2),d=n(5),h=Object(c.default)(function(t){return t.props.fontColour||o.a.fontColour},d.default),f=Object(c.default)(function(t){return t.getGraphAfterLayout()},function(t){for(var e=[],n=t.firstIndex+1;n<t.lastIndex;n++){var r=t.preorderTraversal[n];e.push(r),r.isCollapsed&&(n+=r.totalNodes-1)}return e}),p=Object(c.default)(function(t){return t.getFontSize()},function(t){return function(e){var n=t/3;return[(e.inverted?-1:1)*n*Math.sin(e.angle),(e.inverted?1:-1)*n*Math.cos(e.angle)]}}),g=Object(c.default)(function(t){return t.getTreeType()},function(t){return t.getBranchScale()},function(t){return t.getFontSize()},function(t){return t.getScale()},function(t,e,n,r){return function(n){if(t===i.TreeTypes.Diagonal)return[(n.x+n.parent.x)/2,(n.y+n.parent.y)/2];var r=-(n.branchLength*e/2);return t===i.TreeTypes.Rectangular?[n.x+r,n.y]:t===i.TreeTypes.Hierarchical?[n.x,n.y+r]:[n.x+r*Math.cos(n.angle),n.y+r*Math.sin(n.angle)]}}),m=Object(c.default)(function(t){var e;return null!==(e=t.props.branchLengthsFormat)&&void 0!==e?e:o.a.branchLengthsFormat},function(t){var e;return null!==(e=t.props.branchLengthsDigits)&&void 0!==e?e:o.a.branchLengthsDigits},function(t,e){return"decimal"===t?function(t){var n;return null===(n=t.branchLength)||void 0===n?void 0:n.toFixed(e)}:"scientific"===t?function(t){var n;return null===(n=t.branchLength)||void 0===n?void 0:n.toExponential(e)}:function(t){var e;return null===(e=t.branchLength)||void 0===e?void 0:e.toString()}}),v=n(23),_=function(){return Object(c.default)(f,function(t){var e;return null!==(e=t.props.branchLabelsFontSize)&&void 0!==e?e:.6*t.getFontSize()},function(t){return t.getFontFamily()},h,p,g,m,function(t,e,n,r,i,o,s){return new u.TextLayer({data:t,fontFamily:n,getAngle:v.default,getColor:r,getPixelOffset:i,getPosition:o,getSize:e,getText:s,getTextAnchor:"middle",id:"branch-labels",updateTriggers:{getPixelOffset:i,getText:s}})})},y=n(14),b=n.n(y),x=n(40),E=Object(c.default)(x.a,function(t){var e;return null!==(e=t.props.styleNodeEdges)&&void 0!==e?e:o.a.styleNodeEdges},function(t){var e;return Object(d.default)(null!==(e=t.props.highlightColour)&&void 0!==e?e:o.a.highlightColour)},function(t){return t.getHighlightedNode()},function(t,e,n,r){return r||e?function(i){if(r&&i.preIndex>r.preIndex&&i.preIndex<r.preIndex+r.totalNodes)return n;if(e){var o=b()(i.strokeColour);return o[3]=t[3],o}return t}:t}),T=n(8),S=n.n(T),A=n(9),P=n.n(A),C=n(10),w=n.n(C),D=n(11),L=n.n(D),R=n(3),O=n.n(R),I=n(6),M=n.n(I),F=n(15),N=n.n(F),B=n(29),k=n.n(B),j=n(24);function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach(function(e){M()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var G=function(t){w()(i,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=O()(i);return t=e?Reflect.construct(n,arguments,O()(this).constructor):n.apply(this,arguments),L()(this,t)});function i(){return S()(this,i),n.apply(this,arguments)}return P()(i,[{key:"getShaders",value:function(){return{vs:"#define SHADER_NAME circular-curve-layer-vertex-shader\n#define TWO_PI radians(360.0)\n\nattribute vec3 positions;\nattribute vec3 instanceCentrePoints;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceRadius;\nattribute float instanceStartAngle;\nattribute float instanceEndAngle;\n\nuniform float numSegments;\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_size_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / numSegments);\n}\n\nvec4 computeArcCurve(vec3 centrePoint, float radius, float startAngle, float arcAngle, float segmentRatio) {  \n  float angle = startAngle + (arcAngle * segmentRatio);\n\n  vec3 instancePoint = vec3(\n    centrePoint.x + (cos(angle) * radius),\n    centrePoint.y + (sin(angle) * radius),\n    0.0\n  );\n\n  vec3 pointPos = project_position(instancePoint);\n  vec4 point = project_common_position_to_clipspace(vec4(pointPos, 1.0));\n\n  return point;\n}\n\nvoid main(void) {\n  float arcAngle = (instanceEndAngle > instanceStartAngle) ? (instanceEndAngle - instanceStartAngle) : (TWO_PI + (instanceEndAngle - instanceStartAngle));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  vec4 p = computeArcCurve(instanceCentrePoints, instanceRadius, instanceStartAngle, arcAngle, segmentRatio);\n\n  // next point\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec4 nextP = computeArcCurve(instanceCentrePoints, instanceRadius, instanceStartAngle, arcAngle, nextSegmentRatio);\n\n  // extrude\n  float direction = float(positions.y);\n  direction = indexDir *  direction;\n  vec2 offset = getExtrusionOffset(nextP.xy - p.xy, direction);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME circular-curve-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[r.project32,r.picking]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceCentrePoints:{size:3,transition:!1,accessor:"getCentrePoint"},instanceColors:{size:4,type:k.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceStartAngle:{size:1,transition:!0,accessor:"getStartAngle",defaultValue:1},instanceEndAngle:{size:1,transition:!0,accessor:"getEndAngle",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags;if(N()(O()(i.prototype),"updateState",this).call(this,{props:e,oldProps:n,changeFlags:r}),r.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)})}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props.strokeWidth;this.state.model.setUniforms(U(U({},e),{},{strokeWidth:n})).draw()}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<=40;n++)e=e.concat([n,-1,0,n,1,0]);var r=new j.Model(t,U(U({},this.getShaders()),{},{id:this.props.id,geometry:new j.Geometry({drawMode:k.a.TRIANGLE_STRIP,attributes:{positions:new Float32Array(e)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return r.setUniforms({numSegments:40}),r}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(t){var e=this.props,n=e.data,i=e.getSourcePosition,o=e.getTargetPosition,s=t.value,a=t.size,l=0;n.forEach(function(t){var e=i(t),n=o(t);s[l+0]=Object(r.fp64LowPart)(e[0]),s[l+1]=Object(r.fp64LowPart)(e[1]),s[l+2]=Object(r.fp64LowPart)(n[0]),s[l+3]=Object(r.fp64LowPart)(n[1]),l+=a})}}]),i}(r.Layer);function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}G.layerName="CircularArcLayer",G.defaultProps={strokeWidth:{type:"number",min:0,value:1},getCentrePoint:{type:"accessor",value:function(t){return t.centrePoint}},getEndAngle:{type:"accessor",value:function(t){return t.endAngle}},getStartAngle:{type:"accessor",value:function(t){return t.startAngle}},getRadius:{type:"accessor",value:function(t){return t.radius}},getColor:{type:"accessor",value:[0,0,0,255]}};var W=Object.freeze([]),H=function(t){w()(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=O()(r);return t=e?Reflect.construct(n,arguments,O()(this).constructor):n.apply(this,arguments),L()(this,t)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"updateState",value:function(t){var e=t.props,n=t.changeFlags;if(n.dataChanged){for(var r={roots:[e.data.root],nodes:[]},o=e.data.firstIndex+1;o<e.data.lastIndex;o++){var s=e.data.preorderTraversal[o];r.nodes.push(s),s.isCollapsed&&(o+=s.totalNodes-1)}if(this.props.treeType===i.TreeTypes.Circular&&n.dataChanged){r.nodesWithChldren=[];var a,l=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return V(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(r.nodes);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.children&&u.children.length&&u.children.length>1&&r.nodesWithChldren.push(u)}}catch(t){l.e(t)}finally{l.f()}}this.setState(r)}}},{key:"renderLayers",value:function(){var t=this.state,e=t.nodes,n=t.roots,r=[];if(this.props.treeType===i.TreeTypes.Rectangular)r.push(new u.LineLayer({data:e,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-vertical-lines",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.parent.x,t.y]},getTargetPosition:function(t){return[t.x,t.y]}})),r.push(new u.LineLayer({data:e,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-horizontal-lines",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.parent.x,t.parent.y]},getTargetPosition:function(t){return[t.parent.x,t.y]}}));else if(this.props.treeType===i.TreeTypes.Hierarchical)r.push(new u.LineLayer({data:e,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-vertical-lines",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.x,t.parent.y]},getTargetPosition:function(t){return[t.x,t.y]}})),r.push(new u.LineLayer({data:e,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-horizontal-lines",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.parent.x,t.parent.y]},getTargetPosition:function(t){return[t.x,t.parent.y]}}));else if(this.props.treeType===i.TreeTypes.Diagonal||this.props.treeType===i.TreeTypes.Radial)r.push(new u.LineLayer({data:e,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-parent-lines",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.parent.x,t.parent.y]},getTargetPosition:function(t){return[t.x,t.y]}}));else if(this.props.treeType===i.TreeTypes.Circular){var o=this.state.nodesWithChldren;r.push(new u.LineLayer({data:e,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-central-lines",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.x,t.y]},getTargetPosition:function(t){return[t.cx,t.cy]}})),r.push(new G({data:o,getColor:this.props.getColor,id:"edges-arcs",pickable:!0,strokeWidth:this.props.lineWidth,updateTriggers:this.props.updateTriggers,getCentrePoint:[this.props.data.root.x,this.props.data.root.y],getEndAngle:function(t){return t.children[t.children.length-1].angle},getStartAngle:function(t){return t.children[0].angle},getRadius:function(t){return t.dist}}))}return this.props.treeType===i.TreeTypes.Rectangular||this.props.treeType===i.TreeTypes.Diagonal?r.push(new u.LineLayer({data:n,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-root-line",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.x,t.y]},getTargetPosition:function(t){return[t.x-10,t.y]}})):this.props.treeType===i.TreeTypes.Hierarchical&&r.push(new u.LineLayer({data:n,getColor:this.props.getColor,getWidth:this.props.lineWidth,id:"edges-root-line",pickable:!0,updateTriggers:this.props.updateTriggers,getSourcePosition:function(t){return[t.x,t.y]},getTargetPosition:function(t){return[t.x,t.y-10]}})),r}}]),r}(r.CompositeLayer);H.defaultProps={data:{type:"data",value:W,async:!0},getColor:{type:"accessor",value:function(t){return t.fillColour}},lineWidth:1},H.componentName="EdgesLayer";var X=function(){return Object(c.default)(function(t){return t.getGraphAfterLayout()},function(t){return t.getTreeType()},function(t){return t.getStrokeWidth()},E,function(t,e,n,r){return new H({treeType:e,getColor:r,id:"edges",data:t,lineWidth:n,updateTriggers:{getColor:r}})})},Y=Object(c.default)(function(t){return t.props.haloWidth||o.a.haloWidth},function(t){return t.props.nodeSize||o.a.nodeSize},function(t){return t.props.haloRadius||o.a.haloRadius},function(t,e,n){return{width:t,leaf:Math.max(.75*e,n)+t/2,internal:t+t/2}}),q=Object(c.default)(function(t){return t.getGraphAfterLayout()},function(t){var e;return null!==(e=t.props.highlightedId)&&void 0!==e?e:o.a.highlightedId},function(t,e){return void 0!==(null!=e?e:void 0)?[t.ids[e]]:i.EmptyArray}),Z=function(){return Object(c.default)(q,function(t){var e;return Object(d.default)(null!==(e=t.props.highlightColour)&&void 0!==e?e:o.a.highlightColour)},function(t){return t.props.haloWidth||o.a.haloWidth},Y,function(t){return .5*t.getNodeSize()},function(t,e,n,r,i){return new u.ScatterplotLayer({id:"highlights",data:t,getPosition:function(t){return[t.x,t.y]},getRadius:function(t){var e=r.leaf;return t.isLeaf||(e=t.isCollapsed?i+t.ratio*i+n:r.internal),e},getLineWidth:n,getLineColor:e,filled:!1,stroked:!0,radiusUnits:"pixels",lineWidthUnits:"pixels"})})},K=Object(c.default)(function(t){return t.props.fontColour||o.a.fontColour},d.default),J=Object(c.default)(function(t){return t.getGraphAfterLayout()},function(t){return t.props.internalLabelsFilterRange},function(t,e){for(var n=[],r=t.firstIndex;r<t.lastIndex;r++){var i=t.preorderTraversal[r];i.isLeaf||i.isHidden||!i.name||(e?i.name>=e[0]&&i.name<=e[1]&&n.push(i):n.push(i)),i.isCollapsed&&(r+=i.totalNodes-1)}return n}),Q=Object(c.default)(function(t){return t.getFontSize()},function(t){return[t/2,0]});function $(t){return t.name}function tt(t){return[t.x,t.y]}function te(t){return t.inverted?"end":"start"}var tn=function(){return Object(c.default)(J,function(t){var e;return null!==(e=t.props.internalLabelsFontSize)&&void 0!==e?e:t.getFontSize()},function(t){return t.getFontFamily()},K,Q,function(t){return t.props.showInternalLabels},function(t,e,n,r,i){return new u.TextLayer({id:"internal-labels",data:t,getSize:e,getColor:r,fontFamily:n,getPosition:tt,getText:$,getPixelOffset:i,getTextAnchor:te})})},tr=Object(c.default)(function(t){return t.props.fontColour||o.a.fontColour},d.default),ti=function(t){var e=tr(t);return t.props.styleLeafLabels||o.a.styleLeafLabels?function(t){var n;return null!==(n=t.fillColour)&&void 0!==n?n:e}:e},to=n(31),ts=n(32);function ta(t){return t.inverted?"end":"start"}function tl(t){return t.label}function tu(t){return[t.x,t.y]}var tc=function(t){w()(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=O()(r);return t=e?Reflect.construct(n,arguments,O()(this).constructor):n.apply(this,arguments),L()(this,t)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"renderLayers",value:function(){var t=[new u.TextLayer({id:"leaf-labels-text",data:this.props.data,getSize:this.props.fontSize,getPosition:this.props.getTextPosition,getText:tl,getAngle:v.default,getColor:this.props.fontColour,fontFamily:this.props.fontFamily,getTextAnchor:ta,backgroundColor:this.props.backgroundColour,updateTriggers:{getPosition:this.props.updateTriggers.getTextPosition},pickable:!0})];return this.props.highlightedNode&&t.push(new u.TextLayer({id:"leaf-labels-highlight",data:[this.props.highlightedNode],getSize:this.props.fontSize,getPosition:this.props.getTextPosition,getText:tl,getAngle:v.default,getColor:this.props.highlightColour,fontFamily:this.props.fontFamily,getTextAnchor:ta,backgroundColor:this.props.backgroundColour})),this.props.alignLeafLabels&&t.push(new u.LineLayer({id:"leaf-labels-lines",data:this.props.data,getSourcePosition:this.props.getTextPosition,getTargetPosition:tu,getColor:this.props.lineColour,getWidth:this.props.lineWidth,opacity:.54,updateTriggers:{getSourcePosition:this.props.updateTriggers.getTextPosition}})),t}}]),r}(r.CompositeLayer);tc.componentName="LeafLabelsLayer",tc.defaultProps={alignLeafLabels:!1,getTextPosition:{type:"accessor",value:function(t){return[t.x,t.y]}},fontSize:16,fontFamily:"Monaco, monospace",fontColour:[0,0,0,255],lineWidth:1,lineColour:[0,0,0,255]};var td=function(){return Object(c.default)(to.a,function(t){return t.getFontSize()},function(t){return t.getFontFamily()},ti,function(t){return t.props.backgroundColour||o.a.backgroundColour},function(t){return t.getStrokeWidth()},function(t){return t.getStrokeColour()},function(t){return t.getAlignLeafLabels()},ts.a,function(t){return t.getHighlightedNode()},function(t){var e;return Object(d.default)(null!==(e=t.props.highlightColour)&&void 0!==e?e:o.a.highlightColour)},function(t,e,n,r,i,o,s,a,l,u,c){return new tc({alignLeafLabels:a,backgroundColour:i,data:t,fontColour:r,fontFamily:n,fontSize:e,getTextPosition:l,highlightColour:c,highlightedNode:u,id:"leaf-labels",lineColour:s,lineWidth:.5*o,updateTriggers:{getTextPosition:l}})})},th=n(37),tf=n(34),tp=n(35),tg=n(36);function tm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tm(Object(n),!0).forEach(function(e){M()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var t_=function(t){w()(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=O()(r);return t=e?Reflect.construct(n,arguments,O()(this).constructor):n.apply(this,arguments),L()(this,t)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"getShaders",value:function(t){return tv(tv({},N()(O()(r.prototype),"getShaders",this).call(this)),{},{fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nuniform float maxSizeRatio;\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  // float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  // if (inCircle == 0.0) {\n  //   discard;\n  // }\n\n  if (maxSizeRatio < 1.0) {\n    if (unitPosition.y > maxSizeRatio) {\n      discard;\n    }\n    if (unitPosition.y < -maxSizeRatio) {\n      discard;\n    }\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  // gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nattribute float instanceAngles;\nattribute vec2 instancePixelOffset;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  // Multiply out radius and clamp to limits\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  \n  // Multiply out line width and clamp to limits\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n\n    offset = vec3(rotate_by_angle(vec2(offset.x, offset.y), instanceAngles), 0.0);\n    offset += vec3(project_pixel_size(instancePixelOffset), 0.0);\n  \n    // vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  }\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n"})}},{key:"initializeState",value:function(){N()(O()(r.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props.maxSizeRatio;this.state.model.setUniforms({maxSizeRatio:n}),N()(O()(r.prototype),"draw",this).call(this,{uniforms:e})}},{key:"_getModel",value:function(t){return new j.Model(t,tv(tv({},this.getShaders()),{},{id:this.props.id,geometry:new j.Geometry({drawMode:k.a.TRIANGLE_FAN,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}}]),r}(u.ScatterplotLayer);t_.defaultProps={getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]}},t_.componentName="BlockLayer";var ty=[0,0,0,64],tb=function(t){w()(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=O()(r);return t=e?Reflect.construct(n,arguments,O()(this).constructor):n.apply(this,arguments),L()(this,t)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"renderLayers",value:function(){return[new t_({autoHighlight:!0,data:this.props.blocks,getAngle:function(t){return t.node.angleDegrees},getColor:function(t){return t.colour},getFillColor:function(t){return t.colour},getPixelOffset:this.props.getPixelOffset,getRadius:this.props.blockSize/2,maxSizeRatio:!this.props.isOrthogonal||this.props.stepSize>this.props.blockSize?1:this.props.stepSize/this.props.blockSize,highlightColor:ty,id:"metadata-blocks",pickable:!0,radiusUnits:"pixels",updateTriggers:{getPixelOffset:this.props.getPixelOffset}}),new u.TextLayer({data:this.props.headers,fontFamily:this.props.fontFamily,getAngle:function(t){return t.angle},getColor:this.props.fontColour,getPixelOffset:this.props.getPixelOffset,getSize:this.props.fontSize,getTextAnchor:function(t){return t.inverted?"end":"start"},id:"metadata-headers",updateTriggers:{getPixelOffset:this.props.getPixelOffset},visible:this.props.hasHeaders})]}}]),r}(r.CompositeLayer);tb.componentName="MetadataLayer";var tx=function(){return Object(c.default)(tf.a,function(t){return t.getBlockSize()},function(t){return t.getStepScale()*t.getScale()},tp.a,function(t){return t.getFontFamily()},th.a,tg.a,function(t){return t.hasMetadataHeaders()},function(t){return t.isOrthogonal()},function(t,e,n,r,i,o,s,a,l){return new tb({blocks:t,blockSize:e,stepSize:n,fontColour:Object(d.default)("black"),fontFamily:i,fontSize:o,isOrthogonal:l,getPixelOffset:s,hasHeaders:a,headers:r,id:"metadata"})})},tE=n(22),tT=n(13),tS=n.n(tT);function tA(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return tP(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tP(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function tP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tC=Object(c.default)(function(t){return t.getGraphWithStyles()},function(t){return t.props.collapsedIds||o.a.collapsedIds},function(t,e){var n,r=[],o=0,s=tA(e);try{for(s.s();!(n=s.n()).done;){var a=n.value,l=t.ids[a];if(!l.isHidden){for(var u=l.postIndex-l.totalNodes+1,c=l.postIndex,d=new Map,h=0,f=u;f<=c;f++){var p=t.postorderTraversal[f];p.isLeaf&&p.shape&&(h+=1,d.set(p.fillColour,(d.get(p.fillColour)||0)+1))}o+=h;var g,m=i.Angles.Degrees0,v=tA(d.entries());try{for(v.s();!(g=v.n()).done;){var _=tS()(g.value,2),y=_[0],b=_[1]/h,x=m+i.Angles.Degrees360*b;r.push({node:l,colour:y,startAngle:m,endAngle:x}),m=x}}catch(t){v.e(t)}finally{v.f()}l.numberOfActiveLeaves=h}}}catch(t){s.e(t)}finally{s.f()}var E,T=1/Math.log10(o),S=tA(e);try{for(S.s();!(E=S.n()).done;){var A=E.value,P=t.ids[A];P.isHidden||(P.ratio=T*Math.log10(P.numberOfActiveLeaves))}}catch(t){S.e(t)}finally{S.f()}return r});function tw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tw(Object(n),!0).forEach(function(e){M()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tw(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var tL=function(t){w()(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=O()(r);return t=e?Reflect.construct(n,arguments,O()(this).constructor):n.apply(this,arguments),L()(this,t)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"getShaders",value:function(t){return tD(tD({},N()(O()(r.prototype),"getShaders",this).call(this)),{},{inject:{"vs:#decl":"\n          attribute float instanceStartAngle;\n          attribute float instanceEndAngle;\n          varying float startAngle;\n          varying float endAngle;\n        ","vs:#main-start":"\n          startAngle = instanceStartAngle ;\n          endAngle = instanceEndAngle ;\n      ","fs:#decl":"\n          varying float startAngle;\n          varying float endAngle;\n      ","fs:DECKGL_FILTER_COLOR":"\n          float angle = atan(-geometry.uv.x, geometry.uv.y) + 3.1415926535897932384626433832795;\n          if (angle < startAngle || angle > endAngle) {\n            discard;\n          }\n        "}})}},{key:"initializeState",value:function(){N()(O()(r.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceStartAngle:{size:1,transition:!0,accessor:"getStartAngle",defaultValue:1},instanceEndAngle:{size:1,transition:!0,accessor:"getEndAngle",defaultValue:1}})}}]),r}(u.ScatterplotLayer);tL.componentName="CircleSectorLayer";var tR=function(){return Object(c.default)(tC,function(t){return t.getNodeSize()},function(t){return t.props.showShapeBorders},function(t){var e;return null!==(e=t.props.shapeBorderWidth)&&void 0!==e?e:o.a.shapeBorderWidth},tE.a,function(t){return t.getScale()},function(t,e,n,r,i,o){var s=e/2;return new tL({id:"piecharts",data:t,getLineColor:i,getLineWidth:n?r:0,getPosition:function(t){return[t.node.x,t.node.y]},getFillColor:function(t){return t.colour},getCentrePoint:function(t){return[t.rootX,t.rootY]},getRadius:function(t){return s+t.node.ratio*s},getStartAngle:function(t){return t.startAngle},getEndAngle:function(t){return t.endAngle},pickable:!0,radiusUnits:"pixels"})})};function tO(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tI=Object(c.default)(function(t){return t.getGraphAfterLayout()},function(t){var e;return null!==(e=t.props.selectedIds)&&void 0!==e?e:o.a.selectedIds},function(t,e){if(e&&e.length){var n,r=[],o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return tO(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(t.leaves);try{for(o.s();!(n=o.n()).done;){var s=n.value;!s.isHidden&&e.includes(s.id)&&r.push(s)}}catch(t){o.e(t)}finally{o.f()}return r}return i.EmptyArray}),tM=function(){return Object(c.default)(tI,function(t){return Object(d.default)(t.props.highlightColour||o.a.highlightColour)},function(t){return t.props.haloWidth||o.a.haloWidth},Y,function(t,e,n,r){return new u.ScatterplotLayer({id:"selection-halos",data:t,getPosition:function(t){return[t.x,t.y]},getRadius:function(t){var e=r.leaf;return t.isLeaf||(e=t.isCollapsed?t.size+n:r.internal),e},getLineWidth:n,getLineColor:e,filled:!1,stroked:!0,radiusUnits:"pixels",lineWidthUnits:"pixels"})})};function tF(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tN=Object(c.default)(function(t){return t.getGraphWithStyles()},function(t){var e,n=[],r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return tF(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tF(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(t.leaves);try{for(r.s();!(e=r.n()).done;){var i=e.value;!i.isHidden&&i.shape&&n.push(i)}}catch(t){r.e(t)}finally{r.f()}return n});tN.displayName="visible-leaf-nodes";var tB=n(33),tk=function(t){w()(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=O()(r);return t=e?Reflect.construct(n,arguments,O()(this).constructor):n.apply(this,arguments),L()(this,t)});function r(){return S()(this,r),n.apply(this,arguments)}return P()(r,[{key:"renderLayers",value:function(){return[new u.IconLayer({id:"shapes-border",data:this.props.data,pickable:!1,iconAtlas:this.props.iconAtlas,iconMapping:this.props.iconMapping,getIcon:this.props.getIcon,getPosition:this.props.getPosition,getSize:this.props.getSize,sizeScale:this.props.borderSizeScale,getColor:this.props.borderColour,visible:this.props.showBorders,updateTriggers:{getSize:this.props.getSize}}),new u.IconLayer({id:"shapes-fill",data:this.props.data,pickable:!0,iconAtlas:this.props.iconAtlas,iconMapping:this.props.iconMapping,getIcon:this.props.getIcon,getPosition:this.props.getPosition,getSize:this.props.getSize,getColor:this.props.getColor,updateTriggers:{getSize:this.props.getSize}})]}}]),r}(r.CompositeLayer);tk.defaultProps={iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{},async:!0},getPosition:{type:"accessor",value:function(t){return[t.x,t.y]}},getIcon:{type:"accessor",value:function(t){return t.shape}},getColor:{type:"accessor",value:function(t){return t.fillColour}},getSize:{type:"accessor",value:1},showBorders:!1,borderColor:[0,0,0],borderSizeScale:1},tk.componentName="ShapesLayer";var tj,tz=n(17),tU=function(t){return!t.fillColour.isTransparent&&t.shape},tG=function(t){return[t.x,t.y]},tV=function(t){return t.fillColour},tW=function(){return Object(c.default)(tN,function(t){return t.getNodeSize()},function(t){return t.props.showShapeBorders},tB.a,tE.a,function(t,e,n,r,i){var o=(tj||(tj=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=t+e;return{image:function(t,e){var n=Object.keys(tz.default),r=t-e,i=document.createElement("canvas");i.width=n.length*t,i.height=t;var o=i.getContext("2d");o.fillStyle="black",o.strokeStyle="red",o.lineWidth=r/16,o.globalAlpha=1;for(var s=0;s<n.length;s++){var a=n[s];o.save(),o.translate(s*t+t/2,t/2),o.beginPath(),o.fillStyle="black",tz.default[a].renderCanvas(0,0,r/2,o),o.fill(),o.closePath(),o.restore()}return i.toDataURL()}(n,e),mapping:function(t,e){for(var n=Object.keys(tz.default),r=t-e,i={},o=0;o<n.length;o++)i[n[o]]={x:o*t+e/2,y:e/2,width:r,height:r,mask:!0};return i}(n,e)}}()),tj);return new tk({id:"shapes",data:t,iconAtlas:o.image,iconMapping:o.mapping,getIcon:tU,getPosition:tG,getSize:e,getColor:tV,showBorders:n,borderColour:i,borderSizeScale:1+2*r/e,updateTriggers:{getSize:e}})})};e.default=function(){var t,e=this,n=function(){return e.setProps({fixedScale:null})};this.deck=new r.Deck({pickingRadius:2,useDevicePixels:!1,views:new r.OrthographicView({controller:!(!Object(a.default)(this,"pan")&&!Object(a.default)(this,"zoom"))&&Object(s.default)(this)}),initialViewState:{target:[0,0,0],zoom:0},layers:[],onViewStateChange:function(r){var i,o=r.viewState;clearTimeout(t),t=setTimeout(n,500),e.setView({centre:Object(l.default)(e,o.target),zoom:o.zoom,fixedScale:null!==(i=e.props.fixedScale)&&void 0!==i?i:e.getScale()})},onHover:function(t,n){return e.handleHover(t,n)},onClick:function(t,n){return e.handleClick(t,n)}}),this.view.appendChild(this.deck.canvas),this.view.style.position="relative",this.view.style.backgroundImage='url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAUCAYAAADFlsDIAAAABHNCSVQICAgIfAhkiAAABJpJREFUWIXtl0FvGkcUx/9vZqHKITKJ1PZoeuwppFJlBVx5/QlCjz2VfAIwJPIlsLsmFyuBXY49BX+C4nMuIAWIT3XUa6VuDjm0h4Y2lZrCzHs9EBxMnNSochSl/p1mdt+8efOfeW92gXPOOQto2QHr5Z08E90nYATA7zeqe2cQ13uJWnYAE4UEpACkBYjOIKb3lqXFIpGPj9pT0f43LCVW9tbuRRZ8J5BfRDAC0dbb7HOVunsav6e1e5fkKnV3o+gdOwzOMg60mXwuoAdgPGAn2e/f3X4+e5ct7xQIekVgfwdJJmHYHzO7ALr/5pdPafcuEZH0CyDGtDYDWBBro+ilJloXQXLJOhwd7AYxMD1RU6HkMgBYUvFwTqgZxo73D1pBvFb00tA6DxFkyzsFAVY4YfcPdoM4V6m7/Ua1C0x3b9YGpoIDABFJv1HdW9v20mqsCgAwDD3/WnmnCJFLSqmf+43qXq5Sd0kkZUUymuhQW9u1WrsPm7XO2raXTkx0BgCsSAYAOMntg90gnvPTnc0/Pxdp3QHzawIeS8OJ1hER+QRVdIx+9FUpuL6+FWwoM87NhJqqPv71bbviOEhDqWcAYK3tDpu11iyQl6cIi+3szTsZIpJBs9YWEVoremk90b5SCkqpLgAoosdKqa6QFL4sehlmdpnoW6VUV0BhrxWMBBQCAI1VXohW2KpYKdXVSqW0UaX18k6eiFylVNcYE8/m12NVGoaePww9H2ILJ63reM0i2pjrfMqOXgHUhdeH/fHXSc60o0rXtgJfoPKDe7f3AeCgFcQn2S5CMkkBeDINw8aO46ShsGqMac92n0WuMLNLjFTScab1RGS/36h25eVHEAv3cpW6qzRdN8b0CJMUM7sskiJWK0I0IiAj4HxCT08eAMhcugm/as9zTCxiah11RJ5ayz8YmJ8MzG/H7NTlT05yZg1Hw9DzBw2vdBqBliF7804GwOYw9HwWefwmO03UEXAe/HKjHB0mmSMi2waAfqPadYy5SlAdBoobRS+1tu2lTxPDsZrVD29H6+WdmIFUwtpOvxUcKZy9tXtRmRdfAOqCZk5veN7TXhCYZRdNQCpX8VwWfQUirwIxOBwrLuUqHoRVPsHGHzuqp7W+n6vUY6MngSPOlWwliCC0+ib/2touO07Iwi0AEMLIOE4oJGkC4mzRy0wcVYBIiojiv5UqqAm5ROhc2wp8ED1TRKsiEi/6fu3T4WGz1hk0a+3enFAAMLi7/dyAf5yumL6Z/Onsze9IwtrOYsolmaPF9iD0SsYgTlq7N/+u1wpGSebIGMQJZr/XCkbDhudba28YY4KD3SB2jLlqDUcJa792jDlMMkcJazsAYI3ZBIBeKxhZYzY/Ym4DwOBebVMMtQb3apsOm61BKzi0hiNYFfUb1RuPQi9KWlsYNGvtJHOUtHaPmZ8MmrX24nqW/t3JlndCIioB0zxPGPPZorBvI1epuyKSBknGGo5OW9POmmzxTkaUzQMAse4MWrcPF22WF6tS/56A/Nyjzfnr/0Nm+d8dpt5RRxDPX78fOkufLOBVKiWs7SyTguecc845/5F/ABRBaZJ181VHAAAAAElFTkSuQmCC")',this.view.style.backgroundRepeat="no-repeat",this.view.style.backgroundPosition="right bottom",this.addLayer("edges",function(t){var e;return null!==(e=t.showEdges)&&void 0!==e?e:o.a.showEdges},X),this.addLayer("leaf-labels",function(t){return t.showLabels&&t.showLeafLabels},td),this.addLayer("shapes",function(t){var e;return null!==(e=t.showShapes)&&void 0!==e?e:o.a.showShapes},tW),this.addLayer("internal-labels",function(t){return t.showLabels&&t.showInternalLabels},tn),this.addLayer("branch-labels",function(t){return t.showLabels&&t.showBranchLengths},_),this.addLayer("piecharts",function(t){return!1!==t.showPiecharts&&t.collapsedIds&&t.collapsedIds.length},tR),this.addLayer("metadata",function(t){return t.type!==i.TreeTypes.Radial&&t.metadata&&t.blocks&&t.blocks.length},tx),this.addLayer("selection",function(t){return t.selectedIds&&t.selectedIds.length},tM),this.addLayer("highlights",!0,Z)}},function(t,e,n){n.r(e),n.d(e,"PhylocanvasGL",function(){return m}),n.d(e,"Angles",function(){return r.Angles}),n.d(e,"EmptyArray",function(){return r.EmptyArray}),n.d(e,"EmptyObject",function(){return r.EmptyObject}),n.d(e,"TreeTypes",function(){return r.TreeTypes}),n.d(e,"Shapes",function(){return r.Shapes}),n.d(e,"Utils",function(){return W}),n.d(e,"Defaults",function(){return i.a}),n.d(e,"Newick",function(){return H}),n.d(e,"plugins",function(){return X});var r=n(0),i=n(1),o=n(54),s=n.n(o),a=n(6),l=n.n(a),u=n(8),c=n.n(u),d={addLayer:n(57).default,ascendingNodeOrder:n(58).default,branchZoomingAxis:n(62).default,collapseNode:n(63).default,descendingNodeOrder:n(64).default,destroy:n(65).default,exportJSON:n(66).default,exportNewick:n(67).default,exportJewick:n(68).default,exportPNG:n(69).default,exportSVG:n(70).default,findNodeById:n(74).default,fitInCanvas:n(75).default,getAlignLeafLabels:n(76).default,getBlockHeaderFontSize:n(77).default,getBlockPadding:n(78).default,getBlockSize:n(79).default,getBranchScale:n(80).default,getBranchZoom:n(81).default,getCanvasCentrePoint:n(82).default,getCanvasSize:n(83).default,getDrawingArea:n(84).default,getFillColour:n(85).default,getFontFamily:n(86).default,getFontSize:n(87).default,getGraphAfterLayout:n(88).default,getGraphBeforeLayout:n(89).default,getGraphWithoutLayout:n(90).default,getGraphWithStyles:n(92).default,getHighlightedNode:n(93).default,getMaxScale:n(94).default,getMaxZoom:n(95).default,getMetadataColumnWidth:n(96).default,getMinScale:n(97).default,getMinZoom:n(98).default,getNodeSize:n(99).default,getPadding:n(100).default,getPixelOffsets:n(101).default,getScale:n(102).default,getShowShapes:n(103).default,getStepScale:n(104).default,getStepZoom:n(105).default,getStepZoomingAxis:n(106).default,getStrokeColour:n(107).default,getStrokeWidth:n(108).default,getTreeType:n(109).default,getView:n(110).default,getWorldBounds:n(111).default,getZoom:n(112).default,handleClick:n(113).default,handleHover:n(114).default,hasLeafLabels:n(115).default,hasMetadata:n(116).default,hasMetadataHeaders:n(117).default,hasMetadataLabels:n(118).default,highlightNode:n(119).default,importJSON:n(120).default,init:n(151).default,isCanvasPointOnScreen:n(123).default,isOrthogonal:n(124).default,isTreePointOnScreen:n(125).default,midpointRoot:n(126).default,pickNodeAtCanvasPoint:n(127).default,pickNodeFromLayer:n(128).default,projectPoint:n(129).default,render:n(130).default,rerootNode:n(131).default,resize:n(132).default,resume:n(133).default,rotateNode:n(134).default,selectLeafNodes:n(135).default,selectNode:n(136).default,setBranchZoom:n(137).default,setProps:n(138).default,setRoot:n(139).default,setScale:n(140).default,setSource:n(141).default,setStepZoom:n(142).default,setTooltip:n(143).default,setTreeType:n(144).default,setView:n(145).default,setZoom:n(146).default,suspend:n(147).default,unprojectPoint:n(148).default},h=n(49);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){l()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var g=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];c()(this,t);var i="string"==typeof e?document.getElementById(e):e;this.cache=new Map,this.view=i,this.deferred={count:0,render:!1},this.layers=[];var o=(null==n?void 0:n.size)||e.getBoundingClientRect();return this.props=p(p({},n),{},{size:o}),r.length&&Object(h.default)(this,r),this.init(),n&&this.setProps(this.props),this};Object.assign(g.prototype,d),g.create=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return s()(this,e)};var m=g,v=n(30),_=n.n(v),y=n(13),b=n.n(y),x=n(14),E=n.n(x),T=n(2),S=n(9),A=n.n(S),P=n(10),C=n.n(P),w=n(11),D=n.n(w),L=n(3),R=n.n(L),O=n(4),I=function(t){C()(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=R()(r);return t=e?Reflect.construct(n,arguments,R()(this).constructor):n.apply(this,arguments),D()(this,t)});function r(){return c()(this,r),n.apply(this,arguments)}return A()(r,[{key:"renderLayers",value:function(){return[new O.TextLayer({id:"scalebar-text",data:this.props.data.labels,getSize:this.props.fontSize,getColor:this.props.fontColour,fontFamily:this.props.fontFamily,getAlignmentBaseline:"bottom",backgroundColor:this.props.backgroundColour}),new O.LineLayer({id:"scalebar-lines",data:this.props.data.lines,getColor:this.props.lineColour,getWidth:this.props.lineWidth})]}}]),r}(n(7).CompositeLayer);I.componentName="ScalebarLayer";var M=n(48),F=n.n(M),N=Object.freeze({background:[255,255,255],digits:2,fillColour:[34,34,34],fontSize:13,height:24,lineWidth:1,opacity:.87,padding:4,position:{bottom:0,left:0},strokeColour:[34,34,34],textAlign:"center",textBaseline:"hanging",width:96});function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach(function(e){l()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var j=Object(T.default)(function(t){return t.props.scalebar},function(t){return t&&"object"===F()(t)?k(k({},N),t):N});j.displayName="scalebar-options";var z=Math.log(10),U=Object(T.default)(function(t){return t.getCanvasSize()},function(t){return[t.width/2,t.height/2]}),G=function(){return Object(T.default)(j,function(t){return t.getBranchScale()},function(t){return t.getScale(!0)},function(t){return t.getCanvasSize()},function(t){return t.getFontFamily()},U,function(t){return t.getView().target},function(t,e,n,r,i,o,s){var a=t.width,l=t.padding,u=t.position,c=t.height,d=0;void 0!==u.left?d=u.left:void 0!==u.centre?d=r.width/2-a/2+u.centre:void 0!==u.right?d=r.width-a-u.right:console.error("Invalid horizontal position specified. Supported values are `left`, `centre`, or `right`");var h=0;void 0!==u.top?h=u.top:void 0!==u.middle?h=r.height/2-c+u.middle:void 0!==u.bottom?h=r.height-c-u.bottom:console.error("Invalid vertical position specified. Supported values are `top`, `middle`, or `bottom`");var f=(a-2*l)/e/n,p=parseInt(Math.abs(Math.log(f)/z),10);d+=-o[0],d/=n,d+=s[0],h+=-o[1],h/=n,h+=s[1];var g=(l+t.lineWidth)/n,m=(a-l-t.lineWidth)/n,v=(t.height-l)/n;return new I({id:"scalebar-plugin",data:{labels:[{position:[d+t.width/n/2,h+v],text:f.toFixed(p+t.digits)}],lines:[{sourcePosition:[d+g,h+v],targetPosition:[d+m,h+v]}]},fontSize:t.fontSize,fontColour:t.fillColour,fontFamily:t.fontFamily||i,lineColour:t.strokeColour,lineWidth:t.lineWidth,backgroundColour:t.background})})},V=n(21),W={appendToArray:n(19).default,applyPlugins:n(49).default,applyTreeLayout:n(44).default,calculateNodeBounds:n(45).default,calculateScaledCentre:n(28).default,canvasContext:n(26).default,centreToTarget:n(149).default,colourToRgba:n(5).default,createController:n(47).default,drawVectorShape:n(42).default,emoji:n(43).default,hasInteraction:n(20).default,logarithmicScale:n(41).default,measureTextWidth:n(39).default,memoise:n(2).default,newick:n(30).default,nodeAngleInDegrees:n(23).default,parseSourceAsGraph:n(50).default,postorderTraversal:n(25).default,preorderTraversal:n(150).default,rotateSubtree:n(38).default,scaleToZoom:n(16).default,serialiseAsNewick:n(18).default,shapes:n(17).default,targetToCentre:n(27).default,treeTraversal:n(46).default,zoomToScale:n(12).default};Object.assign(m,r),m.defaults=i.a;var H=_.a,X={scalebar:function(t,e){e("init",function(e,n){e.apply(void 0,E()(n)),t.addLayer("scalebar",function(t){return!1!==t.scalebar},G)}),e("exportSVG",function(e,n){var r=t.deck.layerManager.layers.find(function(t){return"scalebar-plugin"===t.id});if(r){var i=e(!1);i.pop(),i.push('<g transform="translate('.concat(i.centre.join(" "),')" >\n'));var o=r.props,s=o.lineWidth,a=o.lineColour,l=b()(r.props.data.lines,1)[0];i.push('<g stroke="'.concat(Object(V.a)(a),'" stroke-width="').concat(s,'" >\n')),i.push('<line x1="'.concat(l.sourcePosition[0],'" y1="').concat(l.sourcePosition[1],'" x2="').concat(l.targetPosition[0],'" y2="').concat(l.targetPosition[1],'"  />\n')),i.push("</g>\n");var u=r.props,c=u.fontFamily,d=u.fontSize,h=b()(r.props.data.labels,1)[0];i.push('<g font-family="'.concat(c.replace(/"/g,"'"),'" font-size="').concat(d,'">\n'));var f=b()(h.position,2),p=f[0],g=f[1];i.push('<text x="'.concat(p,'" y="').concat(g,'" text-anchor="middle" dominant-baseline="auto" style="padding-bottom:2px">').concat(h.text,"</text>\n")),i.push("</g>\n"),i.push("</g>\n"),i.push("</svg>\n");var m=b()(n,1)[0];return void 0===m||m?new Blob(i,{type:"image/svg+xml"}):i}return e.apply(void 0,E()(n))})}};e.default=m}]);let d=/(\/)+/g;window.bundleEntries=window.bundleEntries||{},window.bundleEntries.load=function(t){var e,n;let r=t.chart,i=t.dataset,o=t.chart.settings;fetch((e=t.root,n=i.download_url,`${e}/${n}`.replace(d,"/"))).then(e=>{e.ok?e.text().then(e=>{let n=document.getElementById(t.target),i=new c.PhylocanvasGL(n,{source:e,showLabels:"true"===o.get("show_labels"),showLeafLabels:"true"===o.get("show_labels"),interactive:!0,nodeShape:o.get("node_shape"),type:o.get("tree_type"),alignLabels:"true"===o.get("align_labels"),strokeColour:o.get("edge_color"),highlightColour:o.get("highlighted_color"),fillColour:o.get("node_color"),showInternalNodeLabels:"true"===o.get("show_bootstrap")},[c.plugins.scalebar]);i.resize(n.parentElement.clientWidth,n.parentElement.clientHeight),r.state("ok","Done."),t.process.resolve(),window.addEventListener("resize",()=>{i.resize(n.parentElement.clientWidth,n.parentElement.clientHeight)})}):(r.state("failed","Failed to access dataset."),t.process.resolve())})}})();
//# sourceMappingURL=script.js.map
