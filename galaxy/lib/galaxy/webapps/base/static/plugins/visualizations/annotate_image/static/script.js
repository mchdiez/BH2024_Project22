(()=>{function t(t){return t&&t.__esModule?t.default:t}function e(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}var n,i,r=globalThis,s={},o={},a=r.parcelRequire3818;null==a&&((a=function(t){if(t in s)return s[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return s[t]=n,e.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){o[t]=e},r.parcelRequire3818=a);var u=a.register;u("iUSsr",function(t,e){var n,i;n="undefined"!=typeof window?window:t.exports,i=function(t,e){var n,i=[],r=Object.getPrototypeOf,s=i.slice,o=i.flat?function(t){return i.flat.call(t)}:function(t){return i.concat.apply([],t)},a=i.push,u=i.indexOf,l={},c=l.toString,h=l.hasOwnProperty,f=h.toString,d=f.call(Object),p={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},m=t.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function y(t,e,n){var i,r,s=(n=n||m).createElement("script");if(s.text=t,e)for(i in _)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[c.call(t)]||"object":typeof t}var b="3.7.1",w=/HTML$/i,C=function(t,e){return new C.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!(g(t)||v(t))&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function k(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}C.fn=C.prototype={jquery:b,constructor:C,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return C.each(this,t)},map:function(t){return this.pushStack(C.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice},C.extend=C.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||g(o)||(o={}),a===u&&(o=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(l&&i&&(C.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||C.isPlainObject(n)?n:{},r=!1,o[e]=C.extend(l,s,i)):void 0!==i&&(o[e]=i));return o},C.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!!t&&"[object Object]"===c.call(t)&&(!(e=r(t))||"function"==typeof(n=h.call(e,"constructor")&&e.constructor)&&f.call(n)===d)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){y(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(S(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},text:function(t){var e,n="",i=0,r=t.nodeType;if(!r)for(;e=t[i++];)n+=C.text(e);return 1===r||11===r?t.textContent:9===r?t.documentElement.textContent:3===r||4===r?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?C.merge(n,"string"==typeof t?[t]:t):a.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!w.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,a=[];if(S(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&a.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&a.push(r);return o(a)},guid:1,support:p}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=i[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){l["[object "+e+"]"]=e.toLowerCase()});var T=i.pop,M=i.sort,P=i.splice,I="[\\x20\\t\\r\\n\\f]",A=RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g");C.contains=function(t,e){var n=e&&e.parentNode;return t===n||!!(n&&1===n.nodeType&&(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function N(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}C.escapeSelector=function(t){return(t+"").replace(O,N)},function(){var e,n,r,o,l,c,f,d,g,v,_=a,y=C.expando,x=0,b=0,w=tt(),S=tt(),O=tt(),N=tt(),E=function(t,e){return t===e&&(l=!0),0},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\["+I+"*("+L+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+I+"*\\]",D=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",$=RegExp(I+"+","g"),R=RegExp("^"+I+"*,"+I+"*"),B=RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),q=RegExp(I+"|>"),F=new RegExp(D),H=RegExp("^"+L+"$"),W={ID:RegExp("^#("+L+")"),CLASS:RegExp("^\\.("+L+")"),TAG:RegExp("^("+L+"|[*])"),ATTR:RegExp("^"+z),PSEUDO:RegExp("^"+D),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:RegExp("^(?:"+j+")$","i"),needsContext:RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},V=/^(?:input|select|textarea|button)$/i,U=/^h\d$/i,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,G=RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),Y=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){to()},K=tc(function(t){return!0===t.disabled&&k(t,"fieldset")},{dir:"parentNode",next:"legend"});try{_.apply(i=s.call(m.childNodes),m.childNodes),i[m.childNodes.length].nodeType}catch(t){_={apply:function(t,e){a.apply(t,s.call(e))},call:function(t){a.apply(t,s.call(arguments,1))}}}function Q(t,e,n,i){var r,s,o,a,u,l,h,f=e&&e.ownerDocument,v=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return n;if(!i&&(to(e),e=e||c,d)){if(11!==v&&(u=Z.exec(t))){if(r=u[1]){if(9===v){if(!(o=e.getElementById(r)))return n;if(o.id===r)return _.call(n,o),n}else if(f&&(o=f.getElementById(r))&&Q.contains(e,o)&&o.id===r)return _.call(n,o),n}else if(u[2])return _.apply(n,e.getElementsByTagName(t)),n;else if((r=u[3])&&e.getElementsByClassName)return _.apply(n,e.getElementsByClassName(r)),n}if(!N[t+" "]&&(!g||!g.test(t))){if(h=t,f=e,1===v&&(q.test(t)||B.test(t))){for((f=X.test(t)&&ts(e.parentNode)||e)==e&&p.scope||((a=e.getAttribute("id"))?a=C.escapeSelector(a):e.setAttribute("id",a=y)),s=(l=tu(t)).length;s--;)l[s]=(a?"#"+a:":scope")+" "+tl(l[s]);h=l.join(",")}try{return _.apply(n,f.querySelectorAll(h)),n}catch(e){N(t,!0)}finally{a===y&&e.removeAttribute("id")}}}return tp(t.replace(A,"$1"),e,n,i)}function tt(){var t=[];return function e(i,r){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function te(t){return t[y]=!0,t}function tn(t){var e=c.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ti(t){return function(e){if("form"in e)return e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||!t!==e.isDisabled&&K(e)===t:e.disabled===t;return"label"in e&&e.disabled===t}}function tr(t){return te(function(e){return e=+e,te(function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function ts(t){return t&&void 0!==t.getElementsByTagName&&t}function to(t){var e,i=t?t.ownerDocument||t:m;return i!=c&&9===i.nodeType&&i.documentElement&&(f=(c=i).documentElement,d=!C.isXMLDoc(c),v=f.matches||f.webkitMatchesSelector||f.msMatchesSelector,f.msMatchesSelector&&m!=c&&(e=c.defaultView)&&e.top!==e&&e.addEventListener("unload",J),p.getById=tn(function(t){return f.appendChild(t).id=C.expando,!c.getElementsByName||!c.getElementsByName(C.expando).length}),p.disconnectedMatch=tn(function(t){return v.call(t,"*")}),p.scope=tn(function(){return c.querySelectorAll(":scope")}),p.cssHas=tn(function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}}),p.getById?(n.filter.ID=function(t){var e=t.replace(G,Y);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n=e.getElementById(t);return n?[n]:[]}}):(n.filter.ID=function(t){var e=t.replace(G,Y);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),n.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},n.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&d)return e.getElementsByClassName(t)},g=[],tn(function(t){var e;f.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||g.push("\\["+I+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+y+"-]").length||g.push("~="),t.querySelectorAll("a#"+y+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll(":checked").length||g.push(":checked"),(e=c.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),(e=c.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\["+I+"*name"+I+"*="+I+"*(?:''|\"\")")}),p.cssHas||g.push(":has"),g=g.length&&new RegExp(g.join("|")),E=function(t,e){if(t===e)return l=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===n?t===c||t.ownerDocument==m&&Q.contains(m,t)?-1:e===c||e.ownerDocument==m&&Q.contains(m,e)?1:o?u.call(o,t)-u.call(o,e):0:4&n?-1:1)}),c}for(e in Q.matches=function(t,e){return Q(t,null,null,e)},Q.matchesSelector=function(t,e){if(to(t),d&&!N[e+" "]&&(!g||!g.test(e)))try{var n=v.call(t,e);if(n||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){N(e,!0)}return Q(e,c,null,[t]).length>0},Q.contains=function(t,e){return(t.ownerDocument||t)!=c&&to(t),C.contains(t,e)},Q.attr=function(t,e){(t.ownerDocument||t)!=c&&to(t);var i=n.attrHandle[e.toLowerCase()],r=i&&h.call(n.attrHandle,e.toLowerCase())?i(t,e,!d):void 0;return void 0!==r?r:t.getAttribute(e)},Q.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},C.uniqueSort=function(t){var e,n=[],i=0,r=0;if(l=!p.sortStable,o=!p.sortStable&&s.call(t,0),M.call(t,E),l){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)P.call(t,n[i],1)}return o=null,t},C.fn.uniqueSort=function(){return this.pushStack(C.uniqueSort(s.apply(this)))},(n=C.expr={cacheLength:50,createPseudo:te,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(G,Y),t[3]=(t[3]||t[4]||t[5]||"").replace(G,Y),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Q.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Q.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&F.test(n)&&(e=tu(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(G,Y).toLowerCase();return"*"===t?function(){return!0}:function(t){return k(t,e)}},CLASS:function(t){var e=w[t+" "];return e||(e=RegExp("(^|"+I+")"+t+"("+I+"|$)"),w(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=Q.attr(i,t);return null==r?"!="===e:!e||((r+="","="===e)?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace($," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,f,d,p=s!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),m=!u&&!a,_=!1;if(g){if(s){for(;p;){for(h=e;h=h[p];)if(a?k(h,v):1===h.nodeType)return!1;d=p="only"===t&&!d&&"nextSibling"}return!0}if(d=[o?g.firstChild:g.lastChild],o&&m){for(_=(f=(l=(c=g[y]||(g[y]={}))[t]||[])[0]===x&&l[1])&&l[2],h=f&&g.childNodes[f];h=++f&&h&&h[p]||(_=f=0)||d.pop();)if(1===h.nodeType&&++_&&h===e){c[t]=[x,f,_];break}}else if(m&&(_=f=(l=(c=e[y]||(e[y]={}))[t]||[])[0]===x&&l[1]),!1===_)for(;(h=++f&&h&&h[p]||(_=f=0)||d.pop())&&(!((a?k(h,v):1===h.nodeType)&&++_)||(m&&((c=h[y]||(h[y]={}))[t]=[x,_]),h!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||Q.error("unsupported pseudo: "+t);return r[y]?r(e):r.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?te(function(t,n){for(var i,s=r(t,e),o=s.length;o--;)i=u.call(t,s[o]),t[i]=!(n[i]=s[o])}):function(t){return r(t,0,i)}):r}},pseudos:{not:te(function(t){var e=[],n=[],i=td(t.replace(A,"$1"));return i[y]?te(function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}}),has:te(function(t){return function(e){return Q(t,e).length>0}}),contains:te(function(t){return t=t.replace(G,Y),function(e){return(e.textContent||C.text(e)).indexOf(t)>-1}}),lang:te(function(t){return H.test(t||"")||Q.error("unsupported lang: "+t),t=t.replace(G,Y).toLowerCase(),function(e){var n;do if(n=d?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType)return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===function(){try{return c.activeElement}catch(t){}}()&&c.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ti(!1),disabled:ti(!0),checked:function(t){return k(t,"input")&&!!t.checked||k(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return U.test(t.nodeName)},input:function(t){return V.test(t.nodeName)},button:function(t){return k(t,"input")&&"button"===t.type||k(t,"button")},text:function(t){var e;return k(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:tr(function(){return[0]}),last:tr(function(t,e){return[e-1]}),eq:tr(function(t,e,n){return[n<0?n+e:n]}),even:tr(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:tr(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:tr(function(t,e,n){var i;for(i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t}),gt:tr(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=function(t){return function(e){return k(e,"input")&&e.type===t}}(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=function(t){return function(e){return(k(e,"input")||k(e,"button"))&&e.type===t}}(e);function ta(){}function tu(t,e){var i,r,s,o,a,u,l,c=S[t+" "];if(c)return e?0:c.slice(0);for(a=t,u=[],l=n.preFilter;a;){for(o in(!i||(r=R.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),u.push(s=[])),i=!1,(r=B.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(A," ")}),a=a.slice(i.length)),n.filter)(r=W[o].exec(a))&&(!l[o]||(r=l[o](r)))&&(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?Q.error(t):S(t,u).slice(0)}function tl(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function tc(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=b++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,u){var l,c,h=[x,a];if(u){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(c=e[y]||(e[y]={}),r&&k(e,r))e=e[i]||e;else{if((l=c[s])&&l[0]===x&&l[1]===a)return h[2]=l[2];if(c[s]=h,h[2]=t(e,n,u))return!0}}return!1}}function th(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function tf(t,e,n,i,r){for(var s,o=[],a=0,u=t.length,l=null!=e;a<u;a++)(s=t[a])&&(!n||n(s,i,r))&&(o.push(s),l&&e.push(a));return o}function td(t,e){var i,s,o,a,l=[],h=[],f=O[t+" "];if(!f){for(e||(e=tu(t)),a=e.length;a--;)(f=function t(e){for(var i,s,o,a=e.length,l=n.relative[e[0].type],c=l||n.relative[" "],h=l?1:0,f=tc(function(t){return t===i},c,!0),d=tc(function(t){return u.call(i,t)>-1},c,!0),p=[function(t,e,n){var s=!l&&(n||e!=r)||((i=e).nodeType?f(t,e,n):d(t,e,n));return i=null,s}];h<a;h++)if(s=n.relative[e[h].type])p=[tc(th(p),s)];else{if((s=n.filter[e[h].type].apply(null,e[h].matches))[y]){for(o=++h;o<a&&!n.relative[e[o].type];o++);return function t(e,n,i,r,s,o){return r&&!r[y]&&(r=t(r)),s&&!s[y]&&(s=t(s,o)),te(function(t,o,a,l){var c,h,f,d,p=[],g=[],v=o.length,m=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)Q(t,e[i],n);return n}(n||"*",a.nodeType?[a]:a,[]),y=e&&(t||!n)?tf(m,p,e,a,l):m;if(i?i(y,d=s||(t?e:v||r)?[]:o,a,l):d=y,r)for(c=tf(d,g),r(c,[],a,l),h=c.length;h--;)(f=c[h])&&(d[g[h]]=!(y[g[h]]=f));if(t){if(s||e){if(s){for(c=[],h=d.length;h--;)(f=d[h])&&c.push(y[h]=f);s(null,d=[],c,l)}for(h=d.length;h--;)(f=d[h])&&(c=s?u.call(t,f):p[h])>-1&&(t[c]=!(o[c]=f))}}else d=tf(d===o?d.splice(v,d.length):d),s?s(null,o,d,l):_.apply(o,d)})}(h>1&&th(p),h>1&&tl(e.slice(0,h-1).concat({value:" "===e[h-2].type?"*":""})).replace(A,"$1"),s,h<o&&t(e.slice(h,o)),o<a&&t(e=e.slice(o)),o<a&&tl(e))}p.push(s)}return th(p)}(e[a]))[y]?l.push(f):h.push(f);(f=O(t,(i=l.length>0,s=h.length>0,o=function(t,e,o,a,u){var f,p,g,v=0,m="0",y=t&&[],b=[],w=r,S=t||s&&n.find.TAG("*",u),k=x+=null==w?1:Math.random()||.1,M=S.length;for(u&&(r=e==c||e||u);m!==M&&null!=(f=S[m]);m++){if(s&&f){for(p=0,e||f.ownerDocument==c||(to(f),o=!d);g=h[p++];)if(g(f,e||c,o)){_.call(a,f);break}u&&(x=k)}i&&((f=!g&&f)&&v--,t&&y.push(f))}if(v+=m,i&&m!==v){for(p=0;g=l[p++];)g(y,b,e,o);if(t){if(v>0)for(;m--;)y[m]||b[m]||(b[m]=T.call(a));b=tf(b)}_.apply(a,b),u&&!t&&b.length>0&&v+l.length>1&&C.uniqueSort(a)}return u&&(x=k,r=w),y},i?te(o):o))).selector=t}return f}function tp(t,e,i,r){var s,o,a,u,l,c="function"==typeof t&&t,h=!r&&tu(t=c.selector||t);if(i=i||[],1===h.length){if((o=h[0]=h[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===e.nodeType&&d&&n.relative[o[1].type]){if(!(e=(n.find.ID(a.matches[0].replace(G,Y),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=W.needsContext.test(t)?0:o.length;s--&&(a=o[s],!n.relative[u=a.type]);)if((l=n.find[u])&&(r=l(a.matches[0].replace(G,Y),X.test(o[0].type)&&ts(e.parentNode)||e))){if(o.splice(s,1),!(t=r.length&&tl(o)))return _.apply(i,r),i;break}}return(c||td(t,h))(r,e,!d,i,!e||X.test(t)&&ts(e.parentNode)||e),i}ta.prototype=n.filters=n.pseudos,n.setFilters=new ta,p.sortStable=y.split("").sort(E).join("")===y,to(),p.sortDetached=tn(function(t){return 1&t.compareDocumentPosition(c.createElement("fieldset"))}),C.find=Q,C.expr[":"]=C.expr.pseudos,C.unique=C.uniqueSort,Q.compile=td,Q.select=tp,Q.setDocument=to,Q.tokenize=tu,Q.escape=C.escapeSelector,Q.getText=C.text,Q.isXML=C.isXMLDoc,Q.selectors=C.expr,Q.support=C.support,Q.uniqueSort=C.uniqueSort}();var E=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&C(t).is(n))break;i.push(t)}return i},j=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},L=C.expr.match.needsContext,z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,e,n){return g(e)?C.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?C.grep(t,function(t){return t===e!==n}):"string"!=typeof e?C.grep(t,function(t){return u.call(e,t)>-1!==n}):C.filter(e,t,n)}C.filter=function(t,e,n){var i=e[0];return(n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType)?C.find.matchesSelector(i,t)?[i]:[]:C.find.matches(t,C.grep(e,function(t){return 1===t.nodeType}))},C.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(C(t).filter(function(){for(e=0;e<i;e++)if(C.contains(r[e],this))return!0}));for(e=0,n=this.pushStack([]);e<i;e++)C.find(t,r[e],n);return i>1?C.uniqueSort(n):n},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&L.test(t)?C(t):t||[],!1).length}});var $,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||$,"string"==typeof t){if((i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:R.exec(t))&&(i[1]||!e)){if(!i[1])return(r=m.getElementById(i[2]))&&(this[0]=r,this.length=1),this;if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),z.test(i[1])&&C.isPlainObject(e))for(i in e)g(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t)}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(C):C.makeArray(t,this)}).prototype=C.fn,$=C(m);var B=/^(?:parents|prev(?:Until|All))/,q={children:!0,contents:!0,next:!0,prev:!0};function F(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.fn.extend({has:function(t){var e=C(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(C.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&C(t);if(!L.test(t)){for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,t))){s.push(n);break}}return this.pushStack(s.length>1?C.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?u.call(C(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return E(t,"parentNode")},parentsUntil:function(t,e,n){return E(t,"parentNode",n)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return E(t,"nextSibling")},prevAll:function(t){return E(t,"previousSibling")},nextUntil:function(t,e,n){return E(t,"nextSibling",n)},prevUntil:function(t,e,n){return E(t,"previousSibling",n)},siblings:function(t){return j((t.parentNode||{}).firstChild,t)},children:function(t){return j(t.firstChild)},contents:function(t){return null!=t.contentDocument&&r(t.contentDocument)?t.contentDocument:(k(t,"template")&&(t=t.content||t),C.merge([],t.childNodes))}},function(t,e){C.fn[t]=function(n,i){var r=C.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=C.filter(i,r)),this.length>1&&(q[t]||C.uniqueSort(r),B.test(t)&&r.reverse()),this.pushStack(r)}});var H=/[^\x20\t\r\n\f]+/g;function W(t){return t}function V(t){throw t}function U(t,e,n,i){var r;try{t&&g(r=t.promise)?r.call(t).done(e).fail(n):t&&g(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}C.Callbacks=function(t){t="string"==typeof t?(e=t,n={},C.each(e.match(H)||[],function(t,e){n[e]=!0}),n):C.extend({},t);var e,n,i,r,s,o,a=[],u=[],l=-1,c=function(){for(o=o||t.once,s=i=!0;u.length;l=-1)for(r=u.shift();++l<a.length;)!1===a[l].apply(r[0],r[1])&&t.stopOnFalse&&(l=a.length,r=!1);t.memory||(r=!1),i=!1,o&&(a=r?[]:"")},h={add:function(){return a&&(r&&!i&&(l=a.length-1,u.push(r)),function e(n){C.each(n,function(n,i){g(i)?t.unique&&h.has(i)||a.push(i):i&&i.length&&"string"!==x(i)&&e(i)})}(arguments),r&&!i&&c()),this},remove:function(){return C.each(arguments,function(t,e){for(var n;(n=C.inArray(e,a,n))>-1;)a.splice(n,1),n<=l&&l--}),this},has:function(t){return t?C.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=u=[],a=r="",this},disabled:function(){return!a},lock:function(){return o=u=[],r||i||(a=r=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],u.push(e),i||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},C.extend({Deferred:function(e){var n=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return C.Deferred(function(e){C.each(n,function(n,i){var r=g(t[i[4]])&&t[i[4]];s[i[1]](function(){var t=r&&r.apply(this,arguments);t&&g(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){var s=0;function o(e,n,i,r){return function(){var a=this,u=arguments,l=function(){var t,l;if(!(e<s)){if((t=i.apply(a,u))===n.promise())throw TypeError("Thenable self-resolution");g(l=t&&("object"==typeof t||"function"==typeof t)&&t.then)?r?l.call(t,o(s,n,W,r),o(s,n,V,r)):(s++,l.call(t,o(s,n,W,r),o(s,n,V,r),o(s,n,W,n.notifyWith))):(i!==W&&(a=void 0,u=[t]),(r||n.resolveWith)(a,u))}},c=r?l:function(){try{l()}catch(t){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(t,c.error),e+1>=s&&(i!==V&&(a=void 0,u=[t]),n.rejectWith(a,u))}};e?c():(C.Deferred.getErrorHook?c.error=C.Deferred.getErrorHook():C.Deferred.getStackHook&&(c.error=C.Deferred.getStackHook()),t.setTimeout(c))}}return C.Deferred(function(t){n[0][3].add(o(0,t,g(r)?r:W,t.notifyWith)),n[1][3].add(o(0,t,g(e)?e:W)),n[2][3].add(o(0,t,g(i)?i:V))}).promise()},promise:function(t){return null!=t?C.extend(t,r):r}},s={};return C.each(n,function(t,e){var o=e[2],a=e[5];r[e[1]]=o.add,a&&o.add(function(){i=a},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),o.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=o.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=s.call(arguments),o=C.Deferred(),a=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(U(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||g(r[n]&&r[n].then)))return o.then();for(;n--;)U(r[n],a(n),o.reject);return o.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&Z.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},C.readyException=function(e){t.setTimeout(function(){throw e})};var X=C.Deferred();function G(){m.removeEventListener("DOMContentLoaded",G),t.removeEventListener("load",G),C.ready()}C.fn.ready=function(t){return X.then(t).catch(function(t){C.readyException(t)}),this},C.extend({isReady:!1,readyWait:1,ready:function(t){!(!0===t?--C.readyWait:C.isReady)&&(C.isReady=!0,!0!==t&&--C.readyWait>0||X.resolveWith(m,[C]))}}),C.ready.then=X.then,"complete"!==m.readyState&&("loading"===m.readyState||m.documentElement.doScroll)?(m.addEventListener("DOMContentLoaded",G),t.addEventListener("load",G)):t.setTimeout(C.ready);var Y=function(t,e,n,i,r,s,o){var a=0,u=t.length,l=null==n;if("object"===x(n))for(a in r=!0,n)Y(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,g(i)||(o=!0),l&&(o?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(C(t),n)})),e))for(;a<u;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):u?e(t[0],n):s},J=/^-ms-/,K=/-([a-z])/g;function Q(t,e){return e.toUpperCase()}function tt(t){return t.replace(J,"ms-").replace(K,Q)}var te=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function tn(){this.expando=C.expando+tn.uid++}tn.uid=1,tn.prototype={cache:function(t){var e=t[this.expando];return!e&&(e={},te(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[tt(e)]=n;else for(i in e)r[tt(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][tt(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e)for(n=(e=Array.isArray(e)?e.map(tt):((e=tt(e))in i)?[e]:e.match(H)||[]).length;n--;)delete i[e[n]];(void 0===e||C.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!C.isEmptyObject(e)}};var ti=new tn,tr=new tn,ts=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,to=/[A-Z]/g;function ta(t,e,n){var i,r;if(void 0===n&&1===t.nodeType){if(i="data-"+e.replace(to,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{r=n,n="true"===r||"false"!==r&&("null"===r?null:r===+r+""?+r:ts.test(r)?JSON.parse(r):r)}catch(t){}tr.set(t,e,n)}else n=void 0}return n}C.extend({hasData:function(t){return tr.hasData(t)||ti.hasData(t)},data:function(t,e,n){return tr.access(t,e,n)},removeData:function(t,e){tr.remove(t,e)},_data:function(t,e,n){return ti.access(t,e,n)},_removeData:function(t,e){ti.remove(t,e)}}),C.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=tr.get(s),1===s.nodeType&&!ti.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&ta(s,i=tt(i.slice(5)),r[i]);ti.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){tr.set(this,t)}):Y(this,function(e){var n;if(s&&void 0===e)return void 0!==(n=tr.get(s,t))||void 0!==(n=ta(s,t))?n:void 0;this.each(function(){tr.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){tr.remove(this,t)})}}),C.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=ti.get(t,e),n&&(!i||Array.isArray(n)?i=ti.access(t,e,C.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=C.queue(t,e),i=n.length,r=n.shift(),s=C._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,function(){C.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ti.get(t,n)||ti.access(t,n,{empty:C.Callbacks("once memory").add(function(){ti.remove(t,[e+"queue",n])})})}}),C.fn.extend({queue:function(t,e){var n=2;return("string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n)?C.queue(this[0],t):void 0===e?this:this.each(function(){var n=C.queue(this,t,e);C._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&C.dequeue(this,t)})},dequeue:function(t){return this.each(function(){C.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=C.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=ti.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var tu=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tl=RegExp("^(?:([+-])=|)("+tu+")([a-z%]*)$","i"),tc=["Top","Right","Bottom","Left"],th=m.documentElement,tf=function(t){return C.contains(t.ownerDocument,t)},td={composed:!0};th.getRootNode&&(tf=function(t){return C.contains(t.ownerDocument,t)||t.getRootNode(td)===t.ownerDocument});var tp=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&tf(t)&&"none"===C.css(t,"display")};function tg(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return C.css(t,e,"")},u=a(),l=n&&n[3]||(C.cssNumber[e]?"":"px"),c=t.nodeType&&(C.cssNumber[e]||"px"!==l&&+u)&&tl.exec(C.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;o--;)C.style(t,e,c+l),(1-s)*(1-(s=a()/u||.5))<=0&&(o=0),c/=s;c*=2,C.style(t,e,c+l),n=n||[]}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}var tv={};function tm(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)(i=t[s]).style&&(n=i.style.display,e?("none"!==n||(r[s]=ti.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&tp(i)&&(r[s]=function(t){var e,n=t.ownerDocument,i=t.nodeName,r=tv[i];return r||(e=n.body.appendChild(n.createElement(i)),r=C.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),tv[i]=r),r}(i))):"none"!==n&&(r[s]="none",ti.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}C.fn.extend({show:function(){return tm(this,!0)},hide:function(){return tm(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){tp(this)?C(this).show():C(this).hide()})}});var t_=/^(?:checkbox|radio)$/i,ty=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,tx=/^$|^module$|\/(?:java|ecma)script/i;t3=m.createDocumentFragment().appendChild(m.createElement("div")),(t9=m.createElement("input")).setAttribute("type","radio"),t9.setAttribute("checked","checked"),t9.setAttribute("name","t"),t3.appendChild(t9),p.checkClone=t3.cloneNode(!0).cloneNode(!0).lastChild.checked,t3.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!t3.cloneNode(!0).lastChild.defaultValue,t3.innerHTML="<option></option>",p.option=!!t3.lastChild;var tb={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function tw(t,e){var n;return(n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&k(t,e))?C.merge([t],n):n}function tC(t,e){for(var n=0,i=t.length;n<i;n++)ti.set(t[n],"globalEval",!e||ti.get(e[n],"globalEval"))}tb.tbody=tb.tfoot=tb.colgroup=tb.caption=tb.thead,tb.th=tb.td,p.option||(tb.optgroup=tb.option=[1,"<select multiple='multiple'>","</select>"]);var tS=/<|&#?\w+;/;function tk(t,e,n,i,r){for(var s,o,a,u,l,c=e.createDocumentFragment(),h=[],f=0,d=t.length;f<d;f++)if((s=t[f])||0===s){if("object"===x(s))C.merge(h,s.nodeType?[s]:s);else if(tS.test(s)){for(o=o||c.appendChild(e.createElement("div")),a=tb[(ty.exec(s)||["",""])[1].toLowerCase()]||tb._default,o.innerHTML=a[1]+C.htmlPrefilter(s)+a[2],l=a[0];l--;)o=o.lastChild;C.merge(h,o.childNodes),(o=c.firstChild).textContent=""}else h.push(e.createTextNode(s))}for(c.textContent="",f=0;s=h[f++];){if(i&&C.inArray(s,i)>-1){r&&r.push(s);continue}if(u=tf(s),o=tw(c.appendChild(s),"script"),u&&tC(o),n)for(l=0;s=o[l++];)tx.test(s.type||"")&&n.push(s)}return c}var tT=/^([^.]*)(?:\.(.+)|)/;function tM(){return!0}function tP(){return!1}function tI(t,e,n,i,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)tI(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=tP;else if(!r)return t;return 1===s&&(o=r,(r=function(t){return C().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=C.guid++)),t.each(function(){C.event.add(this,e,r,i,n)})}function tA(t,e,n){if(!n){void 0===ti.get(t,e)&&C.event.add(t,e,tM);return}ti.set(t,e,!1),C.event.add(t,e,{namespace:!1,handler:function(t){var n,i=ti.get(this,e);if(1&t.isTrigger&&this[e]){if(i)(C.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=s.call(arguments),ti.set(this,e,i),this[e](),n=ti.get(this,e),ti.set(this,e,!1),i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else i&&(ti.set(this,e,C.event.trigger(i[0],i.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=tM)}})}C.event={global:{},add:function(t,e,n,i,r){var s,o,a,u,l,c,h,f,d,p,g,v=ti.get(t);if(te(t))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&C.find.matchesSelector(th,r),n.guid||(n.guid=C.guid++),(u=v.events)||(u=v.events=Object.create(null)),(o=v.handle)||(o=v.handle=function(e){return C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(H)||[""]).length;l--;)d=g=(a=tT.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),d&&(h=C.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=C.event.special[d]||{},c=C.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:p.join(".")},s),(f=u[d])||((f=u[d]=[]).delegateCount=0,(!h.setup||!1===h.setup.call(t,i,p,o))&&t.addEventListener&&t.addEventListener(d,o)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),C.event.global[d]=!0)},remove:function(t,e,n,i,r){var s,o,a,u,l,c,h,f,d,p,g,v=ti.hasData(t)&&ti.get(t);if(v&&(u=v.events)){for(l=(e=(e||"").match(H)||[""]).length;l--;){if(d=g=(a=tT.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),!d){for(d in u)C.event.remove(t,d+e[l],n,i,!0);continue}for(h=C.event.special[d]||{},f=u[d=(i?h.delegateType:h.bindType)||d]||[],a=a[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=f.length;s--;)c=f[s],(r||g===c.origType)&&(!n||n.guid===c.guid)&&(!a||a.test(c.namespace))&&(!i||i===c.selector||"**"===i&&c.selector)&&(f.splice(s,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));o&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,v.handle)||C.removeEvent(t,d,v.handle),delete u[d])}C.isEmptyObject(u)&&ti.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=Array(arguments.length),u=C.event.fix(t),l=(ti.get(this,"events")||Object.create(null))[u.type]||[],c=C.event.special[u.type]||{};for(e=1,a[0]=u;e<arguments.length;e++)a[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(o=C.event.handlers.call(this,u,l),e=0;(r=o[e++])&&!u.isPropagationStopped();)for(u.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!u.isImmediatePropagationStopped();)(!u.rnamespace||!1===s.namespace||u.rnamespace.test(s.namespace))&&(u.handleObj=s,u.data=s.data,void 0!==(i=((C.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(u.result=i)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,i,r,s,o,a=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1)){for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&!("click"===t.type&&!0===l.disabled)){for(n=0,s=[],o={};n<u;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?C(r,this).index(l)>-1:C.find(r,this,null,[l]).length),o[r]&&s.push(i);s.length&&a.push({elem:l,handlers:s})}}return l=this,u<e.length&&a.push({elem:l,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[C.expando]?t:new C.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return t_.test(e.type)&&e.click&&k(e,"input")&&tA(e,"click",!0),!1},trigger:function(t){var e=this||t;return t_.test(e.type)&&e.click&&k(e,"input")&&tA(e,"click"),!0},_default:function(t){var e=t.target;return t_.test(e.type)&&e.click&&k(e,"input")&&ti.get(e,"click")||k(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},C.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?tM:tP,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:tP,isPropagationStopped:tP,isImmediatePropagationStopped:tP,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=tM,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=tM,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=tM,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(t,e){function n(t){if(m.documentMode){var n=ti.get(this,"handle"),i=C.event.fix(t);i.type="focusin"===t.type?"focus":"blur",i.isSimulated=!0,n(t),i.target===i.currentTarget&&n(i)}else C.event.simulate(e,t.target,C.event.fix(t))}C.event.special[t]={setup:function(){var i;if(tA(this,t,!0),!m.documentMode)return!1;(i=ti.get(this,e))||this.addEventListener(e,n),ti.set(this,e,(i||0)+1)},trigger:function(){return tA(this,t),!0},teardown:function(){var t;if(!m.documentMode)return!1;(t=ti.get(this,e)-1)?ti.set(this,e,t):(this.removeEventListener(e,n),ti.remove(this,e))},_default:function(e){return ti.get(e.target,t)},delegateType:e},C.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=m.documentMode?this:i,s=ti.get(r,e);s||(m.documentMode?this.addEventListener(e,n):i.addEventListener(t,n,!0)),ti.set(r,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=m.documentMode?this:i,s=ti.get(r,e)-1;s?ti.set(r,e,s):(m.documentMode?this.removeEventListener(e,n):i.removeEventListener(t,n,!0),ti.remove(r,e))}}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){C.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||C.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),C.fn.extend({on:function(t,e,n,i){return tI(this,t,e,n,i)},one:function(t,e,n,i){return tI(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,C(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(!1===e||"function"==typeof e)&&(n=e,e=void 0),!1===n&&(n=tP),this.each(function(){C.event.remove(this,t,n,e)})}});var tO=/<script|<style|<link/i,tN=/checked\s*(?:[^=]|=\s*.checked.)/i,tE=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function tj(t,e){return k(t,"table")&&k(11!==e.nodeType?e:e.firstChild,"tr")&&C(t).children("tbody")[0]||t}function tL(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function tz(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function tD(t,e){var n,i,r,s,o,a;if(1===e.nodeType){if(ti.hasData(t)&&(a=ti.get(t).events))for(r in ti.remove(e,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)C.event.add(e,r,a[r][n]);tr.hasData(t)&&(s=tr.access(t),o=C.extend({},s),tr.set(e,o))}}function t$(t,e,n,i){e=o(e);var r,s,a,u,l,c,h=0,f=t.length,d=f-1,v=e[0],m=g(v);if(m||f>1&&"string"==typeof v&&!p.checkClone&&tN.test(v))return t.each(function(r){var s=t.eq(r);m&&(e[0]=v.call(this,r,s.html())),t$(s,e,n,i)});if(f&&(s=(r=tk(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(u=(a=C.map(tw(r,"script"),tL)).length;h<f;h++)l=r,h!==d&&(l=C.clone(l,!0,!0),u&&C.merge(a,tw(l,"script"))),n.call(t[h],l,h);if(u)for(c=a[a.length-1].ownerDocument,C.map(a,tz),h=0;h<u;h++)l=a[h],tx.test(l.type||"")&&!ti.access(l,"globalEval")&&C.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?C._evalUrl&&!l.noModule&&C._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):y(l.textContent.replace(tE,""),l,c))}return t}function tR(t,e,n){for(var i,r=e?C.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||C.cleanData(tw(i)),i.parentNode&&(n&&tf(i)&&tC(tw(i,"script")),i.parentNode.removeChild(i));return t}C.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),u=tf(t);if(!p.noCloneChecked&&(1===t.nodeType||11===t.nodeType)&&!C.isXMLDoc(t))for(i=0,o=tw(a),r=(s=tw(t)).length;i<r;i++)!function(t,e){var n=e.nodeName.toLowerCase();"input"===n&&t_.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}(s[i],o[i]);if(e){if(n)for(i=0,s=s||tw(t),o=o||tw(a),r=s.length;i<r;i++)tD(s[i],o[i]);else tD(t,a)}return(o=tw(a,"script")).length>0&&tC(o,!u&&tw(t,"script")),a},cleanData:function(t){for(var e,n,i,r=C.event.special,s=0;void 0!==(n=t[s]);s++)if(te(n)){if(e=n[ti.expando]){if(e.events)for(i in e.events)r[i]?C.event.remove(n,i):C.removeEvent(n,i,e.handle);n[ti.expando]=void 0}n[tr.expando]&&(n[tr.expando]=void 0)}}}),C.fn.extend({detach:function(t){return tR(this,t,!0)},remove:function(t){return tR(this,t)},text:function(t){return Y(this,function(t){return void 0===t?C.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return t$(this,arguments,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&tj(this,t).appendChild(t)})},prepend:function(){return t$(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=tj(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return t$(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return t$(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(C.cleanData(tw(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return C.clone(this,t,e)})},html:function(t){return Y(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!tO.test(t)&&!tb[(ty.exec(t)||["",""])[1].toLowerCase()]){t=C.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(C.cleanData(tw(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return t$(this,arguments,function(e){var n=this.parentNode;0>C.inArray(this,t)&&(C.cleanData(tw(this)),n&&n.replaceChild(e,this))},t)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){C.fn[t]=function(t){for(var n,i=[],r=C(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),C(r[o])[e](n),a.apply(i,n.get());return this.pushStack(i)}});var tB=RegExp("^("+tu+")(?!px)[a-z%]+$","i"),tq=/^--/,tF=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},tH=function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=s[r];return i},tW=RegExp(tc.join("|"),"i");function tV(t,e,n){var i,r,s,o,a=tq.test(e),u=t.style;return(n=n||tF(t))&&(o=n.getPropertyValue(e)||n[e],a&&o&&(o=o.replace(A,"$1")||void 0),""!==o||tf(t)||(o=C.style(t,e)),!p.pixelBoxStyles()&&tB.test(o)&&tW.test(e)&&(i=u.width,r=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=i,u.minWidth=r,u.maxWidth=s)),void 0!==o?o+"":o}function tU(t,e){return{get:function(){if(t()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",th.appendChild(l).appendChild(c);var e=t.getComputedStyle(c);i="1%"!==e.top,u=12===n(e.marginLeft),c.style.right="60%",o=36===n(e.right),r=36===n(e.width),c.style.position="absolute",s=12===n(c.offsetWidth/3),th.removeChild(l),c=null}}function n(t){return Math.round(parseFloat(t))}var i,r,s,o,a,u,l=m.createElement("div"),c=m.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===c.style.backgroundClip,C.extend(p,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,n,i,r;return null==a&&(e=m.createElement("table"),n=m.createElement("tr"),i=m.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",th.appendChild(e).appendChild(n).appendChild(i),a=parseInt((r=t.getComputedStyle(n)).height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,th.removeChild(e)),a}}))}();var tZ=["Webkit","Moz","ms"],tX=m.createElement("div").style,tG={};function tY(t){return C.cssProps[t]||tG[t]||(t in tX?t:tG[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=tZ.length;n--;)if((t=tZ[n]+e)in tX)return t}(t)||t)}var tJ=/^(none|table(?!-c[ea]).+)/,tK={position:"absolute",visibility:"hidden",display:"block"},tQ={letterSpacing:"0",fontWeight:"400"};function t0(t,e,n){var i=tl.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function t1(t,e,n,i,r,s){var o="width"===e?1:0,a=0,u=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=C.css(t,n+tc[o],!0,r)),i?("content"===n&&(u-=C.css(t,"padding"+tc[o],!0,r)),"margin"!==n&&(u-=C.css(t,"border"+tc[o]+"Width",!0,r))):(u+=C.css(t,"padding"+tc[o],!0,r),"padding"!==n?u+=C.css(t,"border"+tc[o]+"Width",!0,r):a+=C.css(t,"border"+tc[o]+"Width",!0,r));return!i&&s>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-u-a-.5))||0),u+l}function t2(t,e,n){var i=tF(t),r=(!p.boxSizingReliable()||n)&&"border-box"===C.css(t,"boxSizing",!1,i),s=r,o=tV(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(tB.test(o)){if(!n)return o;o="auto"}return(!p.boxSizingReliable()&&r||!p.reliableTrDimensions()&&k(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===C.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===C.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+t1(t,e,n||(r?"border":"content"),s,i,o)+"px"}function t5(t,e,n,i,r){return new t5.prototype.init(t,e,n,i,r)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=tV(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=tt(e),u=tq.test(e),l=t.style;if(u||(e=tY(a)),o=C.cssHooks[e]||C.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e];"string"==(s=typeof n)&&(r=tl.exec(n))&&r[1]&&(n=tg(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||u||(n+=r&&r[3]||(C.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var r,s,o,a=tt(e);return(tq.test(e)||(e=tY(a)),(o=C.cssHooks[e]||C.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=tV(t,e,i)),"normal"===r&&e in tQ&&(r=tQ[e]),""===n||n)?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),C.each(["height","width"],function(t,e){C.cssHooks[e]={get:function(t,n,i){if(n)return!tJ.test(C.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?t2(t,e,i):tH(t,tK,function(){return t2(t,e,i)})},set:function(t,n,i){var r,s=tF(t),o=!p.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===C.css(t,"boxSizing",!1,s),u=i?t1(t,e,i,a,s):0;return a&&o&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-t1(t,e,"border",!1,s)-.5)),u&&(r=tl.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=C.css(t,e)),t0(t,n,u)}}}),C.cssHooks.marginLeft=tU(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(tV(t,"marginLeft"))||t.getBoundingClientRect().left-tH(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(t,e){C.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+tc[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(C.cssHooks[t+e].set=t0)}),C.fn.extend({css:function(t,e){return Y(this,function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=tF(t),r=e.length;o<r;o++)s[e[o]]=C.css(t,e[o],!1,i);return s}return void 0!==n?C.style(t,e,n):C.css(t,e)},t,e,arguments.length>1)}}),C.Tween=t5,t5.prototype={constructor:t5,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||C.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(C.cssNumber[n]?"":"px")},cur:function(){var t=t5.propHooks[this.prop];return t&&t.get?t.get(this):t5.propHooks._default.get(this)},run:function(t){var e,n=t5.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):t5.propHooks._default.set(this),this}},t5.prototype.init.prototype=t5.prototype,t5.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):1===t.elem.nodeType&&(C.cssHooks[t.prop]||null!=t.elem.style[tY(t.prop)])?C.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},t5.propHooks.scrollTop=t5.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return .5-Math.cos(t*Math.PI)/2},_default:"swing"},C.fx=t5.prototype.init,C.fx.step={};var t3,t9,t4,t6,t8=/^(?:toggle|show|hide)$/,t7=/queueHooks$/;function et(){return t.setTimeout(function(){t4=void 0}),t4=Date.now()}function ee(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=tc[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function en(t,e,n){for(var i,r=(ei.tweeners[e]||[]).concat(ei.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function ei(t,e,n){var i,r,s=0,o=ei.prefilters.length,a=C.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var e=t4||et(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),s=0,o=l.tweens.length;s<o;s++)l.tweens[s].run(i);return(a.notifyWith(t,[l,i,n]),i<1&&o)?n:(o||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:e,originalOptions:n,startTime:t4||et(),duration:n.duration,tweens:[],createTween:function(e,n){var i=C.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=tt(n)],Array.isArray(s=t[n])&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=C.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(c,l.opts.specialEasing);s<o;s++)if(i=ei.prefilters[s].call(l,t,c,l.opts))return g(i.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return C.map(c,en,l),g(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),C.fx.timer(C.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}C.Animation=C.extend(ei,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return tg(n.elem,t,tl.exec(e),n),n}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(H);for(var n,i=0,r=t.length;i<r;i++)n=t[i],ei.tweeners[n]=ei.tweeners[n]||[],ei.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,u,l,c,h="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&tp(t),v=ti.get(t,"fxshow");for(i in n.queue||(null==(o=C._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,C.queue(t,"fx").length||o.empty.fire()})})),e)if(r=e[i],t8.test(r)){if(delete e[i],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;g=!0}d[i]=v&&v[i]||C.style(t,i)}if(!(!(u=!C.isEmptyObject(e))&&C.isEmptyObject(d)))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=v&&v.display)&&(l=ti.get(t,"display")),"none"===(c=C.css(t,"display"))&&(l?c=l:(tm([t],!0),l=t.style.display||l,c=C.css(t,"display"),tm([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===C.css(t,"float")&&(u||(f.done(function(){p.display=l}),null!=l||(l="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=ti.access(t,"fxshow",{display:l}),s&&(v.hidden=!g),g&&tm([t],!0),f.done(function(){for(i in g||tm([t]),ti.remove(t,"fxshow"),d)C.style(t,i,d[i])})),u=en(g?v[i]:0,i,f),i in v||(v[i]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?ei.prefilters.unshift(t):ei.prefilters.push(t)}}),C.speed=function(t,e,n){var i=t&&"object"==typeof t?C.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return C.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in C.fx.speeds?i.duration=C.fx.speeds[i.duration]:i.duration=C.fx.speeds._default),(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){g(i.old)&&i.old.call(this),i.queue&&C.dequeue(this,i.queue)},i},C.fn.extend({fadeTo:function(t,e,n,i){return this.filter(tp).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=C.isEmptyObject(t),s=C.speed(e,n,i),o=function(){var e=ei(this,C.extend({},t),s);(r||ti.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=C.timers,o=ti.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&t7.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem===this&&(null==t||s[r].queue===t)&&(s[r].anim.stop(n),e=!1,s.splice(r,1));(e||!n)&&C.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=ti.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=C.timers,o=i?i.length:0;for(n.finish=!0,C.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),C.each(["toggle","show","hide"],function(t,e){var n=C.fn[e];C.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ee(e,!0),t,i,r)}}),C.each({slideDown:ee("show"),slideUp:ee("hide"),slideToggle:ee("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){C.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),C.timers=[],C.fx.tick=function(){var t,e=0,n=C.timers;for(t4=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||C.fx.stop(),t4=void 0},C.fx.timer=function(t){C.timers.push(t),C.fx.start()},C.fx.interval=13,C.fx.start=function(){t6||(t6=!0,function e(){t6&&(!1===m.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(e):t.setTimeout(e,C.fx.interval),C.fx.tick())}())},C.fx.stop=function(){t6=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,n){return e=C.fx&&C.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},er=m.createElement("input"),es=m.createElement("select").appendChild(m.createElement("option")),er.type="checkbox",p.checkOn=""!==er.value,p.optSelected=es.selected,(er=m.createElement("input")).value="t",er.type="radio",p.radioValue="t"===er.value;var er,es,eo,ea=C.expr.attrHandle;C.fn.extend({attr:function(t,e){return Y(this,C.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){C.removeAttr(this,t)})}}),C.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s){if(void 0===t.getAttribute)return C.prop(t,e,n);if(1===s&&C.isXMLDoc(t)||(r=C.attrHooks[e.toLowerCase()]||(C.expr.match.bool.test(e)?eo:void 0)),void 0!==n){if(null===n){C.removeAttr(t,e);return}return r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n)}return r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=C.find.attr(t,e))?void 0:i}},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&k(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(H);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),eo={set:function(t,e,n){return!1===e?C.removeAttr(t,n):t.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ea[e]||C.find.attr;ea[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=ea[o],ea[o]=r,r=null!=n(t,e,i)?o:null,ea[o]=s),r}});var eu=/^(?:input|select|textarea|button)$/i,el=/^(?:a|area)$/i;function ec(t){return(t.match(H)||[]).join(" ")}function eh(t){return t.getAttribute&&t.getAttribute("class")||""}function ef(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(H)||[]}C.fn.extend({prop:function(t,e){return Y(this,C.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[C.propFix[t]||t]})}}),C.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return(1===s&&C.isXMLDoc(t)||(e=C.propFix[e]||e,r=C.propHooks[e]),void 0!==n)?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):eu.test(t.nodeName)||el.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(t){var e,n,i,r,s,o;return g(t)?this.each(function(e){C(this).addClass(t.call(this,e,eh(this)))}):(e=ef(t)).length?this.each(function(){if(i=eh(this),n=1===this.nodeType&&" "+ec(i)+" "){for(s=0;s<e.length;s++)r=e[s],0>n.indexOf(" "+r+" ")&&(n+=r+" ");i!==(o=ec(n))&&this.setAttribute("class",o)}}):this},removeClass:function(t){var e,n,i,r,s,o;return g(t)?this.each(function(e){C(this).removeClass(t.call(this,e,eh(this)))}):arguments.length?(e=ef(t)).length?this.each(function(){if(i=eh(this),n=1===this.nodeType&&" "+ec(i)+" "){for(s=0;s<e.length;s++)for(r=e[s];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");i!==(o=ec(n))&&this.setAttribute("class",o)}}):this:this.attr("class","")},toggleClass:function(t,e){var n,i,r,s,o=typeof t,a="string"===o||Array.isArray(t);return g(t)?this.each(function(n){C(this).toggleClass(t.call(this,n,eh(this),e),e)}):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=ef(t),this.each(function(){if(a)for(r=0,s=C(this);r<n.length;r++)i=n[r],s.hasClass(i)?s.removeClass(i):s.addClass(i);else(void 0===t||"boolean"===o)&&((i=eh(this))&&ti.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":ti.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ec(eh(n))+" ").indexOf(e)>-1)return!0;return!1}});var ed=/\r/g;C.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=g(t),this.each(function(n){var r;1!==this.nodeType||(null==(r=i?t.call(this,n,C(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=C.map(r,function(t){return null==t?"":t+""})),(e=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=C.valHooks[r.type]||C.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(ed,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:ec(C.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],u=o?s+1:r.length;for(i=s<0?u:o?s:0;i<u;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(e=C(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=C.makeArray(e),o=r.length;o--;)((i=r[o]).selected=C.inArray(C.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=C.inArray(C(t).val(),e)>-1}},p.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ep=t.location,eg={guid:Date.now()},ev=/\?/;C.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{n=new t.DOMParser().parseFromString(e,"text/xml")}catch(t){}return i=n&&n.getElementsByTagName("parsererror")[0],(!n||i)&&C.error("Invalid XML: "+(i?C.map(i.childNodes,function(t){return t.textContent}).join("\n"):e)),n};var em=/^(?:focusinfocus|focusoutblur)$/,e_=function(t){t.stopPropagation()};C.extend(C.event,{trigger:function(e,n,i,r){var s,o,a,u,l,c,f,d,p=[i||m],_=h.call(e,"type")?e.type:e,y=h.call(e,"namespace")?e.namespace.split("."):[];if(o=d=a=i=i||m,!(3===i.nodeType||8===i.nodeType||em.test(_+C.event.triggered))&&(_.indexOf(".")>-1&&(_=(y=_.split(".")).shift(),y.sort()),l=0>_.indexOf(":")&&"on"+_,(e=e[C.expando]?e:new C.Event(_,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:C.makeArray(n,[e]),f=C.event.special[_]||{},r||!f.trigger||!1!==f.trigger.apply(i,n))){if(!r&&!f.noBubble&&!v(i)){for(u=f.delegateType||_,em.test(u+_)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(i.ownerDocument||m)&&p.push(a.defaultView||a.parentWindow||t)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)d=o,e.type=s>1?u:f.bindType||_,(c=(ti.get(o,"events")||Object.create(null))[e.type]&&ti.get(o,"handle"))&&c.apply(o,n),(c=l&&o[l])&&c.apply&&te(o)&&(e.result=c.apply(o,n),!1===e.result&&e.preventDefault());return e.type=_,!r&&!e.isDefaultPrevented()&&(!f._default||!1===f._default.apply(p.pop(),n))&&te(i)&&l&&g(i[_])&&!v(i)&&((a=i[l])&&(i[l]=null),C.event.triggered=_,e.isPropagationStopped()&&d.addEventListener(_,e_),i[_](),e.isPropagationStopped()&&d.removeEventListener(_,e_),C.event.triggered=void 0,a&&(i[l]=a)),e.result}},simulate:function(t,e,n){var i=C.extend(new C.Event,n,{type:t,isSimulated:!0});C.event.trigger(i,null,e)}}),C.fn.extend({trigger:function(t,e){return this.each(function(){C.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return C.event.trigger(t,e,n,!0)}});var ey=/\[\]$/,ex=/\r?\n/g,eb=/^(?:submit|button|image|reset|file)$/i,ew=/^(?:input|select|textarea|keygen)/i;C.param=function(t,e){var n,i=[],r=function(t,e){var n=g(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,function(){r(this.name,this.value)});else for(n in t)!function t(e,n,i,r){var s;if(Array.isArray(n))C.each(n,function(n,s){i||ey.test(e)?r(e,s):t(e+"["+("object"==typeof s&&null!=s?n:"")+"]",s,i,r)});else if(i||"object"!==x(n))r(e,n);else for(s in n)t(e+"["+s+"]",n[s],i,r)}(n,t[n],e,r);return i.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&ew.test(this.nodeName)&&!eb.test(t)&&(this.checked||!t_.test(t))}).map(function(t,e){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,function(t){return{name:e.name,value:t.replace(ex,"\r\n")}}):{name:e.name,value:n.replace(ex,"\r\n")}}).get()}});var eC=/%20/g,eS=/#.*$/,ek=/([?&])_=[^&]*/,eT=/^(.*?):[ \t]*([^\r\n]*)$/mg,eM=/^(?:GET|HEAD)$/,eP=/^\/\//,eI={},eA={},eO="*/".concat("*"),eN=m.createElement("a");function eE(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(H)||[];if(g(n))for(;i=s[r++];)"+"===i[0]?(t[i=i.slice(1)||"*"]=t[i]||[]).unshift(n):(t[i]=t[i]||[]).push(n)}}function ej(t,e,n,i){var r={},s=t===eA;function o(a){var u;return r[a]=!0,C.each(t[a]||[],function(t,a){var l=a(e,n,i);return"string"!=typeof l||s||r[l]?s?!(u=l):void 0:(e.dataTypes.unshift(l),o(l),!1)}),u}return o(e.dataTypes[0])||!r["*"]&&o("*")}function eL(t,e){var n,i,r=C.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&C.extend(!0,t,i),t}eN.href=ep.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ep.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ep.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":eO,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?eL(eL(t,C.ajaxSettings),e):eL(C.ajaxSettings,t)},ajaxPrefilter:eE(eI),ajaxTransport:eE(eA),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,r,s,o,a,u,l,c,h,f,d=C.ajaxSetup({},n),p=d.context||d,g=d.context&&(p.nodeType||p.jquery)?C(p):C.event,v=C.Deferred(),_=C.Callbacks("once memory"),y=d.statusCode||{},x={},b={},w="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(l){if(!o)for(o={};e=eT.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(t,e){return null==l&&(x[t=b[t.toLowerCase()]=b[t.toLowerCase()]||t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t){if(l)S.always(t[S.status]);else for(e in t)y[e]=[y[e],t[e]]}return this},abort:function(t){var e=t||w;return i&&i.abort(e),k(0,e),this}};if(v.promise(S),d.url=((e||d.url||ep.href)+"").replace(eP,ep.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(H)||[""],null==d.crossDomain){u=m.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=eN.protocol+"//"+eN.host!=u.protocol+"//"+u.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=C.param(d.data,d.traditional)),ej(eI,d,n,S),l)return S;for(h in(c=C.event&&d.global)&&0==C.active++&&C.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!eM.test(d.type),r=d.url.replace(eS,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(eC,"+")):(f=d.url.slice(r.length),d.data&&(d.processData||"string"==typeof d.data)&&(r+=(ev.test(r)?"&":"?")+d.data,delete d.data),!1===d.cache&&(r=r.replace(ek,"$1"),f=(ev.test(r)?"&":"?")+"_="+eg.guid+++f),d.url=r+f),d.ifModified&&(C.lastModified[r]&&S.setRequestHeader("If-Modified-Since",C.lastModified[r]),C.etag[r]&&S.setRequestHeader("If-None-Match",C.etag[r])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+eO+"; q=0.01":""):d.accepts["*"]),d.headers)S.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,S,d)||l))return S.abort();if(w="abort",_.add(d.complete),S.done(d.success),S.fail(d.error),i=ej(eA,d,n,S)){if(S.readyState=1,c&&g.trigger("ajaxSend",[S,d]),l)return S;d.async&&d.timeout>0&&(a=t.setTimeout(function(){S.abort("timeout")},d.timeout));try{l=!1,i.send(x,k)}catch(t){if(l)throw t;k(-1,t)}}else k(-1,"No Transport");function k(e,n,o,u){var h,f,m,x,b,w=n;l||(l=!0,a&&t.clearTimeout(a),i=void 0,s=u||"",S.readyState=e>0?4:0,h=e>=200&&e<300||304===e,o&&(x=function(t,e,n){for(var i,r,s,o,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i){for(r in a)if(a[r]&&a[r].test(i)){u.unshift(r);break}}if(u[0]in n)s=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==u[0]&&u.unshift(s),n[s]}(d,S,o)),!h&&C.inArray("script",d.dataTypes)>-1&&0>C.inArray("json",d.dataTypes)&&(d.converters["text script"]=function(){}),x=function(t,e,n,i){var r,s,o,a,u,l={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=s,s=c.shift()){if("*"===s)s=u;else if("*"!==u&&u!==s){if(!(o=l[u+" "+s]||l["* "+s])){for(r in l)if((a=r.split(" "))[1]===s&&(o=l[u+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[r]:!0!==l[r]&&(s=a[0],c.unshift(a[1]));break}}if(!0!==o){if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+u+" to "+s}}}}}return{state:"success",data:e}}(d,x,S,h),h?(d.ifModified&&((b=S.getResponseHeader("Last-Modified"))&&(C.lastModified[r]=b),(b=S.getResponseHeader("etag"))&&(C.etag[r]=b)),204===e||"HEAD"===d.type?w="nocontent":304===e?w="notmodified":(w=x.state,f=x.data,h=!(m=x.error))):(m=w,(e||!w)&&(w="error",e<0&&(e=0))),S.status=e,S.statusText=(n||w)+"",h?v.resolveWith(p,[f,w,S]):v.rejectWith(p,[S,w,m]),S.statusCode(y),y=void 0,c&&g.trigger(h?"ajaxSuccess":"ajaxError",[S,d,h?f:m]),_.fireWith(p,[S,w]),!c||(g.trigger("ajaxComplete",[S,d]),--C.active||C.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return C.get(t,e,n,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],function(t,e){C[e]=function(t,n,i,r){return g(n)&&(r=r||i,i=n,n=void 0),C.ajax(C.extend({url:t,type:e,dataType:r,data:n,success:i},C.isPlainObject(t)&&t))}}),C.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),C._evalUrl=function(t,e,n){return C.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){C.globalEval(t,e,n)}})},C.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return g(t)?this.each(function(e){C(this).wrapInner(t.call(this,e))}):this.each(function(){var e=C(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=g(t);return this.each(function(n){C(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(t){return!C.expr.pseudos.visible(t)},C.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var ez={0:200,1223:204},eD=C.ajaxSettings.xhr();p.cors=!!eD&&"withCredentials"in eD,p.ajax=eD=!!eD,C.ajaxTransport(function(e){var n,i;if(p.cors||eD&&!e.crossDomain)return{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(ez[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),C.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),C.ajaxTransport("script",function(t){if(t.crossDomain||t.scriptAttrs){var e,n;return{send:function(i,r){e=C("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),m.head.appendChild(e[0])},abort:function(){n&&n()}}}});var e$=[],eR=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=e$.pop()||C.expando+"_"+eg.guid++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",function(e,n,i){var r,s,o,a=!1!==e.jsonp&&(eR.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&eR.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(eR,"$1"+r):!1!==e.jsonp&&(e.url+=(ev.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||C.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},i.always(function(){void 0===s?C(t).removeProp(r):t[r]=s,e[r]&&(e.jsonpCallback=n.jsonpCallback,e$.push(r)),o&&g(s)&&s(o[0]),o=s=void 0}),"script"}),p.createHTMLDocument=((n=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===n.childNodes.length),C.parseHTML=function(t,e,n){var i,r,s;return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((i=(e=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,e.head.appendChild(i)):e=m),r=z.exec(t),s=!n&&[],r)?[e.createElement(r[1])]:(r=tk([t],e,s),s&&s.length&&C(s).remove(),C.merge([],r.childNodes))},C.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=ec(t.slice(a)),t=t.slice(0,a)),g(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&C.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,o.html(i?C("<div>").append(C.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},C.expr.pseudos.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(t,e,n){var i,r,s,o,a,u,l=C.css(t,"position"),c=C(t),h={};"static"===l&&(t.style.position="relative"),a=c.offset(),s=C.css(t,"top"),u=C.css(t,"left"),("absolute"===l||"fixed"===l)&&(s+u).indexOf("auto")>-1?(o=(i=c.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(u)||0),g(e)&&(e=e.call(t,n,C.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):c.css(h)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,n,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===C.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===C.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&(r=C(t).offset(),r.top+=C.css(t,"borderTopWidth",!0),r.left+=C.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-C.css(i,"marginTop",!0),left:e.left-r.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===C.css(t,"position");)t=t.offsetParent;return t||th})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;C.fn[t]=function(i){return Y(this,function(t,i,r){var s;if(v(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r},t,i,arguments.length)}}),C.each(["top","left"],function(t,e){C.cssHooks[e]=tU(p.pixelPosition,function(t,n){if(n)return n=tV(t,e),tB.test(n)?C(t).position()[e]+"px":n})}),C.each({Height:"height",Width:"width"},function(t,e){C.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){C.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return Y(this,function(e,n,r){var s;return v(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?C.css(e,n,a):C.style(e,n,r,a)},e,o?r:void 0,o)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){C.fn[e]=function(t){return this.on(e,t)}}),C.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1==arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){C.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});var eB=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return i=s.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||C.guid++,r},C.holdReady=function(t){t?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=k,C.isFunction=g,C.isWindow=v,C.camelCase=tt,C.type=x,C.now=Date.now,C.isNumeric=function(t){var e=C.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},C.trim=function(t){return null==t?"":(t+"").replace(eB,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var eq=t.jQuery,eF=t.$;return C.noConflict=function(e){return t.$===C&&(t.$=eF),e&&t.jQuery===C&&(t.jQuery=eq),C},void 0===e&&(t.jQuery=t.$=C),C},"object"==typeof t.exports?t.exports=n.document?i(n,!0):function(t){if(!t.document)throw Error("jQuery requires a window with a document");return i(t)}:i(n)}),u("n4eml",function(t,e){/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, JÃ¼rg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 JÃ¼rg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e,n){var i=(e=e||a("foUwZ")).window,r=e.document,s=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],i=e.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,o=Object.defineProperty,a=e.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},u=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},l=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},c=function(t,e,n){if(t){var i=s(t,"length");(i&&"number"==typeof i.value?a:u).call(t,e,n=n||t)}return n};function h(e,n,i,r,a){var u={};function l(t,l){"string"==typeof(l=l||(l=s(n,t))&&(l.get?l:l.value))&&"#"===l[0]&&(l=e[l.substring(1)]||l);var c,h="function"==typeof l,d=l,p=a||h&&!l.base?l&&l.get?t in e:e[t]:null;a&&p||(h&&p&&(l.base=p),h&&!1!==r&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),d&&!h&&d.get&&"function"==typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(s(e,t)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=i?i:!c),o(e,t,d))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&l(c);for(var c in u){var h=u[c],d=e["set"+h],p=e["get"+h]||d&&e["is"+h];p&&(!0===r||0===p.length)&&l(c,{get:p,set:d})}}return e}function f(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n)}return this}return h(f,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&h(this.prototype,t,t.enumerable,n,i),h(this,e,null,n,i)}for(var r=1,s=arguments.length;r<s;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,i=this,s=0,a=arguments.length;s<a&&!(t&&e);s++)n=arguments[s],t=t||n.initialize,e=e||n.prototype;return o(e=(t=t||function(){i.apply(this,arguments)}).prototype=e||r(this.prototype),"constructor",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:c,create:r,define:o,describe:s,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===f||"Object"===e.name)},pick:function(t,e){return t!==n?t:e},slice:function(t,e,n){return i.call(t,e,n)}}})};t.exports=s,s.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?h.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return s.importJSON(t,this)},exportJSON:function(t){return s.exportJSON(this,t)},toJSON:function(){return s.serialize(this)},set:function(t,e){return t&&s.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!s.exports[n]&&(s.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(!s.equals(t[n],e[n]))return!1}else{var i=Object.keys(t),n=i.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!(e.hasOwnProperty(r)&&s.equals(t[r],e[r])))return!1}}return!0}return!1},read:function(t,e,i,r){if(this===s){var o=this.peek(t,e);return t.__index++,o}var a=this.prototype,u=a._readIndex,l=e||u&&t.__index||0,c=t.length,h=t[l];if(r=r||c-l,h instanceof this||i&&i.readNull&&null==h&&r<=1)return u&&(t.__index=l+1),h&&i&&i.clone?h.clone():h;if(h=s.create(a),u&&(h.__read=!0),h=h.initialize.apply(h,l>0||l+r<c?s.slice(t,l,l+r):t)||h,u){t.__index=l+h.__read;var f=h.__filtered;f&&(t.__filtered=f,h.__filtered=n),h.__read=n}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,s=[],o=e||0,a=i?o+i:t.length,u=o;u<a;u++)s.push(Array.isArray(r=t[u])?this.read(r,0,n):this.read(t,u,n,1));return s},readNamed:function(t,e,i,r,o){var a=this.getNamed(t,e),u=a!==n;if(u){var l=t.__filtered;if(!l){var c=this.getSource(t);(l=t.__filtered=s.create(c)).__unfiltered=c}l[e]=n}return this.read(u?[a]:t,i,r,o)},readSupported:function(t,e){var i=this.getSource(t),r=this,s=!1;return i&&Object.keys(i).forEach(function(i){if(i in e){var o=r.readNamed(t,i);o!==n&&(e[i]=o),s=!0}}),s},getSource:function(t){var e=t.__source;if(e===n){var i=1===t.length&&t[0];e=t.__source=i&&s.isPlainObject(i)?i:null}return e},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,i,r){function s(r){if(!(i&&r in i)&&!(o&&r in o)){var s=e[r];s!==n&&(t[r]=s)}}if(r){for(var o,a,u={},l=0,c=r.length;l<c;l++)(a=r[l])in e&&(s(a),u[a]=!0);o=u}return Object.keys(e.__unfiltered||e).forEach(s),t},isPlainValue:function(t,e){return s.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,o=!i;if(o&&(e.formatter=new h(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var a=t._class;a&&!t._compactSerialize&&(o||!n)&&r[0]!==a&&r.unshift(a)}else if(Array.isArray(t)){r=[];for(var u=0,l=t.length;u<l;u++)r[u]=s.serialize(t[u],e,n,i)}else if(s.isPlainObject(t)){r={};for(var c=Object.keys(t),u=0,l=c.length;u<l;u++){var f=c[u];r[f]=s.serialize(t[f],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return o&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var o=t,a=!n,u=a&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var l=t[0],c="dictionary"===l;if(1==t.length&&/^#/.test(l))return n.dictionary[l];l=s.exports[l],o=[];for(var h=l?1:0,f=t.length;h<f;h++)o.push(s.deserialize(t[h],e,n,c,u));if(l){var d=o;o=e?e(l,d,a||r):new l(d)}}else if(s.isPlainObject(t))for(var p in o={},i&&(n.dictionary=o),t)o[p]=s.deserialize(t[p],e,n);return u?o[1]:o},exportJSON:function(t,e){var n=s.serialize(t,e);return e&&!1==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return s.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,i){var r=i&&e&&e.constructor===t,o=r?e:s.create(t.prototype);if(1===n.length&&o instanceof C&&(r||!(o instanceof k))){var a=n[0];s.isPlainObject(a)&&(a.insert=!1,r&&(n=n.concat([C.INSERT])))}return(r?o.set:t).apply(o,n),r&&(e=null),o})},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,e,i,r){var o=e&&e.length,a=i===n;(i=a?t.length:i)>t.length&&(i=t.length);for(var u=0;u<o;u++)e[u]._index=i+u;if(a)return s.push(t,e),[];var l=[i,r];e&&s.push(l,e);for(var c=t.splice.apply(t,l),u=0,h=c.length;u<h;u++)c[u]._index=n;for(var u=i+o,h=t.length;u<h;u++)t[u]._index=u;return c},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var o={on:function(t,e){if("string"!=typeof t)s.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"!=typeof t){s.each(t,function(t,e){this.off(e,t)},this);return}var n,i=this._eventTypes,r=i&&i[t],o=this._callbacks&&this._callbacks[t];return o&&(e&&(-1===(n=o.indexOf(e))||1!==o.length)?-1!==n&&o.splice(n,1):(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t])),this},once:function(t,e){return this.on(t,function n(){e.apply(this,arguments),this.off(t,n)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=s.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var o=0,a=n.length;o<a;o++)if(!1==n[o].apply(this,i)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e){for(var r in n)if(n[r].length>0){var s=e[r],o=s&&s[i];o&&o.call(this,r)}}},statics:{inject:function t(e){var n=e._events;if(n){var i={};s.each(n,function(t,n){var r="string"==typeof t,o=r?t:n,a=s.capitalize(o),u=o.substring(2).toLowerCase();i[u]=r?{}:t,o="_"+o,e["get"+a]=function(){return this[o]},e["set"+a]=function(t){var e=this[o];e&&this.off(u,e),t&&this.on(u,t),this[o]=t}}),e._eventTypes=i}return t.base.apply(this,arguments)}}},u=s.extend({_class:"PaperScope",initialize:function t(){ta=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var n=t.prototype;if(!this.support){var i=ti.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:tr.nativeModes},ti.release(i)}if(!this.agent){var r=e.navigator.userAgent.toLowerCase(),o=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],a="darwin"===o?"mac":o,u=n.agent=n.browser={platform:a};a&&(u[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,i,r){if(!u.chrome){var s="opera"===e?i:/^(node|trident)$/.test(e)?r:n;u.version=s,u.versionNumber=parseFloat(s),e=({trident:"msie",jsdom:"node"})[e]||e,u.name=e,u[e]=!0}}),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.12.18",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){},install:function(t){var e=this;for(var n in s.each(["project","view","tool"],function(n){s.define(t,n,{configurable:!0,get:function(){return e[n]}})}),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ta=this,this.project=new w(t),this},createCanvas:function(t,e){return ti.getCanvas(t,e)},activate:function(){ta=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(var n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete u._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),l=s.extend(o,{initialize:function(t){this._scope=ta,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),c={findItemBoundsCollisions:function(t,e,n){function i(t){for(var e=Array(t.length),n=0;n<t.length;n++){var i=t[n].getBounds();e[n]=[i.left,i.top,i.right,i.bottom]}return e}var r=i(t),s=e&&e!==t?i(e):r;return this.findBoundsCollisions(r,s,n||0)},findCurveBoundsCollisions:function(t,e,n,i){function r(t){for(var e=Math.min,n=Math.max,i=Array(t.length),r=0;r<t.length;r++){var s=t[r];i[r]=[e(s[0],s[2],s[4],s[6]),e(s[1],s[3],s[5],s[7]),n(s[0],s[2],s[4],s[6]),n(s[1],s[3],s[5],s[7])]}return i}var s=r(t),o=e&&e!==t?r(e):s;if(i){for(var a=this.findBoundsCollisions(s,o,n||0,!1,!0),u=this.findBoundsCollisions(s,o,n||0,!0,!0),l=[],c=0,h=a.length;c<h;c++)l[c]={hor:a[c],ver:u[c]};return l}return this.findBoundsCollisions(s,o,n||0)},findBoundsCollisions:function(t,e,n,i,r){var s=!e||t===e,o=s?t:t.concat(e),a=t.length,u=o.length;function l(t,e,n){for(var i=0,r=t.length;i<r;){var s=r+i>>>1;o[t[s]][e]<n?i=s+1:r=s}return i-1}for(var c=i?1:0,h=c+2,f=i?0:1,d=f+2,p=Array(u),g=0;g<u;g++)p[g]=g;p.sort(function(t,e){return o[t][c]-o[e][c]});for(var v=[],m=Array(a),g=0;g<u;g++){var _=p[g],y=o[_],x=s?_:_-a,b=_<a,w=s||!b,C=b?[]:null;if(v.length){var S=l(v,h,y[c]-n)+1;if(v.splice(0,S),s&&r){C=C.concat(v);for(var k=0;k<v.length;k++){var T=v[k];m[T].push(x)}}else for(var M=y[d],P=y[f],k=0;k<v.length;k++){var T=v[k],I=o[T],A=T<a,O=s||T>=a;(r||(b&&O||w&&A)&&M>=I[f]-n&&P<=I[d]+n)&&(b&&O&&C.push(s?T:T-a),w&&A&&m[T].push(x))}}if(b&&(t===e&&C.push(_),m[_]=C),v.length){var N=y[h],E=l(v,h,N);v.splice(E+1,0,_)}else v.push(_)}for(var g=0;g<m.length;g++){var j=m[g];j&&j.sort(function(t,e){return t-e})}return m}},h=s.extend({initialize:function(t){this.precision=s.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});h.instance=new h;var f=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,s=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function o(t,e,n){return t<e?e:t>n?n:t}function a(t,e,i){function r(t){var e=0x8000001*t,n=t-e+e;return[n,t-n]}var s=e*e-t*i,o=e*e+t*i;if(3*n(s)<o){var a=r(t),u=r(e),l=r(i),c=e*e,h=u[0]*u[0]-c+2*u[0]*u[1]+u[1]*u[1],f=t*i,d=a[0]*l[0]-f+a[0]*l[1]+a[1]*l[0]+a[1]*l[1];s=c-f+(h-d)}return s}function u(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?r(2,-Math.round(s(t))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},isMachineZero:function(t){return t>=-112e-18&&t<=112e-18},clamp:o,integrate:function(n,i,r,s){for(var o=t[s-2],a=e[s-2],u=(r-i)*.5,l=u+i,c=0,h=s+1>>1,f=1&s?a[c++]*n(l):0;c<h;){var d=u*o[c];f+=a[c++]*(n(l+d)+n(l-d))}return u*f},findRoot:function(t,e,i,r,s,a,u){for(var l=0;l<a;l++){var c=t(i),h=c/e(i),f=i-h;if(n(h)<u){i=f;break}c>0?(s=i,i=f<=r?(r+s)*.5:f):(r=i,i=f>=s?(r+s)*.5:f)}return o(i,r,s)},solveQuadratic:function(t,e,r,s,l,c){var h,f=1/0;if(1e-12>n(t)){if(1e-12>n(e))return 1e-12>n(r)?-1:0;h=-r/e}else{var d=a(t,e*=-.5,r);if(d&&112e-18>n(d)){var p=u(n(t),n(e),n(r));p&&(t*=p,e*=p,r*=p,d=a(t,e,r))}if(d>=-112e-18){var g=d<0?0:i(d),v=e+(e<0?-g:g);0===v?f=-(h=r/t):(h=v/t,f=r/v)}}var m=0,_=null==l,y=l-1e-12,x=c+1e-12;return isFinite(h)&&(_||h>y&&h<x)&&(s[m++]=_?h:o(h,l,c)),f!==h&&isFinite(f)&&(_||f>y&&f<x)&&(s[m++]=_?f:o(f,l,c)),m},solveCubic:function(t,e,s,a,l,c,h){var d,p,g,v,m,_=u(n(t),n(e),n(s),n(a));function y(n){var i=t*(d=n);g=(p=i+e)*d+s,v=(i+p)*d+g,m=g*d+a}if(_&&(t*=_,e*=_,s*=_,a*=_),1e-12>n(t))t=e,p=s,g=a,d=1/0;else if(1e-12>n(a))p=e,g=s,d=0;else{y(-(e/t)/3);var x=m/t,b=r(n(x),1/3),w=x<0?-1:1,C=-v/t,S=C>0?1.324717957244746*Math.max(b,i(C)):b,k=d-w*S;if(k!==d){do y(k),k=0===v?d:d-m/v/1.0000000000000002;while(w*k>w*d)n(t)*d*d>n(a/d)&&(p=((g=-a/d)-s)/d)}}var T=f.solveQuadratic(t,p,g,l,c,h),M=null==c;return isFinite(d)&&(0===T||T>0&&d!==l[0]&&d!==l[1])&&(M||d>c-1e-12&&d<h+1e-12)&&(l[T++]=M?d:o(d,c,h)),T}}},d={_id:1,_pools:{},get:function(t){if(!t)return this._id++;var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}},p=s.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new p(this.x,this.y)},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();f.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(!arguments.length)return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x);var t=p.read(arguments),e=this.getLength()*t.getLength();if(f.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=p.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=p.read(t),n=e.x-this.x,i=e.y-this.y,r=n*n+i*i;return s.read(t)?r:Math.sqrt(r)},normalize:function(t){t===n&&(t=1);var e=this.getLength(),i=0!==e?t/e:0,r=new p(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new p(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=p.read(arguments);return new p(this.x+t.x,this.y+t.y)},subtract:function(){var t=p.read(arguments);return new p(this.x-t.x,this.y-t.y)},multiply:function(){var t=p.read(arguments);return new p(this.x*t.x,this.y*t.y)},divide:function(){var t=p.read(arguments);return new p(this.x/t.x,this.y/t.y)},modulo:function(){var t=p.read(arguments);return new p(this.x%t.x,this.y%t.y)},negate:function(){return new p(-this.x,-this.y)},isInside:function(){return _.read(arguments).contains(this)},isClose:function(){var t=arguments,e=p.read(t),n=s.read(t);return this.getDistance(e)<=n},isCollinear:function(){var t=p.read(arguments);return p.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=p.read(arguments);return p.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=f.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=p.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=p.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=p.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new p(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=p.read(t),n=p.read(t);return new p(Math.min(e.x,n.x),Math.min(e.y,n.y))},max:function(){var t=arguments,e=p.read(t),n=p.read(t);return new p(Math.max(e.x,n.x),Math.max(e.y,n.y))},random:function(){return new p(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},s.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new p(e(this.x),e(this.y))}},{})),g=p.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),v=s.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new v(this.width,this.height)},toString:function(){var t=h.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=v.read(arguments);return new v(this.width+t.width,this.height+t.height)},subtract:function(){var t=v.read(arguments);return new v(this.width-t.width,this.height-t.height)},multiply:function(){var t=v.read(arguments);return new v(this.width*t.width,this.height*t.height)},divide:function(){var t=v.read(arguments);return new v(this.width/t.width,this.height/t.height)},modulo:function(){var t=v.read(arguments);return new v(this.width%t.width,this.height%t.height)},negate:function(){return new v(-this.width,-this.height)},isZero:function(){var t=f.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new v(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new v(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new v(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new v(e(this.width),e(this.height))}},{})),m=v.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),_=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,i,r){var o,a=arguments,u=typeof t;if("number"===u?(this._set(t,e,i,r),o=4):"undefined"===u||null===t?(this._set(0,0,0,0),o=null===t?1:0):1===a.length&&(Array.isArray(t)?(this._set.apply(this,t),o=1):t.x!==n||t.width!==n?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),o=1):t.from===n&&t.to===n&&(this._set(0,0,0,0),s.readSupported(a,this)&&(o=1))),o===n){var l,c,h=p.readNamed(a,"from"),f=s.peek(a),d=h.x,g=h.y;if(f&&f.x!==n||s.hasNamed(a,"to")){var m=p.readNamed(a,"to");l=m.x-d,c=m.y-g,l<0&&(d=m.x,l=-l),c<0&&(g=m.y,c=-c)}else{var _=v.read(a);l=_.width,c=_.height}this._set(d,g,l,c),o=a.__index}var y=a.__filtered;return y&&(this.__filtered=y),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new _(this.x,this.y,this.width,this.height)},equals:function(t){var e=s.isPlainValue(t)?_.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?p:g)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=p.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?v:m)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=v.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?p:g)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=p.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==n||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(_.read(arguments)):this._containsPoint(p.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=_.read(arguments),e=s.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=_.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y);return new _(e,n,Math.min(this.x+this.width,t.x+t.width)-e,Math.min(this.y+this.height,t.y+t.height)-n)},unite:function(){var t=_.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y);return new _(e,n,Math.max(this.x+this.width,t.x+t.width)-e,Math.max(this.y+this.height,t.y+t.height)-n)},include:function(){var t=p.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y);return new _(e,n,Math.max(this.x+this.width,t.x)-e,Math.max(this.y+this.height,t.y)-n)},expand:function(){var t=v.read(arguments),e=t.width,n=t.height;return new _(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===n?t:e)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],o="get"+r,a="get"+s,u="set"+r,l="set"+s,c="get"+n,h="set"+n;this[c]=function(t){return new(t?p:g)(this[o](),this[a](),this,h)},this[h]=function(){var t=p.read(arguments);this[u](t.x),this[l](t.y)}},{beans:!0})),y=_.extend({initialize:function(t,e,n,i,r,s){this._set(t,e,n,i,!0),this._owner=r,this._setter=s},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=_.prototype;return s.each(["x","y","width","height"],function(t){var e=s.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),x=s.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments,r=i.length,s=!0;if(r>=6?this._set.apply(this,i):1===r||2===r?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):s=!1:r?s=!1:this.reset(),!s)throw Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,s,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=s,o||this._changed(),this},_serialize:function(t,e){return s.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new x(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=h.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,s.pick(t,!0),e),this.isIdentity())},translate:function(){var t=p.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,e=p.read(t),n=p.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=p.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),o=n-n*r+i*s,a=i-n*s-i*r,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=r*u+s*c,this._b=r*l+s*h,this._c=-s*u+r*c,this._d=-s*l+r*h,this._tx+=o*u+a*c,this._ty+=o*l+a*h,this._changed(),this},shear:function(){var t=arguments,e=p.read(t),n=p.read(t,0,{readNull:!0});n&&this.translate(n);var i=this._a,r=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*i,this._d+=e.x*r,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,e=p.read(t),n=p.read(t,0,{readNull:!0}),i=Math.PI/180,r=new p(Math.tan(e.x*i),Math.tan(e.y*i));return this.shear(r,n)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,o=t._a,a=t._c,u=t._b,l=t._d,c=t._tx,h=t._ty;this._a=o*n+u*r,this._c=a*n+l*r,this._b=o*i+u*s,this._d=a*i+l*s,this._tx+=c*n+h*r,this._ty+=c*i+h*s,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,o=this._tx,a=this._ty,u=t._a,l=t._c,c=t._b,h=t._d,f=t._tx,d=t._ty;this._a=u*n+l*i,this._c=u*r+l*s,this._b=c*n+h*i,this._d=c*r+h*s,this._tx=u*o+l*a+f,this._ty=c*o+h*a+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,s=this._ty,o=t*i-e*n,a=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(s)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*s-i*r)/o,this._ty=(e*r-t*s)/o,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new x(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(p.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new p),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var s=t[i],o=t[i+1];e[i]=s*this._a+o*this._c+this._tx,e[i+1]=s*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),o=2;o<8;o++){var a=i[o],u=1&o;a<r[u]?r[u]=a:a>s[u]&&(s[u]=a)}return e||(e=new _),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(p.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,s=this._c,o=this._d,a=this._tx,u=this._ty,l=i*o-r*s,c=null;if(l&&!isNaN(l)&&isFinite(a)&&isFinite(u)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new p),c=e._set((h*o-f*s)/l,(f*i-h*r)/l,n)}return c},decompose:function(){var t,e,n,i=this._a,r=this._b,s=this._c,o=this._d,a=i*o-r*s,u=Math.sqrt,l=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var h=u(i*i+r*r);t=Math.acos(i/h)*(r>0?1:-1),e=[h,a/h],n=[l(i*s+r*o,h*h),0]}else if(0!==s||0!==o){var f=u(s*s+o*o);t=Math.asin(s/f)*(o>0?1:-1),e=[a/f,f],n=[0,l(i*s+r*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new p(e),skewing:new p(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new p(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],function(t){var e=s.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),b=s.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new p(this._px,this._py)},getVector:function(){return new p(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return b.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return b.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return b.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return p.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return p.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,o,a,u,l){u||(n-=t,i-=e,o-=r,a-=s);var c=n*a-i*o;if(!f.isMachineZero(c)){var h=t-r,d=e-s,g=(o*d-a*h)/c,v=(n*d-i*h)/c;if(l||-1e-12<g&&g<1.000000000001&&-1e-12<v&&v<1.000000000001)return l||(g=g<=0?0:g>=1?1:g),new p(t+g*n,e+g*i)}},getSide:function(t,e,n,i,r,s,o,a){o||(n-=t,i-=e);var u=r-t,l=u*i-(s-e)*n;return!a&&f.isMachineZero(l)&&(l=(u*n+u*n)/(n*n+i*i))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(t,e,n,i,r,s,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/(i>n?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(t,e,n,i,r,s,o){return Math.abs(b.getSignedDistance(t,e,n,i,r,s,o))}}}),w=l.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){l.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new V(null,null,this),this._view=X.create(this,t||ti.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return s.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,s=e._id,o=r[s];o?o.flags|=t:i.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new k({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:P,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(n,t)},insertLayer:function(t,e){if(e instanceof k){e._remove(!1,!0),s.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(n,new k(C.NO_INSERT),!0)).insertChild(t,e),i&&e.activate&&e.activate(),e},getItems:function(t){return C._getItems(this,t)},getItem:function(t){return C._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return s.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var s in e){var o=e[s];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new s({offset:new p(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new x],updateMatrix:!0}),o=0,a=i.length;o<a;o++)i[o].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var u=this._selectionItems,l=this._scope.settings.handleSize,c=this._updateVersion;for(var h in u)u[h]._drawSelection(t,e,l,u,c);t.restore()}}}),C=s.extend(o,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=s.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new x,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var i=t&&s.isPlainObject(t),r=i&&!0===t.internal,o=this._matrix=new x,a=i&&t.project||ta.project,u=ta.settings;return this._id=r?null:d.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&u.applyMatrix,e&&o.translate(e),o._owner=this,this._style=new V(a._currentStyle,this,a),r||i&&!1==t.insert||!u.insertItems&&!(i&&!0==t.insert)?this._setProject(a):(i&&t.parent||a)._insertItem(n,this,!0),i&&t!==C.NO_INSERT&&t!==C.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){var n={},i=this;function r(r){for(var o in r){var a=i[o];s.equals(a,"leading"===o?1.2*r.fontSize:r[o])||(n[o]=s.serialize(a,t,"data"!==o,e))}}return r(this._serializeFields),this instanceof S||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,i=this._parent||e,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=n),16&t&&(this._globalMatrix=n),i&&72&t&&C._clearBoundsCache(i),2&t&&C._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var i=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},s.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=s.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0}return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?p:g,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(p.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new g(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=p.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof x,i=s.set({},n?e:t,this._boundsOptions);(!i.stroke||this.getStrokeScaling())&&(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i).rect;return arguments.length?r:new y(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=_.read(arguments),e=this.getBounds(),n=this._matrix,i=new x,r=t.getCenter();i.translate(r),(t.width!=e.width||t.height!=e.height)&&(n.isInvertible()||(n.set(n._backup||new x().translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(C._updateBoundsCache(this,e.cacheItem),C._getBounds(n,t,e)):new _},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),o=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,i),a=this._bounds;if(C._updateBoundsCache(this._parent||this._symbol,r),o&&a&&o in a){var u=a[o];return{rect:u.rect.clone(),nonscaling:u.nonscaling}}var l=this._getBounds(t||s,e),c=l.rect||l,h=this._style,f=l.nonscaling||h.hasStroke()&&!h.getStrokeScaling();if(o){a||(this._bounds=a={});var u=a[o]={rect:c.clone(),nonscaling:f,internal:i}}return{rect:c,nonscaling:f}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=n;for(var i=0,r=e.list,s=r.length;i<s;i++){var o=r[i];o!==t&&(o._bounds=o._position=n,o._boundsCache&&C._clearBoundsCache(o))}}},_getBounds:function(t,e,n){var i=1/0,r=-1/0,s=1/0,o=r,a=!1;n=n||{};for(var u=0,l=t.length;u<l;u++){var c=t[u];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),f=h.rect;i=Math.min(f.x,i),s=Math.min(f.y,s),r=Math.max(f.x+f.width,r),o=Math.max(f.y+f.height,o),h.nonscaling&&(a=!0)}}return{rect:isFinite(i)?new _(i,s,r-i,o-s):new _,nonscaling:a}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new g(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=p.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new x,s=f.isZero;if(s(t.x)||s(t.y))r.translate(i.translation),n&&r.rotate(n),r.scale(e.x,e.y),this._matrix.set(r);else{var o=this.getPosition(!0);r.translate(o),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(o.negate()),this.transform(r)}i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,s=i.length;r<s;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}if(!e){e=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&e.prepend(n.getGlobalMatrix(!0))}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof k)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(t){var e=this._parent,i=e&&e._children;i&&e.insertChildren(t in i?t:n,[this])},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return s.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(C.NO_INSERT),i=this._children,r=s.pick(t?t.insert:n,t===n||!0===t),o=s.pick(t?t.deep:n,!0);i&&e.copyAttributes(this),(!i||o)&&e.copyContent(this),i||e.copyAttributes(this),r&&e.insertAbove(this);var a=this._name,u=this._parent;if(a&&u){for(var i=u._children,l=a,c=1;i[a];)a=l+" "+c++;a!==l&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var o=n[i];t.hasOwnProperty(o)&&(this[o]=t[o])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data,u=t._name;this._data=a?s.clone(a):null,u&&this.setName(u)},rasterize:function(t,e){s.isPlainObject(t)?(i=t.resolution,r=t.insert,o=t.raster):(i=t,r=e),o||(o=new M(C.NO_INSERT));var i,r,o,a=this.getStrokeBounds(),u=(i||this.getView().getResolution())/72,l=a.getTopLeft().floor(),c=new v(a.getBottomRight().ceil().subtract(l)),h=c.multiply(u);if(o.setSize(h,!0),!h.isZero()){var f=o.getContext(!0),d=new x().scale(u).translate(l.negate());f.save(),d.applyToContext(f),this.draw(f,new s({matrices:[d]})),f.restore()}return o._matrix.set(new x().translate(l.add(c.divide(2))).scale(1/u)),(r===n||r)&&o.insertAbove(this),o},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(p.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return _.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new z.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof C&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(p.read(t),A.getOptions(t))}function e(){var t=arguments,e=p.read(t),n=A.getOptions(t),i=[];return this._hitTest(e,new s({all:i},n)),i}function n(t,e,n,i){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var o=r[s],a=o!==i&&o._hitTest(t,e,n);if(a&&!e.all)return a}return null}return w.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(e.tolerance,1e-12),a=e._tolerancePadding=new v(z._getStrokePadding(o,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(a.multiply(2))._containsPoint(t))return null;var u,l,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==s.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,f=this;function d(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function p(e,n){var i=n?u["get"+n]():f.getPosition();if(t.subtract(i).divide(a).length<=1)return new A(e,f,{name:n?s.hyphenate(n):e,point:i})}var g=e.position,m=e.center,_=e.bounds;if(c&&this._parent&&(g||m||_)){if((m||_)&&(u=this.getInternalBounds()),!(l=g&&p("position")||m&&p("center","Center"))&&_)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!l;x++)l=p("bounds",y[x]);l=d(l)}return l||(l=this._hitTestChildren(t,e,r)||c&&d(this._hitTestSelf(t,e,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),l&&l.point&&(l.point=i.transform(l.point)),l},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new A("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var r=/^(empty|editable)$/.test(t)?this["is"+s.capitalize(t)]():"type"===t?s.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(s.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],o=n[i];if(s.isPlainObject(r)&&s.isPlainObject(o)){if(!t(r,o))return!1}else if(!s.equals(r,o))return!1}return!0}(e,r)}return s.equals(r,e)},getItems:function(t){return C._getItems(this,t,this._matrix)},getItem:function(t){return C._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,o){if(!r){var a="object"==typeof n&&n,u=a&&a.overlapping,l=a&&a.inside,c=u||l,h=c&&_.read([c]);r={items:[],recursive:a&&!1!==a.recursive,inside:!!l,overlapping:!!u,rect:h,path:u&&new z.Rectangle({rectangle:h,insert:!1})},a&&(n=s.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var f=e._children,d=r.items,h=r.rect;i=h&&(i||new x);for(var p=0,g=f&&f.length;p<g;p++){var v=f[p],m=i&&i.appended(v._matrix),y=!0;if(h){var c=v.getBounds(m);if(!h.intersects(c))continue;h.contains(c)||r.overlapping&&(c.contains(h)||r.path.intersects(v,m))||(y=!1)}if(y&&v.matches(n)&&(d.push(v),o)||(!1!==r.recursive&&t(v,n,m,r,o),o&&d.length>0))break}return d}}},{importJSON:function(t){var e=s.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(n,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){e=s.slice(e);for(var i={},r=e.length-1;r>=0;r--){var o=e[r],a=o&&o._id;!o||i[a]?e.splice(r,1):(o._remove(!1,!0),i[a]=!0)}s.splice(n,e,t,0);for(var u=this._project,l=u._changes,r=0,c=e.length;r<c;r++){var o=e[r],h=o._name;o._parent=this,o._setProject(u,!0),h&&o.setName(h),l&&o._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(n,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=s.pick(e,this._children.length);for(var n=s.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent)return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return -1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},s.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?s:p).read(n),r=p.read(n,0,{readNull:!0});return this.transform(new x()[t](i,r||this.getPosition(!0)))}},{translate:function(){var t=new x;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var i=this._matrix,r=t&&!t.isIdentity(),s=n&&this._canApplyMatrix||this._applyMatrix&&(r||!i.isIdentity()||e&&this._children);if(!r&&!s)return this;if(r){!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t,!0);var o=this._style,a=o.getFillColor(!0),u=o.getStrokeColor(!0);a&&a.transform(t),u&&u.transform(t)}if(s&&(s=this._transformContent(i,e,n))){var l=this._pivot;l&&i._transformPoint(l,l,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;(r||s)&&this._changed(25);var f=r&&c&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var d in c){var p=c[d];if(p.nonscaling)delete c[d];else if(s||!p.internal){var g=p.rect;t._transformBounds(g,g)}}this._bounds=c;var v=c[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else r&&h&&this._pivot&&(this._position=t._transformPoint(h,h));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(p.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(p.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(p.read(arguments))},localToParent:function(){return this._matrix._transformPoint(p.read(arguments))},fitBounds:function(t,e){t=_.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new _(new p,new v(n.width*s,n.height*s));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var s=i.getStrokeJoin(),o=i.getStrokeCap(),a=i.getMiterLimit();if(s&&(t.lineJoin=s),o&&(t.lineCap=o),a&&(t.miterLimit=a),ta.support.nativeDash){var u=i.getDashArray(),l=i.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(i.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend(new x().scale(c,c)),f=h.transform(new p(i.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,s=this._matrix,o=i[i.length-1].appended(s);if(o.isInvertible()){r=r?r.appended(o):o,i.push(o),e.updateMatrix&&(this._globalMatrix=o);var a,u,l,c=this._blendMode,h=f.clamp(this._opacity,0,1),d="normal"===c,p=tr.nativeModes[c],g=d&&1===h||e.dontStart||e.clip||(p||d&&h<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var m=this.getStrokeBounds(r);if(!m.width||!m.height){i.pop();return}l=e.offset,u=e.offset=m.getTopLeft().floor(),a=t,t=ti.getContext(m.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var _=n?n.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!g&&e.clipItem,x=!_||y;if(g?(t.globalAlpha=h,p&&(t.globalCompositeOperation=c)):x&&t.translate(-u.x,-u.y),x&&(g?s:r).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),_){t.setTransform(v,0,0,v,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,r,_),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),g||(tr.process(c,t,a,h,u.subtract(l).multiply(v)),ti.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof D)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var s=this._selection,o=1&s,a=2&s||o&&this._selectBounds,u=4&s;if(this._drawSelected||(o=!1),(o||a||u)&&this._isUpdated(r)){var l,c=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,h,i),u){var d=this.getPosition(!0),p=this._parent,g=p?p.localToGlobal(d):d,v=g.x,m=g.y;t.beginPath(),t.arc(v,m,f,0,2*Math.PI,!0),t.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],y=n+1,x=0;x<4;x++){var b=_[x],w=b[0],C=b[1];t.moveTo(v+w*f,m+C*f),t.lineTo(v+w*y,m+C*y),t.stroke()}}if(a){var S=h._transformCorners(this.getInternalBounds());t.beginPath();for(var x=0;x<8;x++)t[x?"lineTo":"moveTo"](S[x],S[++x]);t.closePath(),t.stroke();for(var x=0;x<8;x++)t.fillRect(S[x]-f,S[++x]-f,n,n)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],function(t){this["removeOn"+s.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,r=n&&n.start,s=null!=n&&("number"==typeof n?n:n.duration),o=new te(this,t,e,s,i,r);return s&&this.on("frame",function t(e){o._handleFrame(1e3*e.time),o.running||this.off("frame",t)}),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),S=C.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=n)},_getClipItem:function(){var t=this._clipItem;if(t===n){t=null;for(var e=this._children,i=0,r=e.length;i<r;i++)if(e[i]._clipMask){t=e[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),s.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,o=r.length;s<o;s++){var a=r[s];a!==i&&a.draw(t,e)}}}),k=S.extend({_class:"Layer",initialize:function(){S.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),T=C.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&s.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new m(t.width,t.height,this,"setSize")},setSize:function(){var t=v.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(v.min(this._radius,t.divide(2).abs())):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new m(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=v.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var n=v.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new z[s.capitalize(this._type)]({center:new p,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),ta.settings.applyMatrix&&e.setApplyMatrix(!0),(t===n||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,s=r.hasFill(),o=r.hasStroke(),a=e.dontFinish||e.clip,u=!i;if(s||o||a){var l=this._type,c=this._radius,h="circle"===l;if(e.dontStart||t.beginPath(),u&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,p=this._size,g=p.width,v=p.height;if(u&&"rectangle"===l&&0===f&&0===d)t.rect(-g/2,-v/2,g,v);else{var m=g/2,_=v/2,y=.44771525016920644*f,x=.44771525016920644*d,b=[-m,-_+d,-m,-_+x,-m+y,-_,-m+f,-_,m-f,-_,m-y,-_,m,-_+x,m,-_+d,m,_-d,m,_-x,m-y,_,m-f,_,-m+f,_,-m+y,_,-m,_-x,-m,_-d];i&&i.transform(b,b,32),t.moveTo(b[0],b[1]),t.bezierCurveTo(b[2],b[3],b[4],b[5],b[6],b[7]),m!==f&&t.lineTo(b[8],b[9]),t.bezierCurveTo(b[10],b[11],b[12],b[13],b[14],b[15]),_!==d&&t.lineTo(b[16],b[17]),t.bezierCurveTo(b[18],b[19],b[20],b[21],b[22],b[23]),m!==f&&t.lineTo(b[24],b[25]),t.bezierCurveTo(b[26],b[27],b[28],b[29],b[30],b[31])}}t.closePath()}!a&&(s||o)&&(this._setStyles(t,e,n),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new _(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(z._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var o=new p(s>1&&s<4?-1:1,s>2?-1:1),a=o.multiply(r),u=a.subtract(o.multiply(i));if(new _(n?a.add(o.multiply(n)):a,u).contains(e))return{point:u,quadrant:s}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"!==this._type)return .5>=n.divide(this.size).getLength();var i=t(this,n);return i?1>=n.subtract(i.point).divide(this._radius).getLength():e.base.call(this,n)},_hitTestSelf:function n(i,r,s,o){var a=!1,u=this._style,l=r.stroke&&u.hasStroke(),c=r.fill&&u.hasFill();if(l||c){var h=this._type,f=this._radius,d=l?u.getStrokeWidth()/2:0,p=r._tolerancePadding.add(z._getStrokePadding(d,!u.getStrokeScaling()&&o));if("rectangle"===h){var g=p.multiply(2),v=t(this,i,g);if(v)a=e(i.subtract(v.point),f,p,v.quadrant);else{var m=new _(this._size).setCenter(0,0),y=m.expand(g),x=m.expand(g.negate());a=y._containsPoint(i)&&!x._containsPoint(i)}}else a=e(i,f,p)}return a?new A(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var o=s.create(T.prototype);return o._type=t,o._size=n,o._radius=i,o._initialize(s.getNamed(r),e),o}return{Circle:function(){var e=arguments,n=p.readNamed(e,"center"),i=s.readNamed(e,"radius");return t("circle",n,new v(2*i),i,e)},Rectangle:function(){var e=arguments,n=_.readNamed(e,"rectangle"),i=v.min(v.readNamed(e,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),i,e)},Ellipse:function(){var e=arguments,n=T._readEllipse(e),i=n.radius;return t("ellipse",n.center,i.multiply(2),i,e)},_readEllipse:function(t){var e,n;if(s.hasNamed(t,"radius"))e=p.readNamed(t,"center"),n=v.readNamed(t,"radius");else{var i=_.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),M=C.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==n&&p.read(arguments))){var i,s=typeof t,o="string"===s?r.getElementById(t):"object"===s?t:null;if(o&&o!==C.NO_INSERT){if(o.getContext||null!=o.naturalHeight)i=o;else if(o){var a=v.read(arguments);a.isZero()||(i=ti.getCanvas(a))}}i?this.setImage(i):this.setSource(t)}this._size||(this._size=new v,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=ti.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new m(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var n=v.read(arguments);if(n.equals(this._size))e&&this.clear();else if(n.width>0&&n.height>0){var i=!e&&this.getElement();this._setImage(ti.getCanvas(n)),i&&this.getContext(!0).drawImage(i,0,0,n.width,n.height)}else this._canvas&&ti.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new p(0,0).transform(t),n=new p(1,0).transform(t).subtract(e),i=new p(0,1).transform(t).subtract(e);return new v(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(ta=n._scope,e.emit(i,new Y(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Z.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&ti.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new v(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=ti.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){ti.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var n=new e.Image,i=this._crossOrigin;i&&(n.crossOrigin=i),t&&(n.src=t),this.setImage(n)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"==typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=_.read(arguments),e=ti.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=_.read(arguments),e=new M(C.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=p.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){if(t?t instanceof L?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new _(t):"x"in t&&(e=new _(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var e,n,i=Math.min(e.width,32),r=Math.min(e.height,32),o=M._sampleContext;o?o.clearRect(0,0,33,33):o=M._sampleContext=ti.getContext(new v(32)),o.save();var a=new x().scale(i/e.width,r/e.height).translate(-e.x,-e.y);a.applyToContext(o),n&&n.draw(o,new s({clip:!0,matrices:[a]})),this._matrix.applyToContext(o);var u=this.getElement(),l=this._size;u&&o.drawImage(u,-l.width/2,-l.height/2),o.restore();for(var c=o.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,h=[0,0,0],f=0,d=0,p=c.length;d<p;d+=4){var g=c[d+3];f+=g,g/=255,h[0]+=c[d]*g,h[1]+=c[d+1]*g,h[2]+=c[d+2]*g}for(var d=0;d<3;d++)h[d]/=f;return f?F.read(h):null},getPixel:function(){var t=p.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new F("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=p.read(t),n=F.read(t),i=n._convert("rgb"),r=n._alpha,s=this.getContext(!0),o=s.createImageData(1,1),a=o.data;a[0]=255*i[0],a[1]=255*i[1],a[2]=255*i[2],a[3]=null!=r?255*r:255,s.putImageData(o,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=v.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=_.read(arguments);return t.isEmpty()&&(t=new _(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var e=p.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,e){var n=new _(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new A("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();if(i&&i.width>0&&i.height>0){t.globalAlpha=f.clamp(this._opacity,0,1),this._setStyles(t,e,n);var r=this._smoothing,s="off"===r;U.setPrefixed(t,s?"imageSmoothingEnabled":"imageSmoothingQuality",!s&&r),t.drawImage(i,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),P=C.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==n&&p.read(arguments,1))||this.setDefinition(t instanceof I?t:new I(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=e.extend({all:!1}),r=this._definition._item._hitTest(t,i,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),I=s.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=d.get(),this.project=ta.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return s.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&C._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new p),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new P(this,t)},clone:function(){return new I(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),A=s.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&s.read(t);return new s({type:null,tolerance:ta.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),O=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,i,r,s,o){var a,u,l,c,h=arguments.length;h>0&&(null==t||"object"==typeof t?1===h&&t&&"point"in t?(a=t.point,u=t.handleIn,l=t.handleOut,c=t.selection):(a=t,u=e,l=i,c=r):(a=[t,e],u=i!==n?[i,r]:null,l=s!==n?[s,o]:null)),new N(a,this,"_point"),new N(u,this,"_handleIn"),new N(l,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),s.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&((!t||t===this._point||t===this._handleIn)&&(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)&&n._changed(),(!t||t===this._point||t===this._handleOut)&&(n=i[r])&&n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(p.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(p.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(p.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new j(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,i){var r=t||{},s=r.type,o=r.factor,a=this.getPrevious(),u=this.getNext(),l=(a||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c),d=c.getDistance(h);if(s&&"catmull-rom"!==s){if("geometric"===s){if(a&&u){var g=l.subtract(h),v=o===n?.4:o,m=v*f/(f+d);e||this.setHandleIn(g.multiply(m)),i||this.setHandleOut(g.multiply(m-v))}}else throw Error("Smoothing method '"+s+"' not supported.")}else{var _=o===n?.5:o,y=Math.pow(f,_),x=y*y,b=Math.pow(d,_),w=b*b;if(!e&&a){var C=2*w+3*b*y+x,S=3*b*(b+y);this.setHandleIn(0!==S?new p((w*l._x+C*c._x-x*h._x)/S-c._x,(w*l._y+C*c._y-x*h._y)/S-c._y):new p)}if(!i&&u){var C=2*x+3*y*b+w,S=3*y*(y+b);this.setHandleOut(0!==S?new p((x*h._x+C*c._x-w*l._x)/S-c._x,(x*h._y+C*c._y-w*l._y)/S-c._y):new p)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new O(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new O(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=t._point,s=e._point,o=t._handleIn,a=e._handleIn,u=e._handleOut,l=t._handleOut;this._point._set(i*r._x+n*s._x,i*r._y+n*s._y,!0),this._handleIn._set(i*o._x+n*a._x,i*o._y+n*a._y,!0),this._handleOut._set(i*l._x+n*u._x,i*l._y+n*u._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,a=i._y,u=2;return e[0]=o,e[1]=a,r&&(e[u++]=r._x+o,e[u++]=r._y+a),s&&(e[u++]=s._x+o,e[u++]=s._y+a),t&&(t._transformCoordinates(e,e,u/2),o=e[0],a=e[1],n?(i._x=o,i._y=a,u=2,r&&(r._x=e[u++]-o,r._y=e[u++]-a),s&&(s._x=e[u++]-o,s._y=e[u++]-a)):(r||(e[u++]=o,e[u++]=a),s||(e[u++]=o,e[u++]=a))),e}}),N=p.extend({initialize:function(t,e,i){var r,s,o;if(t){if((r=t[0])!==n)s=t[1];else{var a=t;(r=a.x)===n&&(a=p.read(arguments),r=a.x),s=a.y,o=a.selected}}else r=s=0;this._x=r,this._y=s,this._owner=e,e[i]=this,o&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=f.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),E=s.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,s,o,a){var u,l,c,h,f,d,p=arguments.length;3===p?(this._path=t,u=e,l=n):p?1===p?"segment1"in t?(u=new O(t.segment1),l=new O(t.segment2)):"point1"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new O(t),l=new O(e)):4===p?(c=t,f=e,d=n,h=i):8===p&&(c=[t,e],h=[o,a],f=[n-t,i-e],d=[r-o,s-a]):(u=new O,l=new O),this._segment1=u||new O(c,null,f),this._segment2=l||new O(h,d,null)},_serialize:function(t,e){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=n},clone:function(){return new E(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return E.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(p.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(p.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(p.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(p.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return E.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new p(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=E.getLength(this.getValues(),0,1)),this._length},getArea:function(){return E.getArea(this.getValues())},getLine:function(){return new b(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new E(E.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return E.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=.99999999){var i=E.subdivide(this.getValues(),t),r=i[0],s=i[1],o=e||this.hasHandles(),a=this._segment1,u=this._segment2,l=this._path;o&&(a._handleOut._set(r[2]-r[0],r[3]-r[1]),u._handleIn._set(s[4]-s[6],s[5]-s[7]));var c=r[6],h=r[7],f=new O(new p(c,h),o&&new p(r[4]-c,r[5]-h),o&&new p(s[2]-c,s[3]-h));l?(l.insert(a._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new E(f,u))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===n?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===n?.5:e?t:this.getTimeAt(t))},reversed:function(){return new E(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,s=t._handleOut,o=e._handleIn,a=e._point,u=r.x,l=r.y,c=a.x,h=a.y,f=i?[u,l,u,l,c,h,c,h]:[u,l,u+s._x,l+s._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7];e===n&&(e=.5);var h=1-e,f=h*i+e*s,d=h*r+e*o,p=h*s+e*a,g=h*o+e*u,v=h*a+e*l,m=h*u+e*c,_=h*f+e*p,y=h*d+e*g,x=h*p+e*v,b=h*g+e*m,w=h*_+e*x,C=h*y+e*b;return[[i,r,f,d,_,y,w,C],[w,C,x,b,v,m,l,c]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],s=t[i+2],o=t[i+4],a=t[i+6];if(r>=s==s>=o&&s>=o==o>=a||E.isStraight(t))n.push(t);else{var u=[],l=f.solveQuadratic(3*(s-o)-r+a,2*(r+o)-4*s,s-r,u,1e-8,.99999999);if(l){u.sort();var c=u[0],h=E.subdivide(t,c);n.push(h[0]),l>1&&(c=(u[1]-c)/(1-c),h=E.subdivide(h[1],c),n.push(h[0])),n.push(h[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,s){var o=t[e],a=t[e+2],u=t[e+4],l=t[e+6],c=0;if(!(o<n&&l<n&&a<n&&u<n||o>n&&l>n&&a>n&&u>n)){var h=3*(a-o),d=3*(u-a)-h;c=f.solveCubic(l-o-h-d,d,h,o-n,i,r,s)}return c},getTimeOf:function(t,e){var n=new p(t[0],t[1]),i=new p(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],s=[],o=0;o<2;o++)for(var a=E.solveCubic(t,o,r[o],s,0,1),u=0;u<a;u++){var l=s[u];if(e.isClose(E.getPoint(t,l),1e-7))return l}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(E.isStraight(t)){var n=t[0],i=t[1],r=t[6],s=t[7],o=r-n,a=s-i,u=o*o+a*a;if(0===u)return 0;var l=((e.x-n)*o+(e.y-i)*a)/u;return l<1e-12?0:l>.999999999999?1:E.getTimeOf(t,new p(n+l*o,i+l*a))}var c=1/0,h=0;function f(n){if(n>=0&&n<=1){var i=e.getDistance(E.getPoint(t,n),!0);if(i<c)return c=i,h=n,!0}}for(var d=0;d<=100;d++)f(d/100);for(var g=.005;g>1e-8;)f(h-g)||f(h+g)||(g/=2);return h},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=E.subdivide(t,e)[1]),n<1&&(t=E.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=3*r-2*n-u,h=3*s-2*i-l,f=3*o-2*u-n,d=3*a-2*l-i;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7];return 3*((u-n)*(i+s)-(a-e)*(r+o)+r*(e-s)-i*(n-o)+u*(s+e/3)-a*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)E._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new _(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,o,a,u){function l(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>a[r]&&(a[r]=i)}s/=2;var c=o[r]+s,h=a[r]-s;if(t<c||e<c||n<c||i<c||t>h||e>h||n>h||i>h){if(e<t!=e<i&&n<t!=n<i)l(t,0),l(i,0);else{var d=f.solveQuadratic(3*(e-n)-t+i,2*(t+n)-4*e,e-t,u);l(i,0);for(var p=0;p<d;p++){var g=u[p],v=1-g;1e-8<=g&&g<=.99999999&&l(v*v*v*t+3*v*v*g*e+3*v*g*g*n+g*g*g*i,s)}}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=z[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),s.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero());else if(r.isCollinear(e)&&r.isCollinear(n)){var s=new b(t,i);if(1e-7>s.getDistance(t.add(e))&&1e-7>s.getDistance(i.add(n))){var o=r.dot(r),a=r.dot(e)/o,u=r.dot(n)/o;return a>=0&&a<=1&&u<=0&&u>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],s=e[6],o=e[7];return t(new p(i,r),new p(e[2]-i,e[3]-r),new p(e[4]-s,e[5]-o),new p(s,o),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&1e-8>Math.abs(this.getTangentAtTime(.5).y)},isVertical:function(){return this.isStraight()&&1e-8>Math.abs(this.getTangentAtTime(.5).x)}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new j(this,t):null},getTimeAt:function(t,e){return E.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=p.read(arguments);return t.isZero()?[]:E.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(p.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return E.getTimeOf(this.getValues(),p.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=p.read(arguments),e=this.getValues(),n=E.getNearestTime(e,t),i=E.getPoint(e,n);return new j(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return E[t](i,n?e:E.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return E[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],l=9*(i-s)+3*(a-e),c=6*(e+s)-12*i,h=3*(i-e),f=9*(r-o)+3*(u-n),d=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(l*t+c)*t+h,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],o=t[2],a=t[3],u=t[4],l=t[5],c=t[6],h=t[7],d=f.isZero;d(o-r)&&d(a-s)&&(o=r,a=s),d(u-c)&&d(l-h)&&(u=c,l=h);var g,v,m=3*(o-r),_=3*(u-o)-m,y=c-r-m-_,x=3*(a-s),b=3*(l-a)-x,w=h-s-x-b;if(0===n)g=0===e?r:1===e?c:((y*e+_)*e+m)*e+r,v=0===e?s:1===e?h:((w*e+b)*e+x)*e+s;else{if(e<1e-8?(g=m,v=x):e>.99999999?(g=3*(c-u),v=3*(h-l)):(g=(3*y*e+2*_)*e+m,v=(3*w*e+2*b)*e+x),i){0===g&&0===v&&(e<1e-8||e>.99999999)&&(g=u-o,v=l-a);var C=Math.sqrt(g*g+v*v);C&&(g/=C,v/=C)}if(3===n){var u=6*y*e+2*_,l=6*w*e+2*b,S=Math.pow(g*g+v*v,1.5);g=0!==S?(g*l-v*u)/S:0,v=0}}return 2===n?new p(v,-g):new p(g,v)}return{statics:{classify:function(t){var e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=r*(i-l)+s*(u-e)+e*l-i*u,h=3*(o*(s-i)+a*(e-r)+r*i-s*e),d=h-c,p=d-c+(e*(l-a)+i*(o-u)+u*a-l*o),g=Math.sqrt(p*p+d*d+h*h),v=0!==g?1/g:0,m=f.isZero,_="serpentine";function y(t,e,i){var r=e!==n,s=r&&e>0&&e<1,o=r&&i>0&&i<1;return!r||(s||o)&&("loop"!==t||s&&o)||(t="arch",s=o=!1),{type:t,roots:s||o?s&&o?e<i?[e,i]:[i,e]:[s?e:i]:null}}if(p*=v,d*=v,h*=v,m(p))return m(d)?y(m(h)?"line":"quadratic"):y(_,h/(3*d));var x=3*d*d-4*p*h;if(m(x))return y("cusp",d/(2*p));var b=x>0?Math.sqrt(x/3):Math.sqrt(-x),w=2*p;return y(x>0?_:"loop",(d+b)/w,(d-b)/w)},getLength:function(i,r,s,o){if(r===n&&(r=0),s===n&&(s=1),E.isStraight(i)){var a=i;s<1&&(a=E.subdivide(a,s)[0],r/=s),r>0&&(a=E.subdivide(a,r)[1]);var u=a[6]-a[0],l=a[7]-a[1];return Math.sqrt(u*u+l*l)}return f.integrate(o||t(i),r,s,e(r,s))},getTimeAt:function(i,r,s){if(s===n&&(s=r<0?1:0),0===r)return s;var o=Math.abs,a=r>0,u=a?s:0,l=a?1:s,c=t(i),h=E.getLength(i,u,l,c),d=o(r)-h;if(1e-12>o(d))return a?l:u;if(d>1e-12)return null;var p=r/h,g=0;return f.findRoot(function(t){return g+=f.integrate(c,s,t,e(s,t)),s=t,g-r},c,s+p,u,l,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],l=-e+3*i-3*s+a,c=3*e-6*i+3*s,h=-3*e+3*i,d=-n+3*r-3*o+u,p=3*n-6*r+3*o,g=-3*n+3*r,v=[];return f.solveCubic(9*(l*l+d*d),9*(l*c+p*d),2*(c*c+p*p)+3*(h*l+g*d),h*c+p*g,v,1e-8,.99999999),v.sort()}}}},new function(){function t(t,e,n,i,r,s,o){var a=!o&&n.getPrevious()===r,u=!o&&n!==r&&n.getNext()===r;if(null!==i&&i>=(a?1e-8:0)&&i<=(u?.99999999:1)&&null!==s&&s>=(u?1e-8:0)&&s<=(a?.99999999:1)){var l=new j(n,i,null,o),c=new j(r,s,null,o);l._intersection=c,c._intersection=l,(!e||e(l))&&j.insert(t,l,!0)}}function e(t,e,i,r){return t[0][1]<i?n(t,!0,i):e[0][1]>r?n(e,!1,r):t[0][0]}function n(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,o=t.length;s<o;s++){var a=t[s][0],u=t[s][1];if(e?u>=n:u<=n)return u===n?a:i+(n-r)*(a-i)/(u-r);i=a,r=u}return null}function i(t,e,n,i,r){var s=f.isZero;if(s(i)&&s(r)){var o=E.getTimeOf(t,new p(e,n));return null===o?[]:[o]}for(var a=Math.atan2(-r,i),u=Math.sin(a),l=Math.cos(a),c=[],h=[],d=0;d<8;d+=2){var g=t[d]-e,v=t[d+1]-n;c.push(g*l-v*u,g*u+v*l)}return E.solveCubic(c,1,0,h,0,1),h}function r(n,r,s,a,u,l){var c=Math.min,h=Math.max;if(h(n[0],n[2],n[4],n[6])+1e-12>c(r[0],r[2],r[4],r[6])&&c(n[0],n[2],n[4],n[6])-1e-12<h(r[0],r[2],r[4],r[6])&&h(n[1],n[3],n[5],n[7])+1e-12>c(r[1],r[3],r[5],r[7])&&c(n[1],n[3],n[5],n[7])-1e-12<h(r[1],r[3],r[5],r[7])){var f=o(n,r);if(f)for(var d=0;d<2;d++){var g=f[d];t(u,l,s,g[0],a,g[1],!0)}else{var v=E.isStraight(n),m=E.isStraight(r),_=v&&m,y=v&&!m,x=u.length;if((_?function(e,n,i,r,s,o){var a=b.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);a&&t(s,o,i,E.getTimeOf(e,a),r,E.getTimeOf(n,a))}:v||m?function(e,n,r,s,o,a,u){for(var l=n[0],c=n[1],h=i(e,l,c,n[6]-l,n[7]-c),f=0,d=h.length;f<d;f++){var p=h[f],g=E.getPoint(e,p),v=E.getTimeOf(n,g);null!==v&&t(o,a,u?s:r,u?v:p,u?r:s,u?p:v)}}:function n(i,r,s,o,a,u,l,c,h,f,d,p,g){if(++h>=4096||++c>=40)return h;var v,m,_=r[0],y=r[1],x=r[6],w=r[7],C=b.getSignedDistance,S=C(_,y,x,w,r[2],r[3]),k=C(_,y,x,w,r[4],r[5]),T=S*k>0?3/4:4/9,M=T*Math.min(0,S,k),P=T*Math.max(0,S,k),I=C(_,y,x,w,i[0],i[1]),A=C(_,y,x,w,i[2],i[3]),O=C(_,y,x,w,i[4],i[5]),N=C(_,y,x,w,i[6],i[7]),j=function(t,e,n,i){var r,s=[0,t],o=[1/3,e],a=[2/3,n],u=[1,i],l=e-(2*t+i)/3,c=n-(t+2*i)/3;if(l*c<0)r=[[s,o,u],[s,a,u]];else{var h=l/c;r=[h>=2?[s,o,u]:h<=.5?[s,a,u]:[s,o,a,u],[s,u]]}return 0>(l||c)?r.reverse():r}(I,A,O,N),L=j[0],z=j[1];if(0===S&&0===k&&0===I&&0===A&&0===O&&0===N||null==(v=e(L,z,M,P))||null==(m=e(L.reverse(),z.reverse(),M,P)))return h;var D=f+(d-f)*v,$=f+(d-f)*m;if(1e-9>Math.max(g-p,$-D)){var R=(D+$)/2,B=(p+g)/2;t(a,u,l?o:s,l?B:R,l?s:o,l?R:B)}else{i=E.getPart(i,v,m);var q=g-p;if(m-v>.8){if($-D>q){var F=E.subdivide(i,.5),R=(D+$)/2;h=n(r,F[0],o,s,a,u,!l,c,h,p,g,D,R),h=n(r,F[1],o,s,a,u,!l,c,h,p,g,R,$)}else{var F=E.subdivide(r,.5),B=(p+g)/2;h=n(F[0],i,o,s,a,u,!l,c,h,p,B,D,$),h=n(F[1],i,o,s,a,u,!l,c,h,B,g,D,$)}}else h=0===q||q>=1e-9?n(r,i,o,s,a,u,!l,c,h,p,g,D,$):n(i,r,s,o,a,u,l,c,h,D,$,p,g)}return h})(y?r:n,y?n:r,y?a:s,y?s:a,u,l,y,0,0,0,1,0,1),!_||u.length===x)for(var d=0;d<4;d++){var w=d>>1,C=1&d,S=6*w,k=6*C,T=new p(n[S],n[S+1]),M=new p(r[k],r[k+1]);T.isClose(M,1e-12)&&t(u,l,s,w,a,C)}}}return u}function s(e,n,i,r){var s=E.classify(e);if("loop"===s.type){var o=s.roots;t(i,r,n,o[0],n,o[1])}return i}function o(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=b.getDistance,s=E.isStraight(t),o=E.isStraight(e),a=s&&o,u=n(t)<n(e),l=u?e:t,c=u?t:e,h=l[0],f=l[1],d=l[6]-h,g=l[7]-f;if(1e-7>r(h,f,d,g,c[0],c[1],!0)&&1e-7>r(h,f,d,g,c[6],c[7],!0))!a&&1e-7>r(h,f,d,g,l[2],l[3],!0)&&1e-7>r(h,f,d,g,l[4],l[5],!0)&&1e-7>r(h,f,d,g,c[2],c[3],!0)&&1e-7>r(h,f,d,g,c[4],c[5],!0)&&(s=o=a=!0);else if(a)return null;if(s^o)return null;for(var v=[t,e],m=[],_=0;_<4&&m.length<2;_++){var y=1&_,x=1^y,w=_>>1,C=E.getTimeOf(v[y],new p(v[x][w?6:0],v[x][w?7:1]));if(null!=C){var S=y?[w,C]:[C,w];(!m.length||i(S[0]-m[0][0])>1e-8&&i(S[1]-m[0][1])>1e-8)&&m.push(S)}if(_>2&&!m.length)break}if(2!==m.length)m=null;else if(!a){var k=E.getPart(t,m[0][0],m[1][0]),T=E.getPart(e,m[0][1],m[1][1]);(i(T[2]-k[2])>1e-7||i(T[3]-k[3])>1e-7||i(T[4]-k[4])>1e-7||i(T[5]-k[5])>1e-7)&&(m=null)}return m}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?r(e,n,this,t,[]):s(e,this,[])},statics:{getOverlaps:o,getIntersections:function(t,e,n,i,o,a){var u=!e;u&&(e=t);for(var l=t.length,h=e.length,f=Array(l),d=u?f:Array(h),p=[],g=0;g<l;g++)f[g]=t[g].getValues(i);if(!u)for(var g=0;g<h;g++)d[g]=e[g].getValues(o);for(var v=c.findCurveBoundsCollisions(f,d,1e-7),m=0;m<l;m++){var _=t[m],y=f[m];u&&s(y,_,p,n);var x=v[m];if(x)for(var b=0;b<x.length;b++){if(a&&p.length)return p;var w=x[b];if(!u||w>m){var C=e[w];r(y,d[w],_,C,p,n)}}}return p},getCurveLineIntersections:i,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=e.normalize(),h=c.x,d=c.y,p=3*u-9*o+9*r-3*n,g=3*l-9*a+9*s-3*i,v=6*o-12*r+6*n,m=6*a-12*s+6*i,_=3*r-3*n,y=3*s-3*i,x=2*p*d-2*g*h,b=[];if(Math.abs(x)<f.CURVETIME_EPSILON){var x=p*m-g*v;if(0!=x){var w=-(p*y-g*_)/x;w>=0&&w<=1&&b.push(w)}}else{var C=(v*v-4*p*_)*d*d+(-2*v*m+4*g*_+4*p*y)*h*d+(m*m-4*g*y)*h*h,S=v*d-m*h;if(C>=0&&0!=x){var k=Math.sqrt(C),T=-(S+k)/x,M=(-S+k)/x;T>=0&&T<=1&&b.push(T),M>=0&&M<=1&&b.push(M)}}return b}}}}),j=s.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof j){var i=this.getCurve(),r=t.getCurve(),s=i._path;if(s===r._path){var o=Math.abs,a=o(this.getOffset()-t.getOffset()),u=!e&&this._intersection,l=!e&&t._intersection;n=(a<1e-7||s&&1e-7>o(s.getLength()-a))&&(!u&&!l||u&&l&&u.equals(l,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=h.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=e>=1e-8&&e<=.99999999,r=n>=1e-8&&n<=.99999999;if(i&&r)return!this.isTouching();var s=this.getCurve(),o=s&&e<1e-8?s.getPrevious():s,a=t.getCurve(),u=a&&n<1e-8?a.getPrevious():a;if(e>.99999999&&(s=s.getNext()),n>.99999999&&(a=a.getNext()),!o||!s||!u||!a)return!1;var l=[];function c(t,e){var n=t.getValues(),i=E.classify(n).roots||E.getPeaks(n),r=i.length,s=E.getLength(n,e&&r?i[r-1]:0,!e&&r?i[0]:1);l.push(r?s:s/32)}function h(t,e,n){return e<n?t>e&&t<n:t>e||t<n}i||(c(o,!0),c(s,!1)),r||(c(u,!0),c(a,!1));var f=this.getPoint(),d=Math.min.apply(Math,l),p=i?s.getTangentAtTime(e):s.getPointAt(d).subtract(f),g=i?p.negate():o.getPointAt(-d).subtract(f),v=r?a.getTangentAtTime(n):a.getPointAt(d).subtract(f),m=r?v.negate():u.getPointAt(-d).subtract(f),_=g.getAngle(),y=p.getAngle(),x=m.getAngle(),b=v.getAngle();return!!(i?h(_,x,b)^h(y,x,b)&&h(_,b,x)^h(y,b,x):h(x,_,y)^h(b,_,y)&&h(x,y,_)^h(b,y,_))},hasOverlap:function(){return!!this._overlap}},s.each(E._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,s=i-1;function o(n,r){for(var s=n+r;s>=-1&&s<=i;s+=r){var o=t[(s%i+i)%i];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;r<=s;){var a,u=r+s>>>1,l=t[u];if(n&&(a=e.equals(l)?l:o(u,-1)||o(u,1)))return e._overlap&&(a._overlap=a._intersection._overlap=!0),a;var c=e.getPath(),h=l.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()))<0?s=u-1:r=u+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),L=C.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){if(s.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var e,n,i,r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?D:z)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),s=!1,o=new p,a=new p;function u(t,n){var i=+e[t];return s&&(i+=o[n]),i}function l(t){return new p(u(t,"x"),u(t+1,"y"))}this.clear();for(var c=0,h=r&&r.length;c<h;c++){var f=r[c],d=f[0],g=d.toLowerCase(),m=(e=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(s=d===g,"z"!==n||/[mz]/.test(g)||this.moveTo(o),g){case"m":case"l":for(var _="m"===g,y=0;y<m;y+=2)this[_?"moveTo":"lineTo"](o=l(y)),_&&(a=o,_=!1);i=o;break;case"h":case"v":var x="h"===g?"x":"y";o=o.clone();for(var y=0;y<m;y++)o[x]=u(y,x),this.lineTo(o);i=o;break;case"c":for(var y=0;y<m;y+=6)this.cubicCurveTo(l(y),i=l(y+2),o=l(y+4));break;case"s":for(var y=0;y<m;y+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(i):o,i=l(y),o=l(y+2)),n=g;break;case"q":for(var y=0;y<m;y+=4)this.quadraticCurveTo(i=l(y),o=l(y+2));break;case"t":for(var y=0;y<m;y+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?o.multiply(2).subtract(i):o,o=l(y)),n=g;break;case"a":for(var y=0;y<m;y+=7)this.arcTo(o=l(y+5),new v(+e[y],+e[y+1]),+e[y+2],+e[y+4],+e[y+3]);break;case"z":this.closePath(1e-12),o=a}n=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),o=r?s:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(o),1e-12)?E.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,o,i):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var t=p.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",s=t[r],o=e[r],a=this[r];if(!s||!o||s.length!==o.length)throw Error("Invalid operands in interpolate() call: "+t+", "+e);var u=a.length,l=o.length;if(u<l)for(var c=i?O:z,h=u;h<l;h++)this.add(new c);else u>l&&this[i?"removeSegments":"removeChildren"](l,u);for(var h=0;h<l;h++)a[h].interpolate(s[h],o[h],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,s=i.length,o=[],a=0;e=!0;for(var u=c.findItemBoundsCollisions(n,i,f.GEOMETRIC_EPSILON),l=r-1;l>=0&&e;l--){var h=n[l];e=!1;var d=u[l];if(d)for(var p=d.length-1;p>=0&&!e;p--)h.compare(i[d[p]])&&(!o[d[p]]&&(o[d[p]]=!0,a++),e=!0)}e=e&&a===s}return e}}),z=L.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments,i=Array.isArray(t)?"object"==typeof t[0]?t:e:t&&t.size===n&&(t.x!==n||t.point!==n)?e:null;i&&i.length>0?this.setSegments(i):(this._curves=n,this._segmentSelection=0,i||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!i&&t)},_equals:function(t){return this._closed===t._closed&&s.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=n,32&e)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 64&e&&(this._bounds=n)},getStyle:function(){var t=this._parent;return(t instanceof D?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,i){var r=t[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(O.readList(t,0,{},i))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=Array(n);for(var i=0;i<n;i++)t[i]=new E(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new E(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,i,r,s,o,a,u,l,c=this._segments,f=c.length,d=new h(e),p=Array(6),g=!0,v=[];function m(e,c){if(e._transformCoordinates(t,p),n=p[0],i=p[1],g)v.push("M"+d.pair(n,i)),g=!1;else if(o=p[2],a=p[3],o===n&&a===i&&u===r&&l===s){if(!c){var h=n-r,f=i-s;v.push(0===h?"v"+d.number(f):0===f?"h"+d.number(h):"l"+d.pair(h,f))}}else v.push("c"+d.pair(u-r,l-s)+" "+d.pair(o-r,a-s)+" "+d.pair(n-r,i-s));r=n,s=i,u=p[4],l=p[5]}if(!f)return"";for(var _=0;_<f;_++)m(c[_]);return this._closed&&f>0&&(m(c[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,o=null==e,e=o?n.length:e,a=0;a<r;a++){var u=t[a];u._path&&(u=t[a]=u.clone()),u._path=this,u._index=e+a,u._selection&&this._updateSelection(u,0,u._selection)}if(o)s.push(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var a=e+r,l=n.length;a<l;a++)n[a]._index=a}if(i){var c=this._countCurves(),h=e>0&&e+r-1===c?e-1:e,f=h,d=Math.min(h+r,c);t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),f+=t._curves.length);for(var a=f;a<d;a++)i.splice(a,0,new E(this,null,null));this._adjustCurves(h,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)(n=r[s])._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&"number"!=typeof t?this._add(O.readList(e)):this._add([O.read(e)])[0]},insert:function(t,e){var n=arguments;return n.length>2&&"number"!=typeof e?this._add(O.readList(n,1),t):this._add([O.read(n,1)],t)[0]},addSegment:function(){return this._add([O.read(arguments)])[0]},insertSegment:function(t){return this._add([O.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(O.readList(t))},insertSegments:function(t,e){return this._add(O.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=s.pick(e,this._segments.length);var i=this._segments,r=this._curves,o=i.length,a=i.splice(t,e-t),u=a.length;if(!u)return a;for(var l=0;l<u;l++){var c=a[l];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}for(var l=t,h=i.length;l<h;l++)i[l]._index=l;if(r){for(var f=t>0&&e===o+(this._closed?1:0)?t-1:t,r=r.splice(f,u),l=r.length-1;l>=0;l--)r[l]._path=null;n&&(a._curves=r.slice(1)),this._adjustCurves(f,f)}return this._changed(41),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var s=i+1===r;t+=E.getArea(E.getValues(e[i],e[s?0:i+1],null,s&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>.99999999&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var s,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new z(C.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(o,0),this.addSegment(o[0]),s}return null},split:function(t,e){var i,r=e===n?t:(i=this.getCurves()[t])&&i.getLocationAtTime(e);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(o._point,n)&&t.reverse(),s=t.getLastSegment(),a&&a._point.isClose(s._point,n)?(a.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(i)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new $(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new O(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new O(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new R(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,i=t||{},r=i.type||"asymmetric",s=this._segments,o=s.length,a=this._closed;function u(t,n){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==e)throw Error(t._class+" "+i+" of "+r+" is not part of "+e);n&&t instanceof E&&i++}else i="number"==typeof t?t:n;return Math.min(i<0&&a?i%o:i<0?i+o:i,o-1)}var l=a&&i.from===n&&i.to===n,c=u(i.from,0),h=u(i.to,o-1);if(c>h){if(a)c-=o;else{var f=c;c=h,h=f}}if(/^(?:asymmetric|continuous)$/.test(r)){var d="asymmetric"===r,p=Math.min,g=h-c+1,v=g-1,m=l?p(g,4):1,_=m,y=m,x=[];if(a||(_=p(1,c),y=p(1,o-h-1)),(v+=_+y)<=1)return;for(var b=0,w=c-_;b<=v;b++,w++)x[b]=s[(w<0?w+o:w)%o]._point;for(var C=x[0]._x+2*x[1]._x,S=x[0]._y+2*x[1]._y,k=2,T=v-1,M=[C],P=[S],I=[2],A=[],O=[],b=1;b<v;b++){var N=b<T,j=N?1:d?1:2,L=N?4:d?2:7,z=N?4:d?3:8,D=N?2:d?0:1,$=j/k;k=I[b]=L-$,C=M[b]=z*x[b]._x+D*x[b+1]._x-$*C,S=P[b]=z*x[b]._y+D*x[b+1]._y-$*S}A[T]=M[T]/I[T],O[T]=P[T]/I[T];for(var b=v-2;b>=0;b--)A[b]=(M[b]-A[b+1])/I[b],O[b]=(P[b]-O[b+1])/I[b];A[v]=(3*x[v]._x-A[T])/2,O[v]=(3*x[v]._y-O[T])/2;for(var b=_,R=v-y,w=c;b<=R;b++,w++){var B=s[w<0?w+o:w],q=B._point,F=A[b]-q._x,H=O[b]-q._y;(l||b<R)&&B.setHandleOut(F,H),(l||b>_)&&B.setHandleIn(-F,-H)}}else for(var b=c;b<=h;b++)s[b<0?b+o:b].smooth(i,!l&&b===c,!l&&b===h)},toShape:function(t){if(!this._closed)return null;var e,i,r,s,o,a,u,l=this._segments;function c(t,e){var n=l[t],i=n.getNext(),r=l[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function h(t){var e=l[t],n=e.getNext(),i=e._handleOut,r=n._handleIn;if(i.isOrthogonal(r)){var s=e._point,o=n._point,a=new b(s,i,!0).intersect(new b(o,r,!0),!0);return a&&f.isZero(i.getLength()/a.subtract(s).getLength()-.5522847498307936)&&f.isZero(r.getLength()/a.subtract(o).getLength()-.5522847498307936)}return!1}function d(t,e){return l[t]._point.getDistance(l[e]._point)}if(!this.hasHandles()&&4===l.length&&c(0,2)&&c(1,3)&&(i=(e=l[1]).getPrevious(),r=e.getNext(),i._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&r._handleIn.isZero()&&e._point.subtract(i._point).isOrthogonal(r._point.subtract(e._point)))?(s=T.Rectangle,o=new v(d(0,3),d(0,1)),u=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&h(0)&&h(2)&&h(4)&&h(6)&&c(1,5)&&c(3,7)?(s=T.Rectangle,a=(o=new v(d(1,6),d(0,3))).subtract(new v(d(0,7),d(1,2))).divide(2),u=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&h(0)&&h(1)&&h(2)&&h(3)&&(f.isZero(d(0,2)-d(1,3))?(s=T.Circle,a=d(0,2)/2):(s=T.Ellipse,a=new v(d(2,0)/2,d(3,1)/2)),u=l[1]._point),s){var p=this.getPosition(!0),g=new s({center:p,size:o,radius:a,insert:!1});return g.copyAttributes(this,!0),g._matrix.prepend(this._matrix),g.rotate(u.subtract(p).getAngle()+90),(t===n||t)&&g.insertAbove(this),g}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof D)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,s=i.length;if(!r||!s)return r==s;for(var o,a,u=n[0].getValues(),l=[],c=0,h=0,f=0;f<s;f++){var d=i[f].getValues();l.push(d);var p=E.getOverlaps(u,d);if(p){o=!f&&p[0][0]>0?s-1:f,a=p[0][1];break}}for(var g,v=Math.abs,d=l[o];u&&d;){var p=E.getOverlaps(u,d);if(p&&1e-8>v(p[0][0]-h)){1===(h=p[1][0])&&(u=++c<r?n[c].getValues():null,h=0);var m=p[0][1];if(1e-8>v(m-a)){if(g||(g=[o,m]),1===(a=p[1][1])&&(++o>=s&&(o=0),d=l[o]||i[o].getValues(),a=0),!u)return g[0]===o&&g[1]===a;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,s,o,a,u,l,c=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,g=e._tolerancePadding,v=g,m=e.stroke&&h.hasStroke(),_=e.fill&&h.hasFill(),y=e.curves,x=m?h.getStrokeWidth()/2:_&&e.tolerance>0||y?0:null;function b(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),b(n,v))return new A(i,c,{segment:t,point:n})}}function C(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function S(t){a.add(t)}function k(e){var n,u=p||e._index>0&&e._index<d-1;return(u?r:s)==="round"?b(e._point,v):(a=new z({internal:!0,closed:!0}),u?e.isSmooth()||z._addBevelJoin(e,r,x,o,null,i,S,!0):"square"===s&&z._addSquareCap(e,s,x,null,i,S,!0),a.isEmpty())?void 0:a.contains(t)||(n=a.getNearestLocation(t))&&b(n.getPoint(),g)}if(null!==x&&(x>0?(r=h.getStrokeJoin(),s=h.getStrokeCap(),o=h.getMiterLimit(),v=v.add(z._getStrokePadding(x,i))):r=s="round"),!e.ends||e.segments||p){if(e.segments||e.handles){for(var T=0;T<d;T++)if(l=C(f[T]))return l}}else if(l=C(f[0],!0)||C(f[d-1],!0))return l;if(null!==x){if(u=this.getNearestLocation(t)){var M=u.getTime();0===M||1===M&&d>1?k(u.getSegment())||(u=null):b(u.getPoint(),v)||(u=null)}if(!u&&"miter"===r&&d>1)for(var T=0;T<d;T++){var P=f[T];if(t.getDistance(P._point)<=o*x&&k(P)){u=P.getLocation();break}}}return!u&&_&&this._contains(t)||u&&!m&&!y?new A("fill",this):u?new A(m?"stroke":"curve",this,{location:u,point:u.getPoint()}):null}},s.each(E._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=p.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var s=n,o=e[i];if((n+=o.getLength())>t)return o.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new j(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=p.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,s=i.length;r<s;r++){for(var o=i[r],a=o.getTimesWithTangent(t),u=0,l=a.length;u<l;u++){var c=n+o.getOffsetAtTime(a[u]);0>e.indexOf(c)&&e.push(c)}n+=o.length}return e}}),new function(){function t(t,e,n){var i,r,s,o,a,u,l,c,h=e._segments,f=h.length,d=Array(6),p=!0;function g(e){if(n)e._transformCoordinates(n,d),i=d[0],r=d[1];else{var h=e._point;i=h._x,r=h._y}if(p)t.moveTo(i,r),p=!1;else{if(n)a=d[2],u=d[3];else{var f=e._handleIn;a=i+f._x,u=r+f._y}a===i&&u===r&&l===s&&c===o?t.lineTo(i,r):t.bezierCurveTo(l,c,a,u,i,r)}if(s=i,o=r,n)l=d[4],c=d[5];else{var f=e._handleOut;l=s+f._x,c=o+f._y}}for(var v=0;v<f;v++)g(h[v]);e._closed&&f>0&&g(h[0])}return{_draw:function(e,n,i,r){var s=n.dontStart,o=n.dontFinish||n.clip,a=this.getStyle(),u=a.hasFill(),l=a.hasStroke(),c=a.getDashArray(),h=!ta.support.nativeDash&&l&&c&&c.length;function f(t){return c[(t%h+h)%h]}if(s||e.beginPath(),(u||l&&!h||o)&&(t(e,this,r),this._closed&&e.closePath()),!o&&(u||l)&&(this._setStyles(e,n,i),u&&(e.fill(a.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l)){if(h){s||e.beginPath();for(var d,p=new $(this,.25,32,!1,r),g=p.length,v=-a.getDashOffset(),m=0;v>0;)v-=f(m--)+f(m--);for(;v<g;)d=v+f(m++),(v>0||d>0)&&p.drawPart(e,Math.max(v,0),Math.max(d,0)),v=d+f(m++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){if(!(i<=0))for(var r,s,o=i/2,a=i-2,u=o-1,l=Array(6),c=0,h=e.length;c<h;c++){var f=e[c],d=f._selection;if(f._transformCoordinates(n,l),r=l[0],s=l[1],2&d&&g(2),4&d&&g(4),t.fillRect(r-o,s-o,i,i),a>0&&!(1&d)){var p=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-u,s-u,a,a),t.fillStyle=p}}function g(e){var n=l[e],i=l[e+1];(r!=n||s!=i)&&(t.beginPath(),t.moveTo(r,s),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ta.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new O(p.read(arguments))])},moveBy:function(){throw Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new O(p.read(arguments))])},cubicCurveTo:function(){var e=arguments,n=p.read(e),i=p.read(e),r=p.read(e),s=t(this);s.setHandleOut(n.subtract(s._point)),this._add([new O(r,i.subtract(r))])},quadraticCurveTo:function(){var e=arguments,n=p.read(e),i=p.read(e),r=t(this)._point;this.cubicCurveTo(n.add(r.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var e=arguments,n=p.read(e),i=p.read(e),r=s.pick(s.read(e),.5),o=1-r,a=t(this)._point,u=n.subtract(a.multiply(o*o)).subtract(i.multiply(r*r)).divide(2*r*o);if(u.isNaN())throw Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(u,i)},arcTo:function(){var e,n,i,r,o,a=arguments,u=Math.abs,l=Math.sqrt,c=t(this),h=c._point,d=p.read(a),g=s.peek(a),m=s.pick(g,!0);if("boolean"==typeof m)var _=h.add(d).divide(2),e=_.add(_.subtract(h).rotate(m?-90:90));else if(2>=s.remain(a))e=d,d=p.read(a);else if(!h.equals(d)){var y=v.read(a),w=f.isZero;if(w(y.width)||w(y.height))return this.lineTo(d);var C=s.read(a),m=!!s.read(a),S=!!s.read(a),_=h.add(d).divide(2),k=h.subtract(_).rotate(-C),T=k.x,M=k.y,P=u(y.width),I=u(y.height),A=P*P,N=I*I,E=T*T,j=M*M,L=l(E/A+j/N);if(L>1&&(P*=L,I*=L,A=P*P,N=I*I),1e-12>u(L=(A*N-A*j-N*E)/(A*j+N*E))&&(L=0),L<0)throw Error("Cannot create an arc with the given arguments");n=new p(P*M/I,-I*T/P).multiply((S===m?-1:1)*l(L)).rotate(C).add(_),i=(r=(o=new x().translate(n).rotate(C).scale(P,I))._inverseTransform(h)).getDirectedAngle(o._inverseTransform(d)),!m&&i>0?i-=360:m&&i<0&&(i+=360)}if(e){var z=new b(h.add(e).divide(2),e.subtract(h).rotate(90),!0),D=new b(e.add(d).divide(2),d.subtract(e).rotate(90),!0),$=new b(h,d),R=$.getSide(e);if(!(n=z.intersect(D,!0))){if(!R)return this.lineTo(d);throw Error("Cannot create an arc with the given arguments")}i=(r=h.subtract(n)).getDirectedAngle(d.subtract(n));var B=$.getSide(n,!0);0===B?i=R*u(i):R===B&&(i+=i<0?360:-360)}if(i){for(var q=u(i),F=q>=360?4:Math.ceil((q-1e-5)/90),H=i/F,W=H*Math.PI/360,V=4/3*Math.sin(W)/(1+Math.cos(W)),U=[],Z=0;Z<=F;Z++){var k=d,X=null;if(Z<F&&(X=r.rotate(90).multiply(V),o?(k=o._transformPoint(r),X=o._transformPoint(r.add(X)).subtract(k)):k=n.add(r)),Z){var G=r.rotate(-90).multiply(V);o&&(G=o._transformPoint(r.add(G)).subtract(k)),U.push(new O(k,G,X))}else c.setHandleOut(X);r=r.rotate(H)}this._add(U)}},lineBy:function(){var e=p.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=arguments,n=p.read(e),i=p.read(e),r=s.read(e),o=t(this)._point;this.curveTo(o.add(n),o.add(i),r)},cubicCurveBy:function(){var e=arguments,n=p.read(e),i=p.read(e),r=p.read(e),s=t(this)._point;this.cubicCurveTo(s.add(n),s.add(i),s.add(r))},quadraticCurveBy:function(){var e=arguments,n=p.read(e),i=p.read(e),r=t(this)._point;this.quadraticCurveTo(r.add(n),r.add(i))},arcBy:function(){var e=arguments,n=t(this)._point,i=n.add(p.read(e)),r=s.pick(s.peek(e),!0);"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,n.add(p.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){return z[e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,s){var o=t[0];if(!o)return new _;var a=Array(6),u=o._transformCoordinates(i,Array(6)),l=u.slice(0,2),c=l.slice(),h=[,,];function f(t){t._transformCoordinates(i,a);for(var e=0;e<2;e++)E._addBounds(u[e],u[e+4],a[e+2],a[e],e,s?s[e]:0,l,c,h);var n=u;u=a,a=n}for(var d=1,p=t.length;d<p;d++)f(t[d]);return e&&f(o),new _(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,n,i,r){var s=n.getStyle(),o=s.hasStroke(),a=s.getStrokeWidth(),u=o&&n._getStrokeMatrix(i,r),l=o&&z._getStrokePadding(a,u),c=z.getBounds(t,e,n,i,r,l);if(!o)return c;var h=a/2,f=s.getStrokeJoin(),d=s.getStrokeCap(),p=s.getMiterLimit(),g=new _(new v(l));function m(t){c=c.include(t)}function y(t){c=c.unite(g.setCenter(t._point.transform(i)))}function x(t,e){"round"===e||t.isSmooth()?y(t):z._addBevelJoin(t,e,h,p,i,u,m)}function b(t,e){"round"===e?y(t):z._addSquareCap(t,e,h,i,u,m)}var w=t.length-(e?0:1);if(w>0){for(var C=1;C<w;C++)x(t[C],f);e?x(t[0],f):(b(t[0],d),b(t[t.length-1],d))}return c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new p(t,0).transform(e),i=new p(0,t).transform(e),r=n.getAngleInRadians(),s=n.getLength(),o=i.getLength(),a=Math.sin(r),u=Math.cos(r),l=Math.tan(r),c=Math.atan2(o*l,s),h=Math.atan2(o,l*s);return[Math.abs(s*Math.cos(c)*u+o*Math.sin(c)*a),Math.abs(o*Math.sin(h)*u+s*Math.cos(h)*a)]},_addBevelJoin:function(t,e,n,i,r,s,o,a){var u=t.getCurve(),l=u.getPrevious(),c=u.getPoint1().transform(r),h=l.getNormalAtTime(1).multiply(n).transform(s),f=u.getNormalAtTime(0).multiply(n).transform(s),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),a&&o(c),o(c.add(h)),"miter"===e){var g=new b(c.add(h),new p(-h.y,h.x),!0).intersect(new b(c.add(f),new p(-f.y,f.x),!0),!0);g&&c.getDistance(g)<=i*n&&o(g)}o(c.add(f))},_addSquareCap:function(t,e,n,i,r,s,o){var a=t._point.transform(i),u=t.getLocation(),l=u.getNormal().multiply(0===u.getTime()?n:-n).transform(r);"square"===e&&(o&&(s(a.subtract(l)),s(a.add(l))),a=a.add(l.rotate(-90))),s(a.add(l)),s(a.subtract(l))},getHandleBounds:function(t,e,n,i,r){var s,o,a=n.getStyle();if(r.stroke&&a.hasStroke()){var u=n._getStrokeMatrix(i,r),l=a.getStrokeWidth()/2,c=l;"miter"===a.getStrokeJoin()&&(c=l*a.getMiterLimit()),"square"===a.getStrokeCap()&&(c=Math.max(c,l*Math.SQRT2)),s=z._getStrokePadding(l,u),o=z._getStrokePadding(c,u)}for(var h=Array(6),f=1/0,d=-1/0,p=1/0,g=d,v=0,m=t.length;v<m;v++){t[v]._transformCoordinates(i,h);for(var y=0;y<6;y+=2){var x=y?s:o,b=x?x[0]:0,w=x?x[1]:0,C=h[y],S=h[y+1],k=C-b,T=C+b,M=S-w,P=S+w;k<f&&(f=k),T>d&&(d=T),M<p&&(p=M),P>g&&(g=P)}}return new _(f,p,d-f,g-p)}}});z.inject({statics:new function(){var t=[new O([-1,0],[0,.5522847498307936],[0,-.5522847498307936]),new O([0,-1],[-.5522847498307936,0],[.5522847498307936,0]),new O([1,0],[0,-.5522847498307936],[0,.5522847498307936]),new O([0,1],[.5522847498307936,0],[-.5522847498307936,0])];function e(t,e,n){var i=s.getNamed(n),r=new z(i&&(!0==i.insert?C.INSERT:!1==i.insert?C.NO_INSERT:null));return r._add(t),r._closed=e,r.set(i,C.INSERT)}function n(n,i,r){for(var s=[,,,,],o=0;o<4;o++){var a=t[o];s[o]=new O(a._point.multiply(i).add(n),a._handleIn.multiply(i),a._handleOut.multiply(i))}return e(s,!0,r)}return{Line:function(){var t=arguments;return e([new O(p.readNamed(t,"from")),new O(p.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments;return n(p.readNamed(t,"center"),new v(s.readNamed(t,"radius")),t)},Rectangle:function(){var t,n=arguments,i=_.readNamed(n,"rectangle"),r=v.readNamed(n,"radius",0,{readNull:!0}),s=i.getBottomLeft(!0),o=i.getTopLeft(!0),a=i.getTopRight(!0),u=i.getBottomRight(!0);if(!r||r.isZero())t=[new O(s),new O(o),new O(a),new O(u)];else{var l=(r=v.min(r,i.getSize(!0).divide(2))).width,c=r.height,h=.5522847498307936*l,f=.5522847498307936*c;t=[new O(s.add(l,0),null,[-h,0]),new O(s.subtract(0,c),[0,f]),new O(o.add(0,c),null,[0,-f]),new O(o.add(l,0),[-h,0],null),new O(a.subtract(l,0),null,[h,0]),new O(a.add(0,c),[0,-f],null),new O(u.subtract(0,c),null,[0,f]),new O(u.subtract(l,0),[h,0])]}return e(t,!0,n)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,e=T._readEllipse(t);return n(e.center,e.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,e=p.readNamed(t,"from"),n=p.readNamed(t,"through"),i=p.readNamed(t,"to"),r=s.getNamed(t),o=new z(r&&!1==r.insert&&C.NO_INSERT);return o.moveTo(e),o.arcTo(n,i),o.set(r)},RegularPolygon:function(){for(var t=arguments,n=p.readNamed(t,"center"),i=s.readNamed(t,"sides"),r=s.readNamed(t,"radius"),o=360/i,a=i%3==0,u=new p(0,a?-r:r),l=a?-1:.5,c=Array(i),h=0;h<i;h++)c[h]=new O(n.add(u.rotate((h+l)*o)));return e(c,!0,t)},Star:function(){for(var t=arguments,n=p.readNamed(t,"center"),i=2*s.readNamed(t,"points"),r=s.readNamed(t,"radius1"),o=s.readNamed(t,"radius2"),a=360/i,u=new p(0,-1),l=Array(i),c=0;c<i;c++)l[c]=new O(n.add(u.rotate(a*c).multiply(c%2?o:r)));return e(l,!0,t)}}}});var D=L.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var o=n.length-1;o>=0;o--){var a=i[o];i!==n||a instanceof z||(i=s.slice(i)),Array.isArray(a)?i[o]=new z({segments:a,insert:!1}):a instanceof D&&(i.splice.apply(i,[o,1].concat(a.removeChildren())),a.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r=n[i].reduce(e);r.isEmpty()&&r.remove()}if(!n.length){var r=new z(C.NO_INSERT);return r.copyAttributes(this),r.insertAbove(this),this.remove(),r}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)s.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var o=n[r],a=o._matrix;i.push(o.getPathData(t&&!a.isIdentity()?t.appended(a):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===z||"path"===n.type?n:s.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,o=r.length;s<o;s++)r[s].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var a=this._style;a.hasFill()&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var o=i[r],a=o._matrix;n[o._id]||o._drawSelected(t,a.isIdentity()?e:e.appended(a))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw Error("Use a moveTo() command first");return n[n.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new z(C.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=p.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},s.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,r=0,s=i.length;r<s;r++)n=i[r][t](e)||n;return n}},{}));L.inject(new function(){var t=Math.min,e=Math.max,i=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function o(t){return t._children||[t]}function a(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var i=o(n),r=0,s=i.length;r<s;r++){var t=i[r];t._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0))}n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function u(t,e,n,i,r){var s=new D(C.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),r&&!1==r.insert||s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.copyAttributes(n,!0),s}function l(t){return t.hasOverlap()||t.isCrossing()}function h(t,e,n,i){if(i&&(!1==i.trace||i.stroke)&&/^(subtract|intersect)$/.test(n))return d(t,e,n);var h=a(t,!0),f=e&&t!==e&&a(e,!0),p=r[n];p[n]=!0,f&&(p.subtract||p.exclude)^(f.isClockwise()^h.isClockwise())&&f.reverse();var g,_=m(j.expand(h.getIntersections(f,l))),b=o(h),w=f&&o(f),C=[],S=[];function k(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];s.push(C,i._segments),s.push(S,i.getCurves()),i._overlapsOnly=!0}}function T(t){for(var e=[],n=0,i=t&&t.length;n<i;n++)e.push(S[t[n]]);return e}if(_.length){k(b),w&&k(w);for(var M=Array(S.length),P=0,I=S.length;P<I;P++)M[P]=S[P].getValues();for(var A=c.findCurveBoundsCollisions(M,M,0,!0),O={},P=0;P<S.length;P++){var N=S[P],E=N._path._id;(O[E]=O[E]||{})[N.getIndex()]={hor:T(A[P].hor),ver:T(A[P].ver)}}for(var P=0,I=_.length;P<I;P++)y(_[P]._segment,h,f,O,p);for(var P=0,I=C.length;P<I;P++){var L=C[P],z=L._intersection;L._winding||y(L,h,f,O,p),z&&z._overlap||(L._path._overlapsOnly=!1)}g=x(C,p)}else g=v(w?b.concat(w):b.slice(),function(t){return!!p[t]});return u(g,!0,t,e,i)}function d(t,e,n){var i=a(t),r=a(e),s=i.getIntersections(r,l),o="subtract"===n,c="divide"===n,h={},f=[];function d(t){if(!h[t._id]&&(c||r.contains(t.getPointAt(t.getLength()/2))^o))return f.unshift(t),h[t._id]=!0}for(var p=s.length-1;p>=0;p--){var g=s[p].split();g&&(d(g)&&g.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return d(i),u(f,!1,t,e)}function p(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function g(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function v(t,e,n){var r=t&&t.length;if(r){var o=s.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),a=t.slice().sort(function(t,e){return i(e.getArea())-i(t.getArea())}),u=a[0],l=c.findItemBoundsCollisions(a,null,f.GEOMETRIC_EPSILON);null==n&&(n=u.isClockwise());for(var h=0;h<r;h++){var d=a[h],p=o[d._id],g=0,v=l[h];if(v){for(var m=null,_=v.length-1;_>=0;_--)if(v[_]<h){m=m||d.getInteriorPoint();var y=a[v[_]];if(y.contains(m)){var x=o[y._id];g=x.winding,p.winding+=g,p.container=x.exclude?x.container:y;break}}}if(e(p.winding)===e(g))p.exclude=!0,t[p.index]=null;else{var b=p.container;d.setClockwise(b?!b.isClockwise():n)}}}return t}function m(t,e,n){var i,r,s,o=e&&[],a=!1,u=n||[],l=n&&{};function c(t){return t._path._id+"."+t._segment1._index}for(var h=(n&&n.length)-1;h>=0;h--){var f=n[h];f._path&&(l[c(f)]=!0)}for(var h=t.length-1;h>=0;h--){var d,v=t[h],m=v._time,_=m,y=e&&!e(v),f=v._curve;if(f&&(f!==r?(a=!f.hasHandles()||l&&l[c(f)],i=[],s=null,r=f):s>=1e-8&&(m/=s)),y){i&&i.push(v);continue}if(e&&o.unshift(v),s=_,m<1e-8)d=f._segment1;else if(m>.99999999)d=f._segment2;else{var x=f.divideAtTime(m,!0);a&&u.push(f,x),d=x._segment1;for(var b=i.length-1;b>=0;b--){var w=i[b];w._time=(w._time-m)/(1-m)}}v._setSegment(d);var C=d._intersection,S=v._intersection;if(C){p(C,S);for(var k=C;k;)p(k._intersection,C),k=k._next}else d._intersection=S}return n||g(u),o||t}function _(n,r,s,o,a){var u,l,c=Array.isArray(r)?r:r[s?"hor":"ver"],h=s?1:0,f=1^h,d=[n.x,n.y],p=d[h],g=d[f],v=p-1e-9,m=p+1e-9,y=0,x=0,b=0,w=0,C=!1,S=!1,k=1,T=[];function M(i){var l=i[f+0],c=i[f+2],d=i[f+4],y=i[f+6];if(g<=e(l,c,d,y)&&g>=t(l,c,d,y)){for(var x,S=i[h+0],M=i[h+2],P=i[h+4],I=i[h+6],A=v>e(S,M,P,I)||m<t(S,M,P,I)?[i]:E.getMonoCurves(i,s),O=0,N=A.length;O<N;O++)if(x=function(i){var l=i[f+0],c=i[f+6];if(!(g<t(l,c)||g>e(l,c))){var d=i[h+0],y=i[h+2],x=i[h+4],S=i[h+6];if(l===c){(d<m&&S>v||S<m&&d>v)&&(C=!0);return}var M=g===l?0:g===c?1:v>e(d,y,x,S)||m<t(d,y,x,S)?1:E.solveCubic(i,f,g,T,0,1)>0?T[0]:1,P=0===M?d:1===M?S:E.getPoint(i,M)[s?"y":"x"],I=l>c?1:-1,A=u[f]>u[f+6]?1:-1,O=u[h+6];return g!==l?(P<v?b+=I:P>m?w+=I:C=!0,P>p-1e-6&&P<p+1e-6&&(k/=2)):(I!==A?d<v?b+=I:d>m&&(w+=I):d!=O&&(O<m&&P>m?(w+=I,C=!0):O>v&&P<v&&(b+=I,C=!0)),k/=4),u=i,!a&&P>v&&P<m&&0===E.getTangent(i,M)[s?"x":"y"]&&_(n,r,!s,o,!0)}}(A[O]))return x}}for(var P=0,I=c.length;P<I;P++){var A,O=c[P],N=O._path,j=O.getValues();if((!P||c[P-1]._path!==N)&&(u=null,N._closed||(l=E.getValues(N.getLastCurve().getSegment2(),O.getSegment1(),null,!o))[f]===l[f+6]||(u=l),!u)){u=j;for(var L=N.getLastCurve();L&&L!==O;){var z=L.getValues();if(z[f]!==z[f+6]){u=z;break}L=L.getPrevious()}}if(A=M(j))return A;if(P+1===I||c[P+1]._path!==N){if(l&&(A=M(l)))return A;!C||b||w||(b=w=N.isClockwise(o)^s?1:-1),y+=b,x+=w,b=w=0,C&&(S=!0,C=!1),l=null}}return{winding:e(y=i(y),x=i(x)),windingL:y,windingR:x,quality:k,onPath:S}}function y(t,e,n,r,s){var o,a=[],u=t,l=0;do{var c=t.getCurve();if(c){var h=c.getLength();a.push({segment:t,curve:c,length:h}),l+=h}t=t.getNext()}while(t&&!t._intersection&&t!==u)for(var d=[.5,.25,.75],o={winding:0,quality:-1},p=0;p<d.length&&o.quality<.5;p++)for(var h=l*d[p],g=0,v=a.length;g<v;g++){var m=a[g],y=m.length;if(h<=y){var c=m.curve,x=c._path,b=x._parent,w=b instanceof D?b:x,C=f.clamp(c.getTimeAt(h),.001,.999),S=c.getPointAtTime(C),k=i(c.getTangentAtTime(C).y)<Math.SQRT1_2,T=null;if(s.subtract&&n){var M=(w===e?n:e)._getWinding(S,k,!0);if(w===e&&M.winding||w===n&&!M.winding){if(M.quality<1)continue;T={winding:0,quality:1}}}(T=T||_(S,r[x._id][c.getIndex()],k,!0)).quality>o.quality&&(o=T);break}h-=y}for(var g=a.length-1;g>=0;g--)a[g].segment._winding=o}function x(t,e){var n,i=[];function r(t){var n;return!!(t&&!t._visited&&(!e||e[(n=t._winding||{}).winding]&&!(e.unite&&2===n.winding&&n.windingL&&n.windingR)))}function s(t){if(t){for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0}return!1}function o(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}t.sort(function(t,e){var n=t._intersection,i=e._intersection,r=!!(n&&n._overlap),s=!!(i&&i._overlap),o=t._path,a=e._path;return r^s?r?1:-1:!n^!i?n?1:-1:o!==a?o._id-a._id:t._index-e._index});for(var a=0,u=t.length;a<u;a++){var l,c,h,f=t[a],d=r(f),p=null,g=!1,v=!0,m=[];if(d&&f._path._overlapsOnly){var _=f._path,y=f._intersection._segment._path;_.compare(y)&&(_.getArea()&&i.push(_.clone(!1)),o(_),o(y),d=!1)}for(;d;){var x=!p,b=function(t,e){var i=t._intersection,o=i,a=[];function u(i,o){for(;i&&i!==o;){var u=i._segment,l=u&&u._path;if(l){var c=u.getNext()||l.getFirstSegment(),h=c._intersection;u!==t&&(s(u)||s(c)||c&&r(u)&&(r(c)||h&&r(h._segment)))&&a.push(u),e&&n.push(u)}i=i._next}}if(e&&(n=[t]),i){for(u(i);i&&i._previous;)i=i._previous;u(i,o)}return a}(f,x),w=b.shift(),g=!x&&(s(f)||s(w)),S=!g&&w;if(x&&(p=new z(C.NO_INSERT),l=null),g){(f.isFirst()||f.isLast())&&(v=f._path._closed),f._visited=!0;break}if(S&&l&&(m.push(l),l=null),l||(S&&b.push(f),l={start:p._segments.length,crossings:b,visited:c=[],handleIn:h}),S&&(f=w),!r(f)){p.removeSegments(l.start);for(var k=0,T=c.length;k<T;k++)c[k]._visited=!1;c.length=0;do(f=l&&l.crossings.shift())&&f._path||(f=null,(l=m.pop())&&(c=l.visited,h=l.handleIn));while(l&&!r(f))if(!f)break}var M=f.getNext();p.add(new O(f._point,h,M&&f._handleOut)),f._visited=!0,c.push(f),f=M||f._path.getFirstSegment(),h=M&&M._handleIn}g&&(v&&(p.getFirstSegment().setHandleIn(h),p.setClosed(v)),0!==p.getArea()&&i.push(p))}return i}return{_getWinding:function(t,e,n){return _(t,this.getCurves(),e,n)},unite:function(t,e){return h(this,t,"unite",e)},intersect:function(t,e){return h(this,t,"intersect",e)},subtract:function(t,e){return h(this,t,"subtract",e)},exclude:function(t,e){return h(this,t,"exclude",e)},divide:function(t,e){return e&&(!1==e.trace||e.stroke)?d(this,t,"divide"):u([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var i=!1,r=!1,o=this.getIntersections(null,function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)}),a=i&&r&&[];if(o=j.expand(o),i)for(var u=m(o,function(t){return t.hasOverlap()},a),l=u.length-1;l>=0;l--){var c=u[l],h=c._path,f=c._segment,d=f.getPrevious(),p=f.getNext();n(d,h)&&n(p,h)&&(f.remove(),d._handleOut._set(0,0),p._handleIn._set(0,0),d===f||d.getCurve().hasLength()||(p._handleIn.set(d._handleIn),d.remove()))}r&&(m(o,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,s=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),s&&(s._intersection=null)},a),a&&g(a),e=x(s.each(e,function(t){s.push(this,t._segments)},[])));var v,_=e.length;return _>1&&t?(e!==t&&this.setChildren(e),v=this):1!==_||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),v=this),v||((v=new D(C.NO_INSERT)).addChildren(e),(v=v.reduce()).copyAttributes(this),this.replaceWith(v)),v},reorient:function(t,e){var i=this._children;return i&&i.length?this.setChildren(v(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==n&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,s=[],o=[],a=0,u=i.length;a<u;a++){var l=i[a].getValues(),c=l[1],h=l[3],f=l[5],d=l[7];if(r>=t(c,h,f,d)&&r<=e(c,h,f,d))for(var p=E.getMonoCurves(l),g=0,v=p.length;g<v;g++){var m=p[g],_=m[1],y=m[7];if(_!==y&&(r>=_&&r<=y||r>=y&&r<=_)){var x=r===_?m[0]:r===y?m[6]:1===E.solveCubic(m,1,r,o,0,1)?E.getPoint(m,o[0]).x:(m[0]+m[6])/2;s.push(x)}}}s.length>1&&(s.sort(function(t,e){return t-e}),n.x=(s[0]+s[1])/2)}return n}}});var $=s.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){var s,o=[],a=[],u=0,l=1/(n||32),c=t._segments,h=c[0];function f(t,n){var s=E.getValues(t,n,r);o.push(s),function t(n,r,s,o){if(!(o-s>l)||i&&E.isStraight(n)||E.isFlatEnough(n,e||.25)){var c=n[6]-n[0],h=n[7]-n[1],f=Math.sqrt(c*c+h*h);f>0&&(u+=f,a.push({offset:u,curve:n,index:r,time:o}))}else{var d=E.subdivide(n,.5),p=(s+o)/2;t(d[0],r,s,p),t(d[1],r,p,o)}}(s,t._index,0,1)}for(var d=1,p=c.length;d<p;d++)f(h,s=c[d]),h=s;t._closed&&f(s||h,c[0]),this.curves=o,this.parts=a,this.length=u,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var s=n[e];if(s.offset>=t){this.index=e;var o=n[e-1],a=o&&o.index===s.index?o.time:0,u=o?o.offset:0;return{index:s.index,time:a+(s.time-a)*(t-u)/(s.offset-u)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),s=i.index,o=r.index;s<=o;s++){var a=E.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&t.moveTo(a[0],a[1]),t.bezierCurveTo.apply(t,a.slice(2))}}},s.each(E._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return E[t](this.curves[n.index],n.time)}},{})),R=s.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,s=0,o=i.length;s<o;s++){var a=i[s].point;e&&e.equals(a)||n.push(e=a.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new O(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,s){var o=this.points;if(i-n==1){var a=o[n],u=o[i],l=a.getDistance(u)/3;this.addCurve(t,[a,a.add(r.normalize(l)),u.add(s.normalize(l)),u]);return}for(var c,h=this.chordLengthParameterize(n,i),f=Math.max(e,e*e),d=!0,p=0;p<=4;p++){var g=this.generateBezier(n,i,h,r,s),v=this.findMaxError(n,i,g,h);if(v.error<e&&d){this.addCurve(t,g);return}if(c=v.index,v.error>=f)break;d=this.reparameterize(n,i,h,g),f=v.error}var m=o[c-1].subtract(o[c+1]);this.fitCubic(t,e,n,c,r,m),this.fitCubic(t,e,c,i,m.negate(),s)},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new O(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var s=Math.abs,o=this.points,a=o[t],u=o[e],l=[[0,0],[0,0]],c=[0,0],h=0,f=e-t+1;h<f;h++){var d=n[h],p=1-d,g=3*d*p,v=p*p*p,m=g*p,_=g*d,y=d*d*d,x=i.normalize(m),b=r.normalize(_),w=o[t+h].subtract(a.multiply(v+m)).subtract(u.multiply(_+y));l[0][0]+=x.dot(x),l[0][1]+=x.dot(b),l[1][0]=l[0][1],l[1][1]+=b.dot(b),c[0]+=x.dot(w),c[1]+=b.dot(w)}var C,S,k=l[0][0]*l[1][1]-l[1][0]*l[0][1];if(s(k)>1e-12){var T=l[0][0]*c[1]-l[1][0]*c[0];C=(c[0]*l[1][1]-c[1]*l[0][1])/k,S=T/k}else{var M=l[0][0]+l[0][1],P=l[1][0]+l[1][1];C=S=s(M)>1e-12?c[0]/M:s(P)>1e-12?c[1]/P:0}var I,A,O=u.getDistance(a),N=1e-12*O;if(C<N||S<N)C=S=O/3;else{var E=u.subtract(a);I=i.normalize(C),A=r.normalize(S),I.dot(E)-A.dot(E)>O*O&&(C=S=O/3,I=A=null)}return[a,a.add(I||i.normalize(C)),u.add(A||r.normalize(S)),u]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);for(var r=1,s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(var s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var o=this.evaluate(3,t,n),a=this.evaluate(2,i,n),u=this.evaluate(1,r,n),l=o.subtract(e),c=a.dot(a)+l.dot(u);return f.isMachineZero(c)?n:n-l.dot(a)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;o<e;o++){var a=this.evaluate(3,n,i[o-t]).subtract(this.points[o]),u=a.x*a.x+a.y*a.y;u>=s&&(s=u,r=o)}return{error:s,index:r}}}),B=C.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&s.isPlainObject(t)&&t.x===n&&t.y===n;this._initialize(e&&t,!e&&p.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),q=B.extend({_class:"PointText",initialize:function(){B.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new g(t.x,t.y,this,"setPoint")},setPoint:function(){var t=p.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,s=r.hasFill(),o=r.hasStroke(),a=r.getLeading(),u=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var l=0,c=i.length;l<c;l++){t.shadowColor=u;var h=i[l];s&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(h,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),o=n.getLeading(),a=this.getView().getTextWidth(n.getFontStyle(),i),u=0;"left"!==s&&(u-=a/("center"===s?2:1));var l=new _(u,r?-.75*o:0,a,r*o);return t?t._transformBounds(l,l):l}}),F=s.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4)*60,0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i=Math.floor(t=(t/60%6+6)%6),r=t-i,i=o[i],s=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[s[i[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s,a=(i+r)/2;return[o?0:(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4)*60,o?0:a<.5?s/(i+r):s/(2-i-r),a]},"hsl-rgb":function(t,e,n){if(t=(t/360%1+1)%1,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=[],a=0;a<3;a++){var u=i[a];u<0&&(u+=1),u>1&&(u-=1),o[a]=6*u<1?s+(r-s)*6*u:2*u<1?r:3*u<2?s+(r-s)*(2/3-u)*6:s}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(e,function(t,i){n[i]=[],s.each(t,function(t,r){var o=s.capitalize(t),a=/^(hue|saturation)$/.test(t),u=n[i][r]="gradient"===i?"gradient"===t?function(t){var e=this._components[0];return t=H.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return p.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+o]=function(){return this._type===i||a&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+o]=function(t){this._type===i||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=u.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function o(a){var u,l,c,h,f=arguments,d=this.__read,p=0;Array.isArray(a)&&(a=(f=a)[0]);var g=null!=a&&typeof a;if("string"===g&&a in e&&(u=a,Array.isArray(a=f[1])?(l=a,c=f[2]):(d&&(p=1),f=s.slice(f,1),g=typeof a)),!l){if(h="number"===g?f:"object"===g&&null!=a.length?a:null){u||(u=h.length>=3?"rgb":"gray");var v=e[u].length;c=h[v],d&&(p+=h===arguments?v+(null!=c?1:0):1),h.length>v&&(h=s.slice(h,0,v))}else if("string"===g){var m=function(e){var n,s=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),o="rgb";if(s){var a=s[4]?4:3;n=Array(a);for(var u=0;u<a;u++){var l=s[u+1];n[u]=parseInt(1==l.length?l+l:l,16)/255}}else if(s=e.match(/^(rgb|hsl)a?\((.*)\)$/)){o=s[1],n=s[2].trim().split(/[,\s]+/g);for(var c="hsl"===o,u=0,h=Math.min(n.length,4);u<h;u++){var f=n[u],l=parseFloat(f);c?0===u?l*=({turn:360,rad:180/Math.PI,grad:.9})[f.match(/([a-z]*)$/)[1]]||1:u<3&&(l/=100):u<3&&(l/=/%$/.test(f)?100:255),n[u]=l}}else{var d=r[e];if(!d){if(i){t||((t=ti.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var p=t.getImageData(0,0,1,1).data;d=r[e]=[p[0]/255,p[1]/255,p[2]/255]}else d=[0,0,0]}n=d.slice()}return[o,n]}(a);u=m[0],4===(l=m[1]).length&&(c=l[3],l.length--)}else if("object"===g){if(a.constructor===o){if(u=a._type,l=a._components.slice(),c=a._alpha,"gradient"===u)for(var _=1,y=l.length;_<y;_++){var x=l[_];x&&(l[_]=x.clone())}}else if(a.constructor===H)u="gradient",h=f;else{var b=e[u="hue"in a?"lightness"in a?"hsl":"hsb":"gradient"in a||"stops"in a||"radial"in a?"gradient":"gray"in a?"gray":"rgb"],w=n[u];this._components=l=[];for(var _=0,y=b.length;_<y;_++){var C=a[b[_]];null==C&&!_&&"gradient"===u&&"stops"in a&&(C={stops:a.stops,radial:a.radial}),null!=(C=w[_].call(this,C))&&(l[_]=C)}c=a.alpha}}d&&u&&(p=1)}if(this._type=u||"rgb",!l){this._components=l=[];for(var w=n[this._type],_=0,y=w.length;_<y;_++){var C=w[_].call(this,h&&h[_]);null!=C&&(l[_]=C)}}return this._components=l,this._properties=e[this._type],this._alpha=c,d&&(this.__read=p),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=a[this._type+"-"+t])?e.apply(this,this._components):a["rgb-"+t].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new F(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=s.isPlainValue(t,!0)?F.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&s.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=h.instance,r=0,s=t.length;r<s;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round((t<0?0:t>1?1:t)*255)}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+(0x1000000+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],s=r._stops,o=i[1],a=i[2],u=i[3],l=e&&e.inverted();if(l&&(o=l._transformPoint(o),a=l._transformPoint(a),u&&(u=l._transformPoint(u))),r._radial){var c=a.getDistance(o);if(u){var h=u.subtract(o);h.getLength()>c&&(u=o.add(h.normalize(c-.1)))}var f=u||o;n=t.createRadialGradient(f.x,f.y,0,o.x,o.y,c)}else n=t.createLinearGradient(o.x,o.y,a.x,a.y);for(var d=0,p=s.length;d<p;d++){var g=s[d],v=g._offset;n.addColorStop(null==v?d/(p-1):v,g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new F(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return s.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},function(t,e){this[e]=function(e){e=F.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,o=i.length;s<o;s++)r[s]=t(i[s],r[s]);return new F(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),H=s.extend({_class:"Gradient",initialize:function(t,e){this._id=d.get(),t&&s.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return s.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1==e||(this._owners.splice(e,1),this._owners.length||(this._owners=n))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new H(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var i=0,r=e.length;i<r;i++)e[i]._owner=n;e=this._stops=W.readList(t,0,{clone:!0});for(var i=0,r=e.length;i<r;i++)e[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),W=s.extend({_class:"GradientStop",initialize:function(t,e){var i=t,r=e;"object"==typeof t&&e===n&&(Array.isArray(t)&&"number"!=typeof t[0]?(i=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,r=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(r)},clone:function(){return new W(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return s.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){F._setOwner(this._color,null),this._color=F._setOwner(F.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),V=s.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new p,selectedColor:null},e=s.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=s.set({},e,{fillColor:new F}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},o={beans:!0},a={_class:"Style",beans:!0,initialize:function(n,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||ta.project,this._defaults=!r||r instanceof S?e:r instanceof B?i:t,n&&this.set(n)}};return s.each(e,function(t,e){var i=/Color$/.test(e),u="shadowOffset"===e,l=s.capitalize(e),c=r[e],h="set"+l,f="get"+l;a[h]=function(t){var n=this._owner,r=n&&n._children,s=r&&r.length>0&&!(n instanceof D);if(s)for(var o=0,a=r.length;o<a;o++)r[o]._style[h](t);if(("selectedColor"===e||!s)&&e in this._defaults){var u=this._values[e];u!==t&&(i&&(u&&(F._setOwner(u,null),u._canvasStyle=null),t&&t.constructor===F&&(t=F._setOwner(t,n,s&&h))),this._values[e]=t,n&&n._changed(c||129))}},a[f]=function(t){var r,o=this._owner,a=o&&o._children,l=a&&a.length>0&&!(o instanceof D);if(l&&!t)for(var c=0,d=a.length;c<d;c++){var g=a[c]._style[f]();if(c){if(!s.equals(r,g))return n}else r=g}else if(e in this._defaults){var r=this._values[e];if(r===n)(r=this._defaults[e])&&r.clone&&(r=r.clone());else{var v=i?F:u?p:null;v&&!(r&&r.constructor===v)&&(this._values[e]=r=v.read([r],0,{readNull:!0,clone:!0}))}}return r&&i&&(r=F._setOwner(r,o,l&&h)),r},o[f]=function(t){return this._style[f](t)},o[h]=function(t){this._style[h](t)}}),s.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,i="set"+e;a[n]=o[n]="#get"+t,a[i]=o[i]="#set"+t}),C.inject(o),a},{set:function(t){var e=t instanceof V,n=e?t._values:t;if(n){for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}}},equals:function(t){function e(t,e,i){var r=t._values,o=e._values,a=e._defaults;for(var u in r){var l=r[u],c=o[u];if(!(i&&u in o)&&!s.equals(l,c===n?a[u]:c))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),U=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var a=r[o],u=a?a+s:e;if(u in t){if(!n)return t[u];t[u]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var o=n.left-(s.clientLeft||r.clientLeft||0),a=n.top-(s.clientTop||r.clientTop||0);if(!e){var u=i.defaultView;o+=u.pageXOffset||s.scrollLeft||r.scrollLeft,a+=u.pageYOffset||s.scrollTop||r.scrollTop}return new _(o,a,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new _(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return U.getBounds(t,e).getPoint()},getSize:function(t){return U.getBounds(t,!0).getSize()},isInvisible:function(t){return U.getSize(t).equals(new v(0,0))},isInView:function(t){return!U.isInvisible(t)&&U.getViewportBounds(t).intersects(U.getBounds(t,!0))},isInserted:function(t){return r.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},Z={add:function(t,e){if(t)for(var n in e)for(var i=e[n],s=n.split(/[\s,]+/g),o=0,a=s.length;o<a;o++){var u=s[o],l=t===r&&("touchstart"===u||"touchmove"===u)&&{passive:!1};t.addEventListener(u,i,l)}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new p(e.pageX||e.clientX+r.documentElement.scrollLeft,e.pageY||e.clientY+r.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Z.getPoint(t).subtract(U.getOffset(e||Z.getTarget(t)))}};Z.requestAnimationFrame=new function(){var t,e=U.getPrefixed(i,"requestAnimationFrame"),n=!1,r=[];function s(){var t=r;r=[];for(var i=0,o=t.length;i<o;i++)t[i]();(n=e&&r.length)&&e(s)}return function(i){r.push(i),e?n||(e(s),n=!0):t||(t=setInterval(s,1e3/60))}};var X=s.extend(o,{_class:"View",initialize:function t(e,n){function s(t){return n[t]||parseInt(n.getAttribute(t),10)}function o(){var t=U.getSize(n);return t.isNaN()||t.isZero()?new v(s("width"),s("height")):t}if(i&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+t._id++),Z.add(n,this._viewEvents);var a,l="none";if(U.setPrefixed(n.style,{userDrag:l,userSelect:l,touchCallout:l,contentZooming:l,tapHighlightColor:"rgba(0,0,0,0)"}),u.hasAttribute(n,"resize")){var c=this;Z.add(i,this._windowEvents={resize:function(){c.setViewSize(o())}})}if(a=o(),u.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,f=h.style,d=U.getOffset(n);f.position="absolute",f.left=d.x+"px",f.top=d.y+"px",r.body.appendChild(h)}}else a=new v(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new x)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ta.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;X._focused===this&&(X._focused=null),X._views.splice(X._views.indexOf(this),1),delete X._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Z.remove(this._element,this._viewEvents),Z.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(C._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Z.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;(!U.getPrefixed(r,"hidden")||"true"===u.getAttribute(e,"keepalive"))&&U.isInView(e)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ta=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new s({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new s(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new m(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=v.read(arguments),e=t.subtract(this._viewSize);!e.isZero()&&(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new _(new p,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return U.isInView(this._element)},isInserted:function(){return U.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,s=r.createElement("div");s.style.fontSize=t,i.appendChild(s),e=parseFloat(U.getStyles(s).fontSize),i.removeChild(s)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},s.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?s:p).read(n),r=p.read(n,0,{readNull:!0});return this.transform(new x()[t](i,r||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new x;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=p.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new x().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new g(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=p.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(p.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(p.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(p.read(arguments))},getEventPoint:function(t){return this.viewToProject(Z.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return r&&"string"==typeof e&&(e=r.getElementById(e)),new(i?G:X)(t,e)}}},new function(){if(i){var t,e,n,s,o,a=!1,u=!1,l=i.navigator;l.pointerEnabled||l.msPointerEnabled?(n="pointerdown MSPointerDown",s="pointermove MSPointerMove",o="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",s="touchmove",o="touchend touchcancel","ontouchstart"in i&&l.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",s+=" mousemove",o+=" mouseup"));var c={},h={mouseout:function(t){var e=X._focused,n=Z.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=Z.getOffset(t,e._element),r=i.x,s=Math.abs,o=s(r),a=o-0x2000000;i.x=s(a)<o?a*(r<0?-1:1):r,M(e,t,e.viewToProject(i))}},scroll:T};c[n]=function(t){var e=X._focused=k(t);a||(a=!0,e._handleMouseEvent("mousedown",t))},h[s]=function(n){var i=X._focused;if(!u){var r=k(n);r?i!==r&&(i&&M(i,n),t||(t=i),i=X._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=X._focused=t,t=null,T())}i&&M(i,n)},h[n]=function(){u=!0},h[o]=function(t){var e=X._focused;e&&a&&e._handleMouseEvent("mouseup",t),u=a=!1},Z.add(r,h),Z.add(i,{load:T});var f,d,p,g,v,m,_,y,x=!1,b=!1,w={doubleclick:"click",mousedrag:"mousemove"},C=!1,S={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],s="mousemove"===t,o=this._scope.tool,u=this;function l(t){return i.virtual[t]||u.responds(t)||o&&o.responds(t)}s&&a&&l("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),h=r&&c&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,S=!1,k={};if(k[t.substr(5)]=!0,r&&w!==g&&(g&&P(g,null,"mouseleave",e,n),w&&P(w,null,"mouseenter",e,n),g=w),C^c&&(P(this,null,c?"mouseenter":"mouseleave",e,n),S=!0),(c||k.drag)&&!n.equals(d)&&(I(this,w,s?t:"mousemove",e,n,d),S=!0),C=c,k.down&&c||k.up&&f){if(I(this,w,t,e,n,f),k.down){if(y=w===m&&Date.now()-_<300,p=m=w,!b&&w){for(var T=w;T&&!T.responds("mousedrag");)T=T._parent;T&&(v=w)}f=n}else k.up&&(b||w!==p||(_=Date.now(),I(this,w,y?"doubleclick":"click",e,n,f),y=!1),p=v=null);C=!1,S=!0}d=n,S&&o&&(x=o._handleMouseEvent(t,e,n,k)||x),!1!==e.cancelable&&(x&&!k.move||k.down&&l("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,s=this._scope,o=s.tool;function a(o){o.responds(t)&&(ta=s,o.emit(t,r=r||new J(t,e,n,i)))}this.isVisible()&&(a(this),o&&o.responds(t)&&a(o))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var s in S)i[s]=(i[s]||0)+(S[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:T,_resetState:function(){a=u=x=C=!1,t=e=f=d=p=g=v=m=_=y=null}}}}function k(t){var e=Z.getTarget(t);return e.getAttribute&&X._viewsById[e.getAttribute("id")]}function T(){var t=X._focused;if(!t||!t.isVisible()){for(var n=0,i=X._views.length;n<i;n++)if((t=X._views[n]).isVisible()){X._focused=e=t;break}}}function M(t,e,n){t._handleMouseEvent("mousemove",e,n)}function P(t,e,n,i,r,s,o){for(var a,u=!1;t&&t!==o&&!function t(n,o){if(n.responds(o)){if(a||(a=new Q(o,i,r,e||n,s?r.subtract(s):null)),n.emit(o,a)&&(x=!0,a.prevented&&(b=!0),a.stopped))return u=!0}else{var l=w[o];if(l)return t(n,l)}}(t,n);)t=t._parent;return u}function I(t,e,n,i,r,s){return t._project.removeOn(n),b=x=!1,v&&P(v,null,n,i,r,s)||e&&e!==v&&!e.isDescendant(v)&&P(e,null,"mousedrag"===n?"mousemove":n,i,r,s,v)||P(t,v||e||t,n,i,r,s)}}),G=X.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof i.HTMLCanvasElement)){var n=v.read(arguments,1);if(n.isZero())throw Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));e=ti.getCanvas(n)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(u.getAttribute(e,"hidpi"))){var o=i.devicePixelRatio||1,a=U.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=o/a}X.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,s=this._context;if(!u.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}s.restore(),s.save(),s.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,i=ta.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,s=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=s}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,o=e.length;s<o;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Y=s.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return K.modifiers}}),J=Y.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),K=new function(){var t,e,o={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},a={tab:"	",space:" ",enter:"\r"},u={},l={},c=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ta&&ta.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var e=t.key||t.keyIdentifier;return o[e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===n?String.fromCharCode(t.keyCode):e]||(e.length>1?s.hyphenate(e):e.toLowerCase())}function f(e,n,i,r){var o,a=X._focused;if(u[n]=e,e?l[n]=i:delete l[n],n.length>1&&(o=s.camelize(n))in c){c[o]=e;var h=ta&&ta.agent;if("meta"===o&&h&&h.mac){if(e)t={};else{for(var d in t)d in l&&f(!1,d,t[d],r);t=null}}}else e&&t&&(t[n]=i);a&&a._handleKeyEvent(e?"keydown":"keyup",r,n,i)}return Z.add(r,{keydown:function(t){var n=h(t),i=ta&&ta.agent;n.length>1||i&&i.chrome&&(t.altKey||i.mac&&t.metaKey||!i.mac&&t.ctrlKey)?f(!0,n,a[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=h(t),i=t.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==e&&(n=r.toLowerCase()),f(!0,n,r,t),e=null}},keyup:function(t){var e=h(t);e in l&&f(!1,e,l[e],t)}}),Z.add(i,{blur:function(t){for(var e in l)f(!1,e,l[e],t)}}),{modifiers:c,isDown:function(t){return!!u[t]}}},Q=Y.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),tt=Y.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});l.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){l.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){ta=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,s=this.responds(t),o=!1,a=this;function u(t,e){var s=n,o=r?a._point:a._downPoint||s;if(r){if(a._moveCount>=0&&s.equals(o))return!1;if(o&&(null!=t||null!=e)){var u=s.subtract(o),l=u.getLength();if(l<(t||0))return!1;e&&(s=o.add(u.normalize(Math.min(l,e))))}a._moveCount++}return a._point=s,a._lastPoint=o||s,i.down&&(a._moveCount=-1,a._downPoint=s,a._downCount++),!0}function l(){s&&(o=a.emit(t,new tt(a,t,e))||o)}if(i.down)u(),l();else if(i.up)u(null,this._maxDistance),l();else if(s)for(;u(this._minDistance,this._maxDistance);)l();return o}});var te=s.extend(o,{_class:"Tween",statics:{easings:new s({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,n,i,r,s,o){this.object=e;var a=typeof s,u="function"===a;this.type=u?a:"string"===a?s:"linear",this.easing=u?s:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var l=n||i;this._keys=l?Object.keys(l):[],this._parsedKeys=this._parseKeys(this._keys),this._from=l&&this._getState(n),this._to=l&&this._getState(i),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},r=0,o=n&&n.length;r<o;r++){var a=n[r],u=i(this._from[a]),l=i(this._to[a]),c=u&&l&&u.__add&&l.__add?l.__subtract(u).__multiply(e).__add(u):(l-u)*e+u;this._setProperty(this._parsedKeys[a],c)}this.responds("update")&&this.emit("update",new s({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var s,o=e[i],a=this._parsedKeys[o],u=this._getProperty(a);if(t){var l=this._resolveValue(u,t[o]);this._setProperty(a,l),s=(s=this._getProperty(a))&&s.clone?s.clone():s,this._setProperty(a,u)}else s=u&&u.clone?u.clone():u;n[o]=s}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return ta.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],s=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=s.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),tn={request:function(t){var n=new e.XMLHttpRequest;return n.open((t.method||"get").toUpperCase(),t.url,s.pick(t.async,!0)),t.mimeType&&n.overrideMimeType(t.mimeType),n.onload=function(){var e=n.status;0===e||200===e?t.onLoad&&t.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var e=n.status,i='Could not load "'+t.url+'" (Status: '+e+")";if(t.onError)t.onError(i,e);else throw Error(i)},n.send(null)}},ti=s.exports.CanvasProvider={canvases:[],getCanvas:function(t,e,n){if(!i)return null;var s,o=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?s=this.canvases.pop():(s=r.createElement("canvas"),o=!1);var a=s.getContext("2d",n||{});if(!a)throw Error("Canvas "+s+" is unable to provide a 2D context.");return s.width===t&&s.height===e?o&&a.clearRect(0,0,t+1,e+1):(s.width=t,s.height=e),a.save(),s},getContext:function(t,e,n){var i=this.getCanvas(t,e,n);return i?i.getContext("2d",n||{}):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},tr=new function(){var t,e,n,i,r,o,a,u,l,c,h,f=Math.min,d=Math.max,p=Math.abs;function g(t,e,n){return .2989*t+.587*e+.114*n}function v(t,e,n,i){var r=i-g(t,e,n),i=g(l=t+r,c=e+r,h=n+r),s=f(l,c,h),o=d(l,c,h);if(s<0){var a=i-s;l=i+(l-i)*i/a,c=i+(c-i)*i/a,h=i+(h-i)*i/a}if(o>255){var u=255-i,p=o-i;l=i+(l-i)*u/p,c=i+(c-i)*u/p,h=i+(h-i)*u/p}}function m(t,e,n){return d(t,e,n)-f(t,e,n)}function _(t,e,n,i){var r,s=[t,e,n],o=d(t,e,n),a=f(t,e,n);r=0===f(a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2)?1===d(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*i/(s[o]-s[a]),s[o]=i):s[r]=s[o]=0,s[a]=0,l=s[0],c=s[1],h=s[2]}var y={multiply:function(){l=r*t/255,c=o*e/255,h=a*n/255},screen:function(){l=r+t-r*t/255,c=o+e-o*e/255,h=a+n-a*n/255},overlay:function(){l=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,c=o<128?2*o*e/255:255-2*(255-o)*(255-e)/255,h=a<128?2*a*n/255:255-2*(255-a)*(255-n)/255},"soft-light":function(){var i=t*r/255;l=i+r*(255-(255-r)*(255-t)/255-i)/255,c=(i=e*o/255)+o*(255-(255-o)*(255-e)/255-i)/255,h=(i=n*a/255)+a*(255-(255-a)*(255-n)/255-i)/255},"hard-light":function(){l=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,c=e<128?2*e*o/255:255-2*(255-e)*(255-o)/255,h=n<128?2*n*a/255:255-2*(255-n)*(255-a)/255},"color-dodge":function(){l=0===r?0:255===t?255:f(255,255*r/(255-t)),c=0===o?0:255===e?255:f(255,255*o/(255-e)),h=0===a?0:255===n?255:f(255,255*a/(255-n))},"color-burn":function(){l=255===r?255:0===t?0:d(0,255-(255-r)*255/t),c=255===o?255:0===e?0:d(0,255-(255-o)*255/e),h=255===a?255:0===n?0:d(0,255-(255-a)*255/n)},darken:function(){l=r<t?r:t,c=o<e?o:e,h=a<n?a:n},lighten:function(){l=r>t?r:t,c=o>e?o:e,h=a>n?a:n},difference:function(){(l=r-t)<0&&(l=-l),(c=o-e)<0&&(c=-c),(h=a-n)<0&&(h=-h)},exclusion:function(){l=r+t*(255-r-r)/255,c=o+e*(255-o-o)/255,h=a+n*(255-a-a)/255},hue:function(){_(t,e,n,m(r,o,a)),v(l,c,h,g(r,o,a))},saturation:function(){_(r,o,a,m(t,e,n)),v(l,c,h,g(r,o,a))},luminosity:function(){v(r,o,a,g(t,e,n))},color:function(){v(t,e,n,g(r,o,a))},add:function(){l=f(r+t,255),c=f(o+e,255),h=f(a+n,255)},subtract:function(){l=d(r-t,0),c=d(o-e,0),h=d(a-n,0)},average:function(){l=(r+t)/2,c=(o+e)/2,h=(a+n)/2},negation:function(){l=255-p(255-t-r),c=255-p(255-e-o),h=255-p(255-n-a)}},x=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),b=ti.getContext(1,1,{willReadFrequently:!0});b&&(s.each(y,function(t,e){var n="darken"===e,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}b.restore(),x[e]=i}),ti.release(b)),this.process=function(s,f,d,p,g){var v=f.canvas,m="normal"===s;if(m||x[s])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,m||(d.globalCompositeOperation=s),d.drawImage(v,g.x,g.y),d.restore();else{var _=y[s];if(!_)return;for(var b=d.getImageData(g.x,g.y,v.width,v.height),w=b.data,C=f.getImageData(0,0,v.width,v.height).data,S=0,k=w.length;S<k;S+=4){t=C[S],r=w[S],e=C[S+1],o=w[S+1],n=C[S+2],a=w[S+2],i=C[S+3],u=w[S+3],_();var T=i*p/255,M=1-T;w[S]=T*l+M*r,w[S+1]=T*c+M*o,w[S+2]=T*h+M*a,w[S+3]=i*p+M*u}d.putImageData(b,g.x,g.y)}}},ts=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function s(t,e,n){for(var r in e){var s=e[r],o=i[r];"number"==typeof s&&n&&(s=n.number(s)),o?t.setAttributeNS(o,r,s):t.setAttribute(r,s)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,i){return s(r.createElementNS(t,e),n,i)},get:function(t,e){var n=i[e],r=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===r?null:r},set:s}},to=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof L||t instanceof T||t instanceof B)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=s.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&s.each(i,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});new function(){function t(t,e,n){var i,o=new s,a=t.getTranslation();if(e&&(t.isInvertible()?(i=(t=t._shiftless())._inverseTransform(a),a=null):i=new p,o[n?"cx":"x"]=i.x,o[n?"cy":"y"]=i.y),!t.isIdentity()){var u=t.decompose();if(u){var l=[],c=u.rotation,h=u.scaling,d=u.skewing;a&&!a.isZero()&&l.push("translate("+r.point(a)+")"),c&&l.push("rotate("+r.number(c)+")"),f.isZero(h.x-1)&&f.isZero(h.y-1)||l.push("scale("+r.point(h)+")"),d.x&&l.push("skewX("+r.number(d.x)+")"),d.y&&l.push("skewY("+r.number(d.y)+")"),o.transform=l.join(" ")}else o.transform="matrix("+t.getValues().join(",")+")"}return o}function n(e,n){for(var i=t(e._matrix),s=e._children,o=ts.create("g",i,r),a=0,u=s.length;a<u;a++){var c=s[a],h=g(c,n);if(h){if(c.isClipMask()){var f=ts.create("clipPath");f.appendChild(h),l(c,f,"clip"),ts.set(o,{"clip-path":"url(#"+f.id+")"})}else o.appendChild(h)}}return o}function i(e){var n=e._type,i=e._radius,s=t(e._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var o=e._size,a=o.width,u=o.height;s.x-=a/2,s.y-=u/2,s.width=a,s.height=u,i.isZero()&&(i=null)}return i&&("circle"===n?s.r=i:(s.rx=i.width,s.ry=i.height)),ts.create(n,s,r)}var r,o,a={Group:n,Layer:n,Raster:function(e,n){var i=t(e._matrix,!0),s=e.getSize(),o=e.getImage();return i.x-=s.width/2,i.y-=s.height/2,i.width=s.width,i.height=s.height,i.href=!1==n.embedImages&&o&&o.src||e.toDataURL(),ts.create("image",i,r)},Path:function(e,n){var s=n.matchShapes;if(s){var o=e.toShape(!1);if(o)return i(o,n)}var a,u=e._segments,l=u.length,c=t(e._matrix);if(s&&l>=2&&!e.hasHandles()){if(l>2){a=e._closed?"polygon":"polyline";for(var h=[],f=0;f<l;f++)h.push(r.point(u[f]._point));c.points=h.join(" ")}else{a="line";var d=u[0]._point,p=u[1]._point;c.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}}else a="path",c.d=e.getPathData(null,n.precision);return ts.create(a,c,r)},Shape:i,CompoundPath:function(e,n){var i=t(e._matrix),s=e.getPathData(null,n.precision);return s&&(i.d=s),ts.create("path",i,r)},SymbolItem:function(e,n){var i=t(e._matrix,!0),s=e._definition,o=u(s,"symbol"),a=s._item,c=a.getStrokeBounds();return o||((o=ts.create("symbol",{viewBox:r.rectangle(c)})).appendChild(g(a,n)),l(s,o,"symbol")),i.href="#"+o.id,i.x+=c.x,i.y+=c.y,i.width=c.width,i.height=c.height,i.overflow="visible",ts.create("use",i,r)},PointText:function(e){var n=ts.create("text",t(e._matrix,!0),r);return n.textContent=e._content,n}};function u(t,e){return o||(o={ids:{},svgs:{}}),t&&o.svgs[e+"-"+(t._id||t.__id||(t.__id=d.get("svg")))]}function l(t,e,n){o||u();var i=o.ids[n]=(o.ids[n]||0)+1;e.id=n+"-"+i,o.svgs[n+"-"+(t._id||t.__id)]=e}function c(t,n){var i=t,r=null;if(o){for(var s in i="svg"===t.nodeName.toLowerCase()&&t,o.svgs)r||(i||(i=ts.create("svg")).appendChild(t),r=i.insertBefore(ts.create("defs"),i.firstChild)),r.appendChild(o.svgs[s]);o=null}return n.asString?new e.XMLSerializer().serializeToString(i):i}function g(t,e,n){var i,o,c,h,f=a[t._class],d=f&&f(t,e);if(d){var p=e.onExport;p&&(d=p(t,d,e)||d);var g=JSON.stringify(t._data);g&&"{}"!==g&&"null"!==g&&d.setAttribute("data-paper-data",g)}return d&&(i=d,o={},c=!n&&t.getParent(),h=[],null!=t._name&&(o.id=t._name),s.each(to,function(n){var i=n.get,a=n.type,f=t[i]();if(n.exportFilter?n.exportFilter(t,f):!1==e.reduceAttributes||!c||!s.equals(c[i](),f)){if("color"===a&&null!=f){var d=f.getAlpha();d<1&&(o[n.attribute+"-opacity"]=d)}"style"===a?h.push(n.attribute+": "+f):o[n.attribute]=null==f?"none":"color"===a?f.gradient?function(t){var e=u(t,"color");if(!e){var n,i=t.getGradient(),s=i._radial,o=t.getOrigin(),a=t.getDestination();if(s){n={cx:o.x,cy:o.y,r:o.getDistance(a)};var c=t.getHighlight();c&&(n.fx=c.x,n.fy=c.y)}else n={x1:o.x,y1:o.y,x2:a.x,y2:a.y};n.gradientUnits="userSpaceOnUse",e=ts.create((s?"radial":"linear")+"Gradient",n,r);for(var h=i._stops,f=0,d=h.length;f<d;f++){var p=h[f],g=p._color,v=g.getAlpha(),m=p._offset;n={offset:null==m?f/(d-1):m},g&&(n["stop-color"]=g.toCSS(!0)),v<1&&(n["stop-opacity"]=v),e.appendChild(ts.create("stop",n,r))}l(t,e,"color")}return"url(#"+e.id+")"}(f,t):f.toCSS(!0):"array"===a?f.join(","):"lookup"===a?n.toSVG[f]:f}}),h.length&&(o.style=h.join(";")),1===o.opacity&&delete o.opacity,t._visible||(o.visibility="hidden"),ts.set(i,o,r))}function v(t){return t||(t={}),r=new h(t.precision),t}C.inject({exportSVG:function(t){return c(g(this,t=v(t),!0),t)}}),w.inject({exportSVG:function(e){e=v(e);var n=this._children,i=this.getView(),o=s.pick(e.bounds,"view"),a=e.matrix||"view"===o&&i._matrix,u=a&&x.read([a]),l="view"===o?new _([0,0],i.getViewSize()):"content"===o?C._getBounds(n,u,{stroke:!0}).rect:_.read([o],0,{readNull:!0}),h={version:"1.1",xmlns:ts.svg,"xmlns:xlink":ts.xlink};l&&(h.width=l.width,h.height=l.height,(l.x||0===l.x||l.y||0===l.y)&&(h.viewBox=r.rectangle(l)));var f=ts.create("svg",h,r),d=f;u&&!u.isIdentity()&&(d=f.appendChild(ts.create("g",t(u),r)));for(var p=0,m=n.length;p<m;p++)d.appendChild(g(n[p],e,!0));return c(f,e)}})},new function(){var t,o={};function a(e,n,i,r,s,o){var a=ts.get(e,n)||o,u=null==a?r?null:i?"":0:i?a:parseFloat(a);return/%\s*$/.test(a)?u/100*(s?1:t[/x|^width/.test(n)?"width":"height"]):u}function u(t,e,n,i,r,s,o){return e=a(t,e||"x",!1,i,r,s),n=a(t,n||"y",!1,i,r,o),i&&(null==e||null==n)?null:new p(e,n)}function l(t,e,n,i,r){return e=a(t,e||"width",!1,i,r),n=a(t,n||"height",!1,i,r),i&&(null==e||null==n)?null:new v(e,n)}function c(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?A(t)||t:"lookup"===e?n[t]:t}function h(t,e,n,i){var r=t.childNodes,s="clippath"===e,o="defs"===e,a=new S,u=a._project,l=u._currentStyle,c=[];if(s||o||(a=P(a,t,i),u._currentStyle=a._style.clone()),i)for(var h=t.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)O(h[f],n,!1);for(var f=0,d=r.length;f<d;f++){var p,g=r[f];!(1===g.nodeType&&!/^defs$/i.test(g.nodeName)&&(p=O(g,n,!1)))||p instanceof I||c.push(p)}return a.addChildren(c),s&&(a=P(a.reduce(),t,i)),u._currentStyle=l,(s||o)&&(a.remove(),a=null),a}function f(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new p(parseFloat(n[r]),parseFloat(n[r+1])));var o=new z(i);return"polygon"===e&&o.closePath(),o}function d(t,e){var n,i=(a(t,"href",!0)||"").substring(1),r="radialgradient"===e;if(i)(n=o[i].getGradient())._radial^r&&((n=n.clone())._radial=r);else{for(var s=t.childNodes,l=[],c=0,h=s.length;c<h;c++){var f=s[c];1===f.nodeType&&l.push(P(new W,f))}n=new H(l,r)}var d,p,g,v="userSpaceOnUse"!==a(t,"gradientUnits",!0);return r?(p=(d=u(t,"cx","cy",!1,v,"50%","50%")).add(a(t,"r",!1,!1,v,"50%"),0),g=u(t,"fx","fy",!0,v)):(d=u(t,"x1","y1",!1,v,"0%","0%"),p=u(t,"x2","y2",!1,v,"100%","0%")),P(new F(n,d,p,g),t)._scaleToBounds=v,null}var g={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,o=r.length;s<o;s++){var a=r[s];if(1===a.nodeType)return O(a,n,i)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(t){return L.create(t.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(t){var e=new M(a(t,"href",!0));return e.on("load",function(){var e=l(t);this.setSize(e);var n=u(t).add(e.divide(2));this._matrix.append(new x().translate(n))}),e},symbol:function(t,e,n,i){return new I(h(t,e,n,i),!0)},defs:h,use:function(t){var e=o[(a(t,"href",!0)||"").substring(1)],n=u(t);return e?e instanceof I?e.place(n):e.clone().translate(n):null},circle:function(t){return new T.Circle(u(t,"cx","cy"),a(t,"r"))},ellipse:function(t){return new T.Ellipse({center:u(t,"cx","cy"),radius:l(t,"rx","ry")})},rect:function(t){return new T.Rectangle(new _(u(t),l(t)),l(t,"rx","ry"))},line:function(t){return new z.Line(u(t,"x1","y1"),u(t,"x2","y2"))},text:function(t){var e=new q(u(t).add(u(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:h};function m(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new x,o=0,a=r.length;o<a;o++){var u=r[o];if(!u)break;for(var l=u.split(/\(\s*/),c=l[0].trim(),h=l[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":s.append(new x(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":s.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":s.translate(h[0],h[1]||0);break;case"scale":s.scale(h);break;case"skewX":s.skew(h[0],0);break;case"skewY":s.skew(0,h[0])}}t.transform(s)}}function y(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var b=s.set(s.each(to,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](c(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform(new x().translate(r.getPoint()).scale(r.getSize()))}}}},{}),{id:function(t,e){o[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=A(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof S))return new S(n,t);t.insertChild(0,n)}},gradientTransform:m,transform:m,"fill-opacity":y,"stroke-opacity":y,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,r){var s,o,a=new _(c(e,"array")),u=l(i,null,null,!0);if(t instanceof S){var h=u?u.divide(a.getSize()):1,o=new x().scale(h).translate(a.getPoint().negate());s=t}else t instanceof I&&(u&&a.setSize(u),s=t._item);if(s){if("visible"!==k(i,"overflow",r)){var f=new T.Rectangle(a);f.setClipMask(!0),s.addChild(f)}o&&s.transform(o)}}});function k(t,e,i){var r=t.attributes[e],o=r&&r.value;if(!o&&t.style){var a=s.camelize(e);(o=t.style[a])||i.node[a]===i.parent[a]||(o=i.node[a])}return o?"none"===o?null:o:n}function P(t,e,i){var r=e.parentNode,o={node:U.getStyles(e)||{},parent:!i&&!/^defs$/i.test(r.tagName)&&U.getStyles(r)||{}};return s.each(b,function(i,r){var s=k(e,r,o);t=s!==n&&i(t,s,r,e,o)||t}),t}function A(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],r=n&&o[i?n.replace(i.location.href.split("#")[0]+"#",""):n];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function O(e,n,i){var a,u,c,h=e.nodeName.toLowerCase(),f="#document"!==h,d=r.body;i&&f&&(t=ta.getView().getSize(),t=l(e,null,null,!0)||t,a=ts.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),u=e.parentNode,c=e.nextSibling,a.appendChild(e),d.appendChild(a));var p=ta.settings,v=p.applyMatrix,m=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var _=g[h],y=_&&_(e,h,n,i)||null;if(p.insertItems=m,p.applyMatrix=v,y){!f||y instanceof S||(y=P(y,e,i));var x=n.onImport,b=f&&e.getAttribute("data-paper-data");x&&(y=x(e,y,n)||y),n.expandShapes&&y instanceof T&&(y.remove(),y=y.toPath()),b&&(y._data=JSON.parse(b))}return a&&(d.removeChild(a),u&&(c?u.insertBefore(e,c):u.appendChild(e))),i&&(o={},y&&s.pick(n.applyMatrix,v)&&y.matrix.apply(!0,!0)),y}function N(t,i,s){if(!t)return null;i="function"==typeof i?{onLoad:i}:i||{};var o=ta,a=null;function u(r){try{var u="object"==typeof r?r:new e.DOMParser().parseFromString(r.trim(),"image/svg+xml");if(!u.nodeName)throw u=null,Error("Unsupported SVG source: "+t);ta=o,a=O(u,i,!0),i&&!1===i.insert||s._insertItem(n,a);var c=i.onLoad;c&&c(a,r)}catch(t){l(t)}}function l(t,e){var n=i.onError;if(n)n(t,e);else throw Error(t)}if("string"!=typeof t||/^[\s\S]*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){u(c.result)},c.onerror=function(){l(c.error)},c.readAsText(t)}u(t)}else{var h=r.getElementById(t);h?u(h):tn.request({url:t,async:!0,onLoad:u,onError:l})}return a}C.inject({importSVG:function(t,e){return N(t,e,this)}}),w.inject({importSVG:function(t,e){return this.activate(),N(t,e,this)}})};var ta=new(u.inject(s.exports,{Base:s,Numerical:f,Key:K,DomEvent:Z,DomElement:U,document:r,window:i,Symbol:I,PlacedSymbol:P}));return ta.agent.node&&a("foUwZ")(ta),"function"==typeof define&&define.amd?define("paper",ta):t&&(t.exports=ta),ta}).call(this,"object"==typeof self?self:null)}),u("foUwZ",function(t,e){});var l=a("iUSsr"),c=window.$=window.jQuery=/*@__PURE__*/t(l);n=function(t){if(t.support.htmlMenuitem="HTMLMenuItemElement"in window,t.support.htmlCommand="HTMLCommandElement"in window,t.support.eventSelectstart="onselectstart"in document.documentElement,!t.ui||!t.widget){var e;t.cleanData=(e=t.cleanData,function(n){var i,r,s;for(s=0;null!=n[s];s++){r=n[s];try{(i=t._data(r,"events"))&&i.remove&&t(r).triggerHandler("remove")}catch(t){}}e(n)})}var n=null,i=!1,r=t(window),s=0,o={},a={},u={},l={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var n=this.offset();n.top+=this.outerHeight(),n.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(n)}},position:function(t,e,n){if(e||n){if("maintain"===e&&"maintain"===n)i=t.$menu.position();else{var i,s=t.$menu.offsetParent().offset();i={top:n-s.top,left:e-s.left}}}else{t.determinePosition.call(this,t.$menu);return}var o=r.scrollTop()+r.height(),a=r.scrollLeft()+r.width(),u=t.$menu.outerHeight(),l=t.$menu.outerWidth();i.top+u>o&&(i.top-=u),i.top<0&&(i.top=0),i.left+l>a&&(i.left-=l),i.left<0&&(i.left=0),t.$menu.css(i)},positionSubmenu:function(e){if(void 0!==e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var n={top:-9,left:this.outerWidth()-5};e.css(n)}}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{preShow:t.noop,show:t.noop,hide:t.noop,activated:t.noop},callback:null,items:{}},c={timer:null,pageX:null,pageY:null},h=function(t){for(var e=0,n=t;e=Math.max(e,parseInt(n.css("z-index"),10)||0),!(!(n=n.parent())||!n.length||"html body".indexOf(n.prop("nodeName").toLowerCase())>-1););return e},f={abortevent:function(t){t.preventDefault(),t.stopImmediatePropagation()},contextmenu:function(e){var i=t(this);if(!1!==e.data.events.preShow(i,e)&&("right"===e.data.trigger&&(e.preventDefault(),e.stopImmediatePropagation()),("right"===e.data.trigger||"demand"===e.data.trigger||!e.originalEvent)&&(void 0===e.mouseButton||!e.data||"left"===e.data.trigger&&0===e.mouseButton||"right"===e.data.trigger&&2===e.mouseButton)&&!i.hasClass("context-menu-active")&&!i.hasClass("context-menu-disabled"))){if(n=i,e.data.build){var r=e.data.build(n,e);if(!1===r)return;if(e.data=t.extend(!0,{},l,e.data,r||{}),!e.data.items||t.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),Error("No Items specified");e.data.$trigger=n,d.create(e.data)}d.show.call(i,e.data,e.pageX,e.pageY)}},click:function(e){e.preventDefault(),e.stopImmediatePropagation(),t(this).trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))},mousedown:function(e){var i=t(this);n&&n.length&&!n.is(i)&&n.data("contextMenu").$menu.trigger("contextmenu:hide"),2===e.button&&(n=i.data("contextMenuActive",!0))},mouseup:function(e){var i=t(this);i.data("contextMenuActive")&&n&&n.length&&n.is(i)&&!i.hasClass("context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),n=i,i.trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))),i.removeData("contextMenuActive")},mouseenter:function(e){var i=t(this),r=t(e.relatedTarget),s=t(document);!r.is(".context-menu-list")&&!r.closest(".context-menu-list").length&&(n&&n.length||(c.pageX=e.pageX,c.pageY=e.pageY,c.data=e.data,s.on("mousemove.contextMenuShow",f.mousemove),c.timer=setTimeout(function(){c.timer=null,s.off("mousemove.contextMenuShow"),n=i,i.trigger(t.Event("contextmenu",{data:c.data,pageX:c.pageX,pageY:c.pageY}))},e.data.delay)))},mousemove:function(t){c.pageX=t.pageX,c.pageY=t.pageY},mouseleave:function(e){var n=t(e.relatedTarget);if(!n.is(".context-menu-list")&&!n.closest(".context-menu-list").length){try{clearTimeout(c.timer)}catch(t){}c.timer=null}},layerClick:function(e){var n,i,s=t(this).data("contextMenuRoot"),o=e.button,a=e.pageX,u=e.pageY,l=void 0===a;e.preventDefault(),setTimeout(function(){if(l){null!=s&&null!==s.$menu&&void 0!==s.$menu&&s.$menu.trigger("contextmenu:hide");return}var c,h="left"===s.trigger&&0===o||"right"===s.trigger&&2===o;if(document.elementFromPoint&&s.$layer){if(s.$layer.hide(),null!==(n=document.elementFromPoint(a-r.scrollLeft(),u-r.scrollTop()))&&n.isContentEditable){var f=document.createRange(),d=window.getSelection();f.selectNode(n),f.collapse(!0),d.removeAllRanges(),d.addRange(f)}t(n).trigger(e),s.$layer.show()}if(s.hideOnSecondTrigger&&h&&null!==s.$menu&&void 0!==s.$menu){s.$menu.trigger("contextmenu:hide");return}if(s.reposition&&h){if(document.elementFromPoint){if(s.$trigger.is(n)){s.position.call(s.$trigger,s,a,u);return}}else if(i=s.$trigger.offset(),c=t(window),i.top+=c.scrollTop(),i.top<=e.pageY&&(i.left+=c.scrollLeft(),i.left<=e.pageX&&(i.bottom=i.top+s.$trigger.outerHeight(),i.bottom>=e.pageY&&(i.right=i.left+s.$trigger.outerWidth(),i.right>=e.pageX)))){s.position.call(s.$trigger,s,a,u);return}}n&&h&&s.$trigger.one("contextmenu:hidden",function(){t(n).contextMenu({x:a,y:u,button:o})}),null!=s&&null!==s.$menu&&void 0!==s.$menu&&s.$menu.trigger("contextmenu:hide")},50)},keyStop:function(t,e){e.isInput||t.preventDefault(),t.stopPropagation()},key:function(t){var e={};n&&(e=n.data("contextMenu")||{}),void 0===e.zIndex&&(e.zIndex=0);var i=0,r=function(t){""!==t.style.zIndex?i=t.style.zIndex:null!==t.offsetParent&&void 0!==t.offsetParent?r(t.offsetParent):null!==t.parentElement&&void 0!==t.parentElement&&r(t.parentElement)};if(r(t.target),!(e.$menu&&parseInt(i,10)>parseInt(e.$menu.css("zIndex"),10))){switch(t.keyCode){case 9:case 38:if(f.keyStop(t,e),e.isInput){if(9===t.keyCode&&t.shiftKey){t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("prevcommand");return}if(38===t.keyCode&&"checkbox"===e.$selected.find("input, textarea, select").prop("type")){t.preventDefault();return}}else if(9!==t.keyCode||t.shiftKey){null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("prevcommand");return}break;case 40:if(f.keyStop(t,e),e.isInput){if(9===t.keyCode){t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("nextcommand");return}if(40===t.keyCode&&"checkbox"===e.$selected.find("input, textarea, select").prop("type")){t.preventDefault();return}}else{null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("nextcommand");return}break;case 37:if(f.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){var s=e.$selected.parent().parent();e.$selected.trigger("contextmenu:blur"),e.$selected=s;return}break;case 39:if(f.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;var o=e.$selected.data("contextMenu")||{};if(o.$menu&&e.$selected.hasClass("context-menu-submenu")){e.$selected=null,o.$selected=null,o.$menu.trigger("nextcommand");return}break;case 35:case 36:if(e.$selected&&e.$selected.find("input, textarea, select").length)return;(e.$selected&&e.$selected.parent()||e.$menu).children(":not(."+e.classNames.disabled+", ."+e.classNames.notSelectable+")")[36===t.keyCode?"first":"last"]().trigger("contextmenu:focus"),t.preventDefault();return;case 13:if(f.keyStop(t,e),e.isInput){if(e.$selected&&!e.$selected.is("textarea, select")){t.preventDefault();return}break}void 0!==e.$selected&&null!==e.$selected&&e.$selected.trigger("mouseup");return;case 32:case 33:case 34:f.keyStop(t,e);return;case 27:f.keyStop(t,e),null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("contextmenu:hide");return;default:var a=String.fromCharCode(t.keyCode).toUpperCase();if(e.accesskeys&&e.accesskeys[a]){e.accesskeys[a].$node.trigger(e.accesskeys[a].$menu?"contextmenu:focus":"mouseup");return}}t.stopPropagation(),void 0!==e.$selected&&null!==e.$selected&&e.$selected.trigger(t)}},prevItem:function(e){e.stopPropagation();var n=t(this).data("contextMenu")||{},i=t(this).data("contextMenuRoot")||{};if(n.$selected){var r=n.$selected;(n=n.$selected.parent().data("contextMenu")||{}).$selected=r}for(var s=n.$menu.children(),o=n.$selected&&n.$selected.prev().length?n.$selected.prev():s.last(),a=o;o.hasClass(i.classNames.disabled)||o.hasClass(i.classNames.notSelectable)||o.is(":hidden");)if((o=o.prev().length?o.prev():s.last()).is(a))return;n.$selected&&f.itemMouseleave.call(n.$selected.get(0),e),f.itemMouseenter.call(o.get(0),e);var u=o.find("input, textarea, select");u.length&&u.focus()},nextItem:function(e){e.stopPropagation();var n=t(this).data("contextMenu")||{},i=t(this).data("contextMenuRoot")||{};if(n.$selected){var r=n.$selected;(n=n.$selected.parent().data("contextMenu")||{}).$selected=r}for(var s=n.$menu.children(),o=n.$selected&&n.$selected.next().length?n.$selected.next():s.first(),a=o;o.hasClass(i.classNames.disabled)||o.hasClass(i.classNames.notSelectable)||o.is(":hidden");)if((o=o.next().length?o.next():s.first()).is(a))return;n.$selected&&f.itemMouseleave.call(n.$selected.get(0),e),f.itemMouseenter.call(o.get(0),e);var u=o.find("input, textarea, select");u.length&&u.focus()},focusInput:function(){var e=t(this).closest(".context-menu-item"),n=e.data(),i=n.contextMenu,r=n.contextMenuRoot;r.$selected=i.$selected=e,r.isInput=i.isInput=!0},blurInput:function(){var e=t(this).closest(".context-menu-item").data(),n=e.contextMenu;e.contextMenuRoot.isInput=n.isInput=!1},menuMouseenter:function(){t(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(e){var n=t(this).data().contextMenuRoot;n.$layer&&n.$layer.is(e.relatedTarget)&&(n.hovering=!1)},itemMouseenter:function(e){var n=t(this),i=n.data(),r=i.contextMenu,s=i.contextMenuRoot;if(s.hovering=!0,e&&s.$layer&&s.$layer.is(e.relatedTarget)&&(e.preventDefault(),e.stopImmediatePropagation()),(r.$menu?r:s).$menu.children("."+s.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"),n.hasClass(s.classNames.disabled)||n.hasClass(s.classNames.notSelectable)){r.$selected=null;return}n.trigger("contextmenu:focus")},itemMouseleave:function(e){var n=t(this),i=n.data(),r=i.contextMenu,s=i.contextMenuRoot;if(s!==r&&s.$layer&&s.$layer.is(e.relatedTarget)){void 0!==s.$selected&&null!==s.$selected&&s.$selected.trigger("contextmenu:blur"),e.preventDefault(),e.stopImmediatePropagation(),s.$selected=r.$selected=r.$node;return}r&&r.$menu&&r.$menu.hasClass("context-menu-visible")||n.trigger("contextmenu:blur")},itemClick:function(e){var n,i=t(this),r=i.data(),s=r.contextMenu,o=r.contextMenuRoot,a=r.contextMenuKey;if(!(!s.items[a]||i.is("."+o.classNames.disabled+", .context-menu-separator, ."+o.classNames.notSelectable)||i.is(".context-menu-submenu")&&!1===o.selectableSubMenu)){if(e.preventDefault(),e.stopImmediatePropagation(),t.isFunction(s.callbacks[a])&&Object.prototype.hasOwnProperty.call(s.callbacks,a))n=s.callbacks[a];else{if(!t.isFunction(o.callback))return;n=o.callback}!1!==n.call(o.$trigger,a,o,e)?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&d.update.call(o.$trigger,o)}},inputClick:function(t){t.stopImmediatePropagation()},hideMenu:function(e,n){var i=t(this).data("contextMenuRoot");d.hide.call(i.$trigger,i,n&&n.force)},focusItem:function(e){e.stopPropagation();var n=t(this),i=n.data(),r=i.contextMenu,s=i.contextMenuRoot;!(n.hasClass(s.classNames.disabled)||n.hasClass(s.classNames.notSelectable))&&(n.addClass([s.classNames.hover,s.classNames.visible].join(" ")).parent().find(".context-menu-item").not(n).removeClass(s.classNames.visible).filter("."+s.classNames.hover).trigger("contextmenu:blur"),r.$selected=s.$selected=n,r&&r.$node&&r.$node.hasClass("context-menu-submenu")&&r.$node.addClass(s.classNames.hover),r.$node&&s.positionSubmenu.call(r.$node,r.$menu))},blurItem:function(e){e.stopPropagation();var n=t(this),i=n.data(),r=i.contextMenu,s=i.contextMenuRoot;r.autoHide&&n.removeClass(s.classNames.visible),n.removeClass(s.classNames.hover),r.$selected=null}},d={show:function(e,i,r){var s=t(this),o={};if(t("#context-menu-layer").trigger("mousedown"),e.$trigger=s,!1===e.events.show.call(s,e)||!1===d.update.call(s,e)){n=null;return}if(e.position.call(s,e,i,r),e.zIndex){var a=e.zIndex;"function"==typeof e.zIndex&&(a=e.zIndex.call(s,e)),o.zIndex=h(s)+a}d.layer.call(e.$menu,e,o.zIndex),e.$menu.find("ul").css("zIndex",o.zIndex+1),e.$menu.css(o)[e.animation.show](e.animation.duration,function(){s.trigger("contextmenu:visible"),d.activated(e),e.events.activated(e)}),s.data("contextMenu",e).addClass("context-menu-active"),t(document).off("keydown.contextMenu").on("keydown.contextMenu",f.key),e.autoHide&&t(document).on("mousemove.contextMenuAutoHide",function(t){var n=s.offset();n.right=n.left+s.outerWidth(),n.bottom=n.top+s.outerHeight(),!e.$layer||e.hovering||t.pageX>=n.left&&t.pageX<=n.right&&t.pageY>=n.top&&t.pageY<=n.bottom||setTimeout(function(){e.hovering||null===e.$menu||void 0===e.$menu||e.$menu.trigger("contextmenu:hide")},50)})},hide:function(e,i){var r,s=t(this);if(e||(e=s.data("contextMenu")||{}),i||!e.events||!1!==e.events.hide.call(s,e)){if(s.removeData("contextMenu").removeClass("context-menu-active"),e.$layer){setTimeout((r=e.$layer,function(){r.remove()}),10);try{delete e.$layer}catch(t){e.$layer=null}}n=null,e.$menu.find("."+e.classNames.hover).trigger("contextmenu:blur"),e.$selected=null,e.$menu.find("."+e.classNames.visible).removeClass(e.classNames.visible),t(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),e.$menu&&e.$menu[e.animation.hide](e.animation.duration,function(){e.build&&(e.$menu.remove(),t.each(e,function(t){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:e[t]=void 0;try{delete e[t]}catch(t){}return!0}})),setTimeout(function(){s.trigger("contextmenu:hidden")},10)})}},create:function(e,n){function i(e){var n=t("<span></span>");if(e._accesskey)e._beforeAccesskey&&n.append(document.createTextNode(e._beforeAccesskey)),t("<span></span>").addClass("context-menu-accesskey").text(e._accesskey).appendTo(n),e._afterAccesskey&&n.append(document.createTextNode(e._afterAccesskey));else if(e.isHtmlName){if(void 0!==e.accesskey)throw Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");n.html(e.name)}else n.text(e.name);return n}void 0===n&&(n=e),e.$menu=t('<ul class="context-menu-list"></ul>').addClass(e.className||"").data({contextMenu:e,contextMenuRoot:n}),e.dataAttr&&t.each(e.dataAttr,function(t,n){e.$menu.attr("data-"+e.key,n)}),t.each(["callbacks","commands","inputs"],function(t,i){e[i]={},n[i]||(n[i]={})}),n.accesskeys||(n.accesskeys={}),t.each(e.items,function(r,s){var o=t('<li class="context-menu-item"></li>').addClass(s.className||""),a=null,l=null;if(o.on("click",t.noop),("string"==typeof s||"cm_separator"===s.type)&&(s={type:"cm_seperator"}),s.$node=o.data({contextMenu:e,contextMenuRoot:n,contextMenuKey:r}),void 0!==s.accesskey){for(var c,h=function(t){for(var e,n=t.split(/\s+/),i=[],r=0;e=n[r];r++)i.push(e=e.charAt(0).toUpperCase());return i}(s.accesskey),p=0;c=h[p];p++)if(!n.accesskeys[c]){n.accesskeys[c]=s;var g=s.name.match(RegExp("^(.*?)("+c+")(.*)$","i"));g&&(s._beforeAccesskey=g[1],s._accesskey=g[2],s._afterAccesskey=g[3]);break}}if(s.type&&u[s.type])u[s.type].call(o,s,e,n),t.each([e,n],function(n,i){i.commands[r]=s,t.isFunction(s.callback)&&(void 0===i.callbacks[r]||void 0===e.type)&&(i.callbacks[r]=s.callback)});else{switch("cm_seperator"===s.type?o.addClass("context-menu-separator "+n.classNames.notSelectable):"html"===s.type?o.addClass("context-menu-html "+n.classNames.notSelectable):"sub"!==s.type&&s.type?(a=t("<label></label>").appendTo(o),i(s).appendTo(a),o.addClass("context-menu-input"),e.hasTypes=!0,t.each([e,n],function(t,e){e.commands[r]=s,e.inputs[r]=s})):s.items&&(s.type="sub"),s.type){case"cm_seperator":break;case"text":l=t('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+r).val(s.value||"").appendTo(a);break;case"textarea":l=t('<textarea name=""></textarea>').attr("name","context-menu-input-"+r).val(s.value||"").appendTo(a),s.height&&l.height(s.height);break;case"checkbox":l=t('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+r).val(s.value||"").prop("checked",!!s.selected).prependTo(a);break;case"radio":l=t('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+s.radio).val(s.value||"").prop("checked",!!s.selected).prependTo(a);break;case"select":l=t('<select name=""></select>').attr("name","context-menu-input-"+r).appendTo(a),s.options&&(t.each(s.options,function(e,n){t("<option></option>").val(e).text(n).appendTo(l)}),l.val(s.selected));break;case"sub":i(s).appendTo(o),s.appendTo=s.$node,o.data("contextMenu",s).addClass("context-menu-submenu"),s.callback=null,"function"==typeof s.items.then?d.processPromises(s,n,s.items):d.create(s,n);break;case"html":t(s.html).appendTo(o);break;default:t.each([e,n],function(n,i){i.commands[r]=s,t.isFunction(s.callback)&&(void 0===i.callbacks[r]||void 0===e.type)&&(i.callbacks[r]=s.callback)}),i(s).appendTo(o)}s.type&&"sub"!==s.type&&"html"!==s.type&&"cm_seperator"!==s.type&&(l.on("focus",f.focusInput).on("blur",f.blurInput),s.events&&l.on(s.events,e)),s.icon&&(t.isFunction(s.icon)?s._icon=s.icon.call(this,this,o,r,s):"string"==typeof s.icon&&("fab "===s.icon.substring(0,4)||"fas "===s.icon.substring(0,4)||"fad "===s.icon.substring(0,4)||"far "===s.icon.substring(0,4)||"fal "===s.icon.substring(0,4))?(o.addClass(n.classNames.icon+" "+n.classNames.icon+"--fa5"),s._icon=t('<i class="'+s.icon+'"></i>')):"string"==typeof s.icon&&"fa-"===s.icon.substring(0,3)?s._icon=n.classNames.icon+" "+n.classNames.icon+"--fa fa "+s.icon:s._icon=n.classNames.icon+" "+n.classNames.icon+"-"+s.icon,"string"==typeof s._icon?o.addClass(s._icon):o.prepend(s._icon))}s.$input=l,s.$label=a,o.appendTo(e.$menu),!e.hasTypes&&t.support.eventSelectstart&&o.on("selectstart.disableTextSelect",f.abortevent)}),e.$node||e.$menu.css("display","none").addClass("context-menu-root"),e.$menu.appendTo(e.appendTo||document.body)},resize:function(e,n){var i;e.css({position:"absolute",display:"block"}),e.data("width",(i=e.get(0)).getBoundingClientRect?Math.ceil(i.getBoundingClientRect().width):e.outerWidth()+1),e.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),e.find("> li > ul").each(function(){d.resize(t(this),!0)}),n||e.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return t(this).data("width")})},update:function(e,n){var i=this;void 0===n&&(n=e,d.resize(e.$menu));var r=!1;return e.$menu.children().each(function(){var s,o=t(this),a=o.data("contextMenuKey"),u=e.items[a],l=t.isFunction(u.disabled)&&u.disabled.call(i,a,n)||!0===u.disabled;if((s=t.isFunction(u.visible)?u.visible.call(i,a,n):void 0===u.visible||!0===u.visible)&&(r=!0),o[s?"show":"hide"](),o[l?"addClass":"removeClass"](n.classNames.disabled),t.isFunction(u.icon)){o.removeClass(u._icon);var c=u.icon.call(this,i,o,a,u);"string"==typeof c?o.addClass(c):o.prepend(c)}if(u.type)switch(o.find("input, select, textarea").prop("disabled",l),u.type){case"text":case"textarea":u.$input.val(u.value||"");break;case"checkbox":case"radio":u.$input.val(u.value||"").prop("checked",!!u.selected);break;case"select":u.$input.val((0===u.selected?"0":u.selected)||"")}u.$menu&&d.update.call(i,u,n)&&(r=!0)}),r},layer:function(e,n){var i=e.$layer=t('<div id="context-menu-layer"></div>').css({height:r.height(),width:r.width(),display:"block",position:"fixed","z-index":n-1,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",e).appendTo(document.body).on("contextmenu",f.abortevent).on("mousedown",f.layerClick);return void 0===document.body.style.maxWidth&&i.css({position:"absolute",height:t(document).height()}),i},processPromises:function(t,e,n){function i(t,e,n){void 0===n?(n={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof n&&(n={error:{name:n}}),r(t,e,n)}function r(t,e,n){void 0!==e.$menu&&e.$menu.is(":visible")&&(t.$node.removeClass(e.classNames.iconLoadingClass),t.items=n,d.create(t,e,!0),d.update(t,e),e.positionSubmenu.call(t.$node,t.$menu))}t.$node.addClass(e.classNames.iconLoadingClass),n.then((function(t,e,n){void 0===n&&i(void 0),r(t,e,n)}).bind(this,t,e),i.bind(this,t,e))},activated:function(e){var n=e.$menu,i=n.offset(),r=t(window).height(),s=t(window).scrollTop(),o=n.height();o>r?n.css({height:r+"px","overflow-x":"hidden","overflow-y":"auto",top:s+"px"}):(i.top<s||i.top+o>s+r)&&n.css({top:s+"px"})}};function p(e){return e.id&&t('label[for="'+e.id+'"]').val()||e.name}t.fn.contextMenu=function(e){var n=this;if(this.length>0){if(void 0===e)this.first().trigger("contextmenu");else if(void 0!==e.x&&void 0!==e.y)this.first().trigger(t.Event("contextmenu",{pageX:e.x,pageY:e.y,mouseButton:e.button}));else if("hide"===e){var i=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;i&&i.trigger("contextmenu:hide")}else"destroy"===e?t.contextMenu("destroy",{context:this}):t.isPlainObject(e)?(e.context=this,t.contextMenu("create",e)):e?this.removeClass("context-menu-disabled"):e||this.addClass("context-menu-disabled")}else t.each(a,function(){this.selector===n.selector&&(e.data=this,t.extend(e.data,{trigger:"demand"}))}),f.contextmenu.call(e.target,e);return this},t.contextMenu=function(e,n){"string"!=typeof e&&(n=e,e="create"),"string"==typeof n?n={selector:n}:void 0===n&&(n={});var r,u=t.extend(!0,{},l,n||{}),c=t(document),h=c,p=!1;switch(u.context&&u.context.length?(h=t(u.context).first(),u.context=h.get(0),p=!t(u.context).is(document)):u.context=document,e){case"update":if(p)d.update(h);else for(var g in a)a.hasOwnProperty(g)&&d.update(a[g]);break;case"create":if(!u.selector)throw Error("No selector specified");if(u.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+u.selector+'" as it contains a reserved className');if(!u.build&&(!u.items||t.isEmptyObject(u.items)))throw Error("No Items specified");if(s++,u.ns=".contextMenu"+s,p||(o[u.selector]=u.ns),a[u.ns]=u,u.trigger||(u.trigger="right"),!i){var v="click"===u.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",m={"contextmenu:focus.contextMenu":f.focusItem,"contextmenu:blur.contextMenu":f.blurItem,"contextmenu.contextMenu":f.abortevent,"mouseenter.contextMenu":f.itemMouseenter,"mouseleave.contextMenu":f.itemMouseleave};m[v]=f.itemClick,c.on({"contextmenu:hide.contextMenu":f.hideMenu,"prevcommand.contextMenu":f.prevItem,"nextcommand.contextMenu":f.nextItem,"contextmenu.contextMenu":f.abortevent,"mouseenter.contextMenu":f.menuMouseenter,"mouseleave.contextMenu":f.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",f.inputClick).on(m,".context-menu-item"),i=!0}switch(h.on("contextmenu"+u.ns,u.selector,u,f.contextmenu),p&&h.on("remove"+u.ns,function(){t(this).contextMenu("destroy")}),u.trigger){case"hover":h.on("mouseenter"+u.ns,u.selector,u,f.mouseenter).on("mouseleave"+u.ns,u.selector,u,f.mouseleave);break;case"left":h.on("click"+u.ns,u.selector,u,f.click);break;case"touchstart":h.on("touchstart"+u.ns,u.selector,u,f.click)}u.build||d.create(u);break;case"destroy":if(p){var _=u.context;t.each(a,function(e,n){if(!n||!t(_).is(n.selector))return!0;(r=t(".context-menu-list").filter(":visible")).length&&r.data().contextMenuRoot.$trigger.is(t(n.context).find(n.selector))&&r.trigger("contextmenu:hide",{force:!0});try{a[n.ns].$menu&&a[n.ns].$menu.remove(),delete a[n.ns]}catch(t){a[n.ns]=null}return t(n.context).off(n.ns),!0})}else if(u.selector){if(o[u.selector]){(r=t(".context-menu-list").filter(":visible")).length&&r.data().contextMenuRoot.$trigger.is(u.selector)&&r.trigger("contextmenu:hide",{force:!0});try{a[o[u.selector]].$menu&&a[o[u.selector]].$menu.remove(),delete a[o[u.selector]]}catch(t){a[o[u.selector]]=null}c.off(o[u.selector])}}else c.off(".contextMenu .contextMenuAutoHide"),t.each(a,function(e,n){t(n.context).off(n.ns)}),o={},a={},s=0,i=!1,t("#context-menu-layer, .context-menu-list").remove();break;case"html5":(t.support.htmlCommand||t.support.htmlMenuitem)&&("boolean"!=typeof n||!n)||t('menu[type="context"]').each(function(){this.id&&t.contextMenu({selector:"[contextmenu="+this.id+"]",items:t.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+e+'"')}return this},t.contextMenu.setInputValues=function(e,n){void 0===n&&(n={}),t.each(e.inputs,function(t,e){switch(e.type){case"text":case"textarea":e.value=n[t]||"";break;case"checkbox":e.selected=!!n[t];break;case"radio":e.selected=(n[e.radio]||"")===e.value;break;case"select":e.selected=n[t]||""}})},t.contextMenu.getInputValues=function(e,n){return void 0===n&&(n={}),t.each(e.inputs,function(t,e){switch(e.type){case"text":case"textarea":case"select":n[t]=e.$input.val();break;case"checkbox":n[t]=e.$input.prop("checked");break;case"radio":e.$input.prop("checked")&&(n[e.radio]=e.value)}}),n},t.contextMenu.fromMenu=function(e){var n=t(e),i={};return function e(n,i,r){return r||(r=0),i.each(function(){var i,s,o=t(this),a=this,u=this.nodeName.toLowerCase();switch("label"===u&&o.find("input, textarea, select").length&&(i=o.text(),u=(a=(o=o.children().first()).get(0)).nodeName.toLowerCase()),u){case"menu":r=e((s={name:o.attr("label"),items:{}}).items,o.children(),r);break;case"a":case"button":s={name:o.text(),disabled:!!o.attr("disabled"),callback:function(){o.get(0).click()}};break;case"menuitem":case"command":switch(o.attr("type")){case void 0:case"command":case"menuitem":s={name:o.attr("label"),disabled:!!o.attr("disabled"),icon:o.attr("icon"),callback:function(){o.get(0).click()}};break;case"checkbox":s={type:"checkbox",disabled:!!o.attr("disabled"),name:o.attr("label"),selected:!!o.attr("checked")};break;case"radio":s={type:"radio",disabled:!!o.attr("disabled"),name:o.attr("label"),radio:o.attr("radiogroup"),value:o.attr("id"),selected:!!o.attr("checked")};break;default:s=void 0}break;case"hr":s="-------";break;case"input":switch(o.attr("type")){case"text":s={type:"text",name:i||p(a),disabled:!!o.attr("disabled"),value:o.val()};break;case"checkbox":s={type:"checkbox",name:i||p(a),disabled:!!o.attr("disabled"),selected:!!o.attr("checked")};break;case"radio":s={type:"radio",name:i||p(a),disabled:!!o.attr("disabled"),radio:!!o.attr("name"),value:o.val(),selected:!!o.attr("checked")};break;default:s=void 0}break;case"select":s={type:"select",name:i||p(a),disabled:!!o.attr("disabled"),selected:o.val(),options:{}},o.children().each(function(){s.options[this.value]=t(this).text()});break;case"textarea":s={type:"textarea",name:i||p(a),disabled:!!o.attr("disabled"),value:o.val()};break;case"label":break;default:s={type:"html",html:o.clone(!0)}}s&&(n["key"+ ++r]=s)}),r}(i,n.children()),i},t.contextMenu.defaults=l,t.contextMenu.types=u,t.contextMenu.handle=f,t.contextMenu.op=d,t.contextMenu.menus=a},"function"==typeof define&&define.amd?define(["jquery"],n):n(a("iUSsr")),i=function(t){/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */(function(){t.ui=t.ui||{};var e,n,i=Math.max,r=Math.abs,s=Math.round,o=/left|center|right/,a=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,c=/%$/,h=t.fn.position;function f(t,e,n){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?n/100:1)]}function d(e,n){return parseInt(t.css(e,n),10)||0}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var n,i,r=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return t("body").append(r),n=s.offsetWidth,r.css("overflow","scroll"),n===(i=s.offsetWidth)&&(i=r[0].clientWidth),r.remove(),e=n-i},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i||r?n.width():n.outerWidth(),height:i||r?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return h.apply(this,arguments);e=t.extend({},e);var c,p,g,v,m,_,y,x=t(e.of),b=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(b),C=(e.collision||"flip").split(" "),S={};return y=9===(c=x[0]).nodeType?{width:x.width(),height:x.height(),offset:{top:0,left:0}}:t.isWindow(c)?{width:x.width(),height:x.height(),offset:{top:x.scrollTop(),left:x.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:x.outerWidth(),height:x.outerHeight(),offset:x.offset()},x[0].preventDefault&&(e.at="left top"),g=y.width,v=y.height,m=y.offset,_=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=o.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]),i[0]=o.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",t=u.exec(i[0]),n=u.exec(i[1]),S[this]=[t?t[0]:0,n?n[0]:0],e[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===e.at[0]?_.left+=g:"center"===e.at[0]&&(_.left+=g/2),"bottom"===e.at[1]?_.top+=v:"center"===e.at[1]&&(_.top+=v/2),p=f(S.at,g,v),_.left+=p[0],_.top+=p[1],this.each(function(){var o,a,u=t(this),l=u.outerWidth(),c=u.outerHeight(),h=d(this,"marginLeft"),y=d(this,"marginTop"),k=l+h+d(this,"marginRight")+w.width,T=c+y+d(this,"marginBottom")+w.height,M=t.extend({},_),P=f(S.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?M.left-=l:"center"===e.my[0]&&(M.left-=l/2),"bottom"===e.my[1]?M.top-=c:"center"===e.my[1]&&(M.top-=c/2),M.left+=P[0],M.top+=P[1],n||(M.left=s(M.left),M.top=s(M.top)),o={marginLeft:h,marginTop:y},t.each(["left","top"],function(n,i){t.ui.position[C[n]]&&t.ui.position[C[n]][i](M,{targetWidth:g,targetHeight:v,elemWidth:l,elemHeight:c,collisionPosition:o,collisionWidth:k,collisionHeight:T,offset:[p[0]+P[0],p[1]+P[1]],my:e.my,at:e.at,within:b,elem:u})}),e.using&&(a=function(t){var n=m.left-M.left,s=n+g-l,o=m.top-M.top,a=o+v-c,h={target:{element:x,left:m.left,top:m.top,width:g,height:v},element:{element:u,left:M.left,top:M.top,width:l,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:a<0?"top":o>0?"bottom":"middle"};g<l&&r(n+s)<g&&(h.horizontal="center"),v<c&&r(o+a)<v&&(h.vertical="middle"),i(r(n),r(s))>i(r(o),r(a))?h.important="horizontal":h.important="vertical",e.using.call(this,t,h)}),u.offset(t.extend(M,{using:a}))})},t.ui.position={fit:{left:function(t,e){var n,r=e.within,s=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,a=t.left-e.collisionPosition.marginLeft,u=s-a,l=a+e.collisionWidth-o-s;e.collisionWidth>o?u>0&&l<=0?(n=t.left+u+e.collisionWidth-o-s,t.left+=u-n):l>0&&u<=0?t.left=s:u>l?t.left=s+o-e.collisionWidth:t.left=s:u>0?t.left+=u:l>0?t.left-=l:t.left=i(t.left-a,t.left)},top:function(t,e){var n,r=e.within,s=r.isWindow?r.scrollTop:r.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,u=s-a,l=a+e.collisionHeight-o-s;e.collisionHeight>o?u>0&&l<=0?(n=t.top+u+e.collisionHeight-o-s,t.top+=u-n):l>0&&u<=0?t.top=s:u>l?t.top=s+o-e.collisionHeight:t.top=s:u>0?t.top+=u:l>0?t.top-=l:t.top=i(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,u=s.isWindow?s.scrollLeft:s.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-u,h=l+e.collisionWidth-a-u,f="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?((n=t.left+f+d+p+e.collisionWidth-a-o)<0||n<r(c))&&(t.left+=f+d+p):h>0&&((i=t.left-e.collisionPosition.marginLeft+f+d+p-u)>0||r(i)<h)&&(t.left+=f+d+p)},top:function(t,e){var n,i,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,u=s.isWindow?s.scrollTop:s.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-u,h=l+e.collisionHeight-a-u,f="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];c<0?((i=t.top+f+d+p+e.collisionHeight-a-o)<0||i<r(c))&&(t.top+=f+d+p):h>0&&((n=t.top-e.collisionPosition.marginTop+f+d+p-u)>0||r(n)<h)&&(t.top+=f+d+p)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,r,s,o,a=document.getElementsByTagName("body")[0],u=document.createElement("div");for(o in e=document.createElement(a?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"}),r)e.style[o]=r[o];e.appendChild(u),(i=a||document.documentElement).insertBefore(e,i.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",n=(s=t(u).offset().left)>10&&s<11,e.innerHTML="",i.removeChild(e)}()})(),t.ui.position},"function"==typeof define&&define.amd?define(["jquery"],i):i(jQuery);var h={};Object.defineProperty(h,"__esModule",{value:!0,configurable:!0}),e(h,"VERSION",()=>f),e(h,"restArguments",()=>O),e(h,"isObject",()=>N),e(h,"isNull",()=>E),e(h,"isUndefined",()=>j),e(h,"isBoolean",()=>L),e(h,"isElement",()=>z),e(h,"isString",()=>$),e(h,"isNumber",()=>R),e(h,"isDate",()=>B),e(h,"isRegExp",()=>q),e(h,"isError",()=>F),e(h,"isSymbol",()=>H),e(h,"isArrayBuffer",()=>W),e(h,"isDataView",()=>K),e(h,"isArray",()=>Q),e(h,"isFunction",()=>Z),e(h,"isArguments",()=>tn),e(h,"isFinite",()=>ti),e(h,"isNaN",()=>tr),e(h,"isTypedArray",()=>th),e(h,"isEmpty",()=>tg),e(h,"isMatch",()=>tv),e(h,"isEqual",()=>tx),e(h,"isMap",()=>tI),e(h,"isWeakMap",()=>tA),e(h,"isSet",()=>tO),e(h,"isWeakSet",()=>tN),e(h,"keys",()=>tp),e(h,"allKeys",()=>tb),e(h,"values",()=>tE),e(h,"pairs",()=>tj),e(h,"invert",()=>tL),e(h,"functions",()=>tz),e(h,"methods",()=>tz),e(h,"extend",()=>t$),e(h,"extendOwn",()=>tR),e(h,"assign",()=>tR),e(h,"defaults",()=>tB),e(h,"create",()=>tF),e(h,"clone",()=>tH),e(h,"tap",()=>tW),e(h,"get",()=>tX),e(h,"has",()=>tG),e(h,"mapObject",()=>t5),e(h,"identity",()=>tY),e(h,"constant",()=>ts),e(h,"noop",()=>t3),e(h,"toPath",()=>tV),e(h,"property",()=>tK),e(h,"propertyOf",()=>t9),e(h,"matcher",()=>tJ),e(h,"matches",()=>tJ),e(h,"times",()=>t4),e(h,"random",()=>t6),e(h,"now",()=>t8),e(h,"escape",()=>ee),e(h,"unescape",()=>en),e(h,"templateSettings",()=>ei),e(h,"template",()=>el),e(h,"result",()=>ec),e(h,"uniqueId",()=>ef),e(h,"chain",()=>ed),e(h,"iteratee",()=>t1),e(h,"partial",()=>ev),e(h,"bind",()=>em),e(h,"bindAll",()=>ex),e(h,"memoize",()=>eb),e(h,"delay",()=>ew),e(h,"defer",()=>eC),e(h,"throttle",()=>eS),e(h,"debounce",()=>ek),e(h,"wrap",()=>eT),e(h,"negate",()=>eM),e(h,"compose",()=>eP),e(h,"after",()=>eI),e(h,"before",()=>eA),e(h,"once",()=>eO),e(h,"findKey",()=>eN),e(h,"findIndex",()=>ej),e(h,"findLastIndex",()=>eL),e(h,"sortedIndex",()=>ez),e(h,"indexOf",()=>e$),e(h,"lastIndexOf",()=>eR),e(h,"find",()=>eB),e(h,"detect",()=>eB),e(h,"findWhere",()=>eq),e(h,"each",()=>eF),e(h,"forEach",()=>eF),e(h,"map",()=>eH),e(h,"collect",()=>eH),e(h,"reduce",()=>eV),e(h,"foldl",()=>eV),e(h,"inject",()=>eV),e(h,"reduceRight",()=>eU),e(h,"foldr",()=>eU),e(h,"filter",()=>eZ),e(h,"select",()=>eZ),e(h,"reject",()=>eX),e(h,"every",()=>eG),e(h,"all",()=>eG),e(h,"some",()=>eY),e(h,"any",()=>eY),e(h,"contains",()=>eJ),e(h,"includes",()=>eJ),e(h,"include",()=>eJ),e(h,"invoke",()=>eK),e(h,"pluck",()=>eQ),e(h,"where",()=>e0),e(h,"max",()=>e1),e(h,"min",()=>e2),e(h,"shuffle",()=>e4),e(h,"sample",()=>e9),e(h,"sortBy",()=>e6),e(h,"groupBy",()=>e7),e(h,"indexBy",()=>nt),e(h,"countBy",()=>ne),e(h,"partition",()=>nn),e(h,"toArray",()=>e3),e(h,"size",()=>ni),e(h,"pick",()=>ns),e(h,"omit",()=>no),e(h,"first",()=>nu),e(h,"head",()=>nu),e(h,"take",()=>nu),e(h,"initial",()=>na),e(h,"last",()=>nc),e(h,"rest",()=>nl),e(h,"tail",()=>nl),e(h,"drop",()=>nl),e(h,"compact",()=>nh),e(h,"flatten",()=>nf),e(h,"without",()=>np),e(h,"uniq",()=>ng),e(h,"unique",()=>ng),e(h,"union",()=>nv),e(h,"intersection",()=>nm),e(h,"difference",()=>nd),e(h,"unzip",()=>n_),e(h,"transpose",()=>n_),e(h,"zip",()=>ny),e(h,"object",()=>nx),e(h,"range",()=>nb),e(h,"chunk",()=>nw),e(h,"mixin",()=>nS),e(h,"default",()=>nk);var f="1.13.7",d="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r||Function("return this")()||{},p=Array.prototype,g=Object.prototype,v="undefined"!=typeof Symbol?Symbol.prototype:null,m=p.push,_=p.slice,y=g.toString,x=g.hasOwnProperty,b="undefined"!=typeof ArrayBuffer,w="undefined"!=typeof DataView,C=Array.isArray,S=Object.keys,k=Object.create,T=b&&ArrayBuffer.isView,M=isNaN,P=isFinite,I=!({toString:null}).propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function O(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=i,t.apply(this,s)}}function N(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function E(t){return null===t}function j(t){return void 0===t}function L(t){return!0===t||!1===t||"[object Boolean]"===y.call(t)}function z(t){return!!(t&&1===t.nodeType)}function D(t){var e="[object "+t+"]";return function(t){return y.call(t)===e}}var $=D("String"),R=D("Number"),B=D("Date"),q=D("RegExp"),F=D("Error"),H=D("Symbol"),W=D("ArrayBuffer"),V=D("Function"),U=d.document&&d.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof U&&(V=function(t){return"function"==typeof t});var Z=V,X=D("Object"),G=w&&(!/\[native code\]/.test(String(DataView))||X(new DataView(new ArrayBuffer(8)))),Y="undefined"!=typeof Map&&X(new Map),J=D("DataView"),K=G?function(t){return null!=t&&Z(t.getInt8)&&W(t.buffer)}:J,Q=C||D("Array");function tt(t,e){return null!=t&&x.call(t,e)}var te=D("Arguments");!function(){te(arguments)||(te=function(t){return tt(t,"callee")})}();var tn=te;function ti(t){return!H(t)&&P(t)&&!isNaN(parseFloat(t))}function tr(t){return R(t)&&M(t)}function ts(t){return function(){return t}}function to(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=0x1fffffffffffff}}function ta(t){return function(e){return null==e?void 0:e[t]}}var tu=ta("byteLength"),tl=to(tu),tc=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,th=b?function(t){return T?T(t)&&!K(t):tl(t)&&tc.test(y.call(t))}:ts(!1),tf=ta("length");function td(t,e){e=function(t){for(var e={},n=t.length,i=0;i<n;++i)e[t[i]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=A.length,i=t.constructor,r=Z(i)&&i.prototype||g,s="constructor";for(tt(t,s)&&!e.contains(s)&&e.push(s);n--;)(s=A[n])in t&&t[s]!==r[s]&&!e.contains(s)&&e.push(s)}function tp(t){if(!N(t))return[];if(S)return S(t);var e=[];for(var n in t)tt(t,n)&&e.push(n);return I&&td(t,e),e}function tg(t){if(null==t)return!0;var e=tf(t);return"number"==typeof e&&(Q(t)||$(t)||tn(t))?0===e:0===tf(tp(t))}function tv(t,e){var n=tp(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0}function tm(t){return t instanceof tm?t:this instanceof tm?void(this._wrapped=t):new tm(t)}function t_(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,tu(t))}tm.VERSION=f,tm.prototype.value=function(){return this._wrapped},tm.prototype.valueOf=tm.prototype.toJSON=tm.prototype.value,tm.prototype.toString=function(){return String(this._wrapped)};var ty="[object DataView]";function tx(t,e){return function t(e,n,i,r){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var s=typeof e;return("function"===s||"object"===s||"object"==typeof n)&&function e(n,i,r,s){n instanceof tm&&(n=n._wrapped),i instanceof tm&&(i=i._wrapped);var o=y.call(n);if(o!==y.call(i))return!1;if(G&&"[object Object]"==o&&K(n)){if(!K(i))return!1;o=ty}switch(o){case"[object RegExp]":case"[object String]":return""+n==""+i;case"[object Number]":if(+n!=+n)return+i!=+i;return 0==+n?1/+n==1/i:+n==+i;case"[object Date]":case"[object Boolean]":return+n==+i;case"[object Symbol]":return v.valueOf.call(n)===v.valueOf.call(i);case"[object ArrayBuffer]":case ty:return e(t_(n),t_(i),r,s)}var a="[object Array]"===o;if(!a&&th(n)){if(tu(n)!==tu(i))return!1;if(n.buffer===i.buffer&&n.byteOffset===i.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof n||"object"!=typeof i)return!1;var u=n.constructor,l=i.constructor;if(u!==l&&!(Z(u)&&u instanceof u&&Z(l)&&l instanceof l)&&"constructor"in n&&"constructor"in i)return!1}s=s||[];for(var c=(r=r||[]).length;c--;)if(r[c]===n)return s[c]===i;if(r.push(n),s.push(i),a){if((c=n.length)!==i.length)return!1;for(;c--;)if(!t(n[c],i[c],r,s))return!1}else{var h,f=tp(n);if(c=f.length,tp(i).length!==c)return!1;for(;c--;)if(!(tt(i,h=f[c])&&t(n[h],i[h],r,s)))return!1}return r.pop(),s.pop(),!0}(e,n,i,r)}(t,e)}function tb(t){if(!N(t))return[];var e=[];for(var n in t)e.push(n);return I&&td(t,e),e}function tw(t){var e=tf(t);return function(n){if(null==n||tf(tb(n)))return!1;for(var i=0;i<e;i++)if(!Z(n[t[i]]))return!1;return t!==tM||!Z(n[tC])}}var tC="forEach",tS=["clear","delete"],tk=["get","has","set"],tT=tS.concat(tC,tk),tM=tS.concat(tk),tP=["add"].concat(tS,tC,"has"),tI=Y?tw(tT):D("Map"),tA=Y?tw(tM):D("WeakMap"),tO=Y?tw(tP):D("Set"),tN=D("WeakSet");function tE(t){for(var e=tp(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}function tj(t){for(var e=tp(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i}function tL(t){for(var e={},n=tp(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e}function tz(t){var e=[];for(var n in t)Z(t[n])&&e.push(n);return e.sort()}function tD(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var s=arguments[r],o=t(s),a=o.length,u=0;u<a;u++){var l=o[u];e&&void 0!==n[l]||(n[l]=s[l])}return n}}var t$=tD(tb),tR=tD(tp),tB=tD(tb,!0);function tq(t){if(!N(t))return{};if(k)return k(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function tF(t,e){var n=tq(t);return e&&tR(n,e),n}function tH(t){return N(t)?Q(t)?t.slice():t$({},t):t}function tW(t,e){return e(t),t}function tV(t){return Q(t)?t:[t]}function tU(t){return tm.toPath(t)}function tZ(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function tX(t,e,n){var i=tZ(t,tU(e));return j(i)?n:i}function tG(t,e){for(var n=(e=tU(e)).length,i=0;i<n;i++){var r=e[i];if(!tt(t,r))return!1;t=t[r]}return!!n}function tY(t){return t}function tJ(t){return t=tR({},t),function(e){return tv(e,t)}}function tK(t){return t=tU(t),function(e){return tZ(e,t)}}function tQ(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)}}return function(){return t.apply(e,arguments)}}function t0(t,e,n){return null==t?tY:Z(t)?tQ(t,e,n):N(t)&&!Q(t)?tJ(t):tK(t)}function t1(t,e){return t0(t,e,1/0)}function t2(t,e,n){return tm.iteratee!==t1?tm.iteratee(t,e):t0(t,e,n)}function t5(t,e,n){e=t2(e,n);for(var i=tp(t),r=i.length,s={},o=0;o<r;o++){var a=i[o];s[a]=e(t[a],a,t)}return s}function t3(){}function t9(t){return null==t?t3:function(e){return tX(t,e)}}function t4(t,e,n){var i=Array(Math.max(0,t));e=tQ(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i}function t6(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}tm.toPath=tV,tm.iteratee=t1;var t8=Date.now||function(){return new Date().getTime()};function t7(t){var e=function(e){return t[e]},n="(?:"+tp(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}}var et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ee=t7(et),en=t7(tL(et)),ei=tm.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},er=/(.)^/,es={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},eo=/\\|'|\r|\n|\u2028|\u2029/g;function ea(t){return"\\"+es[t]}var eu=/^\s*(\w|\$)+\s*$/;function el(t,e,n){!e&&n&&(e=n);var i,r=RegExp([((e=tB({},e,tm.templateSettings)).escape||er).source,(e.interpolate||er).source,(e.evaluate||er).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(e,n,i,r,a){return o+=t.slice(s,a).replace(eo,ea),s=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),e}),o+="';\n";var a=e.variable;if(a){if(!eu.test(a))throw Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=Function(a,"_",o)}catch(t){throw t.source=o,t}var u=function(t){return i.call(this,t,tm)};return u.source="function("+a+"){\n"+o+"}",u}function ec(t,e,n){var i=(e=tU(e)).length;if(!i)return Z(n)?n.call(t):n;for(var r=0;r<i;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=n,r=i),t=Z(s)?s.call(t):s}return t}var eh=0;function ef(t){var e=++eh+"";return t?t+e:e}function ed(t){var e=tm(t);return e._chain=!0,e}function ep(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var s=tq(t.prototype),o=t.apply(s,r);return N(o)?o:s}var eg=O(function(t,e){var n=eg.placeholder,i=function(){for(var r=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===n?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return ep(t,i,this,this,o)};return i});eg.placeholder=tm;var ev=eg,em=O(function(t,e,n){if(!Z(t))throw TypeError("Bind must be called on a function");var i=O(function(r){return ep(t,i,e,this,n.concat(r))});return i}),e_=to(tf);function ey(t,e,n,i){if(i=i||[],e||0===e){if(e<=0)return i.concat(t)}else e=1/0;for(var r=i.length,s=0,o=tf(t);s<o;s++){var a=t[s];if(e_(a)&&(Q(a)||tn(a))){if(e>1)ey(a,e-1,n,i),r=i.length;else for(var u=0,l=a.length;u<l;)i[r++]=a[u++]}else n||(i[r++]=a)}return i}var ex=O(function(t,e){var n=(e=ey(e,!1,!1)).length;if(n<1)throw Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=em(t[i],t)}return t});function eb(t,e){var n=function(i){var r=n.cache,s=""+(e?e.apply(this,arguments):i);return tt(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return n.cache={},n}var ew=O(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),eC=ev(ew,tm,1);function eS(t,e,n){var i,r,s,o,a=0;n||(n={});var u=function(){a=!1===n.leading?0:t8(),i=null,o=t.apply(r,s),i||(r=s=null)},l=function(){var l=t8();a||!1!==n.leading||(a=l);var c=e-(l-a);return r=this,s=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),a=l,o=t.apply(r,s),i||(r=s=null)):i||!1===n.trailing||(i=setTimeout(u,c)),o};return l.cancel=function(){clearTimeout(i),a=0,i=r=s=null},l}function ek(t,e,n){var i,r,s,o,a,u=function(){var l=t8()-r;e>l?i=setTimeout(u,e-l):(i=null,n||(o=t.apply(a,s)),i||(s=a=null))},l=O(function(l){return a=this,s=l,r=t8(),!i&&(i=setTimeout(u,e),n&&(o=t.apply(a,s))),o});return l.cancel=function(){clearTimeout(i),i=s=a=null},l}function eT(t,e){return ev(e,t)}function eM(t){return function(){return!t.apply(this,arguments)}}function eP(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}}function eI(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function eA(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var eO=ev(eA,2);function eN(t,e,n){e=t2(e,n);for(var i,r=tp(t),s=0,o=r.length;s<o;s++)if(e(t[i=r[s]],i,t))return i}function eE(t){return function(e,n,i){n=t2(n,i);for(var r=tf(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(n(e[s],s,e))return s;return -1}}var ej=eE(1),eL=eE(-1);function ez(t,e,n,i){for(var r=(n=t2(n,i,1))(e),s=0,o=tf(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<r?s=a+1:o=a}return s}function eD(t,e,n){return function(i,r,s){var o=0,a=tf(i);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(i,r),i[s]===r?s:-1;if(r!=r)return(s=e(_.call(i,o,a),tr))>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(i[s]===r)return s;return -1}}var e$=eD(1,ej,ez),eR=eD(-1,eL);function eB(t,e,n){var i=(e_(t)?ej:eN)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}function eq(t,e){return eB(t,tJ(e))}function eF(t,e,n){if(e=tQ(e,n),e_(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var i,r,s=tp(t);for(i=0,r=s.length;i<r;i++)e(t[s[i]],s[i],t)}return t}function eH(t,e,n){e=t2(e,n);for(var i=!e_(t)&&tp(t),r=(i||t).length,s=Array(r),o=0;o<r;o++){var a=i?i[o]:o;s[o]=e(t[a],a,t)}return s}function eW(t){var e=function(e,n,i,r){var s=!e_(e)&&tp(e),o=(s||e).length,a=t>0?0:o-1;for(r||(i=e[s?s[a]:a],a+=t);a>=0&&a<o;a+=t){var u=s?s[a]:a;i=n(i,e[u],u,e)}return i};return function(t,n,i,r){var s=arguments.length>=3;return e(t,tQ(n,r,4),i,s)}}var eV=eW(1),eU=eW(-1);function eZ(t,e,n){var i=[];return e=t2(e,n),eF(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i}function eX(t,e,n){return eZ(t,eM(t2(e)),n)}function eG(t,e,n){e=t2(e,n);for(var i=!e_(t)&&tp(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(!e(t[o],o,t))return!1}return!0}function eY(t,e,n){e=t2(e,n);for(var i=!e_(t)&&tp(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(e(t[o],o,t))return!0}return!1}function eJ(t,e,n,i){return e_(t)||(t=tE(t)),("number"!=typeof n||i)&&(n=0),e$(t,e,n)>=0}var eK=O(function(t,e,n){var i,r;return Z(e)?r=e:(i=(e=tU(e)).slice(0,-1),e=e[e.length-1]),eH(t,function(t){var s=r;if(!s){if(i&&i.length&&(t=tZ(t,i)),null==t)return;s=t[e]}return null==s?s:s.apply(t,n)})});function eQ(t,e){return eH(t,tK(e))}function e0(t,e){return eZ(t,tJ(e))}function e1(t,e,n){var i,r,s=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=e_(t)?t:tE(t);for(var a=0,u=t.length;a<u;a++)null!=(i=t[a])&&i>s&&(s=i)}else e=t2(e,n),eF(t,function(t,n,i){((r=e(t,n,i))>o||r===-1/0&&s===-1/0)&&(s=t,o=r)});return s}function e2(t,e,n){var i,r,s=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=e_(t)?t:tE(t);for(var a=0,u=t.length;a<u;a++)null!=(i=t[a])&&i<s&&(s=i)}else e=t2(e,n),eF(t,function(t,n,i){((r=e(t,n,i))<o||r===1/0&&s===1/0)&&(s=t,o=r)});return s}var e5=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function e3(t){return t?Q(t)?_.call(t):$(t)?t.match(e5):e_(t)?eH(t,tY):tE(t):[]}function e9(t,e,n){if(null==e||n)return e_(t)||(t=tE(t)),t[t6(t.length-1)];var i=e3(t),r=tf(i);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var a=t6(o,s),u=i[o];i[o]=i[a],i[a]=u}return i.slice(0,e)}function e4(t){return e9(t,1/0)}function e6(t,e,n){var i=0;return e=t2(e,n),eQ(eH(t,function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return -1}return t.index-e.index}),"value")}function e8(t,e){return function(n,i,r){var s=e?[[],[]]:{};return i=t2(i,r),eF(n,function(e,r){var o=i(e,r,n);t(s,e,o)}),s}}var e7=e8(function(t,e,n){tt(t,n)?t[n].push(e):t[n]=[e]}),nt=e8(function(t,e,n){t[n]=e}),ne=e8(function(t,e,n){tt(t,n)?t[n]++:t[n]=1}),nn=e8(function(t,e,n){t[n?0:1].push(e)},!0);function ni(t){return null==t?0:e_(t)?t.length:tp(t).length}function nr(t,e,n){return e in n}var ns=O(function(t,e){var n={},i=e[0];if(null==t)return n;Z(i)?(e.length>1&&(i=tQ(i,e[1])),e=tb(t)):(i=nr,e=ey(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var o=e[r],a=t[o];i(a,o,t)&&(n[o]=a)}return n}),no=O(function(t,e){var n,i=e[0];return Z(i)?(i=eM(i),e.length>1&&(n=e[1])):(e=eH(ey(e,!1,!1),String),i=function(t,n){return!eJ(e,n)}),ns(t,i,n)});function na(t,e,n){return _.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function nu(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:na(t,t.length-e)}function nl(t,e,n){return _.call(t,null==e||n?1:e)}function nc(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:nl(t,Math.max(0,t.length-e))}function nh(t){return eZ(t,Boolean)}function nf(t,e){return ey(t,e,!1)}var nd=O(function(t,e){return e=ey(e,!0,!0),eZ(t,function(t){return!eJ(e,t)})}),np=O(function(t,e){return nd(t,e)});function ng(t,e,n,i){L(e)||(i=n,n=e,e=!1),null!=n&&(n=t2(n,i));for(var r=[],s=[],o=0,a=tf(t);o<a;o++){var u=t[o],l=n?n(u,o,t):u;e&&!n?(o&&s===l||r.push(u),s=l):n?eJ(s,l)||(s.push(l),r.push(u)):eJ(r,u)||r.push(u)}return r}var nv=O(function(t){return ng(ey(t,!0,!0))});function nm(t){for(var e=[],n=arguments.length,i=0,r=tf(t);i<r;i++){var s,o=t[i];if(!eJ(e,o)){for(s=1;s<n&&eJ(arguments[s],o);s++);s===n&&e.push(o)}}return e}function n_(t){for(var e=t&&e1(t,tf).length||0,n=Array(e),i=0;i<e;i++)n[i]=eQ(t,i);return n}var ny=O(n_);function nx(t,e){for(var n={},i=0,r=tf(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n}function nb(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r}function nw(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(_.call(t,i,i+=e));return n}function nC(t,e){return t._chain?tm(e).chain():e}function nS(t){return eF(tz(t),function(e){var n=tm[e]=t[e];tm.prototype[e]=function(){var t=[this._wrapped];return m.apply(t,arguments),nC(this,n.apply(tm,t))}}),tm}eF(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=p[t];tm.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),("shift"===t||"splice"===t)&&0===n.length&&delete n[0]),nC(this,n)}}),eF(["concat","join","slice"],function(t){var e=p[t];tm.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),nC(this,t)}});var nk=tm,nT=nS(h);nT._=nT;var nM=a("n4eml");let nP=/(\/)+/g,nI=function(){function t(){}return t.executed=[],t.unexecuted=[],t.execute=function(e){e.execute(),t.executed.push(e)},t.undo=function(){let e=t.executed.pop();void 0!==e&&(void 0!==e.unexecute&&e.unexecute(),t.unexecuted.push(e))},t.redo=function(){let e=t.unexecuted.pop();void 0===e&&(e=t.executed.pop(),t.executed.push(e),t.executed.push(e)),void 0!==e&&(e.execute(),t.executed.push(e))},t}(),nA=function(){let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})};window.bundleEntries=window.bundleEntries||{},window.bundleEntries.load=function(e){var n,i;let r=e.chart,s=e.dataset,o={color:"red",width:4,opacity:.5};c.fn.createCanvas=function(e){let n,i,r,s,a=c.extend({},o,e||{}),u=this;this.setOptions=function(t){a=c.extend(a,t)},c(document).ready(function(){c(u).each(function(o,l){u.paths=[];let h=c("<canvas>").attr({width:e.img_width+"px",height:e.img_height+"px"}).addClass("image-canvas").css({position:"absolute",top:"0px",left:"0px"});c(l).after(h),c(l).data("paths",[]),/*@__PURE__*/t(nM).setup(h[0]),h[0].width=e.img_width,h[0].height=e.img_height,c(h).mouseenter(function(){/*@__PURE__*/t(nM).projects[o].activate()});let f=new/*@__PURE__*/(t(nM)).Tool;f.onMouseMove=function(e){c(".context-menu-list").is(":visible")||(/*@__PURE__*/t(nM).project.activeLayer.selected=!1,u.setPenColor(a.color),e.item?(e.item.selected=!0,r=e.item,u.setCursorHandOpen()):r=null)},f.onMouseDown=function(e){0===e.event.button&&(n&&(n.selected=!1),(n=new/*@__PURE__*/(t(nM)).Path).data.id=nA(),n.strokeColor=a.color,n.strokeWidth=a.width,n.opacity=a.opacity)},f.onMouseDrag=function(e){0===e.event.button&&(r?(s||(s=r.position),u.setCursorHandClose(),r.position=new/*@__PURE__*/(t(nM)).Point(r.position.x+e.delta.x,r.position.y+e.delta.y)):n&&n.add(e.point))},f.onMouseUp=function(e){switch(e.event.button){case 0:if(r){if(s){let e=r.id,n={x:s.x,y:s.y};nI.execute({execute:function(){},unexecute:function(){c(/*@__PURE__*/t(nM).project.activeLayer.children).each(function(i,r){if(r.id==e)return r.segments?(new/*@__PURE__*/(t(nM)).Point((r.segments[r.segments.length-1].point.x-r.segments[0].point.x)/2,(r.segments[r.segments.length-1].point.y-r.segments[0].point.y)/2),r.position=new/*@__PURE__*/(t(nM)).Point(n.x,n.y)):r.position=n,!1})}}),s=null}}else{n.simplify(),n.remove();let e=n.exportJSON({asString:!0}),i=nA();nI.execute({execute:function(){(n=new/*@__PURE__*/(t(nM)).Path).importJSON(e),n.data.uid=i},unexecute:function(){c(/*@__PURE__*/t(nM).project.activeLayer.children).each(function(t,e){e.data&&e.data.uid&&e.data.uid==i&&e.remove()})}})}break;case 2:i=e.point}},f.onKeyUp=function(t){r&&(r.content?"backspace"==t.key&&(r.content=r.content.slice(0,-1)):(r.content=r.content.replace("<some text>",""),"space"==t.key?r.content+=" ":1==t.key.length&&(r.content+=t.key)))},/*@__PURE__*/t(nM).view.draw()})}),this.downloadCanvas=function(t,e){let n=document.createElement("a");if(n.download=e,n.href=t.toDataURL(),document.createEvent){let t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}else n.fireEvent&&n.fireEvent("onclick")},this.download=function(){let e=/*@__PURE__*/t(nM).project.activeLayer.view.element,n=c(e)[0],i=c("<canvas>").attr({width:n.width,height:n.height}),r=i[0].getContext("2d");r.clearRect(0,0,n.width,n.height),r.drawImage(n,0,0),r.drawImage(e,0,0),u.downloadCanvas(i[0],"only-annotations.png");let s=c(e).parent().find("img")[0],o=c("<canvas>").attr({width:c(s).width(),height:c(s).height()}),a=o[0].getContext("2d");a.clearRect(0,0,c(s).width(),c(s).height()),a.drawImage(s,0,0),a.drawImage(e,0,0),u.downloadCanvas(o[0],"original-with-annotations.png")},this.setText=function(){let e=nA(),n=i;nI.execute({execute:function(){let i="<<double click to edit>>",r=new/*@__PURE__*/(t(nM)).PointText(n);r.content=i,r.fillColor=a.color,r.fontSize=14,r.fontFamily="sans-serif",r.data.uid=e,r.opacity=a.opacity,r.onDoubleClick=function(t){if("PointText"==this.className){let t=window.prompt("Type in your text",this.content.replace(i,""));t.length>0&&(this.content=t)}}},unexecute:function(){c(/*@__PURE__*/t(nM).project.activeLayer.children).each(function(t,n){n.data&&n.data.uid&&n.data.uid==e&&n.remove()})}})},this.setPenColor=function(t){u.setOptions({color:t}),c(".image-canvas").css("cursor","url(/static/plugins/visualizations/annotate_image/static/images/"+t+"-pen.png) 14 50, auto")},this.setCursorHandOpen=function(){c(".image-canvas").css("cursor","url(/static/plugins/visualizations/annotate_image/static/images/hand-open.png) 25 25, auto")},this.setCursorHandClose=function(){c(".image-canvas").css("cursor","url(/static/plugins/visualizations/annotate_image/static/images/hand-close.png) 25 25, auto")},c.contextMenu({selector:".image-canvas",callback:function(t,e){switch(t){case"undo":nI.undo();break;case"redo":nI.redo();break;case"download":u.download();break;case"text":u.setText();break;case"blackPen":u.setPenColor("black");break;case"redPen":u.setPenColor("red");break;case"greenPen":u.setPenColor("green");break;case"bluePen":u.setPenColor("blue");break;case"yellowPen":u.setPenColor("yellow")}},items:{undo:{name:"Undo",icon:"undo"},redo:{name:"Redo",icon:"redo"},download:{name:"Download",icon:"download"},sep1:"---------",text:{name:"Text",icon:"text"},sep2:"---------",blackPen:{name:"Black Pen",icon:"blackpen"},redPen:{name:"Red Pen",icon:"redpen"},greenPen:{name:"Green Pen",icon:"greenpen"},bluePen:{name:"Blue Pen",icon:"bluepen"},yellowPen:{name:"Yellow Pen",icon:"yellowpen"}}});let l=c(".context-menu-list");l.find(".context-menu-icon-text").css({"background-image":"url(/static/plugins/visualizations/annotate_image/static/images/text.png)","background-repeat":"no-repeat","background-position":"right 96% bottom 45%"}),l.find(".context-menu-icon-blackpen").css({"background-image":"url(/static/plugins/visualizations/annotate_image/static/images/blackpen.png)","background-repeat":"no-repeat","background-position":"right 97% bottom 48%"}),l.find(".context-menu-icon-redpen").css({"background-image":"url(/static/plugins/visualizations/annotate_image/static/images/redpen.png)","background-repeat":"no-repeat","background-position":"right 97% bottom 48%"}),l.find(".context-menu-icon-greenpen").css({"background-image":"url(/static/plugins/visualizations/annotate_image/static/images/greenpen.png)","background-repeat":"no-repeat","background-position":"right 97% bottom 48%"}),l.find(".context-menu-icon-bluepen").css({"background-image":"url(/static/plugins/visualizations/annotate_image/static/images/bluepen.png)","background-repeat":"no-repeat","background-position":"right 97% bottom 48%"}),l.find(".context-menu-icon-yellowpen").css({"background-image":"url(/static/plugins/visualizations/annotate_image/static/images/yellowpen.png)","background-repeat":"no-repeat","background-position":"right 97% bottom 48%"})};let a=(n=e.root,i=s.download_url,`${n}/${i}`.replace(nP,"/"));fetch(a).then(t=>{if(!t.ok)throw Error("Failed to access dataset.");return t.text()}).then(t=>{let n=c("#"+e.target);n.html("<img id='image-annotate' src='"+a+"' />"),n.css("overflow","auto"),n.css("position","relative");let i=n.find("img");i.on("load",function(){let t=c(this).width(),e=c(this).height();i.width(t),i.height(e),i.createCanvas({color:"red",width:2,opacity:.5,img_width:t,img_height:e})}),r.state("ok","Chart drawn."),e.process.resolve()}).catch(t=>{r.state("failed",t.message),e.process.resolve()})}})();
//# sourceMappingURL=script.js.map
